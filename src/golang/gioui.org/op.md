[![Go](/static/shared/logo/go-white.svg)](https://go.dev/)

[Skip to Main Content](#main-content)

![](/static/shared/icon/search_gm_grey_24dp.svg)

![](/static/shared/icon/search_gm_grey_24dp.svg)

- [Why Go ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)](#)
  
  - [Case Studies](https://go.dev/solutions#case-studies)
    
    Common problems companies solve with Go
  - [Use Cases](https://go.dev/solutions#use-cases)
    
    Stories about how and why companies use Go
  - [Security](https://go.dev/security/)
    
    How Go can help keep you secure by default
- [Learn](https://go.dev/learn/)
- [Docs ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)](#)
  
  - [Effective Go](https://go.dev/doc/effective_go)
    
    Tips for writing clear, performant, and idiomatic Go code
  - [Go User Manual](https://go.dev/doc/)
    
    A complete introduction to building software with Go
  - [Standard library](https://pkg.go.dev/std)
    
    Reference documentation for Go's standard library
  - [Release Notes](https://go.dev/doc/devel/release)
    
    Learn what's new in each Go release
- [Packages](/)
- [Community ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)](#)
  
  - [Recorded Talks](https://go.dev/talks/)
    
    Videos from prior events
  - [Meetups *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)
    
    Meet other local Go developers
  - [Conferences *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)
    
    Learn and network with Go developers from around the world
  - [Go blog](https://go.dev/blog)
    
    The Go project's official blog.
  - [Go project](https://go.dev/help)
    
    Get help and stay informed from Go
  - Get connected
    
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts "Get connected with google-groups (Opens in new window)") [![](/static/shared/logo/social/github.svg)](https://github.com/golang "Get connected with github (Opens in new window)") [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang "Get connected with twitter (Opens in new window)") [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/ "Get connected with reddit (Opens in new window)") [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/ "Get connected with slack (Opens in new window)") [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

[![Go.](/static/shared/logo/go-blue.svg)](https://go.dev/)

- [Why Go *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*](#)
  
  [*![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)* Why Go](#)
  
  - [Case Studies](https://go.dev/solutions#case-studies)
  - [Use Cases](https://go.dev/solutions#use-cases)
  - [Security](https://go.dev/security/)
- [Learn](https://go.dev/learn/)
- [Docs *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*](#)
  
  [*![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)* Docs](#)
  
  - [Effective Go](https://go.dev/doc/effective_go)
  - [Go User Manual](https://go.dev/doc/)
  - [Standard library](https://pkg.go.dev/std)
  - [Release Notes](https://go.dev/doc/devel/release)
- [Packages](/)
- [Community *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*](#)
  
  [*![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)* Community](#)
  
  - [Recorded Talks](https://go.dev/talks/)
  - [Meetups *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)
  - [Conferences *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)
  - [Go blog](https://go.dev/blog)
  - [Go project](https://go.dev/help)
  - Get connected
    
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts) [![](/static/shared/logo/social/github.svg)](https://github.com/golang) [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang) [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/) [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/) [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

<!--THE END-->

1. [Discover Packages](/)
2. [gioui.org](/gioui.org)
3. [op](/gioui.org@v0.8.0/op) ![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[![Go](/static/shared/logo/go-blue.svg)](https://go.dev/)

# op

package ![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[Version: v0.8.0](?tab=versions)

Opens a new window with list of versions in this module.

Latest

Latest

![Warning](/static/shared/icon/alert_gm_grey_24dp.svg)

This package is not in the latest version of its module.

[Go to latest](/gioui.org/op)

Published: Jan 14, 2025 License: [MIT, Unlicense](/gioui.org/op?tab=licenses)

Opens a new window with license information.

[Imports: 6](/gioui.org/op?tab=imports)

Opens a new window with list of imports.

[Imported by: 761](/gioui.org/op?tab=importedby)

Opens a new window with list of known importers.

Main Versions Licenses Imports Imported By

## Details

- ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg) Valid [go.mod](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/go.mod) file ![](/static/shared/icon/help_gm_grey_24dp.svg)
  
  The Go module system was introduced in Go 1.11 and is the official dependency management solution for Go.
- ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg) Redistributable license ![](/static/shared/icon/help_gm_grey_24dp.svg)
  
  Redistributable licenses place minimal restrictions on how software can be used, modified, and redistributed.
- ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg) Tagged version ![](/static/shared/icon/help_gm_grey_24dp.svg)
  
  Modules with tagged versions give importers more predictable builds.
- ![unchecked](/static/shared/icon/cancel_gm_grey_24dp.svg) Stable version ![](/static/shared/icon/help_gm_grey_24dp.svg)
  
  When a project reaches major version v1 it is considered stable.
- [Learn more about best practices](/about#best-practices)

## Repository

[git.sr.ht/~eliasnaur/gio](https://git.sr.ht/~eliasnaur/gio "https://git.sr.ht/~eliasnaur/gio")

## Links

- [![Open Source Insights Logo](/static/shared/icon/depsdev-logo.svg) Open Source Insights](https://deps.dev/go/gioui.org/v0.8.0 "View this module on Open Source Insights")

Jump to ...

- [Documentation](#section-documentation)
  
  - [Overview](#pkg-overview)
  - [Index](#pkg-index)
  - [Constants](#pkg-constants)
  - [Variables](#pkg-variables)
  - [Functions](#pkg-functions)
    
    - [Defer(o, c)](#Defer "Defer(o, c)")
  - [Types](#pkg-types)
    
    - [type CallOp](#CallOp "type CallOp")
      
      - [(c) Add(o)](#CallOp.Add "(c) Add(o)")
    - [type InvalidateCmd](#InvalidateCmd "type InvalidateCmd")
      
      - [ImplementsCommand()](#InvalidateCmd.ImplementsCommand "ImplementsCommand()")
    - [type MacroOp](#MacroOp "type MacroOp")
      
      - [Record(o)](#Record "Record(o)")
      - [(m) Stop()](#MacroOp.Stop "(m) Stop()")
    - [type Ops](#Ops "type Ops")
      
      - [(o) Reset()](#Ops.Reset "(o) Reset()")
    - [type TransformOp](#TransformOp "type TransformOp")
      
      - [Affine(a)](#Affine "Affine(a)")
      - [Offset(off)](#Offset "Offset(off)")
      - [(t) Add(o)](#TransformOp.Add "(t) Add(o)")
      - [(t) Push(o)](#TransformOp.Push "(t) Push(o)")
    - [type TransformStack](#TransformStack "type TransformStack")
      
      - [(t) Pop()](#TransformStack.Pop "(t) Pop()")
- [Source Files](#section-sourcefiles)
- [Directories](#section-directories)

Documentation

## ![](/static/shared/icon/code_gm_grey_24dp.svg) Documentation [¶](#section-documentation "Go to Documentation")

### Overview [¶](#pkg-overview "Go to Overview")

- [State](#hdr-State)

Package op implements operations for updating a user interface.

Gio programs use operations, or ops, for describing their user interfaces. There are operations for drawing, defining input handlers, changing window properties as well as operations for controlling the execution of other operations.

Ops represents a list of operations. The most important use for an Ops list is to describe a complete user interface update to a ui/app.Window's Update method.

Drawing a colored square:

```
import "gioui.org/unit"
import "gioui.org/app"
import "gioui.org/op/paint"

var w app.Window
var e system.FrameEvent
ops := new(op.Ops)
...
ops.Reset()
paint.ColorOp{Color: ...}.Add(ops)
paint.PaintOp{Rect: ...}.Add(ops)
e.Frame(ops)
```

#### State [¶](#hdr-State "Go to State")

An Ops list can be viewed as a very simple virtual machine: it has state such as transformation and color and execution flow can be controlled with macros.

Some state, such as the current color, is modified directly by operations with Add methods. Other state, such as transformation and clip shape, are represented by stacks.

This example sets the simple color state and pushes an offset to the transformation stack.

```
ops := new(op.Ops)
// Set the color.
paint.ColorOp{...}.Add(ops)
// Apply an offset to subsequent operations.
stack := op.Offset(...).Push(ops)
...
// Undo the offset transformation.
stack.Pop()
```

The MacroOp records a list of operations to be executed later:

```
ops := new(op.Ops)
macro := op.Record(ops)
// Record operations by adding them.
...
// End recording.
call := macro.Stop()

// replay the recorded operations:
call.Add(ops)
```

### Index [¶](#pkg-index "Go to Index")

- [func Defer(o \*Ops, c CallOp)](#Defer)
- [type CallOp](#CallOp)
- - [func (c CallOp) Add(o \*Ops)](#CallOp.Add)
- [type InvalidateCmd](#InvalidateCmd)
- - [func (InvalidateCmd) ImplementsCommand()](#InvalidateCmd.ImplementsCommand)
- [type MacroOp](#MacroOp)
- - [func Record(o \*Ops) MacroOp](#Record)
- - [func (m MacroOp) Stop() CallOp](#MacroOp.Stop)
- [type Ops](#Ops)
- - [func (o \*Ops) Reset()](#Ops.Reset)
- [type TransformOp](#TransformOp)
- - [func Affine(a f32.Affine2D) TransformOp](#Affine)
  - [func Offset(off image.Point) TransformOp](#Offset)
- - [func (t TransformOp) Add(o \*Ops)](#TransformOp.Add)
  - [func (t TransformOp) Push(o \*Ops) TransformStack](#TransformOp.Push)
- [type TransformStack](#TransformStack)
- - [func (t TransformStack) Pop()](#TransformStack.Pop)

### Constants [¶](#pkg-constants "Go to Constants")

This section is empty.

### Variables [¶](#pkg-variables "Go to Variables")

This section is empty.

### Functions [¶](#pkg-functions "Go to Functions")

#### func [Defer](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L124) [¶](#Defer "Go to Defer")

```
func Defer(o *Ops, c CallOp)
```

Defer executes c after all other operations have completed, including previously deferred operations. Defer saves the transformation stack and pushes it prior to executing c. All other operation state is reset.

Note that deferred operations are executed in first-in-first-out order, unlike the Go facility of the same name.

### Types [¶](#pkg-types "Go to Types")

#### type [CallOp](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L91) [¶](#CallOp "Go to CallOp")

```
type CallOp struct {
	// contains filtered or unexported fields
}
```

CallOp invokes the operations recorded by Record.

#### func (CallOp) [Add](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L176) [¶](#CallOp.Add "Go to CallOp.Add")

```
func (c CallOp) Add(o *Ops)
```

Add the recorded list of operations. Add panics if the Ops containing the recording has been reset.

#### type [InvalidateCmd](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L100) [¶](#InvalidateCmd "Go to InvalidateCmd") added in v0.5.0

```
type InvalidateCmd struct {
	At time.Time
}
```

InvalidateCmd requests a redraw at the given time. Use the zero value to request an immediate redraw.

#### func (InvalidateCmd) [ImplementsCommand](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L230) [¶](#InvalidateCmd.ImplementsCommand "Go to InvalidateCmd.ImplementsCommand") added in v0.5.0

```
func (InvalidateCmd) ImplementsCommand()
```

#### type [MacroOp](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L84) [¶](#MacroOp "Go to MacroOp")

```
type MacroOp struct {
	// contains filtered or unexported fields
}
```

MacroOp records a list of operations for later use.

#### func [Record](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L148) [¶](#Record "Go to Record")

```
func Record(o *Ops) MacroOp
```

Record a macro of operations.

#### func (MacroOp) [Stop](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L162) [¶](#MacroOp.Stop "Go to MacroOp.Stop")

```
func (m MacroOp) Stop() CallOp
```

Stop ends a previously started recording and returns an operation for replaying it.

#### type [Ops](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L78) [¶](#Ops "Go to Ops")

```
type Ops struct {
	// Internal is for internal use, despite being exported.
	Internal ops.Ops
}
```

Ops holds a list of operations. Operations are stored in serialized form to avoid garbage during construction of the ops list.

#### func (\*Ops) [Reset](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L143) [¶](#Ops.Reset "Go to Ops.Reset")

```
func (o *Ops) Reset()
```

Reset the Ops, preparing it for re-use. Reset invalidates any recorded macros.

#### type [TransformOp](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L106) [¶](#TransformOp "Go to TransformOp")

```
type TransformOp struct {
	// contains filtered or unexported fields
}
```

TransformOp represents a transformation that can be pushed on the transformation stack.

#### func [Affine](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L190) [¶](#Affine "Go to Affine")

```
func Affine(a f32.Affine2D) TransformOp
```

Affine creates a TransformOp representing the transformation a.

#### func [Offset](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L184) [¶](#Offset "Go to Offset")

```
func Offset(off image.Point) TransformOp
```

Offset converts an offset to a TransformOp.

#### func (TransformOp) [Add](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L204) [¶](#TransformOp.Add "Go to TransformOp.Add")

```
func (t TransformOp) Add(o *Ops)
```

Add is like Push except it doesn't push the current transformation to the stack.

#### func (TransformOp) [Push](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L196) [¶](#TransformOp.Push "Go to TransformOp.Push")

```
func (t TransformOp) Push(o *Ops) TransformStack
```

Push the current transformation to the stack and then multiply the current transformation with t.

#### type [TransformStack](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L111) [¶](#TransformStack "Go to TransformStack")

```
type TransformStack struct {
	// contains filtered or unexported fields
}
```

TransformStack represents a TransformOp pushed on the transformation stack.

#### func (TransformStack) [Pop](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go#L224) [¶](#TransformStack.Pop "Go to TransformStack.Pop")

```
func (t TransformStack) Pop()
```

## ![](/static/shared/icon/insert_drive_file_gm_grey_24dp.svg) Source Files [¶](#section-sourcefiles "Go to Source Files")

[View all Source files](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op)

- [op.go](https://git.sr.ht/~eliasnaur/gio/tree/v0.8.0/op/op.go "op.go")

## ![](/static/shared/icon/folder_gm_grey_24dp.svg) Directories [¶](#section-directories "Go to Directories")

Show internal Expand all

Path Synopsis

[clip](/gioui.org@v0.8.0/op/clip)

Package clip provides operations for defining areas that applies to operations such as paints and pointer handlers.

Package clip provides operations for defining areas that applies to operations such as paints and pointer handlers.

[paint](/gioui.org@v0.8.0/op/paint)

Package paint provides drawing operations for 2D graphics.

Package paint provides drawing operations for 2D graphics.

Click to show internal directories.

Click to hide internal directories.

[Why Go](https://go.dev/solutions) [Use Cases](https://go.dev/solutions#use-cases) [Case Studies](https://go.dev/solutions#case-studies)

[Get Started](https://learn.go.dev/) [Playground](https://play.golang.org) [Tour](https://tour.golang.org) [Stack Overflow](https://stackoverflow.com/questions/tagged/go?tab=Newest) [Help](https://go.dev/help)

[Packages](https://pkg.go.dev) [Standard Library](/std) [Sub-repositories](/golang.org/x) [About Go Packages](https://pkg.go.dev/about)

[About](https://go.dev/project) [Download](https://go.dev/dl/) [Blog](https://go.dev/blog) [Issue Tracker](https://github.com/golang/go/issues) [Release Notes](https://go.dev/doc/devel/release.html) [Brand Guidelines](https://blog.golang.org/go-brand) [Code of Conduct](https://go.dev/conduct)

[Connect](https://www.twitter.com/golang) [Twitter](https://www.twitter.com/golang) [GitHub](https://github.com/golang) [Slack](https://invite.slack.golangbridge.org/) [r/golang](https://reddit.com/r/golang) [Meetup](https://www.meetup.com/pro/go) [Golang Weekly](https://golangweekly.com/)

![Gopher in flight goggles](/static/shared/gopher/pilot-bust-1431x901.svg)

- [Copyright](https://go.dev/copyright)
- [Terms of Service](https://go.dev/tos)
- [Privacy Policy](http://www.google.com/intl/en/policies/privacy/)
- [Report an Issue](https://go.dev/s/pkgsite-feedback)
- ![System theme](/static/shared/icon/brightness_6_gm_grey_24dp.svg) ![Dark theme](/static/shared/icon/brightness_2_gm_grey_24dp.svg) ![Light theme](/static/shared/icon/light_mode_gm_grey_24dp.svg)
  
  Theme Toggle
- ![](/static/shared/icon/keyboard_grey_24dp.svg)
  
  Shortcuts Modal

[![Google logo](/static/shared/logo/google-white.svg)](https://google.com)

## Jump to

![](/static/shared/icon/close_gm_grey_24dp.svg)

Close

## Keyboard shortcuts

![](/static/shared/icon/close_gm_grey_24dp.svg)

| **?**          | : This menu     |
|----------------|-----------------|
| **/**          | : Search site   |
| **f** or **F** | : Jump to       |
| **y** or **Y** | : Canonical URL |

Close

go.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic. [Learn more.](https://policies.google.com/technologies/cookies)

Okay