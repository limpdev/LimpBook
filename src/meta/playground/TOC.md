# Basic Floating Table of Contents

```html
<div class="floating-toc">
  <div class="toc-header">Table of Contents</div>
  <div class="toc-content-container">
    <div class="toc-content">
      <ul class="toc-list" id="toc-list">
        <!-- TOC will be generated by JavaScript -->
      </ul>
    </div>
  </div>
</div>
```

## 

Here is the basic  styling for the TOC

```css
/* Floating TOC container */
.floating-toc {
  position: fixed;
  top: 45px;
  right: 25px;
  width: 200px;
  max-height: 50vh;
  overflow-y: auto;
  background-color: #00000010;
  border: transparent;
  border-radius: 16px;
  padding: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  font-size: 12px;
  scrollbar-width: none;
  scrollbar-color: transparent;
  transition: all 300ms ease;
  opacity: 0.5;
}

.floating-toc:hover {
  opacity: 0.9;
}

/* TOC header */
.toc-header {
  display: none;
  font-weight: bold;
  padding: 12px 15px;
  border-bottom: transparent;
  background-color: #f3f3f330;
  position: sticky;
  top: 0;
  z-index: 10;
}

/* TOC content container with mask for fade effect */
.toc-content-container {
  position: relative;
  max-height: calc(50vh - 40px);
}

/* Actual scrollable content */
.toc-content {
  padding: 10px 0;
  max-height: calc(50vh - 40px);
  overflow-y: auto;
}

/* TOC list styling */
.toc-list {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

.toc-list li {
  padding: 4px 15px;
  cursor:
    url("data:image/png;base64,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"),
    auto;
}

.toc-list li:hover {
  background-color: #e9e9e950;
}

/* Header levels indentation */
.toc-h1 {
  padding-left: 15px;
}
.toc-h2 {
  padding-left: 25px;
}
.toc-h3 {
  padding-left: 35px;
}
.toc-h4 {
  padding-left: 45px;
}
.toc-h5 {
  padding-left: 55px;
}
.toc-h6 {
  padding-left: 65px;
}

/* Active TOC item */
.toc-active {
  font-weight: bold;
  color: #2b6cb0;
  background-color: #ebf4ff50;
}

/* Fade effect for top and bottom */
.toc-content-container::before,
.toc-content-container::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 20px;
  pointer-events: none;
  z-index: 5;
}

.toc-content-container::before {
  top: 0;
  background: linear-gradient(to bottom, #f9f9f9, rgba(249, 249, 249, 0));
}

.toc-content-container::after {
  bottom: 0;
  background: linear-gradient(to top, #f9f9f9, rgba(249, 249, 249, 0));
}

/* Scrollbar styling for WebKit browsers */
.toc-content::-webkit-scrollbar {
  width: 0px;
  display: none;
}

.toc-content::-webkit-scrollbar-track {
  display: none;
}

.toc-content::-webkit-scrollbar-thumb {
  display: none;
}
```

## 

-> And the _corresponding_ JavaScript for dynamic creation:

```js
document.addEventListener("DOMContentLoaded", function () {
  // Generate table of contents
  generateTOC();

  // Track scrolling to highlight current section
  window.addEventListener("scroll", highlightCurrentSection);

  // Initial highlight
  setTimeout(highlightCurrentSection, 100);
});

function generateTOC() {
  const tocList = document.getElementById("toc-list");
  const headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

  headers.forEach((header) => {
    // Create TOC item
    const listItem = document.createElement("li");
    listItem.textContent = header.textContent;
    listItem.classList.add(`toc-${header.tagName.toLowerCase()}`);
    listItem.setAttribute("data-target", header.id);

    // Add click event to scroll to section
    listItem.addEventListener("click", () => {
      document.getElementById(header.id).scrollIntoView({
        behavior: "smooth",
      });
    });

    tocList.appendChild(listItem);
  });
}

function highlightCurrentSection() {
  const tocItems = document.querySelectorAll(".toc-list li");

  // Get all headers with their positions
  const headers = Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6")).map((header) => ({
    id: header.id,
    top: header.getBoundingClientRect().top,
  }));

  // Find the current section (the one closest to the top but not above viewport)
  let currentSection = null;
  let minPositiveDistance = Infinity;

  headers.forEach((header) => {
    // Using a small offset to detect headers slightly above the viewport top
    const distance = header.top - 50;

    // If the header is just above or below the viewport top, and it's the closest one
    if (distance < minPositiveDistance && distance > -100) {
      minPositiveDistance = distance;
      currentSection = header.id;
    }
  });

  // Remove active class from all items
  tocItems.forEach((item) => {
    item.classList.remove("toc-active");
  });

  // Add active class to current section
  if (currentSection) {
    const activeItem = document.querySelector(`.toc-list li[data-target="${currentSection}"]`);
    if (activeItem) {
      activeItem.classList.add("toc-active");

      // Scroll active item into view within the TOC container
      const tocContent = document.querySelector(".toc-content");
      const itemTop = activeItem.offsetTop;
      const containerHeight = tocContent.clientHeight;

      if (itemTop < tocContent.scrollTop || itemTop > tocContent.scrollTop + containerHeight) {
        tocContent.scrollTop = itemTop - containerHeight / 2;
      }
    }
  }
}
```

---

### Full HTML Example

```html
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>mdBook with Floating TOC</title>
        <style>
            body {
                font-family: "Satoshi Nerd Font", sans-serif;
                line-height: 1.3;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                position: relative;
                background: #0d1117;
            }

            /* Main content styling */
            .content {
                width: 75%;
                padding-right: 25%;
                background: #0d1117;
            }

            /* Floating TOC container */
            .floating-toc {
                position: fixed;
                top: 45px;
                right: 25px;
                width: 200px;
                max-height: 50vh;
                overflow-y: auto;
                background-color: #00000010;
                border: transparent;
                border-radius: 16px;
                padding: 0;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                font-size: 12px;
                scrollbar-width: none;
                scrollbar-color: transparent;
                transition: all 300ms ease;
                opacity: 0.5;
            }

            .floating-toc:hover {
                opacity: 0.9;
            }

            /* TOC header */
            .toc-header {
                display: none;
                font-weight: bold;
                padding: 12px 15px;
                border-bottom: transparent;
                background-color: #f3f3f330;
                position: sticky;
                top: 0;
                z-index: 10;
            }

            /* TOC content container with mask for fade effect */
            .toc-content-container {
                position: relative;
                max-height: calc(50vh - 40px);
            }

            /* Actual scrollable content */
            .toc-content {
                padding: 10px 0;
                max-height: calc(50vh - 40px);
                overflow-y: auto;
            }

            /* TOC list styling */
            .toc-list {
                list-style-type: none;
                padding: 0;
                margin: 0;
            }

            .toc-list li {
                padding: 4px 15px;
                cursor:
                    url("data:image/png;base64,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"),
                    auto;
            }

            .toc-list li:hover {
                background-color: #e9e9e950;
            }

            /* Header levels indentation */
            .toc-h1 {
                padding-left: 15px;
            }
            .toc-h2 {
                padding-left: 25px;
            }
            .toc-h3 {
                padding-left: 35px;
            }
            .toc-h4 {
                padding-left: 45px;
            }
            .toc-h5 {
                padding-left: 55px;
            }
            .toc-h6 {
                padding-left: 65px;
            }

            /* Active TOC item */
            .toc-active {
                font-weight: bold;
                color: #2b6cb0;
                background-color: #ebf4ff50;
            }

            /* Fade effect for top and bottom */
            .toc-content-container::before,
            .toc-content-container::after {
                content: "";
                position: absolute;
                left: 0;
                right: 0;
                height: 20px;
                pointer-events: none;
                z-index: 5;
            }

            .toc-content-container::before {
                top: 0;
                background: linear-gradient(to bottom, #f9f9f9, rgba(249, 249, 249, 0));
            }

            .toc-content-container::after {
                bottom: 0;
                background: linear-gradient(to top, #f9f9f9, rgba(249, 249, 249, 0));
            }

            /* Scrollbar styling for WebKit browsers */
            .toc-content::-webkit-scrollbar {
                width: 0px;
                display: none;
            }

            .toc-content::-webkit-scrollbar-track {
                display: none;
            }

            .toc-content::-webkit-scrollbar-thumb {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="content">
            <h1 id="main-title">Sample Documentation Page</h1>
            <p>This is a sample page to demonstrate the floating TOC implementation for mdBook.</p>

            <h2 id="getting-started">Getting Started</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris.</p>

            <h3 id="installation">Installation</h3>
            <p>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>

            <h3 id="configuration">Configuration</h3>
            <p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>

            <h2 id="features">Features</h2>
            <p>Etiam porta sem malesuada magna mollis euismod. Cras mattis consectetur purus sit amet fermentum.</p>

            <h3 id="feature-one">Feature One</h3>
            <p>Donec ullamcorper nulla non metus auctor fringilla.</p>

            <h4 id="sub-feature">Sub-Feature</h4>
            <p>Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.</p>

            <h3 id="feature-two">Feature Two</h3>
            <p>Nullam quis risus eget urna mollis ornare vel eu leo.</p>

            <h2 id="advanced-usage">Advanced Usage</h2>
            <p>Sed posuere consectetur est at lobortis. Cras justo odio, dapibus ac facilisis in.</p>

            <h3 id="advanced-config">Advanced Configuration</h3>
            <p>Maecenas sed diam eget risus varius blandit sit amet non magna.</p>

            <h2 id="troubleshooting">Troubleshooting</h2>
            <p>Aenean lacinia bibendum nulla sed consectetur. Maecenas faucibus mollis interdum.</p>

            <h2 id="faq">FAQ</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Donec sed odio dui.</p>

            <h2 id="contributing">Contributing</h2>
            <p>Vestibulum id ligula porta felis euismod semper. Donec ullamcorper nulla non metus auctor fringilla.</p>
        </div>

        <!-- Floating TOC -->
        <div class="floating-toc">
            <div class="toc-header">Table of Contents</div>
            <div class="toc-content-container">
                <div class="toc-content">
                    <ul class="toc-list" id="toc-list">
                        <!-- TOC will be generated by JavaScript -->
                    </ul>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Generate table of contents
                generateTOC();

                // Track scrolling to highlight current section
                window.addEventListener("scroll", highlightCurrentSection);

                // Initial highlight
                setTimeout(highlightCurrentSection, 100);
            });

            function generateTOC() {
                const tocList = document.getElementById("toc-list");
                const headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

                headers.forEach((header) => {
                    // Create TOC item
                    const listItem = document.createElement("li");
                    listItem.textContent = header.textContent;
                    listItem.classList.add(`toc-${header.tagName.toLowerCase()}`);
                    listItem.setAttribute("data-target", header.id);

                    // Add click event to scroll to section
                    listItem.addEventListener("click", () => {
                        document.getElementById(header.id).scrollIntoView({
                            behavior: "smooth",
                        });
                    });

                    tocList.appendChild(listItem);
                });
            }

            function highlightCurrentSection() {
                const tocItems = document.querySelectorAll(".toc-list li");

                // Get all headers with their positions
                const headers = Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6")).map((header) => ({
                    id: header.id,
                    top: header.getBoundingClientRect().top,
                }));

                // Find the current section (the one closest to the top but not above viewport)
                let currentSection = null;
                let minPositiveDistance = Infinity;

                headers.forEach((header) => {
                    // Using a small offset to detect headers slightly above the viewport top
                    const distance = header.top - 50;

                    // If the header is just above or below the viewport top, and it's the closest one
                    if (distance < minPositiveDistance && distance > -100) {
                        minPositiveDistance = distance;
                        currentSection = header.id;
                    }
                });

                // Remove active class from all items
                tocItems.forEach((item) => {
                    item.classList.remove("toc-active");
                });

                // Add active class to current section
                if (currentSection) {
                    const activeItem = document.querySelector(`.toc-list li[data-target="${currentSection}"]`);
                    if (activeItem) {
                        activeItem.classList.add("toc-active");

                        // Scroll active item into view within the TOC container
                        const tocContent = document.querySelector(".toc-content");
                        const itemTop = activeItem.offsetTop;
                        const containerHeight = tocContent.clientHeight;

                        if (itemTop < tocContent.scrollTop || itemTop > tocContent.scrollTop + containerHeight) {
                            tocContent.scrollTop = itemTop - containerHeight / 2;
                        }
                    }
                }
            }
        </script>
    </body>
</html>
```
