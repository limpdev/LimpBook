# ÓòÜ Sphinx DocGen

> Create intelligent and beautiful documentation with ease

üìù Rich Text Formatting

Author in [reStructuredText](usage/restructuredtext/basics.html#rst-primer) or [MyST Markdown](usage/markdown.html#markdown) to create highly structured technical documents, including tables, highlighted code blocks, mathematical notations, and more.

üîó Powerful Cross-Referencing

Create [cross-references](usage/referencing.html#xref) within your project, and even across [different projects](usage/extensions/intersphinx.html#ext-intersphinx). Include references to sections, figures, tables, citations, glossaries, code objects, and more.

üìö Versatile Documentation Formats

Generate documentation in the preferred formats of your audience, including HTML, LaTeX (for PDF), ePub, Texinfo, [and more](usage/builders/index.html#builders).

üé® Extensive Theme Support

Create visually appealing documentation, with a wide choice of [built-in](usage/theming.html#builtin-themes) and [third-party](usage/theming.html#third-party-themes) HTML themes and the ability to customize or [create new themes](development/html_themes/index.html#extension-html-theme).

üîå Fully Extensible

Add custom functionality, via robust [extension mechanisms](development/index.html#extending-sphinx) with numerous [built-in](usage/extensions/index.html#builtin-extensions) and [third-party](usage/extensions/index.html#third-party-extensions) extensions available for tasks like creating diagrams, testing code, and more.

üõ†Ô∏è Automatic API Documentation

Generate API documentation for Python, C++ and other [software domains](usage/domains/index.html#usage-domains), manually or [automatically from docstrings](usage/extensions/autodoc.html#ext-autodoc), ensuring your code documentation stays up-to-date with minimal effort.

üåç Internationalization (i18n)

Add documentation [translations](usage/advanced/intl.html#intl) multiple languages to reach a global audience.

üåü Active Community and Support

Benefit from an [active community](support.html#support-index), with numerous resources, tutorials, forums, and examples.

See below for how to navigate Sphinx‚Äôs documentation.

# Installing Sphinx[¬∂](installation.html#installing-sphinx "Link to this heading")

Sphinx is a Python application. It can be installed in one of the ways described below.

Installation methods



After installation, you can check that Sphinx is available by running

```
$ sphinx-build --version
```

This should print out the Sphinx version number.

Tip

For local development, it is generally recommended to install Sphinx into a non-global environment (using for example [venv](https://docs.python.org/3/library/venv.html) or [conda](https://conda.io/projects/conda/en/latest/user-guide/getting-started.html) environments). This will allow for the use of separate sphinx versions and third-party extensions for each sphinx project.

## PyPI package[¬∂](installation.html#pypi-package "Link to this heading")

Sphinx packages are published on the [Python Package Index](https://pypi.org/project/Sphinx/) (PyPI). The preferred tool for installing packages from PyPI is **pip**, which is included in all modern versions of Python.

Run the following command:

```
$ pip install -U sphinx
```

Tip

To avoid issues when rebuilding your environment, it is advisable to pin sphinx and third-party extension versions in a [requirements.txt file](https://pip.pypa.io/en/stable/reference/requirements-file-format/):

```
$ pip install -r requirements.txt
```

Or, if writing documentation for a Python package, place the dependencies in the [pyproject.toml file](https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#dependencies-optional-dependencies):

```
$ pip install .[docs]
```

## Conda package[¬∂](installation.html#conda-package "Link to this heading")

To work with **conda**, you need a conda-based Python distribution such as [anaconda](https://docs.anaconda.com/anaconda/), [miniconda](https://docs.anaconda.com/miniconda/), [miniforge](https://github.com/conda-forge/miniforge/) or [micromamba](https://mamba.readthedocs.io/en/latest/installation/micromamba-installation.html).

Sphinx is available both via the *anaconda main* channel (maintained by Anaconda Inc.)

```
$ conda install sphinx
```

as well as via the *conda-forge* community channel

```
$ conda install -c conda-forge sphinx
```

## OS-specific package manager[¬∂](installation.html#os-specific-package-manager "Link to this heading")

You may install a global version of Sphinx into your system using OS-specific package managers. However, be aware that this is less flexible and you may run into compatibility issues if you want to work across different projects.

### Linux[¬∂](installation.html#linux "Link to this heading")

#### Debian/Ubuntu[¬∂](installation.html#debian-ubuntu "Link to this heading")

Install either `python3-sphinx` using **apt-get**:

```
$ apt-get install python3-sphinx
```

If it not already present, this will install Python for you.

#### RHEL, CentOS[¬∂](installation.html#rhel-centos "Link to this heading")

Install `python-sphinx` using **yum**:

```
$ yum install python-sphinx
```

If it not already present, this will install Python for you.

#### Other distributions[¬∂](installation.html#other-distributions "Link to this heading")

Most Linux distributions have Sphinx in their package repositories. Usually the package is called `python3-sphinx`, `python-sphinx` or `sphinx`. Be aware that there are at least two other packages with `sphinx` in their name: a speech recognition toolkit (*CMU Sphinx*) and a full-text search database (*Sphinx search*).

### macOS[¬∂](installation.html#macos "Link to this heading")

Sphinx can be installed using [Homebrew](https://brew.sh/), [MacPorts](https://www.macports.org/).

#### Homebrew[¬∂](installation.html#homebrew "Link to this heading")

```
$ brew install sphinx-doc
```

For more information, refer to the [package overview](https://formulae.brew.sh/formula/sphinx-doc).

#### MacPorts[¬∂](installation.html#macports "Link to this heading")

Install either `python3x-sphinx` using **port**:

```
$ sudo port install py313-sphinx
```

To set up the executable paths, use the `port select` command:

```
$ sudo port select --set python python313
$ sudo port select --set sphinx py313-sphinx
```

For more information, refer to the [package overview](https://www.macports.org/ports.php?by=library&substr=py313-sphinx).

### Windows[¬∂](installation.html#windows "Link to this heading")

Sphinx can be installed using [Chocolatey](https://chocolatey.org/).

#### Chocolatey[¬∂](installation.html#chocolatey "Link to this heading")

```
$ choco install sphinx
```

You would need to [install Chocolatey](https://chocolatey.org/install) before running this.

For more information, refer to the [chocolatey page](https://chocolatey.org/packages/sphinx/).

## Docker[¬∂](installation.html#docker "Link to this heading")

Docker images for Sphinx are published on the [Docker Hub](https://hub.docker.com/). There are two kind of images:


Former one is used for standard usage of Sphinx, and latter one is mainly used for PDF builds using LaTeX. Please choose one for your purpose.

Note

sphinxdoc/sphinx-latexpdf contains TeXLive packages. So the image is very large (over 2GB!).

Hint

When using docker images, please use `docker run` command to invoke sphinx commands. For example, you can use following command to create a Sphinx project:

```
$ docker run -it --rm -v /path/to/document:/docs sphinxdoc/sphinx sphinx-quickstart
```

And you can use the following command to build HTML document:

```
$ docker run --rm -v /path/to/document:/docs sphinxdoc/sphinx make html
```

For more details, please read [README file](https://hub.docker.com/r/sphinxdoc/sphinx) of docker images.

## Installation of the latest development release[¬∂](installation.html#installation-of-the-latest-development-release "Link to this heading")

You can install the latest development from *PyPI* using the `--pre` flag:

```
$ pip install -U --pre sphinx
```

Warning

You will not generally need (or want) to do this, but it can be useful if you see a possible bug in the latest stable release.

## Installation from source[¬∂](installation.html#installation-from-source "Link to this heading")

You can install Sphinx directly from a clone of the [Git repository](https://github.com/sphinx-doc/sphinx). This can be done either by cloning the repo and installing from the local clone, on simply installing directly via **git**.

```
$ git clone https://github.com/sphinx-doc/sphinx
$ cd sphinx
$ pip install .
```

```
$ pip install git+https://github.com/sphinx-doc/sphinx
```

You can also download a snapshot of the Git repo in either [tar.gz](https://github.com/sphinx-doc/sphinx/archive/master.tar.gz) or [zip](https://github.com/sphinx-doc/sphinx/archive/master.zip) format. Once downloaded and extracted, these can be installed with **pip** as above.


# Appendix: Deploying a Sphinx project online[¬∂](deploying.html#appendix-deploying-a-sphinx-project-online "Link to this heading")

When you are ready to show your documentation project to the world, there are many options available to do so. Since the HTML generated by Sphinx is static, you can decouple the process of building your HTML documentation from hosting such files in the platform of your choice. You will not need a sophisticated server running Python: virtually every web hosting service will suffice.

Therefore, the challenge is less how or where to serve the static HTML, but rather how to pick a workflow that automatically updates the deployed documentation every time there is a change in the source files.

The following sections describe some of the available options to deploy your online documentation, and give some background information. If you want to go directly to the practical part, you can skip to [Publishing your documentation sources](deploying.html#publishing-sources).

## Sphinx-friendly deployment options[¬∂](deploying.html#sphinx-friendly-deployment-options "Link to this heading")

There are several possible options you have to host your Sphinx documentation. Some of them are:

**Read the Docs**

[Read the Docs](https://readthedocs.org/) is an online service specialized in hosting technical documentation written in Sphinx, as well as MkDocs. They have a number of extra features, such as versioned documentation, traffic and search analytics, custom domains, user-defined redirects, and more.

**GitHub Pages**

[GitHub Pages](https://pages.github.com/) is a simple static web hosting tightly integrated with [GitHub](https://github.com/): static HTML is served from one of the branches of a project, and usually sources are stored in another branch so that the output can be updated every time the sources change (for example using [GitHub Actions](https://github.com/features/actions)). It is free to use and supports custom domains.

**GitLab Pages**

[GitLab Pages](https://about.gitlab.com/stages-devops-lifecycle/pages/) is a similar concept to GitHub Pages, integrated with [GitLab](https://gitlab.com/) and usually automated with [GitLab CI](https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/) instead.

**Netlify**

[Netlify](https://www.netlify.com/) is a sophisticated hosting for static sites enhanced by client-side web technologies like JavaScript (so-called [‚ÄúJamstack‚Äù](https://jamstack.org/)). They offer support for headless content management systems and serverless computing.

**Your own server**

You can always use your own web server to host Sphinx HTML documentation. It is the option that gives more flexibility, but also more complexity.

All these options have zero cost, with the option of paying for extra features.

## Embracing the ‚ÄúDocs as Code‚Äù philosophy[¬∂](deploying.html#embracing-the-docs-as-code-philosophy "Link to this heading")

The free offerings of most of the options listed above require your documentation sources to be publicly available. Moreover, these services expect you to use a [Version Control System](https://en.wikipedia.org/wiki/Version_control), a technology that tracks the evolution of a collection of files as a series of snapshots (‚Äúcommits‚Äù). The practice of writing documentation in plain text files with the same tools as the ones used for software development is commonly known as [‚ÄúDocs as Code‚Äù](https://www.writethedocs.org/guide/docs-as-code/).

The most popular Version Control System nowadays is [Git](https://git-scm.com/), a free and open source tool that is the backbone of services like GitHub and GitLab. Since both Read the Docs and Netlify have integrations with GitHub and GitLab, and both GitHub and GitLab have an integrated Pages product, the most effective way of automatically build your documentation online is to upload your sources to either of these Git hosting services.

## Publishing your documentation sources[¬∂](deploying.html#publishing-your-documentation-sources "Link to this heading")

### GitHub[¬∂](deploying.html#id1 "Link to this heading")

The quickest way to upload an existing project to GitHub is to:

1. [Sign up for a GitHub account](https://github.com/signup).
2. [Create a new repository](https://github.com/new).
3. Open [the ‚ÄúUpload files‚Äù page](https://docs.github.com/en/repositories/working-with-files/managing-files/adding-a-file-to-a-repository) of your new repository.
4. Select the files on your operating system file browser (in your case `README.rst`, `lumache.py`, the makefiles under the `docs` directory, and everything under `docs/source`) and drag them to the GitHub interface to upload them all.
5. Click on the Commit changes button.

Note

Make sure you don‚Äôt upload the `docs/build` directory, as it contains the output generated by Sphinx and it will change every time you change the sources, complicating your workflow.

These steps do not require access to the command line or installing any additional software. To learn more, read [this quickstart tutorial](https://docs.github.com/en/get-started/quickstart) or consult the [official GitHub documentation](https://docs.github.com/en/get-started)

### GitLab[¬∂](deploying.html#id2 "Link to this heading")

Similarly to GitHub, the fastest way to upload your project to GitLab is using the web interface:

1. [Sign up for a GitLab account](https://gitlab.com/users/sign_up).
2. [Create a new blank project](https://gitlab.com/projects/new).
3. Upload the project files (in your case `README.rst`, `lumache.py`, the makefiles under the `docs` directory, and everything under `docs/source`) one by one using the Upload File button [\[1\]](deploying.html#f1).

Again, these steps do not require additional software on your computer. To learn more, you can:

- Follow [this tutorial](https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html) to install Git on your machine.
- Browse the [GitLab User documentation](https://docs.gitlab.com/ee/user/index.html) to understand the possibilities of the platform.

Note

Make sure you don‚Äôt upload the `docs/build` directory, as it contains the output generated by Sphinx and it will change every time you change the sources, complicating your workflow.

\[[1](deploying.html#id3)]

At the time of writing, [uploading whole directories to GitLab using only the web interface](https://gitlab.com/gitlab-org/gitlab/-/issues/228490) is not yet implemented.

## Publishing your HTML documentation[¬∂](deploying.html#publishing-your-html-documentation "Link to this heading")

### Read the Docs[¬∂](deploying.html#id4 "Link to this heading")

[Read the Docs](https://readthedocs.org/) offers integration with both GitHub and GitLab. The quickest way of getting started is to follow [the RTD tutorial](https://docs.readthedocs.com/platform/stable/tutorial/index.html "(in Read the Docs user documentation v13.0.0)"), which is loosely based on this one. You can publish your sources on GitHub as explained [in the previous section](deploying.html#publishing-sources), then skip directly to [Creating a Read the Docs account](https://docs.readthedocs.com/platform/stable/tutorial/index.html#creating-a-read-the-docs-account "(in Read the Docs user documentation v13.0.0)"). If you choose GitLab instead, the process is similar.

### GitHub Pages[¬∂](deploying.html#id5 "Link to this heading")

[GitHub Pages](https://pages.github.com/) requires you to [publish your sources](deploying.html#publishing-sources) on [GitHub](https://github.com/). After that, you will need an automated process that performs the `make html` step every time the sources change. That can be achieved using [GitHub Actions](https://github.com/features/actions).

After you have published your sources on GitHub, create a file named `.github/workflows/sphinx.yml` in your repository with the following contents:

.github/workflows/[¬∂](deploying.html#id7 "Link to this code")

```
name: "Sphinx: Render docs"

on: push

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
    - uses: actions/checkout@v4
      with:
        persist-credentials: false
    - name: Build HTML
      uses: ammaraskar/sphinx-action@master
    - name: Upload artifacts
      uses: actions/upload-artifact@v4
      with:
        name: html-docs
        path: docs/build/html/
    - name: Deploy
      uses: peaceiris/actions-gh-pages@v3
      if: github.ref == 'refs/heads/main'
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: docs/build/html
```

This contains a GitHub Actions workflow with a single job of four steps:

1. Checkout the code.
2. Build the HTML documentation using Sphinx.
3. Attach the HTML output the artifacts to the GitHub Actions job, for easier inspection.
4. If the change happens on the default branch, take the contents of `docs/build/html` and push it to the `gh-pages` branch.

Next, you need to specify the dependencies for the `make html` step to be successful. For that, create a file `docs/requirements.txt` and add the following contents:

docs/requirements.txt[¬∂](deploying.html#id8 "Link to this code")

```
furo==2021.11.16
```

And finally, you are ready to [enable GitHub Pages on your repository](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site). For that, go to Settings, then Pages on the left sidebar, select the `gh-pages` branch in the ‚ÄúSource‚Äù dropdown menu, and click Save. After a few minutes, you should be able to see your HTML at the designated URL.

### GitLab Pages[¬∂](deploying.html#id6 "Link to this heading")

[GitLab Pages](https://about.gitlab.com/stages-devops-lifecycle/pages/), on the other hand, requires you to [publish your sources](deploying.html#publishing-sources) on [GitLab](https://gitlab.com/). When you are ready, you can automate the process of running `make html` using [GitLab CI](https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/).

After you have published your sources on GitLab, create a file named `.gitlab-ci.yml` in your repository with these contents:

.gitlab-ci.yml[¬∂](deploying.html#id9 "Link to this code")

```
stages:
  - deploy

pages:
  stage: deploy
  image: python:3.12-slim
  before_script:
    - apt-get update && apt-get install make --no-install-recommends -y
    - python -m pip install sphinx furo
  script:
    - cd docs && make html
  after_script:
    - mv docs/build/html/ ./public/
  artifacts:
    paths:
    - public
  rules:
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH
```

This contains a GitLab CI workflow with one job of several steps:

1. Install the necessary dependencies.
2. Build the HTML documentation using Sphinx.
3. Move the output to a known artifacts location.

Note

You will need to [validate your account](https://about.gitlab.com/blog/2021/05/17/prevent-crypto-mining-abuse/#validating-an-account) by entering a payment method (you will be charged a small amount that will then be reimbursed).

After that, if the pipeline is successful, you should be able to see your HTML at the designated URL.

# reStructuredText[¬∂](index.html#restructuredtext "Link to this heading")

reStructuredText (reST) is the default plaintext markup language used by both Docutils and Sphinx. Docutils provides the basic reStructuredText syntax, while Sphinx extends this to support additional functionality.

The below guides go through the most important aspects of reStructuredText. For the authoritative reference, refer to the [docutils documentation](https://docutils.sourceforge.io/rst.html).

# reStructuredText Primer[¬∂](basics.html#restructuredtext-primer "Link to this heading")

reStructuredText is the default plaintext markup language used by Sphinx. This section is a brief introduction to reStructuredText (reST) concepts and syntax, intended to provide authors with enough information to author documents productively. Since reStructuredText was designed to be a simple, unobtrusive markup language, this will not take too long.

The authoritative [reStructuredText User Documentation](https://docutils.sourceforge.io/rst.html). The ‚Äúref‚Äù links in this document link to the description of the individual constructs in the reStructuredText reference.

## Paragraphs[¬∂](basics.html#paragraphs "Link to this heading")

The paragraph ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#paragraphs)) is the most basic block in a reStructuredText document. Paragraphs are simply chunks of text separated by one or more blank lines. As in Python, indentation is significant in reStructuredText, so all lines of the same paragraph must be left-aligned to the same level of indentation.

## Inline markup[¬∂](basics.html#inline-markup "Link to this heading")

The standard reStructuredText inline markup is quite simple: use

- one asterisk: `*text*` for emphasis (italics),
- two asterisks: `**text**` for strong emphasis (boldface), and
- backquotes: ``` ``text`` ``` for code samples.

If asterisks or backquotes appear in running text and could be confused with inline markup delimiters, they have to be escaped with a backslash.

Be aware of some restrictions of this markup:

- it may not be nested,
- content may not start or end with whitespace: `* text*` is wrong,
- it must be separated from surrounding text by non-word characters. Use a backslash escaped space to work around that: `thisis\ *one*\ word`.

These restrictions may be lifted in future versions of the docutils.

It is also possible to replace or expand upon some of this inline markup with roles. Refer to [Roles](basics.html#rst-roles) for more information.

## Lists and Quote-like blocks[¬∂](basics.html#lists-and-quote-like-blocks "Link to this heading")

List markup ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#bullet-lists)) is natural: just place an asterisk at the start of a paragraph and indent properly. The same goes for numbered lists; they can also be autonumbered using a `#` sign:

```
* This is a bulleted list.
* It has two items, the second
  item uses two lines.

1. This is a numbered list.
2. It has two items too.

#. This is a numbered list.
#. It has two items too.
```

Nested lists are possible, but be aware that they must be separated from the parent list items by blank lines:

```
* this is
* a list

  * with a nested list
  * and some subitems

* and here the parent list continues
```

Definition lists ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#definition-lists)) are created as follows:

```
term (up to a line of text)
   Definition of the term, which must be indented

   and can even consist of multiple paragraphs

next term
   Description.
```

Note that the term cannot have more than one line of text.

Quoted paragraphs ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#block-quotes)) are created by just indenting them more than the surrounding paragraphs.

Line blocks ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#line-blocks)) are a way of preserving line breaks:

```
| These lines are
| broken exactly like in
| the source file.
```

There are also several more special blocks available:

- field lists ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#field-lists), with caveats noted in [Field Lists](basics.html#rst-field-lists))
- option lists ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#option-lists))
- quoted literal blocks ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#quoted-literal-blocks))
- doctest blocks ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#doctest-blocks))

## Literal blocks[¬∂](basics.html#literal-blocks "Link to this heading")

Literal code blocks ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#literal-blocks)) are introduced by ending a paragraph with the special marker `::`. The literal block must be indented (and, like all paragraphs, separated from the surrounding ones by blank lines):

```
This is a normal text paragraph. The next paragraph is a code sample::

   It is not processed in any way, except
   that the indentation is removed.

   It can span multiple lines.

This is a normal text paragraph again.
```

The handling of the `::` marker is smart:

- If it occurs as a paragraph of its own, that paragraph is completely left out of the document.
- If it is preceded by whitespace, the marker is removed.
- If it is preceded by non-whitespace, the marker is replaced by a single colon.

That way, the second sentence in the above example‚Äôs first paragraph would be rendered as ‚ÄúThe next paragraph is a code sample:‚Äù.

Code highlighting can be enabled for these literal blocks on a document-wide basis using the [`highlight`](directives.html#directive-highlight "highlight directive") directive and on a project-wide basis using the [`highlight_language`](../configuration.html#confval-highlight_language) configuration option. The [`code-block`](directives.html#directive-code-block "code-block directive") directive can be used to set highlighting on a block-by-block basis. These directives are discussed later.

## Doctest blocks[¬∂](basics.html#doctest-blocks "Link to this heading")

Doctest blocks ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#doctest-blocks)) are interactive Python sessions cut-and-pasted into docstrings. They do not require the [literal blocks](basics.html#rst-literal-blocks) syntax. The doctest block must end with a blank line and should *not* end with an unused prompt:

```
>>> 1 + 1
2
```

## Tables[¬∂](basics.html#tables "Link to this heading")

For *grid tables* ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#grid-tables)), you have to ‚Äúpaint‚Äù the cell grid yourself. They look like this:

```
+------------------------+------------+----------+----------+
| Header row, column 1   | Header 2   | Header 3 | Header 4 |
| (header rows optional) |            |          |          |
+========================+============+==========+==========+
| body row 1, column 1   | column 2   | column 3 | column 4 |
+------------------------+------------+----------+----------+
| body row 2             | ...        | ...      |          |
+------------------------+------------+----------+----------+
```

*Simple tables* ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#simple-tables)) are easier to write, but limited: they must contain more than one row, and the first column cells cannot contain multiple lines. They look like this:

```
=====  =====  =======
A      B      A and B
=====  =====  =======
False  False  False
True   False  False
False  True   False
True   True   True
=====  =====  =======
```

Two more syntaxes are supported: *CSV tables* and *List tables*. They use an *explicit markup block*. Refer to [Tables](directives.html#table-directives) for more information.

## Hyperlinks[¬∂](basics.html#hyperlinks "Link to this heading")

### External links[¬∂](basics.html#external-links "Link to this heading")

Use `` `Link text <https://domain.invalid/>`_`` for inline web links. If the link text should be the web address, you don‚Äôt need special markup at all, the parser finds links and mail addresses in ordinary text.

Important

There must be a space between the link text and the opening &lt; for the URL.

You can also separate the link and the target definition ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-targets)), like this:

```
This is a paragraph that contains `a link`_.

.. _a link: https://domain.invalid/
```

### Internal links[¬∂](basics.html#internal-links "Link to this heading")

Internal linking is done via a special reStructuredText role provided by Sphinx, see the section on specific markup, [Cross-referencing arbitrary locations](../referencing.html#ref-role).

## Sections[¬∂](basics.html#sections "Link to this heading")

Section headers ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#sections)) are created by underlining (and optionally overlining) the section title with a punctuation character, at least as long as the text:

```
=================
This is a heading
=================
```

Normally, there are no heading levels assigned to certain characters as the structure is determined from the succession of headings. However, this convention is used in [Python Developer‚Äôs Guide for documenting](https://devguide.python.org/documentation/markup/#sections) which you may follow:

- `#` with overline, for parts
- `*` with overline, for chapters
- `=` for sections
- `-` for subsections
- `^` for subsubsections
- `"` for paragraphs

Of course, you are free to use your own marker characters (see the reStructuredText documentation), and use a deeper nesting level, but keep in mind that most target formats (HTML, LaTeX) have a limited supported nesting depth.

## Field Lists[¬∂](basics.html#field-lists "Link to this heading")

Field lists ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#field-lists)) are sequences of fields marked up like this:

```
:fieldname: Field content
```

They are commonly used in Python documentation:

```
def my_function(my_arg, my_other_arg):
    """A function just for me.

    :param my_arg: The first of my arguments.
    :param my_other_arg: The second of my arguments.

    :returns: A message (just for me, of course).
    """
```

Sphinx extends standard docutils behavior and intercepts field lists specified at the beginning of documents. Refer to [Field Lists](field-lists.html) for more information.

## Roles[¬∂](basics.html#roles "Link to this heading")

A role or ‚Äúcustom interpreted text role‚Äù ([ref](https://docutils.sourceforge.io/docs/ref/rst/roles.html)) is an inline piece of explicit markup. It signifies that the enclosed text should be interpreted in a specific way. Sphinx uses this to provide semantic markup and cross-referencing of identifiers, as described in the appropriate section. The general syntax is ``:rolename:`content` ``.

Docutils supports the following roles:

- [emphasis](https://docutils.sourceforge.io/docs/ref/rst/roles.html#emphasis) ‚Äì equivalent of `*emphasis*`
- [strong](https://docutils.sourceforge.io/docs/ref/rst/roles.html#strong) ‚Äì equivalent of `**strong**`
- [literal](https://docutils.sourceforge.io/docs/ref/rst/roles.html#literal) ‚Äì equivalent of ``` ``literal`` ```
- [subscript](https://docutils.sourceforge.io/docs/ref/rst/roles.html#subscript) ‚Äì subscript text
- [superscript](https://docutils.sourceforge.io/docs/ref/rst/roles.html#superscript) ‚Äì superscript text
- [title-reference](https://docutils.sourceforge.io/docs/ref/rst/roles.html#title-reference) ‚Äì for titles of books, periodicals, and other materials

Refer to [Roles](roles.html) for roles added by Sphinx.

## Explicit Markup[¬∂](basics.html#explicit-markup "Link to this heading")

‚ÄúExplicit markup‚Äù ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#explicit-markup-blocks)) is used in reStructuredText for most constructs that need special handling, such as footnotes, specially-highlighted paragraphs, comments, and generic directives.

An explicit markup block begins with a line starting with `..` followed by whitespace and is terminated by the next paragraph at the same level of indentation. (There needs to be a blank line between explicit markup and normal paragraphs. This may all sound a bit complicated, but it is intuitive enough when you write it.)

## Directives[¬∂](basics.html#directives "Link to this heading")

A directive ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#directives)) is a generic block of explicit markup. Along with roles, it is one of the extension mechanisms of reStructuredText, and Sphinx makes heavy use of it.

Docutils supports the following directives:

- Admonitions: [attention](https://docutils.sourceforge.io/docs/ref/rst/directives.html#attention), [caution](https://docutils.sourceforge.io/docs/ref/rst/directives.html#caution), [danger](https://docutils.sourceforge.io/docs/ref/rst/directives.html#danger), [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error), [hint](https://docutils.sourceforge.io/docs/ref/rst/directives.html#hint), [important](https://docutils.sourceforge.io/docs/ref/rst/directives.html#important), [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note), [tip](https://docutils.sourceforge.io/docs/ref/rst/directives.html#tip), [warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning) and the generic [admonition](https://docutils.sourceforge.io/docs/ref/rst/directives.html#admonitions). (Most themes style only ‚Äúnote‚Äù and ‚Äúwarning‚Äù specially.)
- Images:

    - Additional body elements:

                - Special tables:

      - Special directives:

    - [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) (include reStructuredText from another file) ‚Äì in Sphinx, when given an absolute include file path, this directive takes it as relative to the source directory

    Note

    When the default domain contains a `class` directive, this directive will be shadowed. Therefore, Sphinx re-exports it as `rst-class`.

    Tip

    If you want to add a class to a directive, you may consider the `:class:` [option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options) instead, which is supported by most directives and allows for a more compact notation.
- HTML specifics:

    - Influencing markup:


  Since these are only per-file, better use Sphinx‚Äôs facilities for setting the [`default_role`](../configuration.html#confval-default_role).

Warning

Do *not* use the directives [sectnum](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sectnum), [header](https://docutils.sourceforge.io/docs/ref/rst/directives.html#header) and [footer](https://docutils.sourceforge.io/docs/ref/rst/directives.html#footer).

Directives added by Sphinx are described in [Directives](directives.html).

Basically, a directive consists of a name, arguments, options and content. (Keep this terminology in mind, it is used in the next chapter describing custom directives.) Looking at this example,

```
.. function:: foo(x)
              foo(y, z)
   :module: some.module.name

   Return a line of text input from the user.
```

`function` is the directive name. It is given two arguments here, the remainder of the first line and the second line, as well as one option `module` (as you can see, options are given in the lines immediately following the arguments and indicated by the colons). Options must be indented to the same level as the directive content.

The directive content follows after a blank line and is indented relative to the directive start or if options are present, by the same amount as the options.

Be careful as the indent is not a fixed number of whitespace, e.g. three, but any number whitespace. This can be surprising when a fixed indent is used throughout the document and can make a difference for directives which are sensitive to whitespace. Compare:

```
.. code-block::
   :caption: A cool example

       The output of this line starts with four spaces.

.. code-block::

       The output of this line has no spaces at the beginning.
```

In the first code block, the indent for the content was fixated by the option line to three spaces, consequently the content starts with four spaces. In the latter the indent was fixed by the content itself to seven spaces, thus it does not start with a space.

## Images[¬∂](basics.html#images "Link to this heading")

reStructuredText supports an image directive ([ref](https://docutils.sourceforge.io/docs/ref/rst/directives.html#image)), used like so:

```
.. image:: gnu.png
   (options)
```

When used within Sphinx, the file name given (here `gnu.png`) must either be relative to the source file, or absolute which means that they are relative to the top source directory. For example, the file `sketch/spam.rst` could refer to the image `images/spam.png` as `../images/spam.png` or `/images/spam.png`.

Sphinx will automatically copy image files over to a subdirectory of the output directory on building (e.g. the `_static` directory for HTML output.)

Interpretation of image size options (`width` and `height`) is as follows: if the size has no unit or the unit is pixels, the given size will only be respected for output channels that support pixels. Other units (like `pt` for points) will be used for HTML and LaTeX output (the latter replaces `pt` by `bp` as this is the TeX unit such that `72bp=1in`).

Sphinx extends the standard docutils behavior by allowing an asterisk for the extension:

```
.. image:: gnu.*
```

Sphinx then searches for all images matching the provided pattern and determines their type. Each builder then chooses the best image out of these candidates. For instance, if the file name `gnu.*` was given and two files `gnu.pdf` and `gnu.png` existed in the source tree, the LaTeX builder would choose the former, while the HTML builder would prefer the latter. Supported image types and choosing priority are defined at [Builders](../builders/index.html).

Note that image file names should not contain spaces.

Changed in version 0.4: Added the support for file names ending in an asterisk.

Changed in version 0.6: Image paths can now be absolute.

Changed in version 1.5: latex target supports pixels (default is `96px=1in`).

## Footnotes[¬∂](basics.html#footnotes "Link to this heading")

For footnotes ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#footnotes)), use `[#name]_` to mark the footnote location, and add the footnote body at the bottom of the document after a ‚ÄúFootnotes‚Äù rubric heading, like so:

```
Lorem ipsum [#f1]_ dolor sit amet ... [#f2]_

.. rubric:: Footnotes

.. [#f1] Text of the first footnote.
.. [#f2] Text of the second footnote.
```

You can also explicitly number the footnotes (`[1]_`) or use auto-numbered footnotes without names (`[#]_`).

## Citations[¬∂](basics.html#citations "Link to this heading")

Standard reStructuredText citations ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#citations)) are supported, with the additional feature that they are ‚Äúglobal‚Äù, i.e. all citations can be referenced from all files. Use them like so:

```
Lorem ipsum [Ref]_ dolor sit amet.

.. [Ref] Book or article reference, URL or whatever.
```

Citation usage is similar to footnote usage, but with a label that is not numeric or begins with `#`.

## Substitutions[¬∂](basics.html#substitutions "Link to this heading")

reStructuredText supports ‚Äúsubstitutions‚Äù ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-definitions)), which are pieces of text and/or markup referred to in the text by `|name|`. They are defined like footnotes with explicit markup blocks, like this:

```
.. |name| replace:: replacement *text*
```

or this:

```
.. |caution| image:: warning.png
             :alt: Warning!
```

See the [reStructuredText reference for substitutions](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-definitions) for details.

If you want to use some substitutions for all documents, put them into [`rst_prolog`](../configuration.html#confval-rst_prolog) or [`rst_epilog`](../configuration.html#confval-rst_epilog) or put them into a separate file and include it into all documents you want to use them in, using the [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) directive. (Be sure to give the include file a file name extension differing from that of other source files, to avoid Sphinx finding it as a standalone document.)

Sphinx defines some default substitutions, see [Substitutions](roles.html#default-substitutions).

## Comments[¬∂](basics.html#comments "Link to this heading")

Every explicit markup block which isn‚Äôt a valid markup construct (like the footnotes above) is regarded as a comment ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#comments)). For example:

```
.. This is a comment.
```

You can indent text after a comment start to form multiline comments:

```
..
   This whole indented block
   is a comment.

   Still in the comment.
```

## HTML Metadata[¬∂](basics.html#html-metadata "Link to this heading")

The [meta](https://docutils.sourceforge.io/docs/ref/rst/directives.html#meta) directive allows specifying the HTML [metadata element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta) of a Sphinx documentation page. For example, the directive:

```
.. meta::
   :description: The Sphinx documentation builder
   :keywords: Sphinx, documentation, builder
```

will generate the following HTML output:

```
<meta name="description" content="The Sphinx documentation builder">
<meta name="keywords" content="Sphinx, documentation, builder">
```

Also, Sphinx will add the keywords as specified in the meta directive to the search index. Thereby, the `lang` attribute of the meta element is considered. For example, the directive:

```
.. meta::
   :keywords: backup
   :keywords lang=en: pleasefindthiskey pleasefindthiskeytoo
   :keywords lang=de: bittediesenkeyfinden
```

adds the following words to the search indices of builds with different language configurations:

- `pleasefindthiskey`, `pleasefindthiskeytoo` to *English* builds;
- `bittediesenkeyfinden` to *German* builds;
- `backup` to builds in all languages.

## Source encoding[¬∂](basics.html#source-encoding "Link to this heading")

Since the easiest way to include special characters like em dashes or copyright signs in reStructuredText is to directly write them as Unicode characters, one has to specify an encoding. Sphinx assumes source files to be encoded in UTF-8 by default; you can change this with the [`source_encoding`](../configuration.html#confval-source_encoding) config value.

## Gotchas[¬∂](basics.html#gotchas "Link to this heading")

There are some problems one commonly runs into while authoring reStructuredText documents:

- **Separation of inline markup:** As said above, inline markup spans must be separated from the surrounding text by non-word characters, you have to use a backslash-escaped space to get around that. See [the reference](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-definitions) for the details.
- **No nested inline markup:** Something like ``*see :func:`foo`*`` is not possible.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [reStructuredText](index.html) ¬ª

### On this page





























# Directives[¬∂](directives.html#directives "Link to this heading")

[As previously discussed](basics.html#rst-directives), a directive is a generic block of explicit markup. While Docutils provides a number of directives, Sphinx provides many more and uses directives as one of the primary extension mechanisms.

See [Domains](../domains/index.html) for roles added by domains.

See also

Refer to the [reStructuredText Primer](basics.html#rst-directives) for an overview of the directives provided by Docutils.

## Table of contents[¬∂](directives.html#table-of-contents "Link to this heading")

Since reStructuredText does not have facilities to interconnect several documents, or split documents into multiple output files, Sphinx uses a custom directive to add relations between the single files the documentation is made of, as well as tables of contents. The `toctree` directive is the central element.

Note

Simple ‚Äúinclusion‚Äù of one file in another can be done with the [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) directive.

Note

To create table of contents for current document (.rst file), use the standard reStructuredText [contents directive](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents).

.. toctree::[¬∂](directives.html#directive-toctree "Link to this definition")

This directive inserts a ‚ÄúTOC tree‚Äù at the current location, using the individual TOCs (including ‚Äúsub-TOC trees‚Äù) of the documents given in the directive body. Relative document names (not beginning with a slash) are relative to the document the directive occurs in, absolute names are relative to the source directory. A numeric `maxdepth` option may be given to indicate the depth of the tree; by default, all levels are included. [\[1\]](directives.html#id8)

The representation of ‚ÄúTOC tree‚Äù is changed in each output format. The builders that output multiple files (e.g. HTML) treat it as a collection of hyperlinks. On the other hand, the builders that output a single file (e.g. LaTeX, man page, etc.) replace it with the content of the documents on the TOC tree.

Consider this example (taken from the Python docs‚Äô library reference index):

```
.. toctree::
   :maxdepth: 2

   intro
   strings
   datatypes
   numeric
   (many more documents listed here)
```

This accomplishes two things:

- Tables of contents from all those documents are inserted, with a maximum depth of two, that means one nested heading. `toctree` directives in those documents are also taken into account.
- Sphinx knows the relative order of the documents `intro`, `strings` and so forth, and it knows that they are children of the shown document, the library index. From this information it generates ‚Äúnext chapter‚Äù, ‚Äúprevious chapter‚Äù and ‚Äúparent chapter‚Äù links.

**Entries**

Document titles in the [`toctree`](directives.html#directive-toctree "toctree directive") will be automatically read from the title of the referenced document. If that isn‚Äôt what you want, you can specify an explicit title and target using a similar syntax to reStructuredText hyperlinks (and Sphinx‚Äôs [cross-referencing syntax](../referencing.html#xref-syntax)). This looks like:

```
.. toctree::

   intro
   All about strings <strings>
   datatypes
```

The second line above will link to the `strings` document, but will use the title ‚ÄúAll about strings‚Äù instead of the title of the `strings` document.

You can also add external links, by giving an HTTP URL instead of a document name.

The special entry name `self` stands for the document containing the toctree directive. This is useful if you want to generate a ‚Äúsitemap‚Äù from the toctree.

In the end, all documents in the [source directory](../../glossary.html#term-source-directory) (or subdirectories) must occur in some `toctree` directive; Sphinx will emit a warning if it finds a file that is not included, because that means that this file will not be reachable through standard navigation.

Use [`exclude_patterns`](../configuration.html#confval-exclude_patterns) to explicitly exclude documents or directories from building completely. Use [the ‚Äúorphan‚Äù metadata](field-lists.html#metadata) to let a document be built, but notify Sphinx that it is not reachable via a toctree.

The ‚Äúroot document‚Äù (selected by [`root_doc`](../configuration.html#confval-root_doc)) is the ‚Äúroot‚Äù of the TOC tree hierarchy. It can be used as the documentation‚Äôs main page, or as a ‚Äúfull table of contents‚Äù if you don‚Äôt give a `:maxdepth:` option.

Changed in version 0.6: Added support for external links and ‚Äúself‚Äù references.

Options

:class: *class names (a list of class names, separated by spaces)*[¬∂](directives.html#directive-option-toctree-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options). For example:

```
.. toctree::
   :class: custom-toc
```

Added in version 7.4.

:name: *label (text)*[¬∂](directives.html#directive-option-toctree-name "Link to this definition")

An implicit target name that can be referenced using [`ref`](../referencing.html#role-ref "ref role"). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options). For example:

```
.. toctree::
   :name: mastertoc

   foo
```

Added in version 1.3.

:caption: *(text)*[¬∂](directives.html#directive-option-toctree-caption "Link to this definition")

Add a caption to the toctree. For example:

```
.. toctree::
   :caption: Table of Contents

    foo
```

Added in version 1.3.

:numbered:[¬∂](directives.html#directive-option-toctree-numbered "Link to this definition")

:numbered: *depth*

If you want to have section numbers even in HTML output, add the `:numbered:` option to the *top-level* toctree. For example:

```
.. toctree::
   :numbered:

   foo
   bar
```

Section numbering then starts at the heading of `foo`. Sub-toctrees are automatically numbered (don‚Äôt give the `numbered` flag to those).

Numbering up to a specific depth is also possible, by giving the depth as a numeric argument to `numbered`.

Added in version 0.6.

Changed in version 1.1: Added the numeric *depth* argument.

:titlesonly:[¬∂](directives.html#directive-option-toctree-titlesonly "Link to this definition")

Only list document titles, not other headings of the same level. For example:

```
.. toctree::
   :titlesonly:

   foo
   bar
```

Added in version 1.0.

:glob:[¬∂](directives.html#directive-option-toctree-glob "Link to this definition")

Parse glob wildcards in toctree entries. All entries are matched against the list of available documents, and matches are inserted into the list alphabetically. For example:

```
.. toctree::
   :glob:

   intro*
   recipe/*
   *
```

This includes first all documents whose names start with `intro`, then all documents in the `recipe` folder, then all remaining documents (except the one containing the directive, of course.) [\[2\]](directives.html#id9)

Added in version 0.3.

:reversed:[¬∂](directives.html#directive-option-toctree-reversed "Link to this definition")

Reverse the order of the entries in the list. This is particularly useful when using the `:glob:` option.

Added in version 1.5.

:hidden:[¬∂](directives.html#directive-option-toctree-hidden "Link to this definition")

A hidden toctree only defines the document hierarchy. It will not insert links into the document at the location of the directive.

This makes sense if you have other means of navigation, e.g. through manual links, HTML sidebar navigation, or if you use the `:includehidden:` option on the top-level toctree.

Added in version 0.6.

:includehidden:[¬∂](directives.html#directive-option-toctree-includehidden "Link to this definition")

If you want one global table of contents showing the complete document structure, you can add the `:includehidden:` option to the *top-level* toctree directive. All other toctrees on child pages can then be made invisible with the `:hidden:` option. The top-level toctree with `:includehidden:` will then include their entries.

Added in version 1.2.

### Special names[¬∂](directives.html#special-names "Link to this heading")

Sphinx reserves some document names for its own use; you should not try to create documents with these names ‚Äì it will cause problems.

The special document names (and pages generated for them) are:

- `genindex`

  This is used for the general index, which is populated with entries from [`index`](directives.html#directive-index "index directive") directives and all index-generating [object descriptions](../domains/index.html#basic-domain-markup). For example, see Sphinx‚Äôs [Index](../../genindex.html).
- `modindex`

  This is used for the Python module index, which contains one entry per [`py:module`](../domains/python.html#directive-py-module "py:module directive") directive. For example, see Sphinx‚Äôs [Python Module Index](../../py-modindex.html).
- `search`

  This is used for the search page, which contains a form that uses the generated JSON search index and JavaScript to full-text search the generated documents for search words; it works on every major browser. For example, see Sphinx‚Äôs [Search Page](../../search.html).
- Every name beginning with `_`

  Though few such names are currently used by Sphinx, you should not create documents or document-containing directories with such names. (Using `_` as a prefix for a custom template directory is fine.)

Warning

Be careful with unusual characters in filenames. Some formats may interpret these characters in unexpected ways:

- Do not use the colon `:` for HTML based formats. Links to other parts may not work.
- Do not use the plus `+` for the ePub format. Some resources may not be found.

## Paragraph-level markup[¬∂](directives.html#paragraph-level-markup "Link to this heading")

These directives create short paragraphs and can be used inside information units as well as normal text.

### Admonitions, messages, and warnings[¬∂](directives.html#admonitions-messages-and-warnings "Link to this heading")

The admonition directives create ‚Äòadmonition‚Äô elements, a standardised system of communicating different types of information, from a helpful [`tip`](directives.html#directive-tip "tip directive") to matters of paramount [`danger`](directives.html#directive-danger "danger directive"). These directives can be used anywhere an ordinary body element can, and can contain arbitrary body elements. There are nine specific named admonitions and the generic [`admonition`](directives.html#directive-admonition "admonition directive") directive.

.. attention::[¬∂](directives.html#directive-attention "Link to this definition")

Information that requires the reader‚Äôs attention. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Attention

Please may I have your attention.

.. caution::[¬∂](directives.html#directive-caution "Link to this definition")

Information with regard to which the reader should exercise care. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Caution

Exercise due caution.

.. danger::[¬∂](directives.html#directive-danger "Link to this definition")

Information which may lead to near and present danger if not heeded. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Danger

Let none think to fly the danger for soon or late love is his own avenger.

.. error::[¬∂](directives.html#directive-error "Link to this definition")

Information relating to failure modes of some description. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Error

ERROR 418: I‚Äôm a teapot.

.. hint::[¬∂](directives.html#directive-hint "Link to this definition")

Information that is helpful to the reader. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Hint

Look under the flowerpot.

.. important::[¬∂](directives.html#directive-important "Link to this definition")

Information that is of paramount importance and which the reader must not ignore. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Important

This is a statement of paramount importance.

.. note::[¬∂](directives.html#directive-note "Link to this definition")

An especially important bit of information that the reader should know. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Note

This function is not suitable for sending tins of spam.

.. tip::[¬∂](directives.html#directive-tip "Link to this definition")

Some useful tidbit of information for the reader. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Tip

Remember your sun cream!

.. warning::[¬∂](directives.html#directive-warning "Link to this definition")

An important bit of information that the reader should be very aware of. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

Warning

Beware of the dog.

.. admonition:: title[¬∂](directives.html#directive-admonition "Link to this definition")

A generic admonition, with an optional title. The content of the directive should be written in complete sentences and include all appropriate punctuation.

Example:

This is a title

This is the content of the admonition.

.. seealso::[¬∂](directives.html#directive-seealso "Link to this definition")

Many sections include a list of references to module documentation or external documents. These lists are created using the [`seealso`](directives.html#directive-seealso "seealso directive") directive.

The `seealso` directive is typically placed in a section just before any subsections. The content of the [`seealso`](directives.html#directive-seealso "seealso directive") directive should be either a single line or a reStructuredText [definition list](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#definition-lists).

Example:

```
.. seealso::

   Python's :py:mod:`zipfile` module
      Documentation of Python's standard :py:mod:`zipfile` module.

   `GNU tar manual, Basic Tar Format <https://example.org>`_
      Documentation for tar archive files, including GNU tar extensions.
```

See also

Module [`zipfile`](https://docs.python.org/3/library/zipfile.html#module-zipfile "(in Python v3.13)")

Documentation of the [`zipfile`](https://docs.python.org/3/library/zipfile.html#module-zipfile "(in Python v3.13)") standard module.

[GNU tar manual, Basic Tar Format](https://example.org)

Documentation for tar archive files, including GNU tar extensions.

Collapsible text

Added in version 8.2.

Each admonition directive supports a `:collapsible:` option, to make the content of the admonition collapsible (where supported by the output format). This can be useful for content that is not always relevant. By default, collapsible admonitions are initially open, but this can be controlled with the `open` and `closed` arguments to the `:collapsible:` option, which change the default state. In output formats that don‚Äôt support collapsible content, the text is always included. For example:

```
.. note::
   :collapsible:

   This note is collapsible, and initially open by default.

.. admonition:: Example
   :collapsible: open

   This example is collapsible, and initially open.

.. hint::
   :collapsible: closed

   This hint is collapsible, but initially closed.
```

Note

This note is collapsible, and initially open by default.

Example

This example is collapsible, and initially open.

Hint

This hint is collapsible, but initially closed.

### Describing changes between versions[¬∂](directives.html#describing-changes-between-versions "Link to this heading")

.. versionadded:: version \[brief explanation][¬∂](directives.html#directive-versionadded "Link to this definition")

This directive documents the version of the project which added the described feature. When this applies to an entire module or component, it should be placed at the top of the relevant section before any prose.

The first argument must be given and is the version in question; you can add a second argument consisting of a *brief* explanation of the change.

Attention

There must be no blank line between the directive head and the explanation; this is to make these blocks visually continuous in the markup.

Example:

```
.. versionadded:: 2.5
   The *spam* parameter.
```

Added in version 2.5: The *spam* parameter.

.. versionchanged:: version \[brief explanation][¬∂](directives.html#directive-versionchanged "Link to this definition")

Similar to [`versionadded`](directives.html#directive-versionadded "versionadded directive"), but describes when and what changed in the named feature in some way (new parameters, changed side effects, etc.).

Example:

```
.. versionchanged:: 2.8
   The *spam* parameter is now of type *boson*.
```

Changed in version 2.8: The *spam* parameter is now of type *boson*.

.. deprecated:: version \[brief explanation][¬∂](directives.html#directive-deprecated "Link to this definition")

Similar to [`versionadded`](directives.html#directive-versionadded "versionadded directive"), but describes when the feature was deprecated. A *brief* explanation can also be given, for example to tell the reader what to use instead.

Example:

```
.. deprecated:: 3.1
   Use :py:func:`spam` instead.
```

Deprecated since version 3.1: Use `spam()` instead.

.. versionremoved:: version \[brief explanation][¬∂](directives.html#directive-versionremoved "Link to this definition")

Similar to [`versionadded`](directives.html#directive-versionadded "versionadded directive"), but describes when the feature was removed. An explanation may be provided to tell the reader what to use instead, or why the feature was removed.

Added in version 7.3.

Example:

```
.. versionremoved:: 4.0
   The :py:func:`spam` function is more flexible, and should be used instead.
```

Removed in version 4.0: The `spam()` function is more flexible, and should be used instead.

### Presentational[¬∂](directives.html#presentational "Link to this heading")

.. rubric:: title[¬∂](directives.html#directive-rubric "Link to this definition")

A rubric is like an informal heading that doesn‚Äôt correspond to the document‚Äôs structure, i.e. it does not create a table of contents node.

Note

If the *title* of the rubric is ‚ÄúFootnotes‚Äù (or the selected language‚Äôs equivalent), this rubric is ignored by the LaTeX writer, since it is assumed to only contain footnote definitions and therefore would create an empty heading.

Options

:class: *class names (a list of class names, separated by spaces)*[¬∂](directives.html#directive-option-rubric-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

:name: *label (text)*[¬∂](directives.html#directive-option-rubric-name "Link to this definition")

An implicit target name that can be referenced using [`ref`](../referencing.html#role-ref "ref role"). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

:heading-level: *n (number from 1 to 6)*[¬∂](directives.html#directive-option-rubric-heading-level "Link to this definition")

Added in version 7.4.1.

Use this option to specify the heading level of the rubric. In this case the rubric will be rendered as `<h1>` to `<h6>` for HTML output, or as the corresponding non-numbered sectioning command for LaTeX (see [`latex_toplevel_sectioning`](../configuration.html#confval-latex_toplevel_sectioning)).

.. centered::[¬∂](directives.html#directive-centered "Link to this definition")

This directive creates a centered boldfaced line of text.

Deprecated since version 1.1: This presentation-only directive is a legacy from older versions. Use a [rst-class](basics.html#rstclass) directive instead and add an appropriate style.

.. hlist::[¬∂](directives.html#directive-hlist "Link to this definition")

This directive must contain a bullet list. It will transform it into a more compact list by either distributing more than one item horizontally, or reducing spacing between items, depending on the builder.

Options

:columns: *n (int)*[¬∂](directives.html#directive-option-hlist-columns "Link to this definition")

The number of columns; defaults to 2. For example:

```
.. hlist::
   :columns: 3

   * A list of
   * short items
   * that should be
   * displayed
   * horizontally
```

Added in version 0.6.

## Showing code examples[¬∂](directives.html#showing-code-examples "Link to this heading")

There are multiple ways to show syntax-highlighted literal code blocks in Sphinx:

- using [reStructuredText doctest blocks](basics.html#rst-doctest-blocks);
- using [reStructuredText literal blocks](basics.html#rst-literal-blocks), optionally in combination with the [`highlight`](directives.html#directive-highlight "highlight directive") directive;
- using the [`code-block`](directives.html#directive-code-block "code-block directive") directive;
- and using the [`literalinclude`](directives.html#directive-literalinclude "literalinclude directive") directive.

Doctest blocks can only be used to show interactive Python sessions, while the remaining three can be used for other languages. Of these three, literal blocks are useful when an entire document, or at least large sections of it, use code blocks with the same syntax and which should be styled in the same manner. On the other hand, the [`code-block`](directives.html#directive-code-block "code-block directive") directive makes more sense when you want more fine-tuned control over the styling of each block or when you have a document containing code blocks using multiple varied syntaxes. Finally, the [`literalinclude`](directives.html#directive-literalinclude "literalinclude directive") directive is useful for including entire code files in your documentation.

In all cases, Syntax highlighting is provided by [Pygments](https://pygments.org). When using literal blocks, this is configured using any [`highlight`](directives.html#directive-highlight "highlight directive") directives in the source file. When a `highlight` directive is encountered, it is used until the next `highlight` directive is encountered. If there is no `highlight` directive in the file, the global highlighting language is used. This defaults to `python` but can be configured using the [`highlight_language`](../configuration.html#confval-highlight_language) config value. The following values are supported:

- `none` (no highlighting)
- `default` (similar to `python3` but with a fallback to `none` without warning highlighting fails; the default when [`highlight_language`](../configuration.html#confval-highlight_language) isn‚Äôt set)
- `guess` (let Pygments guess the lexer based on contents, only works with certain well-recognizable languages)
- `python`
- `rest`
- `c`
- ‚Ä¶ and any other [lexer alias that Pygments supports](https://pygments.org/docs/lexers)

If highlighting with the selected language fails (i.e. Pygments emits an ‚ÄúError‚Äù token), the block is not highlighted in any way.

Important

The list of lexer aliases supported is tied to the Pygment version. If you want to ensure consistent highlighting, you should fix your version of Pygments.

.. highlight:: language[¬∂](directives.html#directive-highlight "Link to this definition")

Example:

```
.. highlight:: c
```

This language is used until the next `highlight` directive is encountered. As discussed previously, *language* can be any lexer alias supported by Pygments.

Options

:linenothreshold: *threshold (number (optional))*[¬∂](directives.html#directive-option-highlight-linenothreshold "Link to this definition")

Enable to generate line numbers for code blocks.

This option takes an optional number as threshold parameter. If any threshold given, the directive will produce line numbers only for the code blocks longer than N lines. If not given, line numbers will be produced for all of code blocks.

Example:

```
.. highlight:: python
   :linenothreshold: 5
```

:force: *(no value)*[¬∂](directives.html#directive-option-highlight-force "Link to this definition")

If given, minor errors on highlighting are ignored.

Added in version 2.1.

.. code-block:: \[language][¬∂](directives.html#directive-code-block "Link to this definition")

.. sourcecode:: \[language][¬∂](directives.html#directive-sourcecode "Link to this definition")

.. code:: \[language][¬∂](directives.html#directive-code "Link to this definition")

Example:

```
.. code-block:: ruby

   Some Ruby code.
```

The directive‚Äôs alias name [`sourcecode`](directives.html#directive-sourcecode "sourcecode directive") works as well. This directive takes a language name as an argument. It can be [any lexer alias supported by Pygments](https://pygments.org/docs/lexers/). If it is not given, the setting of [`highlight`](directives.html#directive-highlight "highlight directive") directive will be used. If not set, [`highlight_language`](../configuration.html#confval-highlight_language) will be used. To display a code example *inline* within other text, rather than as a separate block, you can use the [`code`](roles.html#role-code "code role") role instead.

Changed in version 2.0: The `language` argument becomes optional.

Options

:linenos: *(no value)*[¬∂](directives.html#directive-option-code-block-linenos "Link to this definition")

Enable to generate line numbers for the code block:

```
.. code-block:: ruby
   :linenos:

   Some more Ruby code.
```

:lineno-start: *number (number)*[¬∂](directives.html#directive-option-code-block-lineno-start "Link to this definition")

Set the first line number of the code block. If present, `linenos` option is also automatically activated:

```
.. code-block:: ruby
   :lineno-start: 10

   Some more Ruby code, with line numbering starting at 10.
```

Added in version 1.3.

:emphasize-lines: *line numbers (comma separated numbers)*[¬∂](directives.html#directive-option-code-block-emphasize-lines "Link to this definition")

Emphasize particular lines of the code block:

```
.. code-block:: python
   :emphasize-lines: 3,5

   def some_function():
       interesting = False
       print('This line is highlighted.')
       print('This one is not...')
       print('...but this one is.')
```

Added in version 1.1.

Changed in version 1.6.6: LaTeX supports the `emphasize-lines` option.

:force: *(no value)*[¬∂](directives.html#directive-option-code-block-force "Link to this definition")

Ignore minor errors on highlighting.

Added in version 2.1.

:caption: *caption of code block (text)*[¬∂](directives.html#directive-option-code-block-caption "Link to this definition")

Set a caption to the code block.

Added in version 1.3.

:name: *a label for hyperlink (text)*[¬∂](directives.html#directive-option-code-block-name "Link to this definition")

Define implicit target name that can be referenced by using [`ref`](../referencing.html#role-ref "ref role"). For example:

```
.. code-block:: python
   :caption: this.py
   :name: this-py

   print('Explicit is better than implicit.')
```

In order to cross-reference a code-block using either the [`ref`](../referencing.html#role-ref "ref role") or the [`numref`](../referencing.html#role-numref "numref role") role, it is necessary that both **name** and **caption** be defined. The argument of **name** can then be given to [`numref`](../referencing.html#role-numref "numref role") to generate the cross-reference. Example:

```
See :numref:`this-py` for an example.
```

When using [`ref`](../referencing.html#role-ref "ref role"), it is possible to generate a cross-reference with only **name** defined, provided an explicit title is given. Example:

```
See :ref:`this code snippet <this-py>` for an example.
```

Added in version 1.3.

:class: *class names (a list of class names separated by spaces)*[¬∂](directives.html#directive-option-code-block-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

Added in version 1.4.

:dedent: *number (number or no value)*[¬∂](directives.html#directive-option-code-block-dedent "Link to this definition")

Strip indentation characters from the code block. When number given, leading N characters are removed. When no argument given, leading spaces are removed via [`textwrap.dedent()`](https://docs.python.org/3/library/textwrap.html#textwrap.dedent "(in Python v3.13)"). For example:

```
.. code-block:: ruby
   :linenos:
   :dedent: 4

       some ruby code
```

Added in version 1.3.

Changed in version 3.5: Support automatic dedent.

.. literalinclude:: filename[¬∂](directives.html#directive-literalinclude "Link to this definition")

Longer displays of verbatim text may be included by storing the example text in an external file containing only plain text. The file may be included using the `literalinclude` directive. [\[3\]](directives.html#id10) For example, to include the Python source file `example.py`, use:

```
.. literalinclude:: example.py
```

The file name is usually relative to the current file‚Äôs path. However, if it is absolute (starting with `/`), it is relative to the top source directory.

General options

:class: *class names (a list of class names, separated by spaces)*[¬∂](directives.html#directive-option-literalinclude-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

Added in version 1.4.

:name: *label (text)*[¬∂](directives.html#directive-option-literalinclude-name "Link to this definition")

An implicit target name that can be referenced using [`ref`](../referencing.html#role-ref "ref role"). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

Added in version 1.3.

:caption: *caption (text)*[¬∂](directives.html#directive-option-literalinclude-caption "Link to this definition")

Add a caption above the included content. If no argument is given, the filename is used as the caption.

Added in version 1.3.

Options for formatting

:dedent: *number (number or no value)*[¬∂](directives.html#directive-option-literalinclude-dedent "Link to this definition")

Strip indentation characters from the included content. When a number is given, the leading N characters are removed. When no argument given, all common leading indentation is removed (using [`textwrap.dedent()`](https://docs.python.org/3/library/textwrap.html#textwrap.dedent "(in Python v3.13)")).

Added in version 1.3.

Changed in version 3.5: Support automatic dedent.

:tab-width: *N (number)*[¬∂](directives.html#directive-option-literalinclude-tab-width "Link to this definition")

Expand tabs to N spaces.

Added in version 1.0.

:encoding: *(text)*[¬∂](directives.html#directive-option-literalinclude-encoding "Link to this definition")

Explicitly specify the encoding of the file. This overwrites the default encoding ([`source_encoding`](../configuration.html#confval-source_encoding)). For example:

```
.. literalinclude:: example.txt
   :encoding: latin-1
```

Added in version 0.4.3.

:linenos: *(no value)*[¬∂](directives.html#directive-option-literalinclude-linenos "Link to this definition")

Show line numbers alongside the included content. By default, line numbers are counted from 1. This can be changed by the options `:lineno-start:` and `:lineno-match:`.

:lineno-start: *number (number)*[¬∂](directives.html#directive-option-literalinclude-lineno-start "Link to this definition")

Set line number for the first line to show. If given, this automatically activates `:linenos:`.

:lineno-match:[¬∂](directives.html#directive-option-literalinclude-lineno-match "Link to this definition")

When including only parts of a file and show the original line numbers. This is only allowed only when the selection consists of contiguous lines.

Added in version 1.3.

:emphasize-lines: *line numbers (comma separated numbers)*[¬∂](directives.html#directive-option-literalinclude-emphasize-lines "Link to this definition")

Emphasise particular lines of the included content. For example:

```
.. literalinclude:: example.txt
   :emphasize-lines: 1,2,4-6
```

:language: *language (text)*[¬∂](directives.html#directive-option-literalinclude-language "Link to this definition")

Select a highlighting language ([Pygments lexer](https://pygments.org/docs/lexers/)) different from the current file‚Äôs standard language (set by [`highlight`](directives.html#directive-highlight "highlight directive") or [`highlight_language`](../configuration.html#confval-highlight_language)).

:force: *(no value)*[¬∂](directives.html#directive-option-literalinclude-force "Link to this definition")

Ignore minor errors in highlighting.

Added in version 2.1.

Options for selecting the content to include

:pyobject: *object (text)*[¬∂](directives.html#directive-option-literalinclude-pyobject "Link to this definition")

For Python files, only include the specified class, function or method:

```
.. literalinclude:: example.py
   :pyobject: Timer.start
```

Added in version 0.6.

:lines: *line numbers (comma separated numbers)*[¬∂](directives.html#directive-option-literalinclude-lines "Link to this definition")

Specify exactly which lines to include:

```
.. literalinclude:: example.py
   :lines: 1,3,5-10,20-
```

This includes line 1, line 3, lines 5 to 10, and line 20 to the end.

Added in version 0.6.

:start-at: *text*[¬∂](directives.html#directive-option-literalinclude-start-at "Link to this definition")

:start-after: *text*[¬∂](directives.html#directive-option-literalinclude-start-after "Link to this definition")

:end-before: *text*[¬∂](directives.html#directive-option-literalinclude-end-before "Link to this definition")

:end-at: *text*[¬∂](directives.html#directive-option-literalinclude-end-at "Link to this definition")

Another way to control which part of the file is included is to use the `start-after` and `end-before` options (or only one of them). If `start-after` is given as a string option, only lines that follow the first line containing that string are included. If `end-before` is given as a string option, only lines that precede the first lines containing that string are included. The `start-at` and `end-at` options behave in a similar way, but the lines containing the matched string are included.

`start-after`/`start-at` and `end-before`/`end-at` can have same string. `start-after`/`start-at` filter lines before the line that contains the option string (`start-at` will keep the line). Then `end-before`/`end-at` filter lines after the line that contains the option string (`end-at` will keep the line and `end-before` skip the first line).

Added in version 0.6: Added the `start-after` and `end-before` options.

Added in version 1.5: Added the `start-at`, and `end-at` options.

Tip

To only select `[second-section]` of an INI file such as the following, use `:start-at: [second-section]` and `:end-before: [third-section]`:

```
[first-section]
var_in_first=true

[second-section]
var_in_second=true

[third-section]
var_in_third=true
```

These options can be useful when working with tag comments. Using `:start-after: [initialise]` and `:end-before: [initialised]` keeps the lines between between the two comments below:

```
if __name__ == "__main__":
    # [initialise]
    app.start(":8000")
    # [initialised]
```

When lines have been selected in any of the ways described above, the line numbers in `emphasize-lines` refer to these selected lines, counted consecutively starting from 1.

:prepend: *line (text)*[¬∂](directives.html#directive-option-literalinclude-prepend "Link to this definition")

Prepend a line before the included code. This can be useful for example when highlighting PHP code that doesn‚Äôt include the `<?php` or `?>` markers.

Added in version 1.0.

:append: *line (text)*[¬∂](directives.html#directive-option-literalinclude-append "Link to this definition")

Append a line after the included code. This can be useful for example when highlighting PHP code that doesn‚Äôt include the `<?php` or `?>` markers.

Added in version 1.0.

:diff: *filename*[¬∂](directives.html#directive-option-literalinclude-diff "Link to this definition")

Show the diff of two files. For example:

```
.. literalinclude:: example.txt
   :diff: example.txt.orig
```

This shows the diff between `example.txt` and `example.txt.orig` with unified diff format.

Added in version 1.3.

Changed in version 0.6: Added support for absolute filenames.

Changed in version 1.6: With both `start-after` and `lines` in use, the first line as per `start-after` is considered to be with line number `1` for `lines`.

## Glossary[¬∂](directives.html#glossary "Link to this heading")

.. glossary::[¬∂](directives.html#directive-glossary "Link to this definition")

This directive must contain a reStructuredText definition-list-like markup with terms and definitions. The definitions will then be referenceable with the [`term`](../referencing.html#role-term "term role") role. Example:

```
.. glossary::

   environment
      A structure where information about all documents under the root is
      saved, and used for cross-referencing.  The environment is pickled
      after the parsing stage, so that successive runs only need to read
      and parse new and changed documents.

   source directory
      The directory which, including its subdirectories, contains all
      source files for one Sphinx project.
```

In contrast to regular definition lists, *multiple* terms per entry are allowed, and inline markup is allowed in terms. You can link to all of the terms. For example:

```
.. glossary::

   term 1
   term 2
      Definition of both terms.
```

(When the glossary is sorted, the first term determines the sort order.)

If you want to specify ‚Äúgrouping key‚Äù for general index entries, you can put a ‚Äúkey‚Äù as ‚Äúterm : key‚Äù. For example:

```
.. glossary::

   term 1 : A
   term 2 : B
      Definition of both terms.
```

Note that ‚Äúkey‚Äù is used for grouping key as is. The ‚Äúkey‚Äù isn‚Äôt normalized; key ‚ÄúA‚Äù and ‚Äúa‚Äù become different groups. The whole characters in ‚Äúkey‚Äù is used instead of a first character; it is used for ‚ÄúCombining Character Sequence‚Äù and ‚ÄúSurrogate Pairs‚Äù grouping key.

In i18n situation, you can specify ‚Äúlocalized term : key‚Äù even if original text only have ‚Äúterm‚Äù part. In this case, translated ‚Äúlocalized term‚Äù will be categorized in ‚Äúkey‚Äù group.

Changed in version 1.1: Now supports multiple terms and inline markup in terms.

Changed in version 1.4: Index key for glossary term should be considered *experimental*.

Options

:sorted:[¬∂](directives.html#directive-option-glossary-sorted "Link to this definition")

Sort the entries alphabetically.

Added in version 0.6.

Changed in version 4.4: In internationalized documentation, sort according to translated terms.

## Meta-information markup[¬∂](directives.html#meta-information-markup "Link to this heading")

.. sectionauthor:: name &lt;email&gt;[¬∂](directives.html#directive-sectionauthor "Link to this definition")

Identifies the author of the current section. The argument should include the author‚Äôs name such that it can be used for presentation and email address. The domain name portion of the address should be lower case. Example:

```
.. sectionauthor:: Guido van Rossum <[email¬†protected]>
```

By default, this markup isn‚Äôt reflected in the output in any way (it helps keep track of contributions), but you can set the configuration value [`show_authors`](../configuration.html#confval-show_authors) to `True` to make them produce a paragraph in the output.

.. codeauthor:: name &lt;email&gt;[¬∂](directives.html#directive-codeauthor "Link to this definition")

The [`codeauthor`](directives.html#directive-codeauthor "codeauthor directive") directive, which can appear multiple times, names the authors of the described code, just like [`sectionauthor`](directives.html#directive-sectionauthor "sectionauthor directive") names the author(s) of a piece of documentation. It too only produces output if the [`show_authors`](../configuration.html#confval-show_authors) configuration value is `True`.

## Index-generating markup[¬∂](directives.html#index-generating-markup "Link to this heading")

Sphinx automatically creates index entries from all object descriptions (like functions, classes or attributes) like discussed in [Domains](../domains/index.html).

However, there is also explicit markup available, to make the index more comprehensive and enable index entries in documents where information is not mainly contained in information units, such as the language reference.

.. index:: &lt;entries&gt;[¬∂](directives.html#directive-index "Link to this definition")

This directive contains one or more index entries. Each entry consists of a type and a value, separated by a colon.

For example:

```
.. index::
   single: execution; context
   pair: module; __main__
   pair: module; sys
   triple: module; search; path
   seealso: scope

The execution context
---------------------

...
```

This directive contains five entries, which will be converted to entries in the generated index which link to the exact location of the index statement (or, in case of offline media, the corresponding page number).

Since index directives generate cross-reference targets at their location in the source, it makes sense to put them *before* the thing they refer to ‚Äì e.g. a heading, as in the example above.

The possible entry types are:

single

Creates a single index entry. Can be made a sub-entry by separating the sub-entry text with a semicolon (this notation is also used below to describe what entries are created). Examples:

```
.. index:: single: execution
           single: execution; context
```

- `single: execution` creates an index entry labelled `execution`.
- `single: execution; context` creates an sub-entry of `execution` labelled `context`.

pair

A shortcut to create two index entries. The pair of values must be separated by a semicolon. Example:

```
.. index:: pair: loop; statement
```

This would create two index entries; `loop; statement` and `statement; loop`.

triple

A shortcut to create three index entries. All three values must be separated by a semicolon. Example:

```
.. index:: triple: module; search; path
```

This would create three index entries; `module; search path`, `search; path, module`, and `path; module search`.

see

A shortcut to create an index entry that refers to another entry. Example:

```
.. index:: see: entry; other
```

This would create an index entry referring from `entry` to `other` (i.e. ‚Äòentry‚Äô: See ‚Äòother‚Äô).

seealso

Like `see`, but inserts ‚Äòsee also‚Äô instead of ‚Äòsee‚Äô.

module, keyword, operator, object, exception, statement, builtin

These **deprecated** shortcuts all create two index entries. For example, `module: hashlib` creates the entries `module; hashlib` and `hashlib; module`.

Deprecated since version 1.0: These Python-specific entry types are deprecated.

Changed in version 7.1: Removal version set to Sphinx 9.0. Using these entry types will now emit warnings with the `index` category.

You can mark up ‚Äúmain‚Äù index entries by prefixing them with an exclamation mark. The references to ‚Äúmain‚Äù entries are emphasized in the generated index. For example, if two pages contain

```
.. index:: Python
```

and one page contains

```
.. index:: ! Python
```

then the backlink to the latter page is emphasized among the three backlinks.

For index directives containing only ‚Äúsingle‚Äù entries, there is a shorthand notation:

```
.. index:: BNF, grammar, syntax, notation
```

This creates four index entries.

Changed in version 1.1: Added `see` and `seealso` types, as well as marking main entries.

Options

:name: *a label for hyperlink (text)*[¬∂](directives.html#directive-option-index-name "Link to this definition")

Define implicit target name that can be referenced by using [`ref`](../referencing.html#role-ref "ref role"). For example:

```
.. index:: Python
   :name: py-index
```

Added in version 3.0.

:index:[¬∂](directives.html#role-index "Link to this definition")

While the [`index`](directives.html#directive-index "index directive") directive is a block-level markup and links to the beginning of the next paragraph, there is also a corresponding role that sets the link target directly where it is used.

The content of the role can be a simple phrase, which is then kept in the text and used as an index entry. It can also be a combination of text and index entry, styled like with explicit targets of cross-references. In that case, the ‚Äútarget‚Äù part can be a full entry as described for the directive above. For example:

```
This is a normal reStructuredText :index:`paragraph` that contains several
:index:`index entries <pair: index; entry>`.
```

Added in version 1.1.

## Including content based on tags[¬∂](directives.html#including-content-based-on-tags "Link to this heading")

.. only:: &lt;expression&gt;[¬∂](directives.html#directive-only "Link to this definition")

Include the content of the directive only if the *expression* is true. The expression should consist of tags, like this:

```
.. only:: html and draft
```

Undefined tags are false, defined tags are true (tags can be defined via the [`--tag`](../../man/sphinx-build.html#cmdoption-sphinx-build-t) command-line option or within `conf.py`, see [here](../configuration.html#conf-tags)). Boolean expressions (like `(latex or html) and draft`) are supported and may use parentheses.

The *format* and the *name* of the current builder (`html`, `latex` or `text`) are always set as a tag [\[4\]](directives.html#id11). To make the distinction between format and name explicit, they are also added with the prefix `format_` and `builder_`, e.g. the epub builder defines the tags `html`, `epub`, `format_html` and `builder_epub`.

These standard tags are set *after* the configuration file is read, so they are not available there.

All tags must follow the standard Python identifier syntax as set out in the [Identifiers and keywords](https://docs.python.org/3/reference/lexical_analysis.html#identifiers) documentation. That is, a tag expression may only consist of tags that conform to the syntax of Python variables. In ASCII, this consists of the uppercase and lowercase letters `A` through `Z`, the underscore `_` and, except for the first character, the digits `0` through `9`.

Added in version 0.6.

Changed in version 1.2: Added the name of the builder and the prefixes.

Warning

This directive is designed to control only content of document. It could not control sections, labels and so on.

## Tables[¬∂](directives.html#tables "Link to this heading")

Use [reStructuredText tables](basics.html#rst-tables), i.e. either

- grid table syntax ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#grid-tables)),
- simple table syntax ([ref](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#simple-tables)),
- [csv-table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#csv-table) syntax,
- or [list-table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#list-table) syntax.

The [table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table) directive serves as optional wrapper of the *grid* and *simple* syntaxes.

They work fine in HTML output, but rendering tables to LaTeX is complex. Check the [`latex_table_style`](../configuration.html#confval-latex_table_style).

Changed in version 1.6: Merged cells (multi-row, multi-column, both) from grid tables containing complex contents such as multiple paragraphs, blockquotes, lists, literal blocks, will render correctly to LaTeX output.

.. tabularcolumns:: column spec[¬∂](directives.html#directive-tabularcolumns "Link to this definition")

This directive influences only the LaTeX output for the next table in source. The mandatory argument is a column specification (known as an ‚Äúalignment preamble‚Äù in LaTeX idiom). Please refer to a LaTeX documentation, such as the [wiki page](https://en.wikibooks.org/wiki/LaTeX/Tables), for basics of such a column specification.

Added in version 0.3.

Note

[`tabularcolumns`](directives.html#directive-tabularcolumns "tabularcolumns directive") conflicts with `:widths:` option of table directives. If both are specified, `:widths:` option will be ignored.

Sphinx will render tables with more than 30 rows with `longtable`. Besides the `l`, `r`, `c` and `p{width}` column specifiers, one can also use `\X{a}{b}` (new in version 1.5) which configures the column width to be a fraction `a/b` of the total line width and `\Y{f}` (new in version 1.6) where `f` is a decimal: for example `\Y{0.2}` means that the column will occupy `0.2` times the line width.

When this directive is used for a table with at most 30 rows, Sphinx will render it with `tabulary`. One can then use specific column types `L` (left), `R` (right), `C` (centered) and `J` (justified). They have the effect of a `p{width}` (i.e. each cell is a LaTeX `\parbox`) with the specified internal text alignment and an automatically computed `width`.

Warning

- Cells that contain list-like elements such as object descriptions, blockquotes or any kind of lists are not compatible with the `LRCJ` column types. The column type must then be some `p{width}` with an explicit `width` (or `\X{a}{b}` or `\Y{f}`).
- Literal blocks do not work with `tabulary` at all. Sphinx will fall back to `tabular` or `longtable` environments and generate a suitable column specification.

In absence of the [`tabularcolumns`](directives.html#directive-tabularcolumns "tabularcolumns directive") directive, and for a table with at most 30 rows and no problematic cells as described in the above warning, Sphinx uses `tabulary` and the `J` column-type for every column.

Changed in version 1.6: Formerly, the `L` column-type was used (text is flushed-left). To revert to this, include `\newcolumntype{T}{L}` in the LaTeX preamble, as in fact Sphinx uses `T` and sets it by default to be an alias of `J`.

Hint

A frequent issue with `tabulary` is that columns with little contents appear to be ‚Äúsqueezed‚Äù. One can add to the LaTeX preamble for example `\setlength{\tymin}{40pt}` to ensure a minimal column width of `40pt`, the `tabulary` default of `10pt` being too small.

Hint

To force usage of the LaTeX `longtable` environment pass `longtable` as a `:class:` option to [table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table), [csv-table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#csv-table), or [list-table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#list-table). Use [rst-class](basics.html#rstclass) for other tables.

## Math[¬∂](directives.html#math "Link to this heading")

The input language for mathematics is LaTeX markup. This is the de-facto standard for plain-text math notation and has the added advantage that no further translation is necessary when building LaTeX output.

Keep in mind that when you put math markup in **Python docstrings** read by [`autodoc`](../extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings."), you either have to double all backslashes, or use Python raw strings (`r"raw"`).

.. math::[¬∂](directives.html#directive-math "Link to this definition")

Directive for displayed math (math that takes the whole line for itself).

The directive supports multiple equations, which should be separated by a blank line:

```
.. math::

   (a + b)^2 = a^2 + 2ab + b^2

   (a - b)^2 = a^2 - 2ab + b^2
```

In addition, each single equation is set within a `split` environment, which means that you can have multiple aligned lines in an equation, aligned at `&` and separated by `\\`:

```
.. math::

   (a + b)^2  &=  (a + b)(a + b) \\
              &=  a^2 + 2ab + b^2
```

For more details, look into the documentation of the [AmSMath LaTeX package](https://www.ams.org/publications/authors/tex/amslatex).

When the math is only one line of text, it can also be given as a directive argument:

```
.. math:: (a + b)^2 = a^2 + 2ab + b^2
```

Options

:class: *class names (a list of class names, separated by spaces)*[¬∂](directives.html#directive-option-math-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

:name: *label (text)*[¬∂](directives.html#directive-option-math-name "Link to this definition")

An implicit target name that can be referenced using [`ref`](../referencing.html#role-ref "ref role"). This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

:label: *label (text)*[¬∂](directives.html#directive-option-math-label "Link to this definition")

Normally, equations are not numbered. If you want your equation to get a number, use the `label` option. When given, it selects an internal label for the equation, by which it can be cross-referenced, and causes an equation number to be issued. See [`eq`](roles.html#role-eq "eq role") for an example. The numbering style depends on the output format.

:no-wrap:[¬∂](directives.html#directive-option-math-no-wrap "Link to this definition")

Prevent wrapping of the given math in a math environment. When you give this option, you must make sure yourself that the math is properly set up. For example:

```
.. math::
   :no-wrap:

   \begin{eqnarray}
      y    & = & ax^2 + bx + c \\
      f(x) & = & x^2 + 2xy + y^2
   \end{eqnarray}
```

Changed in version 8.2: The directive option `:nowrap:` was renamed to `:no-wrap:`.

The previous name has been retained as an alias, but will be deprecated and removed in a future version of Sphinx.

See also

[Math support for HTML outputs in Sphinx](../extensions/math.html#math-support)

Rendering options for math with HTML builders.

[`latex_engine`](../configuration.html#confval-latex_engine)

Explains how to configure LaTeX builder to support Unicode literals in math mark-up.

## Grammar production displays[¬∂](directives.html#grammar-production-displays "Link to this heading")

Special markup is available for displaying the productions of a formal grammar. The markup is simple and does not attempt to model all aspects of [BNF](https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form) (or any derived forms), but provides enough to allow context-free grammars to be displayed in a way that causes uses of a symbol to be rendered as hyperlinks to the definition of the symbol. There is this directive:

.. productionlist:: \[production\_group][¬∂](directives.html#directive-productionlist "Link to this definition")

This directive is used to enclose a group of productions. Each production is given on a single line and consists of a name, separated by a colon from the following definition. If the definition spans multiple lines, each continuation line must begin with a colon placed at the same column as in the first line. Blank lines are not allowed within `productionlist` directive arguments.

The optional *production\_group* directive argument serves to distinguish different sets of production lists that belong to different grammars. Multiple production lists with the same *production\_group* thus define rules in the same scope. This can also be used to split the description of a long or complex grammar accross multiple `productionlist` directives with the same *production\_group*.

The definition can contain token names which are marked as interpreted text, (e.g. ‚Äú``sum ::= `integer` "+" `integer` ``‚Äù), to generate cross-references to the productions of these tokens. Such cross-references implicitly refer to productions from the current group. To reference a production from another grammar, the token name must be prefixed with the group name and a colon, e.g. ‚Äú`other-group:sum`‚Äù. If the group of the token should not be shown in the production, it can be prefixed by a tilde, e.g., ‚Äú`~other-group:sum`‚Äù. To refer to a production from an unnamed grammar, the token should be prefixed by a colon, e.g., ‚Äú`:sum`‚Äù. No further reStructuredText parsing is done in the production, so that special characters (`*`, `|`, etc) do not need to be escaped.

Token productions can be cross-referenced outwith the production list by using the [`token`](../referencing.html#role-token "token role") role. If you have used a *production\_group* argument, the token name must be prefixed with the group name and a colon, e.g., ‚Äú`my_group:sum`‚Äù instead of just ‚Äú`sum`‚Äù. Standard [cross-referencing modifiers](../referencing.html#xref-modifiers) may be used with the `:token:` role, such as custom link text and suppressing the group name with a tilde (`~`).

The following is an example taken from the Python Reference Manual:

```
.. productionlist::
   try_stmt: try1_stmt | try2_stmt
   try1_stmt: "try" ":" `suite`
            : ("except" [`expression` ["," `target`]] ":" `suite`)+
            : ["else" ":" `suite`]
            : ["finally" ":" `suite`]
   try2_stmt: "try" ":" `suite`
            : "finally" ":" `suite`
```

Footnotes

\[[1](directives.html#id1)]

The LaTeX writer only refers the `maxdepth` option of first toctree directive in the document.

\[[2](directives.html#id2)]

A note on available globbing syntax: you can use the standard shell constructs `*`, `?`, `[...]` and `[!...]` with the feature that these all don‚Äôt match slashes. A double star `**` can be used to match any sequence of characters *including* slashes.

\[[3](directives.html#id4)]

There is a standard `.. include` directive, but it raises errors if the file is not found. This one only emits a warning.

\[[4](directives.html#id6)]

For most builders name and format are the same. At the moment only builders derived from the html builder distinguish between the builder format and the builder name.

Note that the current builder tag is not available in `conf.py`, it is only available after the builder is initialized.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [reStructuredText](index.html) ¬ª

### On this page







# MOVED: Domains[¬∂](domains.html#moved-domains "Link to this heading")

## MOVED: Basic Markup[¬∂](domains.html#moved-basic-markup "Link to this heading")

See [Domains](../domains/index.html).

## MOVED: Python Domain[¬∂](domains.html#moved-python-domain "Link to this heading")

See [The Python Domain](../domains/python.html).

## MOVED: C Domain[¬∂](domains.html#moved-c-domain "Link to this heading")

See [The C Domain](../domains/c.html).

## MOVED: C++ Domain[¬∂](domains.html#id1 "Link to this heading")

See [The C++ Domain](../domains/cpp.html).

## MOVED: Standard Domain[¬∂](domains.html#moved-standard-domain "Link to this heading")

See [The Standard Domain](../domains/standard.html).

## MOVED: JavaScript Domain[¬∂](domains.html#moved-javascript-domain "Link to this heading")

See [The JavaScript Domain](../domains/javascript.html).

## MOVED: reStructuredText Domain[¬∂](domains.html#moved-restructuredtext-domain "Link to this heading")

See [The reStructuredText Domain](../domains/restructuredtext.html).

## MOVED: Math Domain[¬∂](domains.html#moved-math-domain "Link to this heading")

See [The Mathematics Domain](../domains/mathematics.html).

## MOVED: More domains[¬∂](domains.html#moved-more-domains "Link to this heading")

See [Domains](../domains/index.html).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [reStructuredText](index.html) ¬ª

### On this page







# Field Lists[¬∂](field-lists.html#field-lists "Link to this heading")

[As previously discussed](basics.html#rst-field-lists), field lists are sequences of fields marked up like this:

```
:fieldname: Field content
```

Sphinx extends standard docutils behavior for field lists and adds some extra functionality that is covered in this section.

Note

The values of field lists will be parsed as strings. You cannot use Python collections such as lists or dictionaries.

## File-wide metadata[¬∂](field-lists.html#file-wide-metadata "Link to this heading")

A field list near the top of a file is normally parsed by docutils as the *docinfo* and shown on the page. However, in Sphinx, a field list preceding any other markup is moved from the *docinfo* to the Sphinx environment as document metadata, and is not displayed in the output.

Note

A field list appearing after the document title *will* be part of the *docinfo* as normal and will be displayed in the output.

## Special metadata fields[¬∂](field-lists.html#special-metadata-fields "Link to this heading")

Sphinx provides custom behavior for bibliographic fields compared to docutils.

At the moment, these metadata fields are recognized:

`tocdepth`

The maximum depth for a table of contents of this file.

```
:tocdepth: 2
```

Note

This metadata affects the depth of the local toctree. But it does not affect the depth of the *global* toctree. So this does not change the sidebar of themes that use the global toctree.

Added in version 0.4.

`nocomments`

If set, the web application won‚Äôt display a comment form for a page generated from this source file.

```
:nocomments:
```

`orphan`

If set, warnings about this file not being included in any toctree will be suppressed.

```
:orphan:
```

Added in version 1.0.

`no-search`

Disable full text search for this document.

```
:no-search:
```

Note

The `:no-search:` option only disables full text search, meaning that object search will still be available even if `:no-search:` is set.

Added in version 3.0.

Changed in version 7.3: The file-wide metadata option `:nosearch:` was renamed to `:no-search:`. The previous name has been retained as an alias, but will be deprecated and removed in a future version of Sphinx.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [reStructuredText](index.html) ¬ª

### On this page










# Roles[¬∂](roles.html#roles "Link to this heading")

Sphinx uses interpreted text roles to insert semantic markup into documents. They are written as ``:rolename:`content` ``.

Note

The default role (`` `content` ``) has no special meaning by default. You are free to use it for anything you like, e.g. variable names; use the [`default_role`](../configuration.html#confval-default_role) config value to set it to a known role ‚Äì the [`any`](../referencing.html#role-any "any role") role to find anything or the [`py:obj`](../domains/python.html#role-py-obj "py:obj role") role to find Python objects are very useful for this.

See [Domains](../domains/index.html) for roles added by domains.

## Cross-references[¬∂](roles.html#cross-references "Link to this heading")

See [Cross-references](../referencing.html).

Cross-reference roles include:


## Inline code highlighting[¬∂](roles.html#inline-code-highlighting "Link to this heading")

:code:[¬∂](roles.html#role-code "Link to this definition")

An *inline* code example. When used directly, this role just displays the text *without* syntax highlighting, as a literal.

```
By default, inline code such as :code:`1 + 2` just displays without
highlighting.
```

Displays: By default, inline code such as `1 + 2` just displays without highlighting.

Unlike the [`code-block`](directives.html#directive-code-block "code-block directive") directive, this role does not respect the default language set by the [`highlight`](directives.html#directive-highlight "highlight directive") directive.

To enable syntax highlighting, you must first use the Docutils [role](https://docutils.sourceforge.io/docs/ref/rst/directives.html#role) directive to define a custom role associated with a specific language:

```
.. role:: python(code)
   :language: python

In Python, :python:`1 + 2` is equal to :python:`3`.
```

To display a multi-line code example, use the [`code-block`](directives.html#directive-code-block "code-block directive") directive instead.

## Math[¬∂](roles.html#math "Link to this heading")

:math:[¬∂](roles.html#role-math "Link to this definition")

Role for inline math. Use like this:

```
Since Pythagoras, we know that :math:`a^2 + b^2 = c^2`.
```

Displays: Since Pythagoras, we know that \\(a^2 + b^2 = c^2\\).

:eq:[¬∂](roles.html#role-eq "Link to this definition")

Same as [`math:numref`](../domains/mathematics.html#role-math-numref "math:numref role").

## Other semantic markup[¬∂](roles.html#other-semantic-markup "Link to this heading")

The following roles don‚Äôt do anything special except formatting the text in a different style:

:abbr:[¬∂](roles.html#role-abbr "Link to this definition")

An abbreviation. If the role content contains a parenthesized explanation, it will be treated specially: it will be shown in a tool-tip in HTML, and output only once in LaTeX.

For example: ``:abbr:`LIFO (last-in, first-out)` `` displays LIFO.

Added in version 0.6.

:command:[¬∂](roles.html#role-command "Link to this definition")

The name of an OS-level command, such as `rm`.

For example: **rm**

:dfn:[¬∂](roles.html#role-dfn "Link to this definition")

Mark the defining instance of a term in the text. (No index entries are generated.)

For example: *binary mode*

:file:[¬∂](roles.html#role-file "Link to this definition")

The name of a file or directory. Within the contents, you can use curly braces to indicate a ‚Äúvariable‚Äù part, for example:

```
... is installed in :file:`/usr/lib/python3.{x}/site-packages` ...
```

Displays: ‚Ä¶ is installed in `/usr/lib/python3.x/site-packages` ‚Ä¶

In the built documentation, the `x` will be displayed differently to indicate that it is to be replaced by the Python minor version.

:guilabel:[¬∂](roles.html#role-guilabel "Link to this definition")

Labels presented as part of an interactive user interface should be marked using `guilabel`. This includes labels from text-based interfaces such as those created using [`curses`](https://docs.python.org/3/library/curses.html#module-curses "(in Python v3.13)") or other text-based libraries. Any label used in the interface should be marked with this role, including button labels, window titles, field names, menu and menu selection names, and even values in selection lists.

Changed in version 1.0: An accelerator key for the GUI label can be included using an ampersand; this will be stripped and displayed underlined in the output (for example: ``:guilabel:`&Cancel` `` displays Cancel). To include a literal ampersand, double it.

:kbd:[¬∂](roles.html#role-kbd "Link to this definition")

Mark a sequence of keystrokes. What form the key sequence takes may depend on platform- or application-specific conventions. When there are no relevant conventions, the names of modifier keys should be spelled out, to improve accessibility for new users and non-native speakers. For example, an *xemacs* key sequence may be marked like ``:kbd:`C-x C-f` ``, but without reference to a specific application or platform, the same sequence should be marked as ``:kbd:`Control-x Control-f` ``, displaying `C`-`x` `C`-`f` and `Control`-`x` `Control`-`f` respectively.

:mailheader:[¬∂](roles.html#role-mailheader "Link to this definition")

The name of an RFC 822-style mail header. This markup does not imply that the header is being used in an email message, but can be used to refer to any header of the same ‚Äústyle.‚Äù This is also used for headers defined by the various MIME specifications. The header name should be entered in the same way it would normally be found in practice, with the camel-casing conventions being preferred where there is more than one common usage. For example: ``:mailheader:`Content-Type` `` displays *Content-Type*.

:makevar:[¬∂](roles.html#role-makevar "Link to this definition")

The name of a **make** variable.

For example: **help**

:manpage:[¬∂](roles.html#role-manpage "Link to this definition")

A reference to a Unix manual page including the section, e.g. ``:manpage:`ls(1)` `` displays *ls(1)*. Creates a hyperlink to an external site rendering the manpage if [`manpages_url`](../configuration.html#confval-manpages_url) is defined.

Changed in version 7.3: Allow specifying a target with `<>`, like hyperlinks. For example, ``:manpage:`blah <ls(1)>` `` displays *blah*.

:menuselection:[¬∂](roles.html#role-menuselection "Link to this definition")

Menu selections should be marked using the `menuselection` role. This is used to mark a complete sequence of menu selections, including selecting submenus and choosing a specific operation, or any subsequence of such a sequence. The names of individual selections should be separated by `-->`.

For example, to mark the selection ‚ÄúStart &gt; Programs‚Äù, use this markup:

```
:menuselection:`Start --> Programs`
```

Displays: Start ‚Ä£ Programs

When including a selection that includes some trailing indicator, such as the ellipsis some operating systems use to indicate that the command opens a dialog, the indicator should be omitted from the selection name.

`menuselection` also supports ampersand accelerators just like [`guilabel`](roles.html#role-guilabel "guilabel role").

:mimetype:[¬∂](roles.html#role-mimetype "Link to this definition")

The name of a MIME type, or a component of a MIME type (the major or minor portion, taken alone).

For example: *text/plain*

:newsgroup:[¬∂](roles.html#role-newsgroup "Link to this definition")

The name of a Usenet newsgroup.

For example: *comp.lang.python*

:program:[¬∂](roles.html#role-program "Link to this definition")

The name of an executable program. This may differ from the file name for the executable for some platforms. In particular, the `.exe` (or other) extension should be omitted for Windows programs.

For example: **curl**

:regexp:[¬∂](roles.html#role-regexp "Link to this definition")

A regular expression. Quotes should not be included.

For example: `([abc])+`

:samp:[¬∂](roles.html#role-samp "Link to this definition")

A piece of literal text, such as code. Within the contents, you can use curly braces to indicate a ‚Äúvariable‚Äù part, as in [`file`](roles.html#role-file "file role"). For example, in ``:samp:`print(1+{variable})` ``, the part `variable` would be emphasized: `print(1+variable)`

If you don‚Äôt need the ‚Äúvariable part‚Äù indication, use the standard [`code`](roles.html#role-code "code role") role instead.

Changed in version 1.8: Allowed to escape curly braces with double backslash. For example, in ``:samp:`print(f"answer=\\{1+{variable}*2\\}")` ``, the part `variable` would be emphasized and the escaped curly braces would be displayed: `print(f"answer={1+variable*2}")`

There is also an [`index`](directives.html#role-index "index role") role to generate index entries.

The following roles generate external links:

:cve:[¬∂](roles.html#role-cve "Link to this definition")

A reference to a [Common Vulnerabilities and Exposures](https://www.cve.org/) record. This generates appropriate index entries. The text ‚ÄúCVE *number*‚Äú is generated; with a link to an online copy of the specified CVE. You can link to a specific section by using ``:cve:`number#anchor` ``.

For example: [**CVE 2020-10735**](https://www.cve.org/CVERecord?id=CVE-2020-10735)

Added in version 8.1.

:cwe:[¬∂](roles.html#role-cwe "Link to this definition")

A reference to a [Common Weakness Enumeration](https://cwe.mitre.org/). This generates appropriate index entries. The text ‚ÄúCWE *number*‚Äú is generated; in the HTML output, with a link to an online copy of the specified CWE. You can link to a specific section by using ``:cwe:`number#anchor` ``.

For example: [**CWE 787**](https://cwe.mitre.org/data/definitions/787.html)

Added in version 8.1.

:pep:[¬∂](roles.html#role-pep "Link to this definition")

A reference to a Python Enhancement Proposal. This generates appropriate index entries. The text ‚ÄúPEP *number*‚Äú is generated; in the HTML output, this text is a hyperlink to an online copy of the specified PEP. You can link to a specific section by saying ``:pep:`number#anchor` ``.

For example: [**PEP 8**](https://peps.python.org/pep-0008/)

:rfc:[¬∂](roles.html#role-rfc "Link to this definition")

A reference to an Internet Request for Comments. This generates appropriate index entries. The text ‚ÄúRFC *number*‚Äú is generated; in the HTML output, this text is a hyperlink to an online copy of the specified RFC. You can link to a specific section by saying ``:rfc:`number#anchor` ``.

For example: [**RFC 2324**](https://datatracker.ietf.org/doc/html/rfc2324.html)

Note that there are no special roles for including hyperlinks as you can use the standard reStructuredText markup for that purpose.

## Substitutions[¬∂](roles.html#substitutions "Link to this heading")

The documentation system provides some substitutions that are defined by default. They are set in the build configuration file.

|release|

Replaced by the project release the documentation refers to. This is meant to be the full version string including alpha/beta/release candidate tags, e.g. `2.5.2b3`. Set by [`release`](../configuration.html#confval-release).

|version|

Replaced by the project version the documentation refers to. This is meant to consist only of the major and minor version parts, e.g. `2.5`, even for version 2.5.1. Set by [`version`](../configuration.html#confval-version).

|today|

Replaced by either today‚Äôs date (the date on which the document is read), or the date set in the build configuration file. Normally has the format `April 14, 2007`. Set by [`today_fmt`](../configuration.html#confval-today_fmt) and [`today`](../configuration.html#confval-today).

|translation progress|

Replaced by the translation progress of the document. This substitution is intended for use by document translators as a marker for the translation progress of the document.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# Extensions[¬∂](index.html#extensions "Link to this heading")

Since many projects will need special features in their documentation, Sphinx allows adding ‚Äúextensions‚Äù to the build process, each of which can modify almost any aspect of document processing.

This chapter describes the extensions bundled with Sphinx. For the API documentation on writing your own extension, refer to [Sphinx API](../../extdev/index.html#dev-extensions).

## Built-in extensions[¬∂](index.html#built-in-extensions "Link to this heading")

These extensions are built in and can be activated by respective entries in the [`extensions`](../configuration.html#confval-extensions) configuration value:


## Third-party extensions[¬∂](index.html#third-party-extensions "Link to this heading")

You can find several extensions contributed by users in the [sphinx-contrib](https://github.com/sphinx-contrib/) organization. If you wish to include your extension in this organization, simply follow the instructions provided in the [github-administration](https://github.com/sphinx-contrib/github-administration) project. This is optional and there are several extensions hosted elsewhere. The [awesome-sphinxdoc](https://github.com/yoloseem/awesome-sphinxdoc) and [sphinx-extensions](https://sphinx-extensions.readthedocs.io/en/latest/) projects are both curated lists of Sphinx packages, and many packages use the [Framework :: Sphinx :: Extension](https://pypi.org/search/?c=Framework%20%3A%3A%20Sphinx%20%3A%3A%20Extension) and [Framework :: Sphinx :: Theme](https://pypi.org/search/?c=Framework%20%3A%3A%20Sphinx%20%3A%3A%20Theme) trove classifiers for Sphinx extensions and themes, respectively.

### Where to put your own extensions?[¬∂](index.html#where-to-put-your-own-extensions "Link to this heading")

Extensions local to a project should be put within the project‚Äôs directory structure. Set Python‚Äôs module search path, `sys.path`, accordingly so that Sphinx can find them. For example, if your extension `foo.py` lies in the `exts` subdirectory of the project root, put into `conf.py`:

```
import sys
from pathlib import Path

sys.path.append(str(Path('exts').resolve()))

extensions = ['foo']
```

You can also install extensions anywhere else on `sys.path`, e.g. in the `site-packages` directory.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# [`sphinx.ext.apidoc`](apidoc.html#module-sphinx.ext.apidoc "sphinx.ext.apidoc: Generate API documentation from Python modules") ‚Äì Generate API documentation from Python packages[¬∂](apidoc.html#module-sphinx.ext.apidoc "Link to this heading")

Added in version 8.2.

[`sphinx.ext.apidoc`](apidoc.html#module-sphinx.ext.apidoc "sphinx.ext.apidoc: Generate API documentation from Python modules") is a tool for automatic generation of Sphinx sources from Python packages. It provides the **sphinx-apidoc** command-line tool as an extension, allowing it to be run during the Sphinx build process.

The extension writes generated source files to a provided directory, which are then read by Sphinx using the [`sphinx.ext.autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension.

Warning

[`sphinx.ext.apidoc`](apidoc.html#module-sphinx.ext.apidoc "sphinx.ext.apidoc: Generate API documentation from Python modules") generates source files that use [`sphinx.ext.autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") to document all found modules. If any modules have side effects on import, these will be executed by `autodoc` when **sphinx-build** is run.

If you document scripts (as opposed to library modules), make sure their main routine is protected by an `if __name__ == '__main__'` condition.

## Configuration[¬∂](apidoc.html#configuration "Link to this heading")

The apidoc extension uses the following configuration values:

apidoc\_modules[¬∂](apidoc.html#confval-apidoc_modules "Link to this definition")

Type:

`Sequence[dict[str, str | int | bool | Sequence[str] | Set[str]]`

Default:

`()`

A list or sequence of dictionaries describing modules to document. If a value is left unspecified in any dictionary, the general configuration value is used as the default.

For example:

```
apidoc_modules = [
    {'path': 'path/to/module', 'destination': 'source/'},
    {
        'path': 'path/to/another_module',
        'destination': 'source/',
        'exclude_patterns': ['**/test*'],
        'max_depth': 4,
        'follow_links': False,
        'separate_modules': False,
        'include_private': False,
        'no_headings': False,
        'module_first': False,
        'implicit_namespaces': False,
        'automodule_options': {
            'members', 'show-inheritance', 'undoc-members'
        },
    },
]
```

Valid keys are:

`'path'`

The path to the module to document (**required**). This must be absolute or relative to the configuration directory.

`'destination'`

The output directory for generated files (**required**). This must be relative to the source directory, and will be created if it does not exist.

`'exclude_patterns'`

See [`apidoc_exclude_patterns`](apidoc.html#confval-apidoc_exclude_patterns).

`'max_depth'`

See [`apidoc_max_depth`](apidoc.html#confval-apidoc_max_depth).

`'follow_links'`

See [`apidoc_follow_links`](apidoc.html#confval-apidoc_follow_links).

`'separate_modules'`

See [`apidoc_separate_modules`](apidoc.html#confval-apidoc_separate_modules).

`'include_private'`

See [`apidoc_include_private`](apidoc.html#confval-apidoc_include_private).

`'no_headings'`

See [`apidoc_no_headings`](apidoc.html#confval-apidoc_no_headings).

`'module_first'`

See [`apidoc_module_first`](apidoc.html#confval-apidoc_module_first).

`'implicit_namespaces'`

See [`apidoc_implicit_namespaces`](apidoc.html#confval-apidoc_implicit_namespaces).

`'automodule_options'`

See [`apidoc_automodule_options`](apidoc.html#confval-apidoc_automodule_options).

apidoc\_exclude\_patterns[¬∂](apidoc.html#confval-apidoc_exclude_patterns "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A sequence of patterns to exclude from generation. These may be literal paths or [`fnmatch`](https://docs.python.org/3/library/fnmatch.html#module-fnmatch "(in Python v3.13)")-style patterns.

apidoc\_max\_depth[¬∂](apidoc.html#confval-apidoc_max_depth "Link to this definition")

Type:

`int`

Default:

`4`

The maximum depth of submodules to show in the generated table of contents.

apidoc\_follow\_links[¬∂](apidoc.html#confval-apidoc_follow_links "Link to this definition")

Type:

`bool`

Default:

`False`

Follow symbolic links.

apidoc\_separate\_modules[¬∂](apidoc.html#confval-apidoc_separate_modules "Link to this definition")

Type:

`bool`

Default:

`False`

Put documentation for each module on an individual page.

apidoc\_include\_private[¬∂](apidoc.html#confval-apidoc_include_private "Link to this definition")

Type:

`bool`

Default:

`False`

Generate documentation for ‚Äò\_private‚Äô modules with leading underscores.

apidoc\_no\_headings[¬∂](apidoc.html#confval-apidoc_no_headings "Link to this definition")

Type:

`bool`

Default:

`False`

Do not create headings for the modules/packages. Useful when source docstrings already contain headings.

apidoc\_module\_first[¬∂](apidoc.html#confval-apidoc_module_first "Link to this definition")

Type:

`bool`

Default:

`False`

Place module documentation before submodule documentation.

apidoc\_implicit\_namespaces[¬∂](apidoc.html#confval-apidoc_implicit_namespaces "Link to this definition")

Type:

`bool`

Default:

`False`

By default sphinx-apidoc processes sys.path searching for modules only. Python 3.3 introduced [**PEP 420**](https://peps.python.org/pep-0420/) implicit namespaces that allow module path structures such as `foo/bar/module.py` or `foo/bar/baz/__init__.py` (notice that `bar` and `foo` are namespaces, not modules).

Interpret module paths using [**PEP 420**](https://peps.python.org/pep-0420/) implicit namespaces.

apidoc\_automodule\_options[¬∂](apidoc.html#confval-apidoc_automodule_options "Link to this definition")

Type:

`Set[str]`

Default:

`{'members', 'show-inheritance', 'undoc-members'}`

Options to pass to generated [`automodule`](autodoc.html#directive-automodule "automodule directive") directives.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page















The Basics


User guide




Community


Reference



# [`sphinx.ext.autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") ‚Äì Include documentation from docstrings[¬∂](autodoc.html#module-sphinx.ext.autodoc "Link to this heading")

This extension can import the modules you are documenting, and pull in documentation from docstrings in a semi-automatic way.

Warning

[`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") **imports** the modules to be documented. If any modules have side effects on import, these will be executed by `autodoc` when **sphinx-build** is run.

If you document scripts (as opposed to library modules), make sure that the main routine is protected by an `if __name__ == '__main__'` condition.

For this to work, the docstrings must of course be written in correct reStructuredText. You can then use all of the usual Sphinx markup in the docstrings, and it will end up correctly in the documentation. Together with hand-written documentation, this technique eases the pain of having to maintain two locations for documentation, while at the same time avoiding auto-generated-looking pure API documentation.

If you prefer [NumPy](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) or [Google](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings) style docstrings over reStructuredText, you can also enable the [`napoleon`](napoleon.html#module-sphinx.ext.napoleon "sphinx.ext.napoleon: Support for NumPy and Google style docstrings") extension. `napoleon` is a preprocessor that converts docstrings to correct reStructuredText before `autodoc` processes them.

## Getting started[¬∂](autodoc.html#getting-started "Link to this heading")

### Setup[¬∂](autodoc.html#setup "Link to this heading")

Activate the plugin by adding `'sphinx.ext.autodoc'` to the [`extensions`](../configuration.html#confval-extensions) list in `conf.py`:

```
extensions = [
    ...
    'sphinx.ext.autodoc',
]
```

### Ensuring the code can be imported[¬∂](autodoc.html#ensuring-the-code-can-be-imported "Link to this heading")

[`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") analyses the code and docstrings by introspection after **importing the modules**. For importing to work, you have to make sure that your modules can be found by Sphinx and that dependencies can be resolved (if your module does `import foo`, but `foo` is not available in the python environment that Sphinx runs in, your module import will fail).

There are two ways to ensure this:

1. Use an environment that contains your package and Sphinx. This can e.g. be your local development environment (with an editable install), or an environment in CI in which you install Sphinx and your package. The regular installation process ensures that your package can be found by Sphinx and that all dependencies are available.
2. It is alternatively possible to patch the Sphinx run so that it can operate directly on the sources; e.g. if you want to be able to do a Sphinx build from a source checkout.

   - Patch [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") in `conf.py` to include your source path. For example if you have a repository structure with `doc/conf.py` and your package is at `src/my_package`, then you should add the following to your `conf.py`.

     ```
     import sys
     from pathlib import Path

     sys.path.insert(0, str(Path('..', 'src').resolve()))
     ```
   - To cope with missing dependencies, specify the missing modules in the [`autodoc_mock_imports`](autodoc.html#confval-autodoc_mock_imports) setting.

### Usage[¬∂](autodoc.html#usage "Link to this heading")

You can now use the [Directives](autodoc.html#autodoc-directives) to add formatted documentation for Python code elements like functions, classes, modules, etc. For example, to document the function `io.open()`, reading its signature and docstring from the source file, you‚Äôd write:

```
.. autofunction:: io.open
```

You can also document whole classes or even modules automatically, using member options for the auto directives, like:

```
.. automodule:: io
   :members:
```

Tip

As a hint to autodoc extension, you can put a `::` separator between the module name and the object name to let autodoc know the correct module, if it is ambiguous:

```
.. autoclass:: module.name::Noodle
```

### Marking objects as public or private[¬∂](autodoc.html#marking-objects-as-public-or-private "Link to this heading")

- autodoc considers a member private if its docstring contains `:meta private:` in its [Info field lists](../domains/python.html#info-field-lists). For example:

  ```
  def my_function(my_arg, my_other_arg):
      """blah blah blah

      :meta private:
      """
  ```

  Added in version 3.0.
- autodoc considers a member public if its docstring contains `:meta public:` in its [Info field lists](../domains/python.html#info-field-lists), even if it starts with an underscore. For example:

  ```
  def _my_function(my_arg, my_other_arg):
      """blah blah blah

      :meta public:
      """
  ```

  Added in version 3.1.
- autodoc considers a variable member does not have any default value if its docstring contains `:meta hide-value:` in its [Info field lists](../domains/python.html#info-field-lists). Example:

  ```
  var1 = None  #: :meta hide-value:
  ```

  Added in version 3.5.

### Doc comments and docstrings[¬∂](autodoc.html#doc-comments-and-docstrings "Link to this heading")

Python has no built-in support for docstrings for module data members or class attributes. To allow documenting these, `autodoc` recognises a special format of [comment](https://docs.python.org/3/reference/lexical_analysis.html#comments "(in Python v3.13)") called a ‚Äòdoc comment‚Äô or ‚Äòdocumentation comment‚Äô.

These comments start with a colon and an optional space character, `'#:'` or `'#:¬†'`. To be recognised, the comments must appear either on the same line as the variable or on one or more lines before the variable. Multi-line doc-comments must always appear on the lines before the variable‚Äôs definition.

For example, all three of the following variables have valid doc-comments:

```
egg_and_spam = 1.50  #: A simple meal

#: Spam! Lovely spam! Lovely spam!
egg_bacon_sausage_and_spam = 2.49

#: Truly gourmet cuisine for madam; Lobster Thermidor
#: aux Crevettes with a mornay sauce garnished with
#: truffle pate, brandy and a fried egg on top and spam.
lobster_thermidor = 35.00
```

Alternatively, `autodoc` can recognise a docstring on the line immediately following the definition.

In the the following class definition, all attributes have documentation recognised by `autodoc`:

```
class Foo:
    """Docstring for class Foo."""

    #: Doc comment for class attribute Foo.bar.
    #: It can have multiple lines.
    bar = 1

    flox = 1.5   #: Doc comment for Foo.flox. One line only.

    baz = 2
    """Docstring for class attribute Foo.baz."""

    def __init__(self):
        #: Doc comment for instance attribute qux.
        self.qux = 3

        self.spam = 4
        """Docstring for instance attribute spam."""
```

## Directives[¬∂](autodoc.html#directives "Link to this heading")

`autodoc` provides several directives that are versions of the usual [`py:module`](../domains/python.html#directive-py-module "py:module directive"), [`py:class`](../domains/python.html#directive-py-class "py:class directive") and so forth. On parsing time, they import the corresponding module and extract the docstring of the given objects, inserting them into the page source under a suitable [`py:module`](../domains/python.html#directive-py-module "py:module directive"), [`py:class`](../domains/python.html#directive-py-class "py:class directive") etc. directive.

Note

Just as [`py:class`](../domains/python.html#directive-py-class "py:class directive") respects the current [`py:module`](../domains/python.html#directive-py-module "py:module directive"), [`autoclass`](autodoc.html#directive-autoclass "autoclass directive") will also do so. Likewise, [`automethod`](autodoc.html#directive-automethod "automethod directive") will respect the current [`py:class`](../domains/python.html#directive-py-class "py:class directive").

### Default directive options[¬∂](autodoc.html#default-directive-options "Link to this heading")

To make any of the options described below the default, use the [`autodoc_default_options`](autodoc.html#confval-autodoc_default_options) dictionary in `conf.py`.

If using defaults for the `:members:`, `:exclude-members:`, `:private-members:`, or `:special-members:` options, setting the option on a directive will override the default. Instead, to extend the default list with the per-directive option, the list may be prepended with a plus sign (`+`), as follows:

```
.. autoclass:: Noodle
   :members: eat
   :private-members: +_spicy, _garlickly
```

Tip

If using [`autodoc_default_options`](autodoc.html#confval-autodoc_default_options), the defaults can be disabled per-directive with the negated form, `:no-option:` as an option of the directive For example:

```
.. automodule:: foo
   :no-undoc-members:
```

### Automatically document modules[¬∂](autodoc.html#automatically-document-modules "Link to this heading")

.. automodule::[¬∂](autodoc.html#directive-automodule "Link to this definition")

Document a module. By default, the directive only inserts the docstring of the module itself:

```
.. automodule:: noodles
```

will produce source like this:

```
.. py:module:: noodles

   The noodles module.
```

The directive can also contain content of its own, which will be inserted into the resulting non-auto directive source after the docstring (but before any automatic member documentation).

Therefore, you can also mix automatic and non-automatic member documentation, as follows:

```
.. automodule:: noodles
   :members: Noodle

   .. py:function:: boiled_noodle(time=10)

      Create a noodle that has been boiled for *time* minutes.
```

Options

:no-index:[¬∂](autodoc.html#directive-option-automodule-no-index "Link to this definition")

Do not generate an index entry for the documented module or any auto-documented members.

Added in version 0.4.

:no-index-entry:[¬∂](autodoc.html#directive-option-automodule-no-index-entry "Link to this definition")

Do not generate an index entry for the documented module or any auto-documented members. Unlike `:no-index:`, cross-references are still created.

Added in version 8.2.

:platform: *platforms (comma separated list)*[¬∂](autodoc.html#directive-option-automodule-platform "Link to this definition")

Indicate platforms on which the module is available. This is identical to [`py:module`](../domains/python.html#directive-py-module "py:module directive")‚Äôs `:platform:` option.

:synopsis: *purpose (text)*[¬∂](autodoc.html#directive-option-automodule-synopsis "Link to this definition")

A sentence describing the module‚Äôs purpose. This is identical to [`py:module`](../domains/python.html#directive-py-module "py:module directive")‚Äôs `:synopsis:` option.

Added in version 0.5.

:deprecated:[¬∂](autodoc.html#directive-option-automodule-deprecated "Link to this definition")

Mark a module as deprecated. This is identical to [`py:module`](../domains/python.html#directive-py-module "py:module directive")‚Äôs `:deprecated:` option.

Added in version 0.5.

:ignore-module-all: *(no value)*[¬∂](autodoc.html#directive-option-automodule-ignore-module-all "Link to this definition")

Do not use `__all__` when analysing the module to document.

Added in version 1.7.

Options for selecting members to document

:members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-automodule-members "Link to this definition")

Generate automatic documentation for all members of the target module:

```
.. automodule:: noodles
   :members:
```

By default, `autodoc` only includes public members with a docstring or [doc-comment](autodoc.html#doc-comment) (`#:`). If `__all__` exists, it will be used to define which members are public, unless the [`:ignore-module-all:`](autodoc.html#directive-option-automodule-ignore-module-all "automodule:ignore-module-all directive:option") option is set.

To only document certain members, an explicit comma-separated list may be used as the argument to `:members:`:

```
.. automodule:: noodles
   :members: Noodle
```

:exclude-members: *(comma separated list)*[¬∂](autodoc.html#directive-option-automodule-exclude-members "Link to this definition")

Exclude the given names from the members to document. For example:

```
.. automodule:: noodles
   :members:
   :exclude-members: NoodleBase
```

Added in version 0.6.

:imported-members: *(no value)*[¬∂](autodoc.html#directive-option-automodule-imported-members "Link to this definition")

To prevent documentation of imported classes or functions, in an `automodule` directive with the `members` option set, only module members where the `__module__` attribute is equal to the module name given to `automodule` will be documented.

Set the `imported-members` option if you want to prevent this behavior and document all available members.

Note that attributes from imported modules will not be documented, because attribute documentation is discovered by parsing the source file of the current module.

Added in version 1.2.

:undoc-members:[¬∂](autodoc.html#directive-option-automodule-undoc-members "Link to this definition")

Generate automatic documentation for members of the target module that don‚Äôt have a docstring or doc-comment. For example:

```
.. automodule:: noodles
   :members:
   :undoc-members:
```

:private-members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-automodule-private-members "Link to this definition")

Generate automatic documentation for private members of the target module. This includes names with a leading underscore (e.g. `_private`) and those members explicitly marked as private with `:meta private:`.

```
.. automodule:: noodles
   :members:
   :private-members:
```

To only document certain private members, an explicit comma-separated list may be used as the argument to `:private-members:`:

```
.. automodule:: noodles
   :members:
   :private-members: _spicy, _garlickly
```

Added in version 1.1.

Changed in version 3.2: The option can now take a comma-separated list of arguments.

:special-members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-automodule-special-members "Link to this definition")

Generate automatic documentation for special members of the target module, also known as [‚Äòdunder‚Äô names](https://docs.python.org/3/reference/datamodel.html#specialnames "(in Python v3.13)"). This includes all names enclosed with a double-underscore, e.g. `__special__`:

```
.. automodule:: my.Class
   :members:
   :special-members:
```

To only document certain special members, an explicit comma-separated list may be used as the argument to `:special-members:`:

```
.. automodule:: noodles
   :members:
   :special-members: __version__
```

Added in version 1.1.

Changed in version 1.2: The option can now take a comma-separated list of arguments.

Options for documented members

:member-order: *(alphabetical, bysource, or groupwise)*[¬∂](autodoc.html#directive-option-automodule-member-order "Link to this definition")

Choose the ordering of automatically documented members (default: `alphabetical`). This overrides the [`autodoc_member_order`](autodoc.html#confval-autodoc_member_order) setting.

- `alphabetical`: Use simple alphabetical order.
- `groupwise`: Group by object type (class, function, etc), use alphabetical order within groups.
- `bysource`: Use the order of objects in the module‚Äôs source. The `__all__` variable can be used to override this order.

Note that for source order, the module must be a Python module with the source code available.

Added in version 0.6.

Changed in version 1.0: Support the `'bysource'` option.

:show-inheritance: *(no value)*[¬∂](autodoc.html#directive-option-automodule-show-inheritance "Link to this definition")

Enable the [`:show-inheritance:`](autodoc.html#directive-option-autoclass-show-inheritance "autoclass:show-inheritance directive:option") option for all members of the module, if `:members:` is enabled.

Added in version 0.4.

### Automatically document classes or exceptions[¬∂](autodoc.html#automatically-document-classes-or-exceptions "Link to this heading")

.. autoclass::[¬∂](autodoc.html#directive-autoclass "Link to this definition")

.. autoexception::[¬∂](autodoc.html#directive-autoexception "Link to this definition")

Document a class. For exception classes, prefer `.. autoexception::`. By default, the directive only inserts the docstring of the class itself:

```
.. autoclass:: noodles.Noodle
```

will produce source like this:

```
.. py:class:: Noodle

   The Noodle class's docstring.
```

The directive can also contain content of its own, which will be inserted into the resulting non-auto directive source after the docstring (but before any automatic member documentation).

Therefore, you can also mix automatic and non-automatic member documentation, as follows:

```
.. autoclass:: noodles.Noodle
   :members: eat, slurp

   .. py:method:: boil(time=10)

      Boil the noodle for *time* minutes.
```

Advanced usage

- It is possible to override the signature for explicitly documented callable objects (functions, methods, classes) with the regular syntax that will override the signature gained from introspection:

  ```
  .. autoclass:: noodles.Noodle(type)

     .. automethod:: eat(persona)
  ```

  This is useful if the signature from the method is hidden by a decorator.

  Added in version 0.4.

Options

:no-index:[¬∂](autodoc.html#directive-option-autoclass-no-index "Link to this definition")

Do not generate an index entry for the documented class or any auto-documented members.

Added in version 0.4.

:no-index-entry:[¬∂](autodoc.html#directive-option-autoclass-no-index-entry "Link to this definition")

Do not generate an index entry for the documented class or any auto-documented members. Unlike `:no-index:`, cross-references are still created.

Added in version 8.2.

:class-doc-from: *(class, init, or both)*[¬∂](autodoc.html#directive-option-autoclass-class-doc-from "Link to this definition")

Select which docstring will be used for the main body of the directive. This overrides the global value of [`autoclass_content`](autodoc.html#confval-autoclass_content). The possible values are:

- `class`: Only use the class‚Äôs docstring. The `__init__()` method can be separately documented using the `:members:` option or [`automethod`](autodoc.html#directive-automethod "automethod directive").
- `init`: Only use the docstring of the `__init__()` method.
- `both`: Use both, appending the docstring of the `__init__()` method to the class‚Äôs docstring.

If the `__init__()` method doesn‚Äôt exist or has a blank docstring, `autodoc` will attempt to use the `__new__()` method‚Äôs docstring, if it exists and is not blank.

Added in version 4.1.

Options for selecting members to document

:members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-autoclass-members "Link to this definition")

Generate automatic documentation for all members of the target class:

```
.. autoclass:: noodles.Noodle
   :members:
```

By default, `autodoc` only includes public members with a docstring or [doc-comment](autodoc.html#doc-comment) (`#:`) that are attributes of the target class (i.e. not inherited).

To only document certain members, an explicit comma-separated list may be used as the argument to `:members:`:

```
.. autoclass:: noodles.Noodle
   :members: eat, slurp
```

:exclude-members: *(comma separated list)*[¬∂](autodoc.html#directive-option-autoclass-exclude-members "Link to this definition")

Exclude the given names from the members to document. For example:

```
.. autoclass:: noodles.Noodle
   :members:
   :exclude-members: prepare
```

Added in version 0.6.

:inherited-members: *(comma separated list)*[¬∂](autodoc.html#directive-option-autoclass-inherited-members "Link to this definition")

To generate automatic documentation for members inherited from base classes, use the `:inherited-members:` option:

```
.. autoclass:: noodles.Noodle
   :members:
   :inherited-members:
```

This can be combined with the `:undoc-members:` option to generate automatic documentation for *all* available members of the class.

The members of classes listed in the argument to `:inherited-members:` are excluded from the automatic documentation. This defaults to [`object`](https://docs.python.org/3/library/functions.html#object "(in Python v3.13)") if no argument is provided, meaning that members of the `object` class are not documented. To include these, use `None` as the argument.

For example; If your class `MyList` is derived from `list` class and you don‚Äôt want to document `list.__len__()`, you should specify a option `:inherited-members: list` to avoid special members of list class.

Note

Should any of the inherited members use a format other than reStructuredText for their docstrings, there may be markup warnings or errors.

Added in version 0.3.

Changed in version 3.0: `:inherited-members:` now takes the name of a base class to exclude as an argument.

Changed in version 5.0: A comma separated list of base class names can be used.

:undoc-members: *(no value)*[¬∂](autodoc.html#directive-option-autoclass-undoc-members "Link to this definition")

Generate automatic documentation for members of the target class that don‚Äôt have a docstring or doc-comment. For example:

```
.. autoclass:: noodles.Noodle
   :members:
   :undoc-members:
```

:private-members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-autoclass-private-members "Link to this definition")

Generate automatic documentation for private members of the target class. This includes names with a leading underscore (e.g. `_private`) and those members explicitly marked as private with `:meta private:`.

```
.. autoclass:: noodles.Noodle
   :members:
   :private-members:
```

To only document certain private members, an explicit comma-separated list may be used as the argument to `:private-members:`:

```
.. autoclass:: noodles.Noodle
   :members:
   :private-members: _spicy, _garlickly
```

Added in version 1.1.

Changed in version 3.2: The option can now take arguments.

:special-members: *(no value or comma separated list)*[¬∂](autodoc.html#directive-option-autoclass-special-members "Link to this definition")

Generate automatic documentation for special members of the target class, also known as [‚Äòdunder‚Äô names](https://docs.python.org/3/reference/datamodel.html#specialnames "(in Python v3.13)"). This includes all names enclosed with a double-underscore, e.g. `__special__`:

```
.. autoclass:: noodles.Noodle
   :members:
   :special-members:
```

To only document certain special members, an explicit comma-separated list may be used as the argument to `:special-members:`:

```
.. autoclass:: noodles.Noodle
   :members:
   :special-members: __init__, __name__
```

Added in version 1.1.

Changed in version 1.2: The option can now take a comma-separated list of arguments.

Options for documented members

:member-order: *(alphabetical, bysource, or groupwise)*[¬∂](autodoc.html#directive-option-autoclass-member-order "Link to this definition")

Choose the ordering of automatically documented members (default: `alphabetical`). This overrides the [`autodoc_member_order`](autodoc.html#confval-autodoc_member_order) setting.

- `'alphabetical'`: Use simple alphabetical order.
- `'groupwise'`: Group by object type (class, function, etc), use alphabetical order within groups.
- `'bysource'`: Use the order of objects in the module‚Äôs source. The `__all__` variable can be used to override this order.

Note that for source order, the module must be a Python module with the source code available.

Added in version 0.6.

Changed in version 1.0: Support the `'bysource'` option.

:show-inheritance: *(no value)*[¬∂](autodoc.html#directive-option-autoclass-show-inheritance "Link to this definition")

Insert the class‚Äôs base classes after the class signature.

Added in version 0.4.

### Automatically document function-like objects[¬∂](autodoc.html#automatically-document-function-like-objects "Link to this heading")

.. autofunction::[¬∂](autodoc.html#directive-autofunction "Link to this definition")

.. automethod::[¬∂](autodoc.html#directive-automethod "Link to this definition")

.. autoproperty::[¬∂](autodoc.html#directive-autoproperty "Link to this definition")

.. autodecorator::[¬∂](autodoc.html#directive-autodecorator "Link to this definition")

Document a function, method, property, or decorator. By default, the directive only inserts the docstring of the function itself:

```
.. autofunction:: noodles.average_noodle
```

will produce source like this:

```
.. py:function:: noodles.average_noodle

   The average_noodle function's docstring.
```

The directive can also contain content of its own, which will be inserted into the resulting non-auto directive source after the docstring.

Therefore, you can also mix automatic and non-automatic documentation, as follows:

```
.. autofunction:: noodles.average_noodle

   .. note:: For more flexibility, use the :py:class:`!Noodle` class.
```

Added in version 2.0: [`autodecorator`](autodoc.html#directive-autodecorator "autodecorator directive").

Added in version 2.1: [`autoproperty`](autodoc.html#directive-autoproperty "autoproperty directive").

Note

If you document decorated functions or methods, keep in mind that `autodoc` retrieves its docstrings by importing the module and inspecting the `__doc__` attribute of the given function or method. That means that if a decorator replaces the decorated function with another, it must copy the original `__doc__` to the new function.

Advanced usage

- It is possible to override the signature for explicitly documented callable objects (functions, methods, classes) with the regular syntax that will override the signature gained from introspection:

  ```
  .. autoclass:: Noodle(type)

     .. automethod:: eat(persona)
  ```

  This is useful if the signature from the method is hidden by a decorator.

  Added in version 0.4.

Options

:no-index:[¬∂](autodoc.html#directive-option-autofunction-no-index "Link to this definition")

Do not generate an index entry for the documented function.

Added in version 0.4.

:no-index-entry:[¬∂](autodoc.html#directive-option-autofunction-no-index-entry "Link to this definition")

Do not generate an index entry for the documented function. Unlike `:no-index:`, cross-references are still created.

Added in version 8.2.

### Automatically document attributes or data[¬∂](autodoc.html#automatically-document-attributes-or-data "Link to this heading")

.. autodata::[¬∂](autodoc.html#directive-autodata "Link to this definition")

.. autoattribute::[¬∂](autodoc.html#directive-autoattribute "Link to this definition")

Document a module level variable or constant (‚Äòdata‚Äô) or class attribute. By default, the directive only inserts the docstring of the variable itself:

```
.. autodata:: noodles.FLOUR_TYPE
```

will produce source like this:

```
.. py:data:: noodles.FLOUR_TYPE

   The FLOUR_TYPE constant's docstring.
```

The directive can also contain content of its own, which will be inserted into the resulting non-auto directive source after the docstring.

Therefore, you can also mix automatic and non-automatic member documentation, as follows:

```
.. autodata:: noodles.FLOUR_TYPE

   .. hint:: Cooking time can vary by which flour type is used.
```

Changed in version 0.6: [`autodata`](autodoc.html#directive-autodata "autodata directive") and [`autoattribute`](autodoc.html#directive-autoattribute "autoattribute directive") can now extract docstrings.

Changed in version 1.1: Doc-comments are now allowed on the same line of an assignment.

Options

:no-index:[¬∂](autodoc.html#directive-option-autodata-no-index "Link to this definition")

Do not generate an index entry for the documented variable or constant.

Added in version 0.4.

:no-index-entry:[¬∂](autodoc.html#directive-option-autodata-no-index-entry "Link to this definition")

Do not generate an index entry for the documented variable or constant. Unlike `:no-index:`, cross-references are still created.

Added in version 8.2.

:annotation: *value (string)*[¬∂](autodoc.html#directive-option-autodata-annotation "Link to this definition")

Added in version 1.2.

By default, `autodoc` attempts to obtain the type annotation and value of the variable by introspection, displaying it after the variable‚Äôs name. To override this, a custom string for the variable‚Äôs value may be used as the argument to `annotation`.

For example, if the runtime value of `FILE_MODE` is `0o755`, the displayed value will be `493` (as `oct(493) == '0o755'`). This can be fixed by setting `:annotation: = 0o755`.

If `:annotation:` is used without arguments, no value or type hint will be shown for the variable.

:no-value:[¬∂](autodoc.html#directive-option-autodata-no-value "Link to this definition")

Added in version 3.4.

To display the type hint of the variable without a value, use the `:no-value:` option. If both the `:annotation:` and `:no-value:` options are used, `:no-value:` has no effect.

## Configuration[¬∂](autodoc.html#configuration "Link to this heading")

There are also config values that you can set:

autoclass\_content[¬∂](autodoc.html#confval-autoclass_content "Link to this definition")

Type:

`str`

Default:

`'class'`

This value selects what content will be inserted into the main body of an [`autoclass`](autodoc.html#directive-autoclass "autoclass directive") directive. The possible values are:

`'class'`

Only the class‚Äô docstring is inserted. You can still document `__init__` as a separate method using [`automethod`](autodoc.html#directive-automethod "automethod directive") or the `members` option to [`autoclass`](autodoc.html#directive-autoclass "autoclass directive").

`'both'`

Both the class‚Äô and the `__init__` method‚Äôs docstring are concatenated and inserted.

`'init'`

Only the `__init__` method‚Äôs docstring is inserted.

Added in version 0.3.

If the class has no `__init__` method or if the `__init__` method‚Äôs docstring is empty, but the class has a `__new__` method‚Äôs docstring, it is used instead.

Added in version 1.4.

autodoc\_class\_signature[¬∂](autodoc.html#confval-autodoc_class_signature "Link to this definition")

Type:

`str`

Default:

`'mixed'`

This value selects how the signature will be displayed for the class defined by [`autoclass`](autodoc.html#directive-autoclass "autoclass directive") directive. The possible values are:

`'mixed'`

Display the signature with the class name.

`'separated'`

Display the signature as a method.

Added in version 4.1.

autodoc\_member\_order[¬∂](autodoc.html#confval-autodoc_member_order "Link to this definition")

Type:

`str`

Default:

`'alphabetical'`

Define the order in which [`automodule`](autodoc.html#directive-automodule "automodule directive") and [`autoclass`](autodoc.html#directive-autoclass "autoclass directive") members are listed. Supported values are:

- `'alphabetical'`: Use alphabetical order.
- `'groupwise'`: order by member type. The order is:

  - for modules, exceptions, classes, functions, data
  - for classes: class methods, static methods, methods,

    and properties/attributes

  Members are ordered alphabetically within groups.
- `'bysource'`: Use the order in which the members appear in the source code. This requires that the module must be a Python module with the source code available.

Added in version 0.6.

Changed in version 1.0: Support for `'bysource'`.

autodoc\_default\_options[¬∂](autodoc.html#confval-autodoc_default_options "Link to this definition")

Type:

`dict[str, str | bool]`

Default:

`{}`

The default options for autodoc directives. They are applied to all autodoc directives automatically. It must be a dictionary which maps option names to the values. For example:

```
autodoc_default_options = {
    'members': 'var1, var2',
    'member-order': 'bysource',
    'special-members': '__init__',
    'undoc-members': True,
    'exclude-members': '__weakref__'
}
```

Setting `None` or `True` to the value is equivalent to giving only the option name to the directives.

The supported options are:

- `'members'`: See [`automodule:members`](autodoc.html#directive-option-automodule-members "automodule:members directive:option").
- `'undoc-members'` See [`automodule:undoc-members`](autodoc.html#directive-option-automodule-undoc-members "automodule:undoc-members directive:option").
- `'private-members'`: See [`automodule:private-members`](autodoc.html#directive-option-automodule-private-members "automodule:private-members directive:option").
- `'special-members'`: See [`automodule:special-members`](autodoc.html#directive-option-automodule-special-members "automodule:special-members directive:option").
- `'inherited-members'`: See [`autoclass:inherited-members`](autodoc.html#directive-option-autoclass-inherited-members "autoclass:inherited-members directive:option").
- `'imported-members'`: See [`automodule:imported-members`](autodoc.html#directive-option-automodule-imported-members "automodule:imported-members directive:option").
- `'exclude-members'`: See [`automodule:exclude-members`](autodoc.html#directive-option-automodule-exclude-members "automodule:exclude-members directive:option").
- `'ignore-module-all'`: See [`automodule:ignore-module-all`](autodoc.html#directive-option-automodule-ignore-module-all "automodule:ignore-module-all directive:option").
- `'member-order'`: See [`automodule:member-order`](autodoc.html#directive-option-automodule-member-order "automodule:member-order directive:option").
- `'show-inheritance'`: See [`autoclass:show-inheritance`](autodoc.html#directive-option-autoclass-show-inheritance "autoclass:show-inheritance directive:option").
- `'class-doc-from'`: See [`autoclass:class-doc-from`](autodoc.html#directive-option-autoclass-class-doc-from "autoclass:class-doc-from directive:option").
- `'no-value'`: See [`autodata:no-value`](autodoc.html#directive-option-autodata-no-value "autodata:no-value directive:option").
- `'no-index'`: See [`automodule:no-index`](autodoc.html#directive-option-automodule-no-index "automodule:no-index directive:option").
- `'no-index-entry'`: See [`automodule:no-index-entry`](autodoc.html#directive-option-automodule-no-index-entry "automodule:no-index-entry directive:option").

Added in version 1.8.

Changed in version 2.0: Accepts `True` as a value.

Changed in version 2.1: Added `'imported-members'`.

Changed in version 4.1: Added `'class-doc-from'`.

Changed in version 4.5: Added `'no-value'`.

autodoc\_docstring\_signature[¬∂](autodoc.html#confval-autodoc_docstring_signature "Link to this definition")

Type:

`bool`

Default:

`True`

Functions imported from C modules cannot be introspected, and therefore the signature for such functions cannot be automatically determined. However, it is an often-used convention to put the signature into the first line of the function‚Äôs docstring.

If this boolean value is set to `True` (which is the default), autodoc will look at the first line of the docstring for functions and methods, and if it looks like a signature, use the line as the signature and remove it from the docstring content.

autodoc will continue to look for multiple signature lines, stopping at the first line that does not look like a signature. This is useful for declaring overloaded function signatures.

Added in version 1.1.

Changed in version 3.1: Support overloaded signatures

Changed in version 4.0: Overloaded signatures do not need to be separated by a backslash

autodoc\_mock\_imports[¬∂](autodoc.html#confval-autodoc_mock_imports "Link to this definition")

Type:

`list[str]`

Default:

`[]`

This value contains a list of modules to be mocked up. This is useful when some external dependencies are not met at build time and break the building process. You may only specify the root package of the dependencies themselves and omit the sub-modules:

```
autodoc_mock_imports = ['django']
```

Will mock all imports under the `django` package.

Added in version 1.3.

Changed in version 1.6: This config value only requires to declare the top-level modules that should be mocked.

autodoc\_typehints[¬∂](autodoc.html#confval-autodoc_typehints "Link to this definition")

Type:

`str`

Default:

`'signature'`

This value controls how to represent typehints. The setting takes the following values:

- `'signature'` ‚Äì Show typehints in the signature
- `'description'` ‚Äì Show typehints as content of the function or method The typehints of overloaded functions or methods will still be represented in the signature.
- `'none'` ‚Äì Do not show typehints
- `'both'` ‚Äì Show typehints in the signature and as content of the function or method

Overloaded functions or methods will not have typehints included in the description because it is impossible to accurately represent all possible overloads as a list of parameters.

Added in version 2.1.

Added in version 3.0: New option `'description'` is added.

Added in version 4.1: New option `'both'` is added.

autodoc\_typehints\_description\_target[¬∂](autodoc.html#confval-autodoc_typehints_description_target "Link to this definition")

Type:

`str`

Default:

`'all'`

This value controls whether the types of undocumented parameters and return values are documented when [`autodoc_typehints`](autodoc.html#confval-autodoc_typehints) is set to `'description'`. Supported values:

- `'all'`: Types are documented for all parameters and return values, whether they are documented or not.
- `'documented'`: Types will only be documented for a parameter or a return value that is already documented by the docstring.
- `'documented_params'`: Parameter types will only be annotated if the parameter is documented in the docstring. The return type is always annotated (except if it is `None`).

Added in version 4.0.

Added in version 5.0: New option `'documented_params'` is added.

autodoc\_type\_aliases[¬∂](autodoc.html#confval-autodoc_type_aliases "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

A dictionary for users defined [type aliases](https://mypy.readthedocs.io/en/latest/kinds_of_types.html#type-aliases) that maps a type name to the full-qualified object name. It is used to keep type aliases not evaluated in the document.

The type aliases are only available if your program enables [**Postponed Evaluation of Annotations (PEP 563)**](https://peps.python.org/pep-0563/) feature via `from __future__ import annotations`.

For example, there is code using a type alias:

```
from __future__ import annotations

AliasType = Union[List[Dict[Tuple[int, str], Set[int]]], Tuple[str, List[str]]]

def f() -> AliasType:
    ...
```

If `autodoc_type_aliases` is not set, autodoc will generate internal mark-up from this code as following:

```
.. py:function:: f() -> Union[List[Dict[Tuple[int, str], Set[int]]], Tuple[str, List[str]]]

   ...
```

If you set `autodoc_type_aliases` as `{'AliasType': 'your.module.AliasType'}`, it generates the following document internally:

```
.. py:function:: f() -> your.module.AliasType:

   ...
```

Added in version 3.3.

autodoc\_typehints\_format[¬∂](autodoc.html#confval-autodoc_typehints_format "Link to this definition")

Type:

`str`

Default:

`'short'`

This value controls the format of typehints. The setting takes the following values:

- `'fully-qualified'` ‚Äì Show the module name and its name of typehints
- `'short'` ‚Äì Suppress the leading module names of the typehints (e.g. `io.StringIO` -&gt; `StringIO`)

Added in version 4.4.

Changed in version 5.0: The default setting was changed to `'short'`

autodoc\_preserve\_defaults[¬∂](autodoc.html#confval-autodoc_preserve_defaults "Link to this definition")

Type:

`bool`

Default:

`False`

If True, the default argument values of functions will be not evaluated on generating document. It preserves them as is in the source code.

Added in version 4.0: Added as an experimental feature. This will be integrated into autodoc core in the future.

autodoc\_use\_type\_comments[¬∂](autodoc.html#confval-autodoc_use_type_comments "Link to this definition")

Type:

`bool`

Default:

`True`

Attempt to read `# type: ...` comments from source code to supplement missing type annotations, if True.

This can be disabled if your source code does not use type comments, for example if it exclusively uses type annotations or does not use type hints of any kind.

Added in version 8.2: Added the option to disable the use of type comments in via the new `autodoc_use_type_comments` option, which defaults to `True` for backwards compatibility. The default will change to `False` in Sphinx 10.

autodoc\_warningiserror[¬∂](autodoc.html#confval-autodoc_warningiserror "Link to this definition")

Type:

`bool`

Default:

`True`

This value controls the behavior of [`sphinx-build --fail-on-warning`](../../man/sphinx-build.html#cmdoption-sphinx-build-W) during importing modules. If `False` is given, autodoc forcedly suppresses the error if the imported module emits warnings.

Changed in version 8.1: This option now has no effect as `--fail-on-warning` no longer exits early.

autodoc\_inherit\_docstrings[¬∂](autodoc.html#confval-autodoc_inherit_docstrings "Link to this definition")

Type:

`bool`

Default:

`True`

This value controls the docstrings inheritance. If set to True the docstring for classes or methods, if not explicitly set, is inherited from parents.

Added in version 1.7.

suppress\_warnings

Type:

`Sequence[str]`

Default:

`()`

`autodoc` supports suppressing warning messages via [`suppress_warnings`](../configuration.html#confval-suppress_warnings). It defines the following additional warnings types:

- autodoc
- autodoc.import\_object

## Docstring preprocessing[¬∂](autodoc.html#docstring-preprocessing "Link to this heading")

autodoc provides the following additional events:

autodoc-process-docstring(*app*, *what*, *name*, *obj*, *options*, *lines*)[¬∂](autodoc.html#event-autodoc-process-docstring "Link to this definition")

Added in version 0.4.

Emitted when autodoc has read and processed a docstring. *lines* is a list of strings ‚Äì the lines of the processed docstring ‚Äì that the event handler can modify **in place** to change what Sphinx puts into the output.

Parameters:

- **app** ‚Äì the Sphinx application object
- **what** ‚Äì the type of the object which the docstring belongs to (one of `'module'`, `'class'`, `'exception'`, `'function'`, `'method'`, `'attribute'`)
- **name** ‚Äì the fully qualified name of the object
- **obj** ‚Äì the object itself
- **options** ‚Äì the options given to the directive: an object with attributes `inherited_members`, `undoc_members`, `show_inheritance` and `no-index` that are true if the flag option of same name was given to the auto directive
- **lines** ‚Äì the lines of the docstring, see above

autodoc-before-process-signature(*app*, *obj*, *bound\_method*)[¬∂](autodoc.html#event-autodoc-before-process-signature "Link to this definition")

Added in version 2.4.

Emitted before autodoc formats a signature for an object. The event handler can modify an object to change its signature.

Parameters:

- **app** ‚Äì the Sphinx application object
- **obj** ‚Äì the object itself
- **bound\_method** ‚Äì a boolean indicates an object is bound method or not

autodoc-process-signature(*app*, *what*, *name*, *obj*, *options*, *signature*, *return\_annotation*)[¬∂](autodoc.html#event-autodoc-process-signature "Link to this definition")

Added in version 0.5.

Emitted when autodoc has formatted a signature for an object. The event handler can return a new tuple `(signature, return_annotation)` to change what Sphinx puts into the output.

Parameters:

- **app** ‚Äì the Sphinx application object
- **what** ‚Äì the type of the object which the docstring belongs to (one of `'module'`, `'class'`, `'exception'`, `'function'`, `'method'`, `'attribute'`)
- **name** ‚Äì the fully qualified name of the object
- **obj** ‚Äì the object itself
- **options** ‚Äì the options given to the directive: an object with attributes `inherited_members`, `undoc_members`, `show_inheritance` and `no-index` that are true if the flag option of same name was given to the auto directive
- **signature** ‚Äì function signature, as a string of the form `'(parameter_1, parameter_2)'`, or `None` if introspection didn‚Äôt succeed and signature wasn‚Äôt specified in the directive.
- **return\_annotation** ‚Äì function return annotation as a string of the form `' -> annotation'`, or `None` if there is no return annotation

The [`sphinx.ext.autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") module provides factory functions for commonly needed docstring processing in event [`autodoc-process-docstring`](autodoc.html#event-autodoc-process-docstring):

sphinx.ext.autodoc.cut\_lines(*pre: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*, *post: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 0*, *what: Sequence\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí \_AutodocProcessDocstringListener[\[source\]](../../_modules/sphinx/ext/autodoc.html#cut_lines)[¬∂](autodoc.html#sphinx.ext.autodoc.cut_lines "Link to this definition")

Return a listener that removes the first *pre* and last *post* lines of every docstring. If *what* is a sequence of strings, only docstrings of a type in *what* will be processed.

Use like this (e.g. in the `setup()` function of `conf.py`):

```
from sphinx.ext.autodoc import cut_lines

app.connect('autodoc-process-docstring', cut_lines(4, what={'module'}))
```

This can (and should) be used in place of `automodule_skip_lines`.

sphinx.ext.autodoc.between(*marker: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *what: Sequence\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *keepempty: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*, *exclude: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí \_AutodocProcessDocstringListener[\[source\]](../../_modules/sphinx/ext/autodoc.html#between)[¬∂](autodoc.html#sphinx.ext.autodoc.between "Link to this definition")

Return a listener that either keeps, or if *exclude* is True excludes, lines between lines that match the *marker* regular expression. If no line matches, the resulting docstring would be empty, so no change will be made unless *keepempty* is true.

If *what* is a sequence of strings, only docstrings of a type in *what* will be processed.

autodoc-process-bases(*app*, *name*, *obj*, *options*, *bases*)[¬∂](autodoc.html#event-autodoc-process-bases "Link to this definition")

Emitted when autodoc has read and processed a class to determine the base-classes. *bases* is a list of classes that the event handler can modify **in place** to change what Sphinx puts into the output. It‚Äôs emitted only if `show-inheritance` option given.

Parameters:

- **app** ‚Äì the Sphinx application object
- **name** ‚Äì the fully qualified name of the object
- **obj** ‚Äì the object itself
- **options** ‚Äì the options given to the class directive
- **bases** ‚Äì the list of base classes signature. see above.

Added in version 4.1.

Changed in version 4.3: `bases` can contain a string as a base class name. It will be processed as reStructuredText.

## Skipping members[¬∂](autodoc.html#skipping-members "Link to this heading")

autodoc allows the user to define a custom method for determining whether a member should be included in the documentation by using the following event:

autodoc-skip-member(*app*, *what*, *name*, *obj*, *skip*, *options*)[¬∂](autodoc.html#event-autodoc-skip-member "Link to this definition")

Added in version 0.5.

Emitted when autodoc has to decide whether a member should be included in the documentation. The member is excluded if a handler returns `True`. It is included if the handler returns `False`.

If more than one enabled extension handles the `autodoc-skip-member` event, autodoc will use the first non-`None` value returned by a handler. Handlers should return `None` to fall back to the skipping behavior of autodoc and other enabled extensions.

Parameters:

- **app** ‚Äì the Sphinx application object
- **what** ‚Äì the type of the object which the docstring belongs to (one of `'module'`, `'class'`, `'exception'`, `'function'`, `'method'`, `'attribute'`)
- **name** ‚Äì the fully qualified name of the object
- **obj** ‚Äì the object itself
- **skip** ‚Äì a boolean indicating if autodoc will skip this member if the user handler does not override the decision
- **options** ‚Äì the options given to the directive: an object with attributes `inherited_members`, `undoc_members`, `show_inheritance` and `no-index` that are true if the flag option of same name was given to the auto directive








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# [`sphinx.ext.autosectionlabel`](autosectionlabel.html#module-sphinx.ext.autosectionlabel "sphinx.ext.autosectionlabel: Allow referencing sections by their title.") ‚Äì Allow referencing sections by their title[¬∂](autosectionlabel.html#module-sphinx.ext.autosectionlabel "Link to this heading")

Added in version 1.4.

By default, cross-references to sections use labels (see [`ref`](../referencing.html#role-ref "ref role")). This extension allows you to instead refer to sections by their title.

For example:

```
A Plain Title
-------------

This is the text of the section.

It refers to the section title, see :ref:`A Plain Title`.
```

Internally, this extension generates the labels for each section. If same section names are used in whole of document, any one is used for a target by default. The `autosectionlabel_prefix_document` configuration variable can be used to make headings which appear multiple times but in different documents unique.

## Configuration[¬∂](autosectionlabel.html#configuration "Link to this heading")

autosectionlabel\_prefix\_document[¬∂](autosectionlabel.html#confval-autosectionlabel_prefix_document "Link to this definition")

Type:

`bool`

Default:

`False`

True to prefix each section label with the name of the document it is in, followed by a colon. For example, `index:Introduction` for a section called `Introduction` that appears in document `index.rst`. Useful for avoiding ambiguity when the same section heading appears in different documents.

autosectionlabel\_maxdepth[¬∂](autosectionlabel.html#confval-autosectionlabel_maxdepth "Link to this definition")

Type:

`int | None`

Default:

`None`

If set, autosectionlabel chooses the sections for labeling by its depth. For example, when set 1 to `autosectionlabel_maxdepth`, labels are generated only for top level sections, and deeper sections are not labeled. It defaults to `None` (i.e. all sections are labeled).

## Debugging[¬∂](autosectionlabel.html#debugging "Link to this heading")

The `WARNING: undefined label` indicates that your reference in [`ref`](../referencing.html#role-ref "ref role") is mis-spelled. Invoking **sphinx-build** with `-vvv` (see [`-v`](https://docs.python.org/3/using/cmdline.html#cmdoption-v "(in Python v3.13)")) will print all section names and the labels that have been generated for them. This output can help finding the right reference label.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page






The Basics


User guide




Community


Reference



# [`sphinx.ext.autosummary`](autosummary.html#module-sphinx.ext.autosummary "sphinx.ext.autosummary: Generate autodoc summaries") ‚Äì Generate autodoc summaries[¬∂](autosummary.html#module-sphinx.ext.autosummary "Link to this heading")

Added in version 0.6.

This extension generates function/method/attribute summary lists, similar to those output e.g. by Epydoc and other API doc generation tools. This is especially useful when your docstrings are long and detailed, and putting each one of them on a separate page makes them easier to read.

The [`sphinx.ext.autosummary`](autosummary.html#module-sphinx.ext.autosummary "sphinx.ext.autosummary: Generate autodoc summaries") extension does this in two parts:

1. There is an [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") directive for generating summary listings that contain links to the documented items, and short summary blurbs extracted from their docstrings.
2. A [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") directive also generates short ‚Äústub‚Äù files for the entries listed in its content. These files by default contain only the corresponding [`sphinx.ext.autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") directive, but can be customized with templates.

   The **sphinx-autogen** script is also able to generate ‚Äústub‚Äù files from command line.

.. autosummary::[¬∂](autosummary.html#directive-autosummary "Link to this definition")

Insert a table that contains links to documented items, and a short summary blurb (the first sentence of the docstring) for each of them.

The [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") directive can also optionally serve as a [`toctree`](../restructuredtext/directives.html#directive-toctree "toctree directive") entry for the included items. Optionally, stub `.rst` files for these items can also be automatically generated when [`autosummary_generate`](autosummary.html#confval-autosummary_generate) is True.

For example,

```
.. currentmodule:: sphinx

.. autosummary::

   environment.BuildEnvironment
   util.relative_uri
```

produces a table like this:

|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
| [`environment.BuildEnvironment`](../../extdev/envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")(app) | The environment in which the ReST files are translated. |
| `util.relative_uri`(base,¬†to)                                                                                                             | Return a relative URL from `base` to `to`.              |

Autosummary preprocesses the docstrings and signatures with the same [`autodoc-process-docstring`](autodoc.html#event-autodoc-process-docstring) and [`autodoc-process-signature`](autodoc.html#event-autodoc-process-signature) hooks as [`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.").

Options

:class: *class names (a list of class names, separated by spaces)*[¬∂](autosummary.html#directive-option-autosummary-class "Link to this definition")

Assign [class attributes](https://docutils.sourceforge.io/docs/ref/doctree.html#classes) to the table. This is a [common option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options).

Added in version 8.2.

:toctree: *optional directory name*[¬∂](autosummary.html#directive-option-autosummary-toctree "Link to this definition")

If you want the [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") table to also serve as a [`toctree`](../restructuredtext/directives.html#directive-toctree "toctree directive") entry, use the `toctree` option, for example:

```
.. autosummary::
   :toctree: DIRNAME

   sphinx.environment.BuildEnvironment
   sphinx.util.relative_uri
```

The `toctree` option also signals to the **sphinx-autogen** script that stub pages should be generated for the entries listed in this directive. The option accepts a directory name as an argument; **sphinx-autogen** will by default place its output in this directory. If no argument is given, output is placed in the same directory as the file that contains the directive.

Added in version 0.6.

:caption: *caption of ToC*[¬∂](autosummary.html#directive-option-autosummary-caption "Link to this definition")

Add a caption to the toctree.

Added in version 3.1.

:signatures: *format*[¬∂](autosummary.html#directive-option-autosummary-signatures "Link to this definition")

How to display signatures. Valid values are

- `long` (*default*): use a long signature. This is still cut off so that name plus signature do not exceeed a certain length.
- `short`: Function and class signatures are displayed as `(‚Ä¶)` if they have arguments and as `()` if they don‚Äôt have arguments.
- `none`: do not show signatures.

Added in version 8.2.

:nosignatures:[¬∂](autosummary.html#directive-option-autosummary-nosignatures "Link to this definition")

Do not show function signatures in the summary.

This is equivalent to `:signatures: none`.

Added in version 0.6.

Changed in version 8.2: The directive option is superseded by the more general `:signatures: none`.

It will be deprecated and removed in a future version of Sphinx.

:template: *filename*[¬∂](autosummary.html#directive-option-autosummary-template "Link to this definition")

Specify a custom template for rendering the summary. For example,

```
.. autosummary::
   :template: mytemplate.rst

   sphinx.environment.BuildEnvironment
```

would use the template `mytemplate.rst` in your [`templates_path`](../configuration.html#confval-templates_path) to generate the pages for all entries listed. See [Customizing templates](autosummary.html#customizing-templates) below.

Added in version 1.0.

:recursive:[¬∂](autosummary.html#directive-option-autosummary-recursive "Link to this definition")

Generate documents for modules and sub-packages recursively. For example,

```
.. autosummary::
   :recursive:

   sphinx.environment.BuildEnvironment
```

Added in version 3.1.

## **sphinx-autogen** ‚Äì generate autodoc stub pages[¬∂](autosummary.html#sphinx-autogen-generate-autodoc-stub-pages "Link to this heading")

The **sphinx-autogen** script can be used to conveniently generate stub documentation pages for items included in [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") listings.

For example, the command

```
$ sphinx-autogen -o generated *.rst
```

will read all [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") tables in the `*.rst` files that have the `:toctree:` option set, and output corresponding stub pages in directory `generated` for all documented items. The generated pages by default contain text of the form:

```
sphinx.util.relative_uri
========================

.. autofunction:: sphinx.util.relative_uri
```

If the `-o` option is not given, the script will place the output files in the directories specified in the `:toctree:` options.

For more information, refer to the [sphinx-autogen documentation](../../man/sphinx-autogen.html)

## Generating stub pages automatically[¬∂](autosummary.html#generating-stub-pages-automatically "Link to this heading")

If you do not want to create stub pages with **sphinx-autogen**, you can also use these config values:

autosummary\_context[¬∂](autosummary.html#confval-autosummary_context "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of values to pass into the template engine‚Äôs context for autosummary stubs files.

Added in version 3.1.

autosummary\_generate[¬∂](autosummary.html#confval-autosummary_generate "Link to this definition")

Type:

`bool`

Default:

`True`

Boolean indicating whether to scan all found documents for autosummary directives, and to generate stub pages for each.

Can also be a list of documents for which stub pages should be generated.

The new files will be placed in the directories specified in the `:toctree:` options of the directives.

Changed in version 2.3: Emits [`autodoc-skip-member`](autodoc.html#event-autodoc-skip-member) event as [`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") does.

Changed in version 4.0: Enabled by default.

autosummary\_generate\_overwrite[¬∂](autosummary.html#confval-autosummary_generate_overwrite "Link to this definition")

Type:

`bool`

Default:

`True`

If true, autosummary overwrites existing files by generated stub pages.

Added in version 3.0.

autosummary\_mock\_imports[¬∂](autosummary.html#confval-autosummary_mock_imports "Link to this definition")

Type:

`list[str]`

Default:

`[]`

This value contains a list of modules to be mocked up. See [`autodoc_mock_imports`](autodoc.html#confval-autodoc_mock_imports) for more details. It defaults to [`autodoc_mock_imports`](autodoc.html#confval-autodoc_mock_imports).

Added in version 2.0.

autosummary\_imported\_members[¬∂](autosummary.html#confval-autosummary_imported_members "Link to this definition")

Type:

`bool`

Default:

`False`

A boolean flag indicating whether to document classes and functions imported in modules.

Added in version 2.1.

Changed in version 4.4: If `autosummary_ignore_module_all` is `False`, this configuration value is ignored for members listed in `__all__`.

autosummary\_ignore\_module\_all[¬∂](autosummary.html#confval-autosummary_ignore_module_all "Link to this definition")

Type:

`bool`

Default:

`True`

If `False` and a module has the `__all__` attribute set, autosummary documents every member listed in `__all__` and no others.

Note that if an imported member is listed in `__all__`, it will be documented regardless of the value of `autosummary_imported_members`. To match the behaviour of `from module import *`, set `autosummary_ignore_module_all` to False and `autosummary_imported_members` to True.

Added in version 4.4.

autosummary\_filename\_map[¬∂](autosummary.html#confval-autosummary_filename_map "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

A dict mapping object names to filenames. This is necessary to avoid filename conflicts where multiple objects have names that are indistinguishable when case is ignored, on file systems where filenames are case-insensitive.

Added in version 3.2.

## Customizing templates[¬∂](autosummary.html#customizing-templates "Link to this heading")

Added in version 1.0.

You can customize the stub page templates, in a similar way as the HTML Jinja templates, see [Templating](../../development/html_themes/templating.html#templating). ([`TemplateBridge`](../../extdev/appapi.html#sphinx.application.TemplateBridge "sphinx.application.TemplateBridge") is not supported.)

Note

If you find yourself spending much time tailoring the stub templates, this may indicate that it‚Äôs a better idea to write custom narrative documentation instead.

Autosummary uses the following Jinja template files:

- `autosummary/base.rst` ‚Äì fallback template
- `autosummary/module.rst` ‚Äì template for modules
- `autosummary/class.rst` ‚Äì template for classes
- `autosummary/function.rst` ‚Äì template for functions
- `autosummary/attribute.rst` ‚Äì template for class attributes
- `autosummary/method.rst` ‚Äì template for class methods

The following variables are available in the templates:

name[¬∂](autosummary.html#name "Link to this definition")

Name of the documented object, excluding the module and class parts.

objname[¬∂](autosummary.html#objname "Link to this definition")

Name of the documented object, excluding the module parts.

fullname[¬∂](autosummary.html#fullname "Link to this definition")

Full name of the documented object, including module and class parts.

objtype[¬∂](autosummary.html#objtype "Link to this definition")

Type of the documented object, one of `"module"`, `"function"`, `"class"`, `"method"`, `"attribute"`, `"data"`, `"object"`, `"exception"`, `"newvarattribute"`, `"newtypedata"`, `"property"`.

module[¬∂](autosummary.html#module "Link to this definition")

Name of the module the documented object belongs to.

class[¬∂](autosummary.html#class "Link to this definition")

Name of the class the documented object belongs to. Only available for methods and attributes.

underline[¬∂](autosummary.html#underline "Link to this definition")

A string containing `len(full_name) * '='`. Use the `underline` filter instead.

members[¬∂](autosummary.html#members "Link to this definition")

List containing names of all members of the module or class. Only available for modules and classes.

inherited\_members[¬∂](autosummary.html#inherited_members "Link to this definition")

List containing names of all inherited members of class. Only available for classes.

Added in version 1.8.0.

functions[¬∂](autosummary.html#functions "Link to this definition")

List containing names of ‚Äúpublic‚Äù functions in the module. Here, ‚Äúpublic‚Äù means that the name does not start with an underscore. Only available for modules.

classes[¬∂](autosummary.html#classes "Link to this definition")

List containing names of ‚Äúpublic‚Äù classes in the module. Only available for modules.

exceptions[¬∂](autosummary.html#exceptions "Link to this definition")

List containing names of ‚Äúpublic‚Äù exceptions in the module. Only available for modules.

methods[¬∂](autosummary.html#methods "Link to this definition")

List containing names of ‚Äúpublic‚Äù methods in the class. Only available for classes.

attributes[¬∂](autosummary.html#attributes "Link to this definition")

List containing names of ‚Äúpublic‚Äù attributes in the class/module. Only available for classes and modules.

Changed in version 3.1: Attributes of modules are supported.

modules[¬∂](autosummary.html#modules "Link to this definition")

List containing names of ‚Äúpublic‚Äù modules in the package. Only available for modules that are packages and the `recursive` option is on.

Added in version 3.1.

Additionally, the following filters are available

escape(*s*)[¬∂](autosummary.html#escape "Link to this definition")

Escape any special characters in the text to be used in formatting RST contexts. For instance, this prevents asterisks making things bold. This replaces the builtin Jinja [escape filter](https://jinja.palletsprojects.com/en/3.0.x/templates/#jinja-filters.escape) that does html-escaping.

underline(*s*, *line='='*)

Add a title underline to a piece of text.

For instance, `{{ fullname | escape | underline }}` should be used to produce the title of a page.

Note

You can use the [`autosummary`](autosummary.html#directive-autosummary "autosummary directive") directive in the stub pages. Stub pages are generated also based on these directives.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page





The Basics


User guide




Community


Reference



# [`sphinx.ext.coverage`](coverage.html#module-sphinx.ext.coverage "sphinx.ext.coverage: Check Python modules and C API for coverage in the documentation.") ‚Äì Collect doc coverage stats[¬∂](coverage.html#module-sphinx.ext.coverage "Link to this heading")

This extension features one additional builder, the [`CoverageBuilder`](coverage.html#sphinx.ext.coverage.CoverageBuilder "sphinx.ext.coverage.CoverageBuilder").

Note

The [sphinx-apidoc](../../man/sphinx-apidoc.html) command can be used to automatically generate API documentation for all code in a project, avoiding the need to manually author these documents and keep them up-to-date.

Warning

[`coverage`](coverage.html#module-sphinx.ext.coverage "sphinx.ext.coverage: Check Python modules and C API for coverage in the documentation.") **imports** the modules to be documented. If any modules have side effects on import, these will be executed by the coverage builder when `sphinx-build` is run.

If you document scripts (as opposed to library modules), make sure their main routine is protected by a `if __name__ == '__main__'` condition.

Note

For Sphinx (actually, the Python interpreter that executes Sphinx) to find your module, it must be importable. That means that the module or the package must be in one of the directories on [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") ‚Äì adapt your [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") in the configuration file accordingly.

To use this builder, activate the coverage extension in your configuration file and run `sphinx-build -M coverage` on the command line.

## Builder[¬∂](coverage.html#builder "Link to this heading")

*class* sphinx.ext.coverage.CoverageBuilder[\[source\]](../../_modules/sphinx/ext/coverage.html#CoverageBuilder)[¬∂](coverage.html#sphinx.ext.coverage.CoverageBuilder "Link to this definition")

## Configuration[¬∂](coverage.html#configuration "Link to this heading")

Several configuration values can be used to specify what the builder should check:

coverage\_modules[¬∂](coverage.html#confval-coverage_modules "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

List of Python packages or modules to test coverage for. When this is provided, Sphinx will introspect each package or module provided in this list as well as all sub-packages and sub-modules found in each. When this is not provided, Sphinx will only provide coverage for Python packages and modules that it is aware of: that is, any modules documented using the [`py:module`](../domains/python.html#directive-py-module "py:module directive") directive provided in the [Python domain](../domains/python.html) or the [`automodule`](autodoc.html#directive-automodule "automodule directive") directive provided by the [`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension.

Added in version 7.4.

coverage\_ignore\_modules[¬∂](coverage.html#confval-coverage_ignore_modules "Link to this definition")

coverage\_ignore\_functions[¬∂](coverage.html#confval-coverage_ignore_functions "Link to this definition")

coverage\_ignore\_classes[¬∂](coverage.html#confval-coverage_ignore_classes "Link to this definition")

coverage\_ignore\_pyobjects[¬∂](coverage.html#confval-coverage_ignore_pyobjects "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

List of [Python regular expressions](https://docs.python.org/library/re).

If any of these regular expressions matches any part of the full import path of a Python object, that Python object is excluded from the documentation coverage report.

Added in version 2.1.

coverage\_c\_path[¬∂](coverage.html#confval-coverage_c_path "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

coverage\_c\_regexes[¬∂](coverage.html#confval-coverage_c_regexes "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

coverage\_ignore\_c\_items[¬∂](coverage.html#confval-coverage_ignore_c_items "Link to this definition")

Type:

`dict[str, Sequence[str]]`

Default:

`{}`

coverage\_write\_headline[¬∂](coverage.html#confval-coverage_write_headline "Link to this definition")

Type:

`bool`

Default:

`True`

Set to `False` to not write headlines.

Added in version 1.1.

coverage\_skip\_undoc\_in\_source[¬∂](coverage.html#confval-coverage_skip_undoc_in_source "Link to this definition")

Type:

`bool`

Default:

`False`

Skip objects that are not documented in the source with a docstring.

Added in version 1.1.

coverage\_show\_missing\_items[¬∂](coverage.html#confval-coverage_show_missing_items "Link to this definition")

Type:

`bool`

Default:

`False`

Print objects that are missing to standard output also.

Added in version 3.1.

coverage\_statistics\_to\_report[¬∂](coverage.html#confval-coverage_statistics_to_report "Link to this definition")

Type:

`bool`

Default:

`True`

Print a tabular report of the coverage statistics to the coverage report.

Example output:

```
+-----------------------+----------+--------------+
| Module                | Coverage | Undocumented |
+=======================+==========+==============+
| package.foo_module    | 100.00%  | 0            |
+-----------------------+----------+--------------+
| package.bar_module    | 83.33%   | 1            |
+-----------------------+----------+--------------+
```

Added in version 7.2.

coverage\_statistics\_to\_stdout[¬∂](coverage.html#confval-coverage_statistics_to_stdout "Link to this definition")

Type:

`bool`

Default:

`False`

Print a tabular report of the coverage statistics to standard output.

Example output:

```
+-----------------------+----------+--------------+
| Module                | Coverage | Undocumented |
+=======================+==========+==============+
| package.foo_module    | 100.00%  | 0            |
+-----------------------+----------+--------------+
| package.bar_module    | 83.33%   | 1            |
+-----------------------+----------+--------------+
```

Added in version 7.2.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page










The Basics


User guide




Community


Reference



# [`sphinx.ext.doctest`](doctest.html#module-sphinx.ext.doctest "sphinx.ext.doctest: Test snippets in the documentation.") ‚Äì Test snippets in the documentation[¬∂](doctest.html#module-sphinx.ext.doctest "Link to this heading")

It is often helpful to include snippets of code in your documentation and demonstrate the results of executing them. But it is important to ensure that the documentation stays up-to-date with the code.

This extension allows you to test such code snippets in the documentation in a natural way. If you mark the code blocks as shown here, the `doctest` builder will collect them and run them as doctest tests.

Within each document, you can assign each snippet to a *group*. Each group consists of:

- zero or more *setup code* blocks (e.g. importing the module to test)
- one or more *test* blocks

When building the docs with the `doctest` builder, groups are collected for each document and run one after the other, first executing setup code blocks, then the test blocks in the order they appear in the file.

There are two kinds of test blocks:

- *doctest-style* blocks mimic interactive sessions by interleaving Python code (including the interpreter prompt) and output.
- *code-output-style* blocks consist of an ordinary piece of Python code, and optionally, a piece of output for that code.

## Directives[¬∂](doctest.html#directives "Link to this heading")

The *group* argument below is interpreted as follows: if it is empty, the block is assigned to the group named `default`. If it is `*`, the block is assigned to all groups (including the `default` group). Otherwise, it must be a comma-separated list of group names.

.. testsetup:: \[group][¬∂](doctest.html#directive-testsetup "Link to this definition")

A setup code block. This code is not shown in the output for other builders, but executed before the doctests of the group(s) it belongs to.

Options

:skipif: *condition (text)*[¬∂](doctest.html#directive-option-testsetup-skipif "Link to this definition")

Skip the directive if the python expression *condition* is True. See [skipping tests conditionally](doctest.html#doctest-skipif).

.. testcleanup:: \[group][¬∂](doctest.html#directive-testcleanup "Link to this definition")

A cleanup code block. This code is not shown in the output for other builders, but executed after the doctests of the group(s) it belongs to.

Added in version 1.1.

Options

:skipif: *condition (text)*[¬∂](doctest.html#directive-option-testcleanup-skipif "Link to this definition")

Skip the directive if the python expression *condition* is True. See [skipping tests conditionally](doctest.html#doctest-skipif).

.. doctest:: \[group][¬∂](doctest.html#directive-doctest "Link to this definition")

A doctest-style code block. You can use standard [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "(in Python v3.13)") flags for controlling how actual output is compared with what you give as output. The default set of flags is specified by the [`doctest_default_flags`](doctest.html#confval-doctest_default_flags) configuration variable.

Options

:hide:[¬∂](doctest.html#directive-option-doctest-hide "Link to this definition")

Hide the doctest block in other builders. By default it is shown as a highlighted doctest block.

:options: *doctest flags (comma separated list)*[¬∂](doctest.html#directive-option-doctest-options "Link to this definition")

A comma-separated list of doctest flags that apply to each example in the tests. (You still can give explicit flags per example, with doctest comments, but they will show up in other builders too.)

Alternatively, you can give inline doctest options, like in doctest:

```
>>> datetime.date.now()
datetime.date(2008, 1, 1)
```

They will be respected when the test is run, but by default will be stripped from presentation output. You can prevent stripping using the option [`doctest:no-trim-doctest-flags`](doctest.html#directive-option-doctest-no-trim-doctest-flags "doctest:no-trim-doctest-flags directive:option").

:pyversion: *(text)*[¬∂](doctest.html#directive-option-doctest-pyversion "Link to this definition")

Specify the required Python version for the example to be tested. For instance, in the following case the example will be tested only for Python versions greater than 3.12:

```
.. doctest::
   :pyversion: > 3.12
```

The following operands are supported:

- `~=`: Compatible release clause
- `==`: Version matching clause
- `!=`: Version exclusion clause
- `<=`, `>=`: Inclusive ordered comparison clause
- `<`, `>`: Exclusive ordered comparison clause
- `===`: Arbitrary equality clause.

`pyversion` option is followed [**PEP-440: Version Specifiers**](https://peps.python.org/pep-0440/#version-specifiers).

Added in version 1.6.

Changed in version 1.7: Supported PEP-440 operands and notations

:trim-doctest-flags:[¬∂](doctest.html#directive-option-doctest-trim-doctest-flags "Link to this definition")

:no-trim-doctest-flags:[¬∂](doctest.html#directive-option-doctest-no-trim-doctest-flags "Link to this definition")

Whether to trim remove doctest flags (comments looking like `# doctest: FLAG, ...`) at the ends of lines and `<BLANKLINE>` markers individually. Default is `trim-doctest-flags`.

Note that like with standard doctests, you have to use `<BLANKLINE>` to signal a blank line in the expected output. The `<BLANKLINE>` is removed when building presentation output (HTML, LaTeX etc.).

:skipif: *condition (text)*[¬∂](doctest.html#directive-option-doctest-skipif "Link to this definition")

Skip the directive if the python expression *condition* is True. See [skipping tests conditionally](doctest.html#doctest-skipif).

.. testcode:: \[group][¬∂](doctest.html#directive-testcode "Link to this definition")

A code block for a code-output-style test.

Options

:hide:[¬∂](doctest.html#directive-option-testcode-hide "Link to this definition")

Hide the code block in other builders. By default it is shown as a highlighted code block.

:trim-doctest-flags:[¬∂](doctest.html#directive-option-testcode-trim-doctest-flags "Link to this definition")

:no-trim-doctest-flags:[¬∂](doctest.html#directive-option-testcode-no-trim-doctest-flags "Link to this definition")

Whether to trim remove doctest flags (comments looking like `# doctest: FLAG, ...`) at the ends of lines and `<BLANKLINE>` markers individually. Default is `trim-doctest-flags`.

:skipif: *condition (text)*[¬∂](doctest.html#directive-option-testcode-skipif "Link to this definition")

Skip the directive if the python expression *condition* is True. See [skipping tests conditionally](doctest.html#doctest-skipif).

Note

Code in a `testcode` block is always executed all at once, no matter how many statements it contains. Therefore, output will *not* be generated for bare expressions ‚Äì use `print`. Example:

```
.. testcode::

   1+1         # this will give no output!
   print(2+2)  # this will give output

.. testoutput::

   4
```

Also, please be aware that since the doctest module does not support mixing regular output and an exception message in the same snippet, this applies to testcode/testoutput as well.

.. testoutput:: \[group][¬∂](doctest.html#directive-testoutput "Link to this definition")

The corresponding output, or the exception message, for the last [`testcode`](doctest.html#directive-testcode "testcode directive") block.

:hide:[¬∂](doctest.html#directive-option-testoutput-hide "Link to this definition")

Hide the doctest block in other builders. By default it is shown as a highlighted doctest block.

:options: *doctest flags (comma separated list)*[¬∂](doctest.html#directive-option-testoutput-options "Link to this definition")

A comma-separated list of doctest flags.

:trim-doctest-flags:[¬∂](doctest.html#directive-option-testoutput-trim-doctest-flags "Link to this definition")

:no-trim-doctest-flags:[¬∂](doctest.html#directive-option-testoutput-no-trim-doctest-flags "Link to this definition")

Whether to trim remove doctest flags (comments looking like `# doctest: FLAG, ...`) at the ends of lines and `<BLANKLINE>` markers individually. Default is `trim-doctest-flags`.

:skipif: *condition (text)*[¬∂](doctest.html#directive-option-testoutput-skipif "Link to this definition")

Skip the directive if the python expression *condition* is True. See [skipping tests conditionally](doctest.html#doctest-skipif).

Example:

```
.. testcode::

   print('Output     text.')

.. testoutput::
   :hide:
   :options: -ELLIPSIS, +NORMALIZE_WHITESPACE

   Output text.
```

The following is an example for the usage of the directives. The test via [`doctest`](doctest.html#directive-doctest "doctest directive") and the test via [`testcode`](doctest.html#directive-testcode "testcode directive") and [`testoutput`](doctest.html#directive-testoutput "testoutput directive") are equivalent.

```
The parrot module
=================

.. testsetup:: *

   import parrot

The parrot module is a module about parrots.

Doctest example:

.. doctest::

   >>> parrot.voom(3000)
   This parrot wouldn't voom if you put 3000 volts through it!

Test-Output example:

.. testcode::

   parrot.voom(3000)

This would output:

.. testoutput::

   This parrot wouldn't voom if you put 3000 volts through it!
```

## Skipping tests conditionally[¬∂](doctest.html#skipping-tests-conditionally "Link to this heading")

`skipif`, a string option, can be used to skip directives conditionally. This may be useful e.g. when a different set of tests should be run depending on the environment (hardware, network/VPN, optional dependencies or different versions of dependencies). The `skipif` option is supported by all of the doctest directives. Below are typical use cases for `skipif` when used for different directives:


  - conditionally skip test setup and/or cleanup
  - customize setup/cleanup code per environment

  - conditionally skip both a test and its output verification

  - conditionally skip a test
  - customize test code per environment

  - conditionally skip output assertion for a skipped test
  - expect different output depending on the environment

The value of the `skipif` option is evaluated as a Python expression. If the result is a true value, the directive is omitted from the test run just as if it wasn‚Äôt present in the file at all.

Instead of repeating an expression, the [`doctest_global_setup`](doctest.html#confval-doctest_global_setup) configuration option can be used to assign it to a variable which can then be used instead.

Here‚Äôs an example which skips some tests if Pandas is not installed:

conf.py[¬∂](doctest.html#id1 "Link to this code")

```
extensions = ['sphinx.ext.doctest']
doctest_global_setup = '''
try:
    import pandas as pd
except ImportError:
    pd = None
'''
```

contents.rst[¬∂](doctest.html#id2 "Link to this code")

```
.. testsetup::
   :skipif: pd is None

   data = pd.Series([42])

.. doctest::
   :skipif: pd is None

   >>> data.iloc[0]
   42

.. testcode::
   :skipif: pd is None

   print(data.iloc[-1])

.. testoutput::
   :skipif: pd is None

   42
```

## Configuration[¬∂](doctest.html#configuration "Link to this heading")

The doctest extension uses the following configuration values:

doctest\_default\_flags[¬∂](doctest.html#confval-doctest_default_flags "Link to this definition")

Type:

`int`

Default:

`ELLIPSIS | IGNORE_EXCEPTION_DETAIL | DONT_ACCEPT_TRUE_FOR_1`

By default, these options are enabled:

- `ELLIPSIS`, allowing you to put ellipses in the expected output that match anything in the actual output;
- `IGNORE_EXCEPTION_DETAIL`, causing everything following the leftmost colon and any module information in the exception name to be ignored;
- `DONT_ACCEPT_TRUE_FOR_1`, rejecting ‚ÄúTrue‚Äù in the output where ‚Äú1‚Äù is given ‚Äì the default behavior of accepting this substitution is a relic of pre-Python 2.2 times.

Added in version 1.5.

doctest\_show\_successes[¬∂](doctest.html#confval-doctest_show_successes "Link to this definition")

Type:

`bool`

Default:

`True`

Controls whether successes are reported.

For a project with many doctests, it may be useful to set this to `False` to only highlight failures.

Added in version 7.2.

doctest\_path[¬∂](doctest.html#confval-doctest_path "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of directories that will be added to [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") when the doctest builder is used. (Make sure it contains absolute paths.)

doctest\_global\_setup[¬∂](doctest.html#confval-doctest_global_setup "Link to this definition")

Type:

`str`

Default:

`''`

Python code that is treated like it were put in a `testsetup` directive for *every* file that is tested, and for every group. You can use this to e.g. import modules you will always need in your doctests.

Added in version 0.6.

doctest\_global\_cleanup[¬∂](doctest.html#confval-doctest_global_cleanup "Link to this definition")

Type:

`str`

Default:

`''`

Python code that is treated like it were put in a `testcleanup` directive for *every* file that is tested, and for every group. You can use this to e.g. remove any temporary files that the tests leave behind.

Added in version 1.1.

doctest\_test\_doctest\_blocks[¬∂](doctest.html#confval-doctest_test_doctest_blocks "Link to this definition")

Type:

`str`

Default:

`'default'`

If this is a nonempty string, standard reStructuredText doctest blocks will be tested too. They will be assigned to the group name given.

reStructuredText doctest blocks are simply doctests put into a paragraph of their own, like so:

```
Some documentation text.

>>> print(1)
1

Some more documentation text.
```

(Note that no special `::` is used to introduce a doctest block; docutils recognizes them from the leading `>>>`. Also, no additional indentation is used, though it doesn‚Äôt hurt.)

If this value is left at its default value, the above snippet is interpreted by the doctest builder exactly like the following:

```
Some documentation text.

.. doctest::

   >>> print(1)
   1

Some more documentation text.
```

This feature makes it easy for you to test doctests in docstrings included with the [`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension without marking them up with a special directive.

Note though that you can‚Äôt have blank lines in reStructuredText doctest blocks. They will be interpreted as one block ending and another one starting. Also, removal of `<BLANKLINE>` and `# doctest:` options only works in [`doctest`](doctest.html#directive-doctest "doctest directive") blocks, though you may set [`trim_doctest_flags`](../configuration.html#confval-trim_doctest_flags) to achieve that in all code blocks with Python console content.

doctest\_fail\_fast[¬∂](doctest.html#confval-doctest_fail_fast "Link to this definition")

Type:

`bool`

Default:

`False`

Exit when the first failure is encountered.

Added in version 8.3.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

The Basics


User guide




Community


Reference



# [`sphinx.ext.duration`](duration.html#module-sphinx.ext.duration "sphinx.ext.duration: Measure durations of Sphinx processing") ‚Äì Measure durations of Sphinx processing[¬∂](duration.html#module-sphinx.ext.duration "Link to this heading")

Added in version 2.4.

This extension measures durations of Sphinx processing and show its result at end of the build. It is useful for inspecting what document is slowly built.








### Navigation

- [Documentation](../../index.html) ¬ª

The Basics


User guide


Community


Reference


# Example Google Style Python Docstrings[¬∂](example_google.html#example-google-style-python-docstrings "Link to this heading")

See also

[Example NumPy Style Python Docstrings](example_numpy.html#example-numpy)

Download: [`example_google.py`](../../_downloads/1db87291c47cdf2a82cc635794bf6c44/example_google.py)

```
"""Example Google style docstrings.

This module demonstrates documentation as specified by the `Google Python
Style Guide`_. Docstrings may extend over multiple lines. Sections are created
with a section header and a colon followed by a block of indented text.

Example:
    Examples can be given using either the ``Example`` or ``Examples``
    sections. Sections support any reStructuredText formatting, including
    literal blocks::

        $ python example_google.py

Section breaks are created by resuming unindented text. Section breaks
are also implicitly created anytime a new section starts.

Attributes:
    module_level_variable1 (int): Module level variables may be documented in
        either the ``Attributes`` section of the module docstring, or in an
        inline docstring immediately following the variable.

        Either form is acceptable, but the two should not be mixed. Choose
        one convention to document module level variables and be consistent
        with it.

Todo:
    * For module TODOs
    * You have to also use ``sphinx.ext.todo`` extension

.. _Google Python Style Guide:
   https://google.github.io/styleguide/pyguide.html

"""

module_level_variable1 = 12345

module_level_variable2 = 98765
"""int: Module level variable documented inline.

The docstring may span multiple lines. The type may optionally be specified
on the first line, separated by a colon.
"""


def function_with_types_in_docstring(param1, param2):
    """Example function with types documented in the docstring.

    :pep:`484` type annotations are supported. If attribute, parameter, and
    return types are annotated according to `PEP 484`_, they do not need to be
    included in the docstring:

    Args:
        param1 (int): The first parameter.
        param2 (str): The second parameter.

    Returns:
        bool: The return value. True for success, False otherwise.
    """


def function_with_pep484_type_annotations(param1: int, param2: str) -> bool:
    """Example function with PEP 484 type annotations.

    Args:
        param1: The first parameter.
        param2: The second parameter.

    Returns:
        The return value. True for success, False otherwise.

    """


def module_level_function(param1, param2=None, *args, **kwargs):
    """This is an example of a module level function.

    Function parameters should be documented in the ``Args`` section. The name
    of each parameter is required. The type and description of each parameter
    is optional, but should be included if not obvious.

    If ``*args`` or ``**kwargs`` are accepted,
    they should be listed as ``*args`` and ``**kwargs``.

    The format for a parameter is::

        name (type): description
            The description may span multiple lines. Following
            lines should be indented. The "(type)" is optional.

            Multiple paragraphs are supported in parameter
            descriptions.

    Args:
        param1 (int): The first parameter.
        param2 (:obj:`str`, optional): The second parameter. Defaults to None.
            Second line of description should be indented.
        *args: Variable length argument list.
        **kwargs: Arbitrary keyword arguments.

    Returns:
        bool: True if successful, False otherwise.

        The return type is optional and may be specified at the beginning of
        the ``Returns`` section followed by a colon.

        The ``Returns`` section may span multiple lines and paragraphs.
        Following lines should be indented to match the first line.

        The ``Returns`` section supports any reStructuredText formatting,
        including literal blocks::

            {
                'param1': param1,
                'param2': param2,
            }

    Raises:
        AttributeError: The ``Raises`` section is a list of all exceptions
            that are relevant to the interface.
        ValueError: If `param2` is equal to `param1`.

    """
    if param1 == param2:
        msg = 'param1 may not be equal to param2'
        raise ValueError(msg)
    return True


def example_generator(n):
    """Generators have a ``Yields`` section instead of a ``Returns`` section.

    Args:
        n (int): The upper limit of the range to generate, from 0 to `n` - 1.

    Yields:
        int: The next number in the range of 0 to `n` - 1.

    Examples:
        Examples should be written in doctest format, and should illustrate how
        to use the function.

        >>> print([i for i in example_generator(4)])
        [0, 1, 2, 3]

    """
    yield from range(n)


class ExampleError(Exception):
    """Exceptions are documented in the same way as classes.

    The __init__ method may be documented in either the class level
    docstring, or as a docstring on the __init__ method itself.

    Either form is acceptable, but the two should not be mixed. Choose one
    convention to document the __init__ method and be consistent with it.

    Note:
        Do not include the `self` parameter in the ``Args`` section.

    Args:
        msg (str): Human readable string describing the exception.
        code (:obj:`int`, optional): Error code.

    Attributes:
        msg (str): Human readable string describing the exception.
        code (int): Exception error code.

    """

    def __init__(self, msg, code):
        self.msg = msg
        self.code = code


class ExampleClass:
    """The summary line for a class docstring should fit on one line.

    If the class has public attributes, they may be documented here
    in an ``Attributes`` section and follow the same formatting as a
    function's ``Args`` section. Alternatively, attributes may be documented
    inline with the attribute's declaration (see __init__ method below).

    Properties created with the ``@property`` decorator should be documented
    in the property's getter method.

    Attributes:
        attr1 (str): Description of `attr1`.
        attr2 (:obj:`int`, optional): Description of `attr2`.

    """

    def __init__(self, param1, param2, param3):
        """Example of docstring on the __init__ method.

        The __init__ method may be documented in either the class level
        docstring, or as a docstring on the __init__ method itself.

        Either form is acceptable, but the two should not be mixed. Choose one
        convention to document the __init__ method and be consistent with it.

        Note:
            Do not include the `self` parameter in the ``Args`` section.

        Args:
            param1 (str): Description of `param1`.
            param2 (:obj:`int`, optional): Description of `param2`. Multiple
                lines are supported.
            param3 (list(str)): Description of `param3`.

        """
        self.attr1 = param1
        self.attr2 = param2
        self.attr3 = param3  #: Doc comment *inline* with attribute

        #: list(str): Doc comment *before* attribute, with type specified
        self.attr4 = ['attr4']

        self.attr5 = None
        """str: Docstring *after* attribute, with type specified."""

    @property
    def readonly_property(self):
        """str: Properties should be documented in their getter method."""
        return 'readonly_property'

    @property
    def readwrite_property(self):
        """list(str): Properties with both a getter and setter
        should only be documented in their getter method.

        If the setter method contains notable behavior, it should be
        mentioned here.
        """
        return ['readwrite_property']

    @readwrite_property.setter
    def readwrite_property(self, value):
        _ = value

    def example_method(self, param1, param2):
        """Class methods are similar to regular functions.

        Note:
            Do not include the `self` parameter in the ``Args`` section.

        Args:
            param1: The first parameter.
            param2: The second parameter.

        Returns:
            True if successful, False otherwise.

        """
        return True

    def __special__(self):
        """By default special members with docstrings are not included.

        Special members are any methods or attributes that start with and
        end with a double underscore. Any special member with a docstring
        will be included in the output, if
        ``napoleon_include_special_with_doc`` is set to True.

        This behavior can be enabled by changing the following setting in
        Sphinx's conf.py::

            napoleon_include_special_with_doc = True

        """
        pass

    def __special_without_docstring__(self):
        pass

    def _private(self):
        """By default private members are not included.

        Private members are any methods or attributes that start with an
        underscore and are *not* special. By default they are not included
        in the output.

        This behavior can be changed such that private members *are* included
        by changing the following setting in Sphinx's conf.py::

            napoleon_include_private_with_doc = True

        """
        pass

    def _private_without_docstring(self):
        pass


class ExamplePEP526Class:
    """The summary line for a class docstring should fit on one line.

    If the class has public attributes, they may be documented here
    in an ``Attributes`` section and follow the same formatting as a
    function's ``Args`` section. If ``napoleon_attr_annotations``
    is True, types can be specified in the class body using ``PEP 526``
    annotations.

    Attributes:
        attr1: Description of `attr1`.
        attr2: Description of `attr2`.

    """

    attr1: str
    attr2: int
```







### Navigation

- [Documentation](../../index.html) ¬ª

The Basics


User guide


Community


Reference


# Example NumPy Style Python Docstrings[¬∂](example_numpy.html#example-numpy-style-python-docstrings "Link to this heading")

See also

[Example Google Style Python Docstrings](example_google.html#example-google)

Download: [`example_numpy.py`](../../_downloads/f3a25b842d7256a8ce8f8cb6cc6160a9/example_numpy.py)

```
"""Example NumPy style docstrings.

This module demonstrates documentation as specified by the `NumPy
Documentation HOWTO`_. Docstrings may extend over multiple lines. Sections
are created with a section header followed by an underline of equal length.

Example
-------
Examples can be given using either the ``Example`` or ``Examples``
sections. Sections support any reStructuredText formatting, including
literal blocks::

    $ python example_numpy.py


Section breaks are created with two blank lines. Section breaks are also
implicitly created anytime a new section starts. Section bodies *may* be
indented:

Notes
-----
    This is an example of an indented section. It's like any other section,
    but the body is indented to help it stand out from surrounding text.

If a section is indented, then a section break is created by
resuming unindented text.

Attributes
----------
module_level_variable1 : int
    Module level variables may be documented in either the ``Attributes``
    section of the module docstring, or in an inline docstring immediately
    following the variable.

    Either form is acceptable, but the two should not be mixed. Choose
    one convention to document module level variables and be consistent
    with it.


.. _NumPy docstring standard:
   https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard

"""

module_level_variable1 = 12345

module_level_variable2 = 98765
"""int: Module level variable documented inline.

The docstring may span multiple lines. The type may optionally be specified
on the first line, separated by a colon.
"""


def function_with_types_in_docstring(param1, param2):
    """Example function with types documented in the docstring.

    :pep:`484` type annotations are supported. If attribute, parameter, and
    return types are annotated according to `PEP 484`_, they do not need to be
    included in the docstring:

    Parameters
    ----------
    param1 : int
        The first parameter.
    param2 : str
        The second parameter.

    Returns
    -------
    bool
        True if successful, False otherwise.
    """


def function_with_pep484_type_annotations(param1: int, param2: str) -> bool:
    """Example function with PEP 484 type annotations.

    The return type must be duplicated in the docstring to comply
    with the NumPy docstring style.

    Parameters
    ----------
    param1
        The first parameter.
    param2
        The second parameter.

    Returns
    -------
    bool
        True if successful, False otherwise.

    """


def module_level_function(param1, param2=None, *args, **kwargs):
    """This is an example of a module level function.

    Function parameters should be documented in the ``Parameters`` section.
    The name of each parameter is required. The type and description of each
    parameter is optional, but should be included if not obvious.

    If ``*args`` or ``**kwargs`` are accepted,
    they should be listed as ``*args`` and ``**kwargs``.

    The format for a parameter is::

        name : type
            description

            The description may span multiple lines. Following lines
            should be indented to match the first line of the description.
            The ": type" is optional.

            Multiple paragraphs are supported in parameter
            descriptions.

    Parameters
    ----------
    param1 : int
        The first parameter.
    param2 : :obj:`str`, optional
        The second parameter.
    *args
        Variable length argument list.
    **kwargs
        Arbitrary keyword arguments.

    Returns
    -------
    bool
        True if successful, False otherwise.

        The return type is not optional. The ``Returns`` section may span
        multiple lines and paragraphs. Following lines should be indented to
        match the first line of the description.

        The ``Returns`` section supports any reStructuredText formatting,
        including literal blocks::

            {
                'param1': param1,
                'param2': param2,
            }

    Raises
    ------
    AttributeError
        The ``Raises`` section is a list of all exceptions
        that are relevant to the interface.
    ValueError
        If `param2` is equal to `param1`.

    """
    if param1 == param2:
        msg = 'param1 may not be equal to param2'
        raise ValueError(msg)
    return True


def example_generator(n):
    """Generators have a ``Yields`` section instead of a ``Returns`` section.

    Parameters
    ----------
    n : int
        The upper limit of the range to generate, from 0 to `n` - 1.

    Yields
    ------
    int
        The next number in the range of 0 to `n` - 1.

    Examples
    --------
    Examples should be written in doctest format, and should illustrate how
    to use the function.

    >>> print([i for i in example_generator(4)])
    [0, 1, 2, 3]

    """
    yield from range(n)


class ExampleError(Exception):
    """Exceptions are documented in the same way as classes.

    The __init__ method may be documented in either the class level
    docstring, or as a docstring on the __init__ method itself.

    Either form is acceptable, but the two should not be mixed. Choose one
    convention to document the __init__ method and be consistent with it.

    Note
    ----
    Do not include the `self` parameter in the ``Parameters`` section.

    Parameters
    ----------
    msg : str
        Human readable string describing the exception.
    code : :obj:`int`, optional
        Numeric error code.

    Attributes
    ----------
    msg : str
        Human readable string describing the exception.
    code : int
        Numeric error code.

    """

    def __init__(self, msg, code):
        self.msg = msg
        self.code = code


class ExampleClass:
    """The summary line for a class docstring should fit on one line.

    If the class has public attributes, they may be documented here
    in an ``Attributes`` section and follow the same formatting as a
    function's ``Args`` section. Alternatively, attributes may be documented
    inline with the attribute's declaration (see __init__ method below).

    Properties created with the ``@property`` decorator should be documented
    in the property's getter method.

    Attributes
    ----------
    attr1 : str
        Description of `attr1`.
    attr2 : :obj:`int`, optional
        Description of `attr2`.

    """

    def __init__(self, param1, param2, param3):
        """Example of docstring on the __init__ method.

        The __init__ method may be documented in either the class level
        docstring, or as a docstring on the __init__ method itself.

        Either form is acceptable, but the two should not be mixed. Choose one
        convention to document the __init__ method and be consistent with it.

        Note
        ----
        Do not include the `self` parameter in the ``Parameters`` section.

        Parameters
        ----------
        param1 : str
            Description of `param1`.
        param2 : list(str)
            Description of `param2`. Multiple
            lines are supported.
        param3 : :obj:`int`, optional
            Description of `param3`.

        """
        self.attr1 = param1
        self.attr2 = param2
        self.attr3 = param3  #: Doc comment *inline* with attribute

        #: list(str): Doc comment *before* attribute, with type specified
        self.attr4 = ['attr4']

        self.attr5 = None
        """str: Docstring *after* attribute, with type specified."""

    @property
    def readonly_property(self):
        """str: Properties should be documented in their getter method."""
        return 'readonly_property'

    @property
    def readwrite_property(self):
        """list(str): Properties with both a getter and setter
        should only be documented in their getter method.

        If the setter method contains notable behavior, it should be
        mentioned here.
        """
        return ['readwrite_property']

    @readwrite_property.setter
    def readwrite_property(self, value):
        _ = value

    def example_method(self, param1, param2):
        """Class methods are similar to regular functions.

        Note
        ----
        Do not include the `self` parameter in the ``Parameters`` section.

        Parameters
        ----------
        param1
            The first parameter.
        param2
            The second parameter.

        Returns
        -------
        bool
            True if successful, False otherwise.

        """
        return True

    def __special__(self):
        """By default special members with docstrings are not included.

        Special members are any methods or attributes that start with and
        end with a double underscore. Any special member with a docstring
        will be included in the output, if
        ``napoleon_include_special_with_doc`` is set to True.

        This behavior can be enabled by changing the following setting in
        Sphinx's conf.py::

            napoleon_include_special_with_doc = True

        """
        pass

    def __special_without_docstring__(self):
        pass

    def _private(self):
        """By default private members are not included.

        Private members are any methods or attributes that start with an
        underscore and are *not* special. By default they are not included
        in the output.

        This behavior can be changed such that private members *are* included
        by changing the following setting in Sphinx's conf.py::

            napoleon_include_private_with_doc = True

        """
        pass

    def _private_without_docstring(self):
        pass
```







### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference



# [`sphinx.ext.extlinks`](extlinks.html#module-sphinx.ext.extlinks "sphinx.ext.extlinks: Allow inserting external links with common base URLs easily.") ‚Äì Markup to shorten external links[¬∂](extlinks.html#module-sphinx.ext.extlinks "Link to this heading")

*Module author: Georg Brandl*

Added in version 1.0.

This extension is meant to help with the common pattern of having many external links that point to URLs on one and the same site, e.g. links to bug trackers, version control web interfaces, or simply subpages in other websites. It does so by providing aliases to base URLs, so that you only need to give the subpage name when creating a link.

Let‚Äôs assume that you want to include many links to issues at the Sphinx tracker, at `https://github.com/sphinx-doc/sphinx/issues/num`. Typing this URL again and again is tedious, so you can use [`extlinks`](extlinks.html#module-sphinx.ext.extlinks "sphinx.ext.extlinks: Allow inserting external links with common base URLs easily.") to avoid repeating yourself.

The extension adds a config value:

extlinks[¬∂](extlinks.html#confval-extlinks "Link to this definition")

Type:

`dict[str, tuple[str, str | None]]`

Default:

`{}`

This config value must be a dictionary of external sites, mapping unique short alias names to a *base URL* and a *caption*. For example, to create an alias for the above mentioned issues, you would add

```
extlinks = {'issue': ('https://github.com/sphinx-doc/sphinx/issues/%s',
                      'issue %s')}
```

Now, you can use the alias name as a new role, e.g. ``:issue:`123` ``. This then inserts a link to [https://github.com/sphinx-doc/sphinx/issues/123](https://github.com/sphinx-doc/sphinx/issues/123). As you can see, the target given in the role is substituted in the *base URL* in the place of `%s`.

The link caption depends on the second item in the tuple, the *caption*:

- If *caption* is `None`, the link caption is the full URL.
- If *caption* is a string, then it must contain `%s` exactly once. In this case the link caption is *caption* with the partial URL substituted for `%s` ‚Äì in the above example, the link caption would be `issue 123`.

To produce a literal `%` in either *base URL* or *caption*, use `%%`:

```
extlinks = {'KnR': ('https://example.org/K%%26R/page/%s',
                      '[K&R; page %s]')}
```

You can also use the usual ‚Äúexplicit title‚Äù syntax supported by other roles that generate links, i.e. ``:issue:`this issue <123>` ``. In this case, the *caption* is not relevant.

Changed in version 4.0: Support to substitute by ‚Äò%s‚Äô in the caption.

Note

Since links are generated from the role in the reading stage, they appear as ordinary links to e.g. the `linkcheck` builder.

extlinks\_detect\_hardcoded\_links[¬∂](extlinks.html#confval-extlinks_detect_hardcoded_links "Link to this definition")

Type:

`bool`

Default:

`False`

If enabled, extlinks emits a warning if a hardcoded link is replaceable by an extlink, and suggests a replacement via warning.

Added in version 4.5.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

The Basics


User guide




Community


Reference



# [`sphinx.ext.githubpages`](githubpages.html#module-sphinx.ext.githubpages "sphinx.ext.githubpages: Publish HTML docs in GitHub Pages") ‚Äì Publish HTML docs in GitHub Pages[¬∂](githubpages.html#module-sphinx.ext.githubpages "Link to this heading")

Added in version 1.4.

Changed in version 2.0: Support `CNAME` file

This extension creates `.nojekyll` file on generated HTML directory to publish the document on GitHub Pages.

It also creates a `CNAME` file for custom domains when [`html_baseurl`](../configuration.html#confval-html_baseurl) set.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page






The Basics


User guide




Community


Reference



# [`sphinx.ext.graphviz`](graphviz.html#module-sphinx.ext.graphviz "sphinx.ext.graphviz: Support for Graphviz graphs.") ‚Äì Add Graphviz graphs[¬∂](graphviz.html#module-sphinx.ext.graphviz "Link to this heading")

Added in version 0.6.

This extension allows you to embed [Graphviz](https://graphviz.org/) graphs in your documents.

It adds these directives:

.. graphviz::[¬∂](graphviz.html#directive-graphviz "Link to this definition")

Directive to embed graphviz code. The input code for `dot` is given as the content. For example:

```
.. graphviz::

   digraph foo {
      "bar" -> "baz";
   }
```

In HTML output, the code will be rendered to a PNG or SVG image (see [`graphviz_output_format`](graphviz.html#confval-graphviz_output_format)). In LaTeX output, the code will be rendered to an embeddable PDF file.

You can also embed external dot files, by giving the file name as an argument to [`graphviz`](graphviz.html#directive-graphviz "graphviz directive") and no additional content:

```
.. graphviz:: external.dot
```

As for all file references in Sphinx, if the filename is absolute, it is taken as relative to the source directory.

Changed in version 1.1: Added support for external files.

options

:alt: *alternate text (text)*[¬∂](graphviz.html#directive-option-graphviz-alt "Link to this definition")

The alternate text of the graph. By default, the graph code is used to the alternate text.

Added in version 1.0.

:align: *alignment of the graph (left, center or right)*[¬∂](graphviz.html#directive-option-graphviz-align "Link to this definition")

The horizontal alignment of the graph.

Added in version 1.5.

:caption: *caption of the graph (text)*[¬∂](graphviz.html#directive-option-graphviz-caption "Link to this definition")

The caption of the graph.

Added in version 1.1.

:layout: *layout type of the graph (text)*[¬∂](graphviz.html#directive-option-graphviz-layout "Link to this definition")

The layout of the graph (e.g. `dot`, `neato` and so on). A path to the graphviz commands are also allowed. By default, [`graphviz_dot`](graphviz.html#confval-graphviz_dot) is used.

Added in version 1.4.

Changed in version 2.2: Renamed from `graphviz_dot`

:name: *label (text)*[¬∂](graphviz.html#directive-option-graphviz-name "Link to this definition")

The label of the graph.

Added in version 1.6.

:class: *class names (a list of class names separated by spaces)*[¬∂](graphviz.html#directive-option-graphviz-class "Link to this definition")

The class name of the graph.

Added in version 2.4.

.. graph::[¬∂](graphviz.html#directive-graph "Link to this definition")

Directive for embedding a single undirected graph. The name is given as a directive argument, the contents of the graph are the directive content. This is a convenience directive to generate `graph <name> { <content> }`.

For example:

```
.. graph:: foo

   "bar" -- "baz";
```

Note

The graph name is passed unchanged to Graphviz. If it contains non-alphanumeric characters (e.g. a dash), you will have to double-quote it.

options

Same as [`graphviz`](graphviz.html#directive-graphviz "graphviz directive").

:alt: *alternate text (text)*[¬∂](graphviz.html#directive-option-graph-alt "Link to this definition")

Added in version 1.0.

:align: *alignment of the graph (left, center or right)*[¬∂](graphviz.html#directive-option-graph-align "Link to this definition")

Added in version 1.5.

:caption: *caption of the graph (text)*[¬∂](graphviz.html#directive-option-graph-caption "Link to this definition")

Added in version 1.1.

:layout: *layout type of the graph (text)*[¬∂](graphviz.html#directive-option-graph-layout "Link to this definition")

Added in version 1.4.

Changed in version 2.2: Renamed from `graphviz_dot`

:name: *label (text)*[¬∂](graphviz.html#directive-option-graph-name "Link to this definition")

Added in version 1.6.

:class: *class names (a list of class names separated by spaces)*[¬∂](graphviz.html#directive-option-graph-class "Link to this definition")

The class name of the graph.

Added in version 2.4.

.. digraph::[¬∂](graphviz.html#directive-digraph "Link to this definition")

Directive for embedding a single directed graph. The name is given as a directive argument, the contents of the graph are the directive content. This is a convenience directive to generate `digraph <name> { <content> }`.

For example:

```
.. digraph:: foo

   "bar" -> "baz" -> "quux";
```

options

Same as [`graphviz`](graphviz.html#directive-graphviz "graphviz directive").

:alt: *alternate text (text)*[¬∂](graphviz.html#directive-option-digraph-alt "Link to this definition")

Added in version 1.0.

:align: *alignment of the graph (left, center or right)*[¬∂](graphviz.html#directive-option-digraph-align "Link to this definition")

Added in version 1.5.

:caption: *caption of the graph (text)*[¬∂](graphviz.html#directive-option-digraph-caption "Link to this definition")

Added in version 1.1.

:layout: *layout type of the graph (text)*[¬∂](graphviz.html#directive-option-digraph-layout "Link to this definition")

Added in version 1.4.

Changed in version 2.2: Renamed from `graphviz_dot`

:name: *label (text)*[¬∂](graphviz.html#directive-option-digraph-name "Link to this definition")

Added in version 1.6.

:class: *class names (a list of class names separated by spaces)*[¬∂](graphviz.html#directive-option-digraph-class "Link to this definition")

The class name of the graph.

Added in version 2.4.

There are also these config values:

graphviz\_dot[¬∂](graphviz.html#confval-graphviz_dot "Link to this definition")

Type:

`str`

Default:

`'dot'`

The command name with which to invoke `dot`. You may need to set this to a full path if `dot` is not in the executable search path.

Since this setting is not portable from system to system, it is normally not useful to set it in `conf.py`; rather, giving it on the **sphinx-build** command line via the [`-D`](../../man/sphinx-build.html#cmdoption-sphinx-build-D) option should be preferable, like this:

```
sphinx-build -M html -D graphviz_dot=C:\graphviz\bin\dot.exe . _build
```

graphviz\_dot\_args[¬∂](graphviz.html#confval-graphviz_dot_args "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

Additional command-line arguments to give to dot, as a list. This is the right place to set global graph, node or edge attributes via dot‚Äôs `-G`, `-N` and `-E` options.

graphviz\_output\_format[¬∂](graphviz.html#confval-graphviz_output_format "Link to this definition")

Type:

`'png' | 'svg'`

Default:

`'png'`

The output format for Graphviz when building HTML files. This must be either `'png'` or `'svg'`. If `'svg'` is used, in order to make the URL links work properly, an appropriate `target` attribute must be set, such as `"_top"` and `"_blank"`. For example, the link in the following graph should work in the svg output:

```
.. graphviz::

     digraph example {
         a [label="sphinx", href="https://www.sphinx-doc.org/", target="_top"];
         b [label="other"];
         a -> b;
     }
```

Added in version 1.0: Previously, output always was PNG.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference



# [`sphinx.ext.ifconfig`](ifconfig.html#module-sphinx.ext.ifconfig "sphinx.ext.ifconfig: Include documentation content based on configuration values.") ‚Äì Include content based on configuration[¬∂](ifconfig.html#module-sphinx.ext.ifconfig "Link to this heading")

This extension is quite simple, and features only one directive:

Warning

This directive is designed to control only content of document. It could not control sections, labels and so on.

.. ifconfig::[¬∂](ifconfig.html#directive-ifconfig "Link to this definition")

Include content of the directive only if the Python expression given as an argument is `True`, evaluated in the namespace of the project‚Äôs configuration (that is, all registered variables from `conf.py` are available).

For example, one could write

```
.. ifconfig:: releaselevel in ('alpha', 'beta', 'rc')

   This stuff is only included in the built docs for unstable versions.
```

To make a custom config value known to Sphinx, use [`add_config_value()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_config_value "sphinx.application.Sphinx.add_config_value") in the setup function in `conf.py`, e.g.:

```
def setup(app):
    app.add_config_value('releaselevel', '', 'env')
```

The second argument is the default value, the third should always be `'env'` for such values (it selects if Sphinx re-reads the documents if the value changes).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# [`sphinx.ext.imgconverter`](imgconverter.html#module-sphinx.ext.imgconverter "sphinx.ext.imgconverter: Convert images to appropriate format for builders") ‚Äì A reference image converter using Imagemagick[¬∂](imgconverter.html#module-sphinx.ext.imgconverter "Link to this heading")

Added in version 1.6.

This extension converts images in your document to appropriate format for builders. For example, it allows you to use SVG images with LaTeX builder. As a result, you don‚Äôt mind what image format the builder supports.

By default the extension uses [ImageMagick](https://www.imagemagick.org) to perform conversions, and will not work if ImageMagick is not installed.

Note

ImageMagick rasterizes a SVG image on conversion. As a result, the image becomes not scalable. To avoid that, please use other image converters like [sphinxcontrib-svg2pdfconverter](https://github.com/missinglinkelectronics/sphinxcontrib-svg2pdfconverter) (which uses Inkscape or `rsvg-convert`).

## Configuration[¬∂](imgconverter.html#configuration "Link to this heading")

image\_converter[¬∂](imgconverter.html#confval-image_converter "Link to this definition")

Type:

`str`

Default:

`'convert'` on Unix; `'magick'` on Windows

A path to a conversion command. By default, the imgconverter finds the command from search paths.

Changed in version 3.1: Use **magick** command by default on windows

image\_converter\_args[¬∂](imgconverter.html#confval-image_converter_args "Link to this definition")

Type:

`Sequence[str]`

Default:

`['convert']` on Windows; `()` on Unix

Additional command-line arguments to give to **convert**, as a list.

Changed in version 3.1: Use `['convert']` by default on Windows








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page





The Basics


User guide




Community


Reference



# [`sphinx.ext.inheritance_diagram`](inheritance.html#module-sphinx.ext.inheritance_diagram "sphinx.ext.inheritance_diagram: Support for displaying inheritance diagrams via graphviz.") ‚Äì Include inheritance diagrams[¬∂](inheritance.html#module-sphinx.ext.inheritance_diagram "Link to this heading")

Added in version 0.6.

This extension allows you to include inheritance diagrams, rendered via the [`Graphviz extension`](graphviz.html#module-sphinx.ext.graphviz "sphinx.ext.graphviz: Support for Graphviz graphs.").

It adds this directive:

.. inheritance-diagram::[¬∂](inheritance.html#directive-inheritance-diagram "Link to this definition")

This directive has one or more arguments, each giving a module or class name. Class names can be unqualified; in that case they are taken to exist in the currently described module (see [`py:module`](../domains/python.html#directive-py-module "py:module directive")).

For each given class, and each class in each given module, the base classes are determined. Then, from all classes and their base classes, a graph is generated which is then rendered via the graphviz extension to a directed graph.

This directive supports an option called `parts` that, if given, must be an integer, advising the directive to keep that many dot-separated parts in the displayed names (from right to left). For example, `parts=1` will only display class names, without the names of the modules that contain them.

Changed in version 2.0: The value of for `parts` can also be negative, indicating how many parts to drop from the left. For example, if all your class names start with `lib.`, you can give `:parts: -1` to remove that prefix from the displayed node names.

The directive also supports a `private-bases` flag option; if given, private base classes (those whose name starts with `_`) will be included.

You can use `caption` option to give a caption to the diagram.

Changed in version 1.1: Added `private-bases` option; previously, all bases were always included.

Changed in version 1.5: Added `caption` option

It also supports a `top-classes` option which requires one or more class names separated by comma. If specified inheritance traversal will stop at the specified class names. Given the following Python module:

```
"""
       A
      / \
     B   C
    / \ / \
   E   D   F
"""

class A:
    pass

class B(A):
    pass

class C(A):
    pass

class D(B, C):
    pass

class E(B):
    pass

class F(C):
    pass
```

If you have specified a module in the inheritance diagram like this:

```
.. inheritance-diagram:: dummy.test
   :top-classes: dummy.test.B, dummy.test.C
```

any base classes which are ancestors to `top-classes` and are also defined in the same module will be rendered as stand alone nodes. In this example class A will be rendered as stand alone node in the graph. This is a known issue due to how this extension works internally.

If you don‚Äôt want class A (or any other ancestors) to be visible then specify only the classes you would like to generate the diagram for like this:

```
.. inheritance-diagram:: dummy.test.D dummy.test.E dummy.test.F
   :top-classes: dummy.test.B, dummy.test.C
```

Changed in version 1.7: Added `top-classes` option to limit the scope of inheritance graphs.

:include-subclasses: *(no value)*[¬∂](inheritance.html#directive-option-inheritance-diagram-include-subclasses "Link to this definition")

Added in version 8.2.

If given, any subclass of the classes will be added to the diagram too.

Given the Python module from above, you can specify your inheritance diagram like this:

```
.. inheritance-diagram:: dummy.test.A
   :include-subclasses:
```

This will include the classes A, B, C, D, E and F in the inheritance diagram but no other classes in the module `dummy.test`.

## Examples[¬∂](inheritance.html#examples "Link to this heading")

The following are different inheritance diagrams for the internal `InheritanceDiagram` class that implements the directive.

With full names:

```
.. inheritance-diagram:: sphinx.ext.inheritance_diagram.InheritanceDiagram
```

![Inheritance diagram of sphinx.ext.inheritance_diagram.InheritanceDiagram](../../_images/inheritance-da890d2a33b99fdbbfa01edd1c3f81440120ec53.png)

Showing class names only:

```
.. inheritance-diagram:: sphinx.ext.inheritance_diagram.InheritanceDiagram
   :parts: 1
```

![Inheritance diagram of sphinx.ext.inheritance_diagram.InheritanceDiagram](../../_images/inheritance-a014b3e35c601d0641890df126db27c181074aed.png)

Stopping the diagram at [`sphinx.util.docutils.SphinxDirective`](../../extdev/utils.html#sphinx.util.docutils.SphinxDirective "sphinx.util.docutils.SphinxDirective") (the highest superclass still part of Sphinx), and dropping the common left-most part (`sphinx`) from all names:

```
.. inheritance-diagram:: sphinx.ext.inheritance_diagram.InheritanceDiagram
   :top-classes: sphinx.util.docutils.SphinxDirective
   :parts: -1
```

![Inheritance diagram of sphinx.ext.inheritance_diagram.InheritanceDiagram](../../_images/inheritance-db919451f4f8492c66ccf0e8784241ad72311b89.png)

*class* sphinx.ext.inheritance\_diagram.InheritanceDiagram[¬∂](inheritance.html#sphinx.ext.inheritance_diagram.sphinx.ext.inheritance_diagram.InheritanceDiagram "Link to this definition")

The internal class that implements the `inheritance-diagram` directive.

## Configuration[¬∂](inheritance.html#configuration "Link to this heading")

inheritance\_graph\_attrs[¬∂](inheritance.html#confval-inheritance_graph_attrs "Link to this definition")

Type:

`dict[str, str | int | float | bool]`

Default:

`{}`

A dictionary of graphviz graph attributes for inheritance diagrams.

For example:

```
inheritance_graph_attrs = dict(rankdir="LR", size='"6.0, 8.0"',
                               fontsize=14, ratio='compress')
```

inheritance\_node\_attrs[¬∂](inheritance.html#confval-inheritance_node_attrs "Link to this definition")

Type:

`dict[str, str | int | float | bool]`

Default:

`{}`

A dictionary of graphviz node attributes for inheritance diagrams.

For example:

```
inheritance_node_attrs = dict(shape='ellipse', fontsize=14, height=0.75,
                              color='dodgerblue1', style='filled')
```

inheritance\_edge\_attrs[¬∂](inheritance.html#confval-inheritance_edge_attrs "Link to this definition")

Type:

`dict[str, str | int | float | bool]`

Default:

`{}`

A dictionary of graphviz edge attributes for inheritance diagrams.

inheritance\_alias[¬∂](inheritance.html#confval-inheritance_alias "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

Allows mapping the full qualified name of the class to custom values (useful when exposing the underlying path of a class is not desirable, e.g. it‚Äôs a private class and should not be instantiated by the user).

For example:

```
inheritance_alias = {'_pytest.Magic': 'pytest.Magic'}
```








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page





The Basics


User guide




Community


Reference



# [`sphinx.ext.intersphinx`](intersphinx.html#module-sphinx.ext.intersphinx "sphinx.ext.intersphinx: Link to other Sphinx documentation.") ‚Äì Link to other projects‚Äô documentation[¬∂](intersphinx.html#module-sphinx.ext.intersphinx "Link to this heading")

Added in version 0.5.

This extension can generate links to the documentation of objects in external projects, either explicitly through the [`external`](intersphinx.html#role-external "external role") role, or as a fallback resolution for any other cross-reference.

Usage for fallback resolution is simple: whenever Sphinx encounters a cross-reference that has no matching target in the current documentation set, it looks for targets in the external documentation sets configured in [`intersphinx_mapping`](intersphinx.html#confval-intersphinx_mapping). A reference like ``:py:class:`zipfile.ZipFile` `` can then link to the Python documentation for the ZipFile class, without you having to specify where it is located exactly.

When using the [`external`](intersphinx.html#role-external "external role") role, you can force lookup to any external projects, and optionally to a specific external project. A link like ``:external:ref:`comparison manual <comparisons>` `` will then link to the label ‚Äúcomparisons‚Äù in whichever configured external project, if it exists, and a link like ``:external+python:ref:`comparison manual <comparisons>` `` will link to the label ‚Äúcomparisons‚Äù only in the doc set ‚Äúpython‚Äù, if it exists.

Behind the scenes, this works as follows:

- Each Sphinx HTML build creates a file named `objects.inv` that contains a mapping from object names to URIs relative to the HTML set‚Äôs root.
- Projects using the Intersphinx extension can specify the location of such mapping files in the [`intersphinx_mapping`](intersphinx.html#confval-intersphinx_mapping) config value. The mapping will then be used to resolve both [`external`](intersphinx.html#role-external "external role") references, and also otherwise missing references to objects into links to the other documentation.
- By default, the mapping file is assumed to be at the same location as the rest of the documentation; however, the location of the mapping file can also be specified individually, e.g. if the docs should be buildable without Internet access.

## Configuration[¬∂](intersphinx.html#configuration "Link to this heading")

To use Intersphinx linking, add `'sphinx.ext.intersphinx'` to your [`extensions`](../configuration.html#confval-extensions) config value, and use these config values to activate linking:

intersphinx\_mapping[¬∂](intersphinx.html#confval-intersphinx_mapping "Link to this definition")

Type:

`dict[str, tuple[str, tuple[str, tuple[str | None, ...]]]]`

Default:

`{}`

This config value contains the locations and names of other projects that should be linked to in this documentation.

Relative local paths for target locations are taken as relative to the base of the built documentation, while relative local paths for inventory locations are taken as relative to the source directory.

When fetching remote inventory files, proxy settings will be read from the `$HTTP_PROXY` environment variable.

**Format**

Added in version 1.0.

A dictionary mapping unique identifiers to a tuple `(target, inventory)`. Each `target` is the base URI of a foreign Sphinx documentation set and can be a local path or an HTTP URI. The `inventory` indicates where the inventory file can be found: it can be `None` (an `objects.inv` file at the same location as the base URI) or another local file path or a full HTTP URI to an inventory file.

The unique identifier can be used in the [`external`](intersphinx.html#role-external "external role") role, so that it is clear which intersphinx set the target belongs to. A link like ``:external+python:ref:`comparison manual <comparisons>` `` will link to the label ‚Äúcomparisons‚Äù in the doc set ‚Äúpython‚Äù, if it exists.

**Example**

To add links to modules and objects in the Python standard library documentation, use:

```
intersphinx_mapping = {'python': ('https://docs.python.org/3', None)}
```

This will download the corresponding `objects.inv` file from the Internet and generate links to the pages under the given URI. The downloaded inventory is cached in the Sphinx environment, so it must be re-downloaded whenever you do a full rebuild.

A second example, showing the meaning of a non-`None` value of the second tuple item:

```
intersphinx_mapping = {'python': ('https://docs.python.org/3',
                                  'python-inv.txt')}
```

This will read the inventory from `python-inv.txt` in the source directory, but still generate links to the pages under `https://docs.python.org/3`. It is up to you to update the inventory file as new objects are added to the Python documentation.

**Multiple targets for the inventory**

Added in version 1.3.

Alternative files can be specified for each inventory. One can give a tuple for the second inventory tuple item as shown in the following example. This will read the inventory iterating through the (second) tuple items until the first successful fetch. The primary use case for this to specify mirror sites for server downtime of the primary inventory:

```
intersphinx_mapping = {'python': ('https://docs.python.org/3',
                                  (None, 'python-inv.txt'))}
```

For a set of books edited and tested locally and then published together, it could be helpful to try a local inventory file first, to check references before publication:

```
intersphinx_mapping = {
    'otherbook':
        ('https://myproj.readthedocs.io/projects/otherbook/en/latest',
            ('../../otherbook/build/html/objects.inv', None)),
}
```

intersphinx\_resolve\_self[¬∂](intersphinx.html#confval-intersphinx_resolve_self "Link to this definition")

Type:

`str`

Default:

`''`

If provided, `intersphinx_resolve_self` overrides intersphinx‚Äôs resolution mechanism to resolve all references to the current project, rather than an external reference. This is useful when documentation is shared between projects, with the ‚Äòupstream‚Äô or ‚Äòparent‚Äô project using intersphinx-style references in its documentation. For example, a project such as *Astropy* might set:

```
intersphinx_resolve_self = 'astropy'
```

Projects re-using *Astropy*‚Äôs documentation or inheriting their docstrings would then configure their `intersphinx_mapping` with an `'astropy'` key, pointing to *astropy*‚Äôs `objects.inv`. For example:

```
intersphinx_mapping = {
    'astropy': ('https://docs.astropy.org/en/stable/', None),
}
```

intersphinx\_cache\_limit[¬∂](intersphinx.html#confval-intersphinx_cache_limit "Link to this definition")

Type:

`int`

Default:

`5` (five days)

The maximum number of days to cache remote inventories. Set this to a negative value to cache inventories for unlimited time.

intersphinx\_timeout[¬∂](intersphinx.html#confval-intersphinx_timeout "Link to this definition")

Type:

`int | float | None`

Default:

`None`

The number of seconds for timeout. Use `None` for no timeout.

Note

timeout is not a time limit on the entire response download; rather, an exception is raised if the server has not issued a response for *timeout* seconds.

intersphinx\_disabled\_reftypes[¬∂](intersphinx.html#confval-intersphinx_disabled_reftypes "Link to this definition")

Type:

`Sequence[str]`

Default:

`['std:doc']`

Added in version 4.3.

Changed in version 5.0: Changed default value from an empty list to `['std:doc']`.

A list of strings being either:

- the name of a specific reference type in a domain, e.g., `std:doc`, `py:func`, or `cpp:class`,
- the name of a domain, and a wildcard, e.g., `std:*`, `py:*`, or `cpp:*`, or
- simply a wildcard `*`.

When a non-[`external`](intersphinx.html#role-external "external role") cross-reference is being resolved by intersphinx, skip resolution if it matches one of the specifications in this list.

For example, with `intersphinx_disabled_reftypes = ['std:doc']` a cross-reference ``:doc:`installation` `` will not be attempted to be resolved by intersphinx, but ``:external+otherbook:doc:`installation` `` will be attempted to be resolved in the inventory named `otherbook` in [`intersphinx_mapping`](intersphinx.html#confval-intersphinx_mapping). At the same time, all cross-references generated in, e.g., Python, declarations will still be attempted to be resolved by intersphinx.

If `*` is in the list of domains, then no non-[`external`](intersphinx.html#role-external "external role") references will be resolved by intersphinx.

## Explicitly Reference External Objects[¬∂](intersphinx.html#explicitly-reference-external-objects "Link to this heading")

The Intersphinx extension provides the following role.

:external:[¬∂](intersphinx.html#role-external "Link to this definition")

Added in version 4.4.

Use Intersphinx to perform lookup only in external projects, and not the current project. Intersphinx still needs to know the type of object you would like to find, so the general form of this role is to write the cross-refererence as if the object is in the current project, but then prefix it with `:external`. The two forms are then

- ``:external:domain:reftype:`target` ``, e.g., ``:external:py:class:`zipfile.ZipFile` ``, or
- ``:external:reftype:`target` ``, e.g., ``:external:doc:`installation` ``. With this shorthand, the domain is assumed to be `std`.

If you would like to constrain the lookup to a specific external project, then the key of the project, as specified in [`intersphinx_mapping`](intersphinx.html#confval-intersphinx_mapping), is added as well to get the two forms

- ``:external+invname:domain:reftype:`target` ``, e.g., ``:external+python:py:class:`zipfile.ZipFile` ``, or
- ``:external+invname:reftype:`target` ``, e.g., ``:external+python:doc:`installation` ``.

## Showing all links of an Intersphinx mapping file[¬∂](intersphinx.html#showing-all-links-of-an-intersphinx-mapping-file "Link to this heading")

To show all Intersphinx links and their targets of an Intersphinx mapping file, run `python -m sphinx.ext.intersphinx url-or-path`. This is helpful when searching for the root cause of a broken Intersphinx link in a documentation project. The following example prints the Intersphinx mapping of the Python documentation:

```
$ python -m sphinx.ext.intersphinx https://docs.python.org/3/objects.inv
```

## Using Intersphinx with inventory file under Basic Authorization[¬∂](intersphinx.html#using-intersphinx-with-inventory-file-under-basic-authorization "Link to this heading")

Intersphinx supports Basic Authorization like this:

```
intersphinx_mapping = {'python': ('https://user:[email¬†protected]/3',
                                  None)}
```

The user and password will be stripped from the URL when generating the links.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page





The Basics


User guide




Community


Reference



# [`sphinx.ext.linkcode`](linkcode.html#module-sphinx.ext.linkcode "sphinx.ext.linkcode: Add external links to source code.") ‚Äì Add external links to source code[¬∂](linkcode.html#module-sphinx.ext.linkcode "Link to this heading")

*Module author: Pauli Virtanen*

Added in version 1.2.

This extension looks at your object descriptions (`.. class::`, `.. function::` etc.) and adds external links to code hosted somewhere on the web. The intent is similar to the `sphinx.ext.viewcode` extension, but assumes the source code can be found somewhere on the Internet.

In your configuration, you need to specify a [`linkcode_resolve`](linkcode.html#confval-linkcode_resolve) function that returns an URL based on the object.

## Configuration[¬∂](linkcode.html#configuration "Link to this heading")

linkcode\_resolve[¬∂](linkcode.html#confval-linkcode_resolve "Link to this definition")

Type:

`Callable[[str, dict[str, str]], str | None] | None`

Default:

`None`

This is a function `linkcode_resolve(domain, info)`, which should return the URL to source code corresponding to the object in given domain with given information.

The function should return `None` if no link is to be added.

The argument `domain` specifies the language domain the object is in. `info` is a dictionary with the following keys guaranteed to be present (dependent on the domain):

- `py`: `module` (name of the module), `fullname` (name of the object)
- `c`: `names` (list of names for the object)
- `cpp`: `names` (list of names for the object)
- `javascript`: `object` (name of the object), `fullname` (name of the item)

Example:

```
def linkcode_resolve(domain, info):
    if domain != 'py':
        return None
    if not info['module']:
        return None
    filename = info['module'].replace('.', '/')
    return "https://somesite/sourcerepo/%s.py" % filename
```

## Third-party domains[¬∂](linkcode.html#third-party-domains "Link to this heading")

Support for other domains can be added by extensions with [`add_linkcode_domain()`](linkcode.html#sphinx.ext.linkcode.add_linkcode_domain "sphinx.ext.linkcode.add_linkcode_domain"). For example, a Sphinx extension that provides a `php` domain could use the following code to support [`linkcode`](linkcode.html#module-sphinx.ext.linkcode "sphinx.ext.linkcode: Add external links to source code."):

```
from sphinx.ext.linkcode import add_linkcode_domain

def setup(app):
    add_linkcode_domain('php', ['namespace', 'class', 'fullname'])
```

sphinx.ext.linkcode.add\_linkcode\_domain(*domain: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *keys: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../../_modules/sphinx/ext/linkcode.html#add_linkcode_domain)[¬∂](linkcode.html#sphinx.ext.linkcode.add_linkcode_domain "Link to this definition")

Register a new list of keys to use for a domain.

Added in version 8.2.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page






The Basics


User guide




Community


Reference



# Math support for HTML outputs in Sphinx[¬∂](math.html#module-sphinx.ext.mathbase "Link to this heading")

Added in version 0.5.

Changed in version 1.8: Math support for non-HTML builders is integrated to sphinx-core. So mathbase extension is no longer needed.

Since mathematical notation isn‚Äôt natively supported by HTML in any way, Sphinx gives a math support to HTML document with several extensions. These use the reStructuredText math [`directive`](../restructuredtext/directives.html#directive-math "math directive") and [`role`](../restructuredtext/roles.html#role-math "math role").

## [`sphinx.ext.imgmath`](math.html#module-sphinx.ext.imgmath "sphinx.ext.imgmath: Render math as PNG or SVG images.") ‚Äì Render math as images[¬∂](math.html#module-sphinx.ext.imgmath "Link to this heading")

Added in version 1.4.

This extension renders math via LaTeX and [dvipng](https://savannah.nongnu.org/projects/dvipng/) or [dvisvgm](https://dvisvgm.de/) into PNG or SVG images. This of course means that the computer where the docs are built must have both programs available.

There are various configuration values you can set to influence how the images are built:

imgmath\_image\_format[¬∂](math.html#confval-imgmath_image_format "Link to this definition")

Type:

`'png' | 'svg'`

Default:

`'png'`

The output image format. It should be either `'png'` or `'svg'`. The image is produced by first executing `latex` on the TeX mathematical mark-up then (depending on the requested format) either [dvipng](https://savannah.nongnu.org/projects/dvipng/) or [dvisvgm](https://dvisvgm.de/).

imgmath\_use\_preview[¬∂](math.html#confval-imgmath_use_preview "Link to this definition")

Type:

`bool`

Default:

`False`

`dvipng` and `dvisvgm` both have the ability to collect from LaTeX the ‚Äúdepth‚Äù of the rendered math: an inline image should use this ‚Äúdepth‚Äù in a `vertical-align` style to get correctly aligned with surrounding text.

This mechanism requires the [LaTeX preview package](https://www.gnu.org/software/auctex/preview-latex.html) (available as `preview-latex-style` on Ubuntu xenial). Therefore, the default for this option is `False` but it is strongly recommended to set it to `True`.

Changed in version 2.2: This option can be used with the `'svg'` [`imgmath_image_format`](math.html#confval-imgmath_image_format).

imgmath\_add\_tooltips[¬∂](math.html#confval-imgmath_add_tooltips "Link to this definition")

Type:

`bool`

Default:

`True`

If false, do not add the LaTeX code as an ‚Äúalt‚Äù attribute for math images.

imgmath\_font\_size[¬∂](math.html#confval-imgmath_font_size "Link to this definition")

Type:

`int`

Default:

`12`

The font size (in `pt`) of the displayed math. This must be a positive integer.

imgmath\_latex[¬∂](math.html#confval-imgmath_latex "Link to this definition")

Type:

`str`

Default:

`'latex'`

The command name with which to invoke LaTeX. You may need to set this to a full path if `latex` is not in the executable search path.

Since this setting is not portable from system to system, it is normally not useful to set it in `conf.py`; rather, giving it on the **sphinx-build** command line via the [`-D`](../../man/sphinx-build.html#cmdoption-sphinx-build-D) option should be preferable, like this:

```
sphinx-build -M html -D imgmath_latex=C:\tex\latex.exe . _build
```

This value should only contain the path to the latex executable, not further arguments; use [`imgmath_latex_args`](math.html#confval-imgmath_latex_args) for that purpose.

Hint

To use [OpenType Math fonts](https://tex.stackexchange.com/questions/425098/which-opentype-math-fonts-are-available) with `unicode-math`, via a custom [`imgmath_latex_preamble`](math.html#confval-imgmath_latex_preamble), you can set [`imgmath_latex`](math.html#confval-imgmath_latex) to `'dvilualatex'`, but must then set [`imgmath_image_format`](math.html#confval-imgmath_image_format) to `'svg'`. Note: this has only been tested with `dvisvgm 3.0.3`. It significantly increases image production duration compared to using standard `'latex'` with traditional TeX math fonts.

Hint

Some fancy LaTeX mark-up (an example was reported which used TikZ to add various decorations to the equation) require multiple runs of the LaTeX executable. To handle this, set this configuration setting to `'latexmk'` (or a full path to it) as this Perl script reliably chooses dynamically how many latex runs are needed.

Changed in version 6.2.0: Using `'xelatex'` (or a full path to it) is now supported. But you must then add `'-no-pdf'` to the [`imgmath_latex_args`](math.html#confval-imgmath_latex_args) list of the command options. The `'svg'` [`imgmath_image_format`](math.html#confval-imgmath_image_format) is required. Also, you may need the `dvisvgm` binary to be relatively recent (testing was done only with its `3.0.3` release).

Note

Regarding the previous note, it is currently not supported to use `latexmk` with option `-xelatex`.

imgmath\_latex\_args[¬∂](math.html#confval-imgmath_latex_args "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

Additional arguments to give to latex, as a list.

imgmath\_latex\_preamble[¬∂](math.html#confval-imgmath_latex_preamble "Link to this definition")

Type:

`str`

Default:

`''`

Additional LaTeX code to put into the preamble of the LaTeX files used to translate the math snippets. Use it e.g. to add packages which modify the fonts used for math, such as `'\\usepackage{newtxsf}'` for sans-serif fonts, or `'\\usepackage{fouriernc}'` for serif fonts. Indeed, the default LaTeX math fonts have rather thin glyphs which (in HTML output) often do not match well with the font for text.

imgmath\_dvipng[¬∂](math.html#confval-imgmath_dvipng "Link to this definition")

Type:

`str`

Default:

`'dvipng'`

The command name to invoke `dvipng`. You may need to set this to a full path if `dvipng` is not in the executable search path. This option is only used when `imgmath_image_format` is set to `'png'`.

imgmath\_dvipng\_args[¬∂](math.html#confval-imgmath_dvipng_args "Link to this definition")

Type:

`Sequence[str]`

Default:

`('-gamma', '1.5', '-D', '110', '-bg', 'Transparent')`

Additional arguments to give to dvipng, as a list. The default value makes the image a bit darker and larger than it is by default (this compensates somewhat for the thinness of default LaTeX math fonts), and produces PNGs with a transparent background. This option is used only when `imgmath_image_format` is `'png'`.

imgmath\_dvisvgm[¬∂](math.html#confval-imgmath_dvisvgm "Link to this definition")

Type:

`str`

Default:

`'dvisvgm'`

The command name to invoke `dvisvgm`. You may need to set this to a full path if `dvisvgm` is not in the executable search path. This option is only used when `imgmath_image_format` is `'svg'`.

imgmath\_dvisvgm\_args[¬∂](math.html#confval-imgmath_dvisvgm_args "Link to this definition")

Type:

`Sequence[str]`

Default:

`('--no-fonts',)`

Additional arguments to give to dvisvgm, as a list. The default value means that `dvisvgm` will render glyphs as path elements (cf the [dvisvgm FAQ](https://dvisvgm.de/FAQ)). This option is used only when `imgmath_image_format` is `'svg'`.

imgmath\_embed[¬∂](math.html#confval-imgmath_embed "Link to this definition")

Type:

`bool`

Default:

`False`

If true, encode LaTeX output images within HTML files (base64 encoded) and do not save separate png/svg files to disk.

Added in version 5.2.

## [`sphinx.ext.mathjax`](math.html#module-sphinx.ext.mathjax "sphinx.ext.mathjax: Render math using JavaScript via MathJax.") ‚Äì Render math via JavaScript[¬∂](math.html#module-sphinx.ext.mathjax "Link to this heading")

Warning

Version 4.0 changes the version of MathJax used to version 3. You may need to override `mathjax_path` to `https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML` or update your configuration options for version 3 (see [`mathjax3_config`](math.html#confval-mathjax3_config)).

Added in version 1.1.

This extension puts math as-is into the HTML files. The JavaScript package [MathJax](https://www.mathjax.org/) is then loaded and transforms the LaTeX markup to readable math live in the browser.

Because MathJax (and the necessary fonts) is very large, it is not included in Sphinx but is set to automatically include it from a third-party site.

Attention

You should use the math [`directive`](../restructuredtext/directives.html#directive-math "math directive") and [`role`](../restructuredtext/roles.html#role-math "math role"), not the native MathJax `$$`, `\(`, etc.

mathjax\_path[¬∂](math.html#confval-mathjax_path "Link to this definition")

Type:

`str`

Default:

`'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'`

The path to the JavaScript file to include in the HTML files in order to load MathJax.

The default is the `https://` URL that loads the JS files from the [jsdelivr](https://www.jsdelivr.com/) Content Delivery Network. See the [MathJax Getting Started page](https://www.mathjax.org/#gettingstarted) for details. If you want MathJax to be available offline or without including resources from a third-party site, you have to download it and set this value to a different path.

The path can be absolute or relative; if it is relative, it is relative to the `_static` directory of the built docs.

For example, if you put MathJax into the static path of the Sphinx docs, this value would be `MathJax/MathJax.js`. If you host more than one Sphinx documentation set on one server, it is advisable to install MathJax in a shared location.

You can also give a full `https://` URL different from the CDN URL.

mathjax\_options[¬∂](math.html#confval-mathjax_options "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

The options to script tag for mathjax. For example, you can set integrity option with following setting:

```
mathjax_options = {
    'integrity': 'sha384-......',
}
```

Added in version 1.8.

Changed in version 4.4.1: Allow to change the loading method (async or defer) of MathJax if ‚Äúasync‚Äù or ‚Äúdefer‚Äù key is set.

mathjax3\_config[¬∂](math.html#confval-mathjax3_config "Link to this definition")

Type:

`dict[str, Any] | None`

Default:

`None`

The configuration options for MathJax v3 (which is used by default). The given dictionary is assigned to the JavaScript variable `window.MathJax`. For more information, please read [Configuring MathJax](https://docs.mathjax.org/en/latest/web/configuration.html#configuration).

Added in version 4.0.

mathjax2\_config[¬∂](math.html#confval-mathjax2_config "Link to this definition")

Type:

`dict[str, Any] | None`

Default:

`None`

The configuration options for MathJax v2 (which can be loaded via [`mathjax_path`](math.html#confval-mathjax_path)). The value is used as a parameter of `MathJax.Hub.Config()`. For more information, please read [Using in-line configuration options](https://docs.mathjax.org/en/v2.7-latest/configuration.html#using-in-line-configuration-options).

For example:

```
mathjax2_config = {
    'extensions': ['tex2jax.js'],
    'jax': ['input/TeX', 'output/HTML-CSS'],
}
```

Added in version 4.0: [`mathjax_config`](math.html#confval-mathjax_config) has been renamed to [`mathjax2_config`](math.html#confval-mathjax2_config).

mathjax\_config[¬∂](math.html#confval-mathjax_config "Link to this definition")

Type:

`dict[str, Any] | None`

Default:

`None`

Former name of [`mathjax2_config`](math.html#confval-mathjax2_config).

For help converting your old MathJax configuration to to the new [`mathjax3_config`](math.html#confval-mathjax3_config), see [Converting Your v2 Configuration to v3](https://docs.mathjax.org/en/latest/web/configuration.html#converting-your-v2-configuration-to-v3).

Added in version 1.8.

Changed in version 4.0: This has been renamed to [`mathjax2_config`](math.html#confval-mathjax2_config). [`mathjax_config`](math.html#confval-mathjax_config) is still supported for backwards compatibility.

## [`sphinx.ext.jsmath`](math.html#module-sphinx.ext.jsmath "sphinx.ext.jsmath: Render math using JavaScript via JSMath.") ‚Äì Render math via JavaScript[¬∂](math.html#module-sphinx.ext.jsmath "Link to this heading")

This extension works just as the MathJax extension does, but uses the older package [jsMath](https://www.math.union.edu/~dpvc/jsmath/). It provides this config value:

jsmath\_path[¬∂](math.html#confval-jsmath_path "Link to this definition")

Type:

`str`

Default:

`''`

The path to the JavaScript file to include in the HTML files in order to load JSMath.

The path can be absolute or relative; if it is relative, it is relative to the `_static` directory of the built docs.

For example, if you put JSMath into the static path of the Sphinx docs, this value would be `jsMath/easy/load.js`. If you host more than one Sphinx documentation set on one server, it is advisable to install jsMath in a shared location.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page





The Basics


User guide




Community


Reference



# [`sphinx.ext.napoleon`](napoleon.html#module-sphinx.ext.napoleon "sphinx.ext.napoleon: Support for NumPy and Google style docstrings") ‚Äì Support for NumPy and Google style docstrings[¬∂](napoleon.html#module-sphinx.ext.napoleon "Link to this heading")

*Module author: Rob Ruana*

Added in version 1.3.

## Overview[¬∂](napoleon.html#overview "Link to this heading")

Are you tired of writing docstrings that look like this:

```
:param path: The path of the file to wrap
:type path: str
:param field_storage: The :class:`FileStorage` instance to wrap
:type field_storage: FileStorage
:param temporary: Whether or not to delete the file when the File
   instance is destructed
:type temporary: bool
:returns: A buffered writable file descriptor
:rtype: BufferedFileStorage
```

[reStructuredText](https://docutils.sourceforge.io/rst.html) is great, but it creates visually dense, hard to read [**docstrings**](https://peps.python.org/pep-0287/). Compare the jumble above to the same thing rewritten according to the [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html):

```
Args:
    path (str): The path of the file to wrap
    field_storage (FileStorage): The :class:`FileStorage` instance to wrap
    temporary (bool): Whether or not to delete the file when the File
       instance is destructed

Returns:
    BufferedFileStorage: A buffered writable file descriptor
```

Much more legible, no?

Napoleon is a [extension](../../glossary.html#term-extension) that enables Sphinx to parse both [NumPy](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) and [Google](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings) style docstrings - the style recommended by [Khan Academy](https://github.com/Khan/style-guides/blob/master/style/python.md#docstrings).

Napoleon is a pre-processor that parses [NumPy](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) and [Google](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings) style docstrings and converts them to reStructuredText before Sphinx attempts to parse them. This happens in an intermediate step while Sphinx is processing the documentation, so it doesn‚Äôt modify any of the docstrings in your actual source code files.

### Getting Started[¬∂](napoleon.html#getting-started "Link to this heading")

1. After [setting up Sphinx](../quickstart.html) to build your docs, enable napoleon in the Sphinx `conf.py` file:

   ```
   # conf.py

   # Add napoleon to the extensions list
   extensions = ['sphinx.ext.napoleon']
   ```
2. Use `sphinx-apidoc` to build your API documentation:

   ```
   $ sphinx-apidoc -f -o docs/source projectdir
   ```

### Docstrings[¬∂](napoleon.html#docstrings "Link to this heading")

Napoleon interprets every docstring that [`autodoc`](autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") can find, including docstrings on: `modules`, `classes`, `attributes`, `methods`, `functions`, and `variables`. Inside each docstring, specially formatted [Sections](napoleon.html#sections) are parsed and converted to reStructuredText.

All standard reStructuredText formatting still works as expected.

### Docstring Sections[¬∂](napoleon.html#docstring-sections "Link to this heading")

All of the following section headers are supported:

- `Args` *(alias of Parameters)*
- `Arguments` *(alias of Parameters)*
- `Attention`
- `Attributes`
- `Caution`
- `Danger`
- `Error`
- `Example`
- `Examples`
- `Hint`
- `Important`
- `Keyword Args` *(alias of Keyword Arguments)*
- `Keyword Arguments`
- `Methods`
- `Note`
- `Notes`
- `Other Parameters`
- `Parameters`
- `Return` *(alias of Returns)*
- `Returns`
- `Raise` *(alias of Raises)*
- `Raises`
- `References`
- `See Also`
- `Tip`
- `Todo`
- `Warning`
- `Warnings` *(alias of Warning)*
- `Warn` *(alias of Warns)*
- `Warns`
- `Yield` *(alias of Yields)*
- `Yields`

### Google vs NumPy[¬∂](napoleon.html#google-vs-numpy "Link to this heading")

Napoleon supports two styles of docstrings: [Google](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings) and [NumPy](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard). The main difference between the two styles is that Google uses indentation to separate sections, whereas NumPy uses underlines.

Google style:

```
def func(arg1, arg2):
    """Summary line.

    Extended description of function.

    Args:
        arg1 (int): Description of arg1
        arg2 (str): Description of arg2

    Returns:
        bool: Description of return value

    """
    return True
```

NumPy style:

```
def func(arg1, arg2):
    """Summary line.

    Extended description of function.

    Parameters
    ----------
    arg1 : int
        Description of arg1
    arg2 : str
        Description of arg2

    Returns
    -------
    bool
        Description of return value

    """
    return True
```

NumPy style tends to require more vertical space, whereas Google style tends to use more horizontal space. Google style tends to be easier to read for short and simple docstrings, whereas NumPy style tends be easier to read for long and in-depth docstrings.

The choice between styles is largely aesthetic, but the two styles should not be mixed. Choose one style for your project and be consistent with it.

See also

For complete examples:


### Type Annotations[¬∂](napoleon.html#type-annotations "Link to this heading")

[**PEP 484**](https://peps.python.org/pep-0484/) introduced a standard way to express types in Python code. This is an alternative to expressing types directly in docstrings. One benefit of expressing types according to [**PEP 484**](https://peps.python.org/pep-0484/) is that type checkers and IDEs can take advantage of them for static code analysis. [**PEP 484**](https://peps.python.org/pep-0484/) was then extended by [**PEP 526**](https://peps.python.org/pep-0526/) which introduced a similar way to annotate variables (and attributes).

Google style with type annotations:

```
def func(arg1: int, arg2: str) -> bool:
    """Summary line.

    Extended description of function.

    Args:
        arg1: Description of arg1
        arg2: Description of arg2

    Returns:
        Description of return value

    """
    return True

class Class:
    """Summary line.

    Extended description of class

    Attributes:
        attr1: Description of attr1
        attr2: Description of attr2
    """

    attr1: int
    attr2: str
```

Google style with types in docstrings:

```
def func(arg1, arg2):
    """Summary line.

    Extended description of function.

    Args:
        arg1 (int): Description of arg1
        arg2 (str): Description of arg2

    Returns:
        bool: Description of return value

    """
    return True

class Class:
    """Summary line.

    Extended description of class

    Attributes:
        attr1 (int): Description of attr1
        attr2 (str): Description of attr2
    """
```

## Configuration[¬∂](napoleon.html#configuration "Link to this heading")

Listed below are all the settings used by napoleon and their default values. These settings can be changed in the Sphinx `conf.py` file. Make sure that ‚Äúsphinx.ext.napoleon‚Äù is enabled in `conf.py`:

```
# conf.py

# Add any Sphinx extension module names here, as strings
extensions = ['sphinx.ext.napoleon']

# Napoleon settings
napoleon_google_docstring = True
napoleon_numpy_docstring = True
napoleon_include_init_with_doc = False
napoleon_include_private_with_doc = False
napoleon_include_special_with_doc = True
napoleon_use_admonition_for_examples = False
napoleon_use_admonition_for_notes = False
napoleon_use_admonition_for_references = False
napoleon_use_ivar = False
napoleon_use_param = True
napoleon_use_rtype = True
napoleon_preprocess_types = False
napoleon_type_aliases = None
napoleon_attr_annotations = True
```

napoleon\_google\_docstring[¬∂](napoleon.html#confval-napoleon_google_docstring "Link to this definition")

Type:

`bool`

Default:

`True`

True to parse [Google style](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings) docstrings. False to disable support for Google style docstrings.

napoleon\_numpy\_docstring[¬∂](napoleon.html#confval-napoleon_numpy_docstring "Link to this definition")

Type:

`bool`

Default:

`True`

True to parse [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) docstrings. False to disable support for NumPy style docstrings.

napoleon\_include\_init\_with\_doc[¬∂](napoleon.html#confval-napoleon_include_init_with_doc "Link to this definition")

Type:

`bool`

Default:

`False`

True to list `__init___` docstrings separately from the class docstring. False to fall back to Sphinx‚Äôs default behavior, which considers the `__init___` docstring as part of the class documentation.

**If True**:

```
def __init__(self):
    """
    This will be included in the docs because it has a docstring
    """

def __init__(self):
    # This will NOT be included in the docs
```

napoleon\_include\_private\_with\_doc[¬∂](napoleon.html#confval-napoleon_include_private_with_doc "Link to this definition")

Type:

`bool`

Default:

`False`

True to include private members (like `_membername`) with docstrings in the documentation. False to fall back to Sphinx‚Äôs default behavior.

**If True**:

```
def _included(self):
    """
    This will be included in the docs because it has a docstring
    """
    pass

def _skipped(self):
    # This will NOT be included in the docs
    pass
```

napoleon\_include\_special\_with\_doc[¬∂](napoleon.html#confval-napoleon_include_special_with_doc "Link to this definition")

Type:

`bool`

Default:

`True`

True to include special members (like `__membername__`) with docstrings in the documentation. False to fall back to Sphinx‚Äôs default behavior.

**If True**:

```
def __str__(self):
    """
    This will be included in the docs because it has a docstring
    """
    return unicode(self).encode('utf-8')

def __unicode__(self):
    # This will NOT be included in the docs
    return unicode(self.__class__.__name__)
```

napoleon\_use\_admonition\_for\_examples[¬∂](napoleon.html#confval-napoleon_use_admonition_for_examples "Link to this definition")

Type:

`bool`

Default:

`False`

True to use the `.. admonition::` directive for the **Example** and **Examples** sections. False to use the `.. rubric::` directive instead. One may look better than the other depending on what HTML theme is used.

This [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) snippet will be converted as follows:

```
Example
-------
This is just a quick example
```

**If True**:

```
.. admonition:: Example

   This is just a quick example
```

**If False**:

```
.. rubric:: Example

This is just a quick example
```

napoleon\_use\_admonition\_for\_notes[¬∂](napoleon.html#confval-napoleon_use_admonition_for_notes "Link to this definition")

Type:

`bool`

Default:

`False`

True to use the `.. admonition::` directive for **Notes** sections. False to use the `.. rubric::` directive instead.

Note

The singular **Note** section will always be converted to a `.. note::` directive.

See also

[`napoleon_use_admonition_for_examples`](napoleon.html#confval-napoleon_use_admonition_for_examples)

napoleon\_use\_admonition\_for\_references[¬∂](napoleon.html#confval-napoleon_use_admonition_for_references "Link to this definition")

Type:

`bool`

Default:

`False`

True to use the `.. admonition::` directive for **References** sections. False to use the `.. rubric::` directive instead.

See also

[`napoleon_use_admonition_for_examples`](napoleon.html#confval-napoleon_use_admonition_for_examples)

napoleon\_use\_ivar[¬∂](napoleon.html#confval-napoleon_use_ivar "Link to this definition")

Type:

`bool`

Default:

`False`

True to use the `:ivar:` role for instance variables. False to use the `.. attribute::` directive instead.

This [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) snippet will be converted as follows:

```
Attributes
----------
attr1 : int
    Description of `attr1`
```

**If True**:

```
:ivar attr1: Description of `attr1`
:vartype attr1: int
```

**If False**:

```
.. attribute:: attr1

   Description of `attr1`

   :type: int
```

napoleon\_use\_param[¬∂](napoleon.html#confval-napoleon_use_param "Link to this definition")

Type:

`bool`

Default:

`True`

True to use a `:param:` role for each function parameter. False to use a single `:parameters:` role for all the parameters.

This [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) snippet will be converted as follows:

```
Parameters
----------
arg1 : str
    Description of `arg1`
arg2 : int, optional
    Description of `arg2`, defaults to 0
```

**If True**:

```
:param arg1: Description of `arg1`
:type arg1: str
:param arg2: Description of `arg2`, defaults to 0
:type arg2: :class:`int`, *optional*
```

**If False**:

```
:parameters: * **arg1** (*str*) --
               Description of `arg1`
             * **arg2** (*int, optional*) --
               Description of `arg2`, defaults to 0
```

napoleon\_use\_keyword[¬∂](napoleon.html#confval-napoleon_use_keyword "Link to this definition")

Type:

`bool`

Default:

`True`

True to use a `:keyword:` role for each function keyword argument. False to use a single `:keyword arguments:` role for all the keywords.

This behaves similarly to [`napoleon_use_param`](napoleon.html#confval-napoleon_use_param). Note unlike docutils, `:keyword:` and `:param:` will not be treated the same way - there will be a separate ‚ÄúKeyword Arguments‚Äù section, rendered in the same fashion as ‚ÄúParameters‚Äù section (type links created if possible)

See also

[`napoleon_use_param`](napoleon.html#confval-napoleon_use_param)

napoleon\_use\_rtype[¬∂](napoleon.html#confval-napoleon_use_rtype "Link to this definition")

Type:

`bool`

Default:

`True`

True to use the `:rtype:` role for the return type. False to output the return type inline with the description.

This [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) snippet will be converted as follows:

```
Returns
-------
bool
    True if successful, False otherwise
```

**If True**:

```
:returns: True if successful, False otherwise
:rtype: bool
```

**If False**:

```
:returns: *bool* -- True if successful, False otherwise
```

napoleon\_preprocess\_types[¬∂](napoleon.html#confval-napoleon_preprocess_types "Link to this definition")

Type:

`bool`

Default:

`False`

True to convert the type definitions in the docstrings as references.

Added in version 3.2.1.

Changed in version 3.5: Do preprocess the Google style docstrings also.

napoleon\_type\_aliases[¬∂](napoleon.html#confval-napoleon_type_aliases "Link to this definition")

Type:

`dict[str, str] | None`

Default:

`None`

A mapping to translate type names to other names or references. Works only when `napoleon_use_param = True`.

With:

```
napoleon_type_aliases = {
    "CustomType": "mypackage.CustomType",
    "dict-like": ":term:`dict-like <mapping>`",
}
```

This [NumPy style](https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard) snippet:

```
Parameters
----------
arg1 : CustomType
    Description of `arg1`
arg2 : dict-like
    Description of `arg2`
```

becomes:

```
:param arg1: Description of `arg1`
:type arg1: mypackage.CustomType
:param arg2: Description of `arg2`
:type arg2: :term:`dict-like <mapping>`
```

Added in version 3.2.

napoleon\_attr\_annotations[¬∂](napoleon.html#confval-napoleon_attr_annotations "Link to this definition")

Type:

`bool`

Default:

`True`

True to allow using [**PEP 526**](https://peps.python.org/pep-0526/) attributes annotations in classes. If an attribute is documented in the docstring without a type and has an annotation in the class body, that type is used.

Added in version 3.4.

napoleon\_custom\_sections[¬∂](napoleon.html#confval-napoleon_custom_sections "Link to this definition")

Type:

`Sequence[str | tuple[str, str]] | None`

Default:

`None`

Add a list of custom sections to include, expanding the list of parsed sections.

The entries can either be strings or tuples, depending on the intention:

- To create a custom ‚Äúgeneric‚Äù section, just pass a string.
- To create an alias for an existing section, pass a tuple containing the alias name and the original, in that order.
- To create a custom section that displays like the parameters or returns section, pass a tuple containing the custom section name and a string value, ‚Äúparams\_style‚Äù or ‚Äúreturns\_style‚Äù.

If an entry is just a string, it is interpreted as a header for a generic section. If the entry is a tuple/list/indexed container, the first entry is the name of the section, the second is the section key to emulate. If the second entry value is ‚Äúparams\_style‚Äù or ‚Äúreturns\_style‚Äù, the custom section will be displayed like the parameters section or returns section.

Added in version 1.8.

Changed in version 3.5: Support `params_style` and `returns_style`








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# [`sphinx.ext.todo`](todo.html#module-sphinx.ext.todo "sphinx.ext.todo: Allow inserting todo items into documents.") ‚Äì Support for todo items[¬∂](todo.html#module-sphinx.ext.todo "Link to this heading")

*Module author: Daniel B√ºltmann*

Added in version 0.5.

There are two additional directives when using this extension:

.. todo::[¬∂](todo.html#directive-todo "Link to this definition")

Use this directive like, for example, [`note`](../restructuredtext/directives.html#directive-note "note directive").

It will only show up in the output if [`todo_include_todos`](todo.html#confval-todo_include_todos) is `True`.

Added in version 1.3.2: This directive supports an `class` option that determines the class attribute for HTML output. If not given, the class defaults to `admonition-todo`.

.. todolist::[¬∂](todo.html#directive-todolist "Link to this definition")

This directive is replaced by a list of all todo directives in the whole documentation, if [`todo_include_todos`](todo.html#confval-todo_include_todos) is `True`.

These can be configured as seen below.

## Configuration[¬∂](todo.html#configuration "Link to this heading")

todo\_include\_todos[¬∂](todo.html#confval-todo_include_todos "Link to this definition")

Type:

`bool`

Default:

`False`

If this is `True`, [`todo`](todo.html#directive-todo "todo directive") and [`todolist`](todo.html#directive-todolist "todolist directive") produce output, else they produce nothing.

todo\_emit\_warnings[¬∂](todo.html#confval-todo_emit_warnings "Link to this definition")

Type:

`bool`

Default:

`False`

If this is `True`, [`todo`](todo.html#directive-todo "todo directive") emits a warning for each TODO entries.

Added in version 1.5.

todo\_link\_only[¬∂](todo.html#confval-todo_link_only "Link to this definition")

Type:

`bool`

Default:

`False`

If this is `True`, [`todolist`](todo.html#directive-todolist "todolist directive") produce output without file path and line.

Added in version 1.4.

autodoc provides the following an additional event:

todo-defined(*app*, *node*)[¬∂](todo.html#event-todo-defined "Link to this definition")

Added in version 1.5.

Emitted when a todo is defined. *node* is the defined `sphinx.ext.todo.todo_node` node.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Extensions](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference



# [`sphinx.ext.viewcode`](viewcode.html#module-sphinx.ext.viewcode "sphinx.ext.viewcode: Add links to a highlighted version of the source code.") ‚Äì Add links to highlighted source code[¬∂](viewcode.html#module-sphinx.ext.viewcode "Link to this heading")

*Module author: Georg Brandl*

Added in version 1.0.

This extension looks at your Python object descriptions (`.. class::`, `.. function::` etc.) and tries to find the source files where the objects are contained. When found, a separate HTML page will be output for each module with a highlighted version of the source code, and a link will be added to all object descriptions that leads to the source code of the described object. A link back from the source to the description will also be inserted.

Warning

Basically, `viewcode` extension will import the modules being linked to. If any modules have side effects on import, these will be executed when `sphinx-build` is run.

If you document scripts (as opposed to library modules), make sure their main routine is protected by a `if __name__ == '__main__'` condition.

In addition, if you don‚Äôt want to import the modules by `viewcode`, you can tell the location of the location of source code to `viewcode` using the [`viewcode-find-source`](viewcode.html#event-viewcode-find-source) event.

If [`viewcode_follow_imported_members`](viewcode.html#confval-viewcode_follow_imported_members) is enabled, you will also need to resolve imported attributes using the [`viewcode-follow-imported`](viewcode.html#event-viewcode-follow-imported) event.

This extension works only on HTML related builders like `html`, `applehelp`, `devhelp`, `htmlhelp`, `qthelp` and so on except `singlehtml`. By default `epub` builder doesn‚Äôt support this extension (see [`viewcode_enable_epub`](viewcode.html#confval-viewcode_enable_epub)).

## Configuration[¬∂](viewcode.html#configuration "Link to this heading")

viewcode\_follow\_imported\_members[¬∂](viewcode.html#confval-viewcode_follow_imported_members "Link to this definition")

Type:

`bool`

Default:

`True`

If this is `True`, viewcode extension will emit [`viewcode-follow-imported`](viewcode.html#event-viewcode-follow-imported) event to resolve the name of the module by other extensions.

Added in version 1.3.

Changed in version 1.8: Renamed from `viewcode_import` to `viewcode_follow_imported_members`.

viewcode\_enable\_epub[¬∂](viewcode.html#confval-viewcode_enable_epub "Link to this definition")

Type:

`bool`

Default:

`False`

If this is `True`, viewcode extension is also enabled even if you use epub builders. This extension generates pages outside toctree, but this is not preferred as epub format.

Until 1.4.x, this extension is always enabled. If you want to generate epub as same as 1.4.x, you should set `True`, but epub format checker‚Äôs score becomes worse.

Added in version 1.5.

Warning

Not all epub readers support pages generated by viewcode extension. These readers ignore links to pages are not under toctree.

Some reader‚Äôs rendering result are corrupted and [epubcheck](https://github.com/IDPF/epubcheck)‚Äôs score becomes worse even if the reader supports.

viewcode\_line\_numbers[¬∂](viewcode.html#confval-viewcode_line_numbers "Link to this definition")

Type:

`bool`

Default:

`False`

If set to `True`, inline line numbers will be added to the highlighted code.

Added in version 7.2.

viewcode-find-source(*app*, *modname*)[¬∂](viewcode.html#event-viewcode-find-source "Link to this definition")

Added in version 1.8.

Find the source code for a module. An event handler for this event should return a tuple of the source code itself and a dictionary of tags. The dictionary maps the name of a class, function, attribute, etc to a tuple of its type, the start line number, and the end line number. The type should be one of ‚Äúclass‚Äù, ‚Äúdef‚Äù, or ‚Äúother‚Äù.

Parameters:

- **app** ‚Äì The Sphinx application object.
- **modname** ‚Äì The name of the module to find source code for.

viewcode-follow-imported(*app*, *modname*, *attribute*)[¬∂](viewcode.html#event-viewcode-follow-imported "Link to this definition")

Added in version 1.8.

Find the name of the original module for an attribute.

Parameters:

- **app** ‚Äì The Sphinx application object.
- **modname** ‚Äì The name of the module that the attribute belongs to.
- **attribute** ‚Äì The name of the member to follow.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Internationalization[¬∂](intl.html#internationalization "Link to this heading")

Added in version 1.1.

Complementary to translations provided for Sphinx-generated messages such as navigation bars, Sphinx provides mechanisms facilitating the translation of *documents*. See the [Options for internationalisation](../configuration.html#intl-options) for details on configuration.

[![../../_images/translation.svg](../../_images/translation.svg)](../../_images/translation.svg)

Workflow visualization of translations in Sphinx. (The figure is created by [plantuml](https://plantuml.com).)[¬∂](intl.html#id5 "Link to this image")



## [Sphinx internationalization details](intl.html#id6)[¬∂](intl.html#sphinx-internationalization-details "Link to this heading")

**gettext** [\[1\]](intl.html#id3) is an established standard for internationalization and localization. It naively maps messages in a program to a translated string. Sphinx uses these facilities to translate whole documents.

Initially project maintainers have to collect all translatable strings (also referred to as *messages*) to make them known to translators. Sphinx extracts these through invocation of **sphinx-build -M gettext**.

Every single element in the doctree will end up in a single message which results in lists being equally split into different chunks while large paragraphs will remain as coarsely-grained as they were in the original document. This grants seamless document updates while still providing a little bit of context for translators in free-text passages. It is the maintainer‚Äôs task to split up paragraphs which are too large as there is no sane automated way to do that.

After Sphinx successfully ran the [`MessageCatalogBuilder`](../builders/index.html#sphinx.builders.gettext.MessageCatalogBuilder "sphinx.builders.gettext.MessageCatalogBuilder") you will find a collection of `.pot` files in your output directory. These are **catalog templates** and contain messages in your original language *only*.

They can be delivered to translators which will transform them to `.po` files ‚Äî so called **message catalogs** ‚Äî containing a mapping from the original messages to foreign-language strings.

*gettext* compiles them into a binary format known as **binary catalogs** through **msgfmt** for efficiency reasons. If you make these files discoverable with [`locale_dirs`](../configuration.html#confval-locale_dirs) for your [`language`](../configuration.html#confval-language), Sphinx will pick them up automatically.

An example: you have a document `usage.rst` in your Sphinx project. The *gettext* builder will put its messages into `usage.pot`. Imagine you have Spanish translations [\[2\]](intl.html#id4) stored in `usage.po` ‚Äî for your builds to be translated you need to follow these instructions:

- Compile your message catalog to a locale directory, say `locale`, so it ends up in `./locale/es/LC_MESSAGES/usage.mo` in your source directory (where `es` is the language code for Spanish.)

  ```
  msgfmt "usage.po" -o "locale/es/LC_MESSAGES/usage.mo"
  ```
- Set [`locale_dirs`](../configuration.html#confval-locale_dirs) to `["locale/"]`.
- Set [`language`](../configuration.html#confval-language) to `es` (also possible via [`-D`](../../man/sphinx-build.html#cmdoption-sphinx-build-D)).
- Run your desired build.

In order to protect against mistakes, a warning is emitted if cross-references in the translated paragraph do not match those from the original. This can be turned off globally using the [`suppress_warnings`](../configuration.html#confval-suppress_warnings) configuration variable. Alternatively, to turn it off for one message only, end the message with `#noqa` like this:

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse
risus tortor, luctus id ultrices at. #noqa
```

(Write `\#noqa` in case you want to have ‚Äú#noqa‚Äù literally in the text. This does not apply to code blocks, where `#noqa` is ignored because code blocks do not contain references anyway.)

Added in version 4.5: The `#noqa` mechanism.

## [Translating with sphinx-intl](intl.html#id7)[¬∂](intl.html#translating-with-sphinx-intl "Link to this heading")

### [Quick guide](intl.html#id8)[¬∂](intl.html#quick-guide "Link to this heading")

[sphinx-intl](https://pypi.org/project/sphinx-intl/) is a useful tool to work with Sphinx translation flow. This section describe an easy way to translate with *sphinx-intl*.

1. Install [sphinx-intl](https://pypi.org/project/sphinx-intl/).

   ```
   $ pip install sphinx-intl
   ```
2. Add configurations to `conf.py`.

   ```
   locale_dirs = ['locale/']   # path is example but recommended.
   gettext_compact = False     # optional.
   ```

   This case-study assumes that BUILDDIR is set to `_build`, [`locale_dirs`](../configuration.html#confval-locale_dirs) is set to `locale/` and [`gettext_compact`](../configuration.html#confval-gettext_compact) is set to `False` (the Sphinx document is already configured as such).
3. Extract translatable messages into pot files.

   ```
   $ make gettext
   ```

   The generated pot files will be placed in the `_build/gettext` directory. If you want to customize the output beyond what can be done via the [Options for internationalisation](../configuration.html#intl-options), the [`default pot file template`](../../_downloads/78d4fe3529118e4daa37f326d15384f4/message.pot.jinja) can be replaced by a custom `message.pot.jinja` file placed in any directory listed in [`templates_path`](../configuration.html#confval-templates_path).
4. Generate po files.

   We‚Äôll use the pot files generated in the above step.

   ```
   $ sphinx-intl update -p _build/gettext -l de -l ja
   ```

   Once completed, the generated po files will be placed in the below directories:

   - `./locale/de/LC_MESSAGES/`
   - `./locale/ja/LC_MESSAGES/`
5. Translate po files.

   As noted above, these are located in the `./locale/<lang>/LC_MESSAGES` directory. An example of one such file, from Sphinx, `builders.po`, is given below.

   ```
   # a5600c3d2e3d48fc8c261ea0284db79b
   #: ../../builders.rst:4
   msgid "Available builders"
   msgstr "<FILL HERE BY TARGET LANGUAGE>"
   ```

   Another case, msgid is multi-line text and contains reStructuredText syntax:

   ```
   # 302558364e1d41c69b3277277e34b184
   #: ../../builders.rst:9
   msgid ""
   "These are the built-in Sphinx builders. More builders can be added by "
   ":ref:`extensions <extensions>`."
   msgstr ""
   "FILL HERE BY TARGET LANGUAGE FILL HERE BY TARGET LANGUAGE FILL HERE "
   "BY TARGET LANGUAGE :ref:`EXTENSIONS <extensions>` FILL HERE."
   ```

   Please be careful not to break reStructuredText notation. Most po-editors will help you with that.
6. Build translated document.

   You need a [`language`](../configuration.html#confval-language) parameter in `conf.py` or you may also specify the parameter on the command line.

   For BSD/GNU make, run:

   ```
   $ make -e SPHINXOPTS="-D language='de'" html
   ```

   For Windows **cmd.exe**, run:

   ```
   > set SPHINXOPTS=-D language=de
   > .\make.bat html
   ```

   For PowerShell, run:

   ```
   PS> Set-Item env:SPHINXOPTS "-D language=de"
   PS> .\make.bat html
   ```

Congratulations! You got the translated documentation in the `_build/html` directory.

Added in version 1.3: **sphinx-build** that is invoked by make command will build po files into mo files.

If you are using 1.2.x or earlier, please invoke **sphinx-intl build** command before **make** command.

### [Translating](intl.html#id9)[¬∂](intl.html#translating "Link to this heading")

### [Update your po files by new pot files](intl.html#id10)[¬∂](intl.html#update-your-po-files-by-new-pot-files "Link to this heading")

If a document is updated, it is necessary to generate updated pot files and to apply differences to translated po files. In order to apply the updates from a pot file to the po file, use the **sphinx-intl update** command.

```
$ sphinx-intl update -p _build/gettext
```

## [Using Transifex service for team translation](intl.html#id11)[¬∂](intl.html#using-transifex-service-for-team-translation "Link to this heading")

[Transifex](https://app.transifex.com/) is one of several services that allow collaborative translation via a web interface. It has a nifty Go-based command line client that makes it easy to fetch and push translations.

1. Install the [Transifex CLI tool](https://github.com/transifex/cli/).

   You need the **tx** command line tool for uploading resources (pot files). The official installation process place the `tx` binary file in the current directory along with a README and a LICENSE file, and adds the current directory to `$PATH`.

   ```
   $ curl -o- https://raw.githubusercontent.com/transifex/cli/master/install.sh | bash
   ```

   See also

   [Transifex Client documentation](https://developers.transifex.com/docs/using-the-client)
2. Create your [Transifex](https://app.transifex.com/) account and create a new project and an organization for your document.

   Currently, Transifex does not allow for a translation project to have more than one version of the document, so you‚Äôd better include a version number in your project name.

   For example:

   Organization ID:

   `sphinx-document`

   Project ID:

   `sphinx-document-test_1_0`

   Project URL:

   `https://www.transifex.com/projects/p/sphinx-document-test_1_0/`
3. Create an API token to be used in the command-line.

   Go to your [Transifex API token](https://app.transifex.com/user/settings/api/) page and generate a token. Copy the generated token now, as you will not be able to see it again later.
4. Set your Transifex API token in the user configuration file `$HOME/.transifexrc`.

   ```
   [https://app.transifex.com]
   rest_hostname = https://rest.api.transifex.com
   token         = paste_your_api_token_here
   ```
5. Alternatively, you can store your Transifex API token as the environment variable `TX_TOKEN`, which is recognized and used by **tx**.

   ```
   $ export TX_TOKEN=paste_your_api_token_here
   ```
6. Create the project‚Äôs config file for **tx** command.

   This process will create `.tx/config` in the current directory.

   ```
   $ cd /your/document/root
   $ tx init

   Successful creation of '.tx/config' file
   ```
7. Upload pot files to Transifex service.

   Register pot files to `.tx/config` file using **sphinx-intl update-txconfig-resources**, adjusting `--pot-dir` value to your project‚Äôs pot files‚Äô directory:

   ```
   $ cd /your/document/root
   $ sphinx-intl update-txconfig-resources --pot-dir _build/locale \
     --transifex-organization-name=sphinx-document \
     --transifex-project-name=sphinx-document-test_1_0
   ```

   You can use the `SPHINXINTL_TRANSIFEX_ORGANIZATION_NAME` and `SPHINXINTL_TRANSIFEX_PROJECT_NAME` environment variables instead of the respective command line arguments.

   See also

   [sphinx-intl update-txconfig-resources documentation](https://sphinx-intl.readthedocs.io/en/master/refs.html#sphinx-intl-update-txconfig-resources)

   and upload pot files:

   ```
   $ tx push -s
   # Getting info about resources

   sphinx-document-test_1_0.builders - Getting info
   sphinx-document-test_1_0.builders - Done

   # Pushing source files

   sphinx-document-test_1_0.builders - Uploading file
   sphinx-document-test_1_0.builders - Done
   ```
8. Forward the translation on Transifex.
9. Pull translated po files and make translated HTML.

   Get translated catalogs and build mo files. For example, to build mo files for German (de):

   ```
   $ cd /your/document/root
   $ tx pull -l de
   # Getting info about resources

   sphinx-document-test_1_0.builders - Getting info
   sphinx-document-test_1_0.builders - Done

   # Pulling files

   sphinx-document-test_1_0.builders [de] - Pulling file
   sphinx-document-test_1_0.builders [de] - Creating download job
   sphinx-document-test_1_0.builders [de] - Done
   ```

   Invoke **make html** (for BSD/GNU make) passing the language code:

   ```
   $ make -e SPHINXOPTS="-D language='de'" html
   ```

That‚Äôs all!

Tip

Translating locally and on Transifex

If you want to push all language‚Äôs po files, you can be done by using **tx push -t** command. Watch out! This operation overwrites translations in Transifex.

In other words, if you have updated each in the service and local po files, it would take much time and effort to integrate them.

## [Using Weblate service for team translation](intl.html#id12)[¬∂](intl.html#using-weblate-service-for-team-translation "Link to this heading")

Read more in [Weblate‚Äôs documentation](https://docs.weblate.org/en/latest/devel/sphinx.html).

## [Contributing to Sphinx reference translation](intl.html#id13)[¬∂](intl.html#contributing-to-sphinx-reference-translation "Link to this heading")

The recommended way for new contributors to translate Sphinx reference is to join the translation team on Transifex.

There is a [sphinx translation page](https://app.transifex.com/sphinx-doc/sphinx-doc/) for Sphinx (master) documentation.

1. Login to [Transifex](https://app.transifex.com/) service.
2. Go to [sphinx translation page](https://app.transifex.com/sphinx-doc/sphinx-doc/).
3. Click `Request language` and fill form.
4. Wait acceptance by Transifex sphinx translation maintainers.
5. (After acceptance) Translate on Transifex.

Detail is here: [https://help.transifex.com/en/articles/6248698-getting-started-as-a-translator](https://help.transifex.com/en/articles/6248698-getting-started-as-a-translator)

## [Translation progress and statistics](intl.html#id14)[¬∂](intl.html#translation-progress-and-statistics "Link to this heading")

Added in version 7.1.0.

During the rendering process, Sphinx marks each translatable node with a `translated` attribute, indicating if a translation was found for the text in that node.

The [`translation_progress_classes`](../configuration.html#confval-translation_progress_classes) configuration value can be used to add a class to each element, depending on the value of the `translated` attribute.

The `|translation progress|` substitution can be used to display the percentage of nodes that have been translated on a per-document basis.

Footnotes

\[[1](intl.html#id1)]

See the [GNU gettext utilities](https://www.gnu.org/software/gettext/manual/gettext.html#Introduction) for details on that software suite.

\[[2](intl.html#id2)]

Because nobody expects the Spanish Inquisition!








### Navigation

- [Documentation](index.html) ¬ª

### On this page




The Basics


User guide


Community


Reference


# LaTeX customization[¬∂](latex.html#module-latex "Link to this heading")

Unlike [the HTML builders](usage/theming.html#html-themes), the `latex` builder does not benefit from prepared themes. The [Options for LaTeX output](usage/configuration.html#latex-options), and particularly the [latex\_elements](latex.html#latex-elements-confval) variable, provides much of the interface for customization. For example:

```
# inside conf.py
latex_engine = 'xelatex'
latex_elements = {
    'passoptionstopackages': r'''
\PassOptionsToPackage{svgnames}{xcolor}
''',
    'fontpkg': r'''
\setmainfont{DejaVu Serif}
\setsansfont{DejaVu Sans}
\setmonofont{DejaVu Sans Mono}
''',
    'preamble': r'''
\usepackage[titles]{tocloft}
\cftsetpnumwidth {1.25cm}\cftsetrmarg{1.5cm}
\setlength{\cftchapnumwidth}{0.75cm}
\setlength{\cftsecindent}{\cftchapnumwidth}
\setlength{\cftsecnumwidth}{1.25cm}
''',
    'sphinxsetup': 'TitleColor=DarkGoldenrod',
    'fncychap': r'\usepackage[Bjornstrup]{fncychap}',
    'printindex': r'\footnotesize\raggedright\printindex',
}
latex_show_urls = 'footnote'
```

Note

Keep in mind that backslashes must be doubled in Python string literals to avoid interpretation as escape sequences. Alternatively, you may use raw strings as is done above.

## The `latex_elements` configuration setting[¬∂](latex.html#the-latex-elements-configuration-setting "Link to this heading")

A dictionary that contains LaTeX snippets overriding those Sphinx usually puts into the generated `.tex` files. Its `'sphinxsetup'` key is described [separately](latex.html#latexsphinxsetup). It allows also local configurations inserted in generated files, via [raw](https://docutils.sourceforge.io/docs/ref/rst/directives.html#raw) directives. For example, in the PDF documentation this chapter is styled especially, as will be described later.

Keys that you may want to override include:

`'papersize'`

Paper size option of the document class (`'a4paper'` or `'letterpaper'`)

Default: `'letterpaper'`

`'pointsize'`

Point size option of the document class (`'10pt'`, `'11pt'` or `'12pt'`)

Default: `'10pt'`

`'pxunit'`

The value of the `px` when used in image attributes `width` and `height`. The default value is `'0.75bp'` which achieves `96px=1in` (in TeX `1in = 72bp = 72.27pt`.) To obtain for example `100px=1in` use `'0.01in'` or `'0.7227pt'` (the latter leads to TeX computing a more precise value, due to the smaller unit used in the specification); for `72px=1in`, simply use `'1bp'`; for `90px=1in`, use `'0.8bp'` or `'0.803pt'`.

Default: `'0.75bp'`

Added in version 1.5.

`'passoptionstopackages'`

A string which will be positioned early in the preamble, designed to contain `\PassOptionsToPackage{options}{foo}` commands.

Hint

It may be also used for loading LaTeX packages very early in the preamble. For example package `fancybox` is incompatible with being loaded via the `'preamble'` key, it must be loaded earlier.

Default: `''`

Added in version 1.4.

`'babel'`

‚Äúbabel‚Äù package inclusion, default `r'\usepackage{babel}'` (the suitable document language string is passed as class option, and `english` is used if no language.) For Japanese documents, the default is the empty string.

With XeLaTeX and LuaLaTeX, Sphinx configures the LaTeX document to use [polyglossia](https://ctan.org/pkg/polyglossia), but one should be aware that current [babel](https://ctan.org/pkg/babel) has improved its support for Unicode engines in recent years and for some languages it may make sense to prefer `babel` over `polyglossia`.

Hint

After modifying a core LaTeX key like this one, clean up the LaTeX build repertory before next PDF build, else left-over auxiliary files are likely to break the build.

Default: `r'\usepackage{babel}'` (for Japanese documents)

Changed in version 1.5: For [`latex_engine`](usage/configuration.html#confval-latex_engine) set to `'xelatex'`, the default is `'\\usepackage{polyglossia}\n\\setmainlanguage{<language>}'`.

Changed in version 1.6: `'lualatex'` uses same default setting as `'xelatex'`

Changed in version 1.7.6: For French with `'xelatex'` (not `'lualatex'`) the default is to use `babel`, not `polyglossia`.

Changed in version 7.4.0: For French with `'lualatex'` the default is to use `babel`.

`'fontpkg'`

Font package inclusion. The default with `'pdflatex'` is:

```
r"""\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand\ttdefault{txtt}
"""
```

For `'xelatex'` and `'lualatex'` on the other hand the `\setmainfont`, `\setsansfont` and `\setmonofont` commands of LaTeX package `fontspec` (included via ['fontenc'](latex.html#fontenc)) are used to set up the OpenType fonts GNU FreeSerif, FreeSans, and FreeMono (scaled with ratio `0.9`) as document fonts.

Changed in version 1.2: Defaults to `''` when the [`language`](usage/configuration.html#confval-language) uses the Cyrillic script.

Changed in version 2.0: Incorporates some font substitution commands to help support occasional Greek or Cyrillic in a document using `'pdflatex'` engine. At 4.0.0 these commands were moved to the `'fontsubstitution'` key.

Changed in version 4.0.0: The default font setting was changed. As shown above it still uses Times and Helvetica clones for serif and sans serif, but via better, more complete TeX fonts and associated LaTeX packages. The monospace font has been changed to better match the Times clone.

Changed in version 8.1.0: The monospace font FreeMono used with Unicode engines is loaded at scale `0.9`. This replaces the former mechanism via ['fvset'](latex.html#fvset) which configured code-blocks to use `\small`. Inline literals now fit better in their surrounding text, and it is easier to set up custom fonts, as ['fvset'](latex.html#fvset) does not intervene anymore by default.

`'fncychap'`

Inclusion of the ‚Äúfncychap‚Äù package (which makes fancy chapter titles), default `r'\usepackage[Bjarne]{fncychap}'` for English documentation (this option is slightly customized by Sphinx), `r'\usepackage[Sonny]{fncychap}'` for internationalized docs (because the ‚ÄúBjarne‚Äù style uses numbers spelled out in English). Other ‚Äúfncychap‚Äù styles you can try are ‚ÄúLenny‚Äù, ‚ÄúGlenn‚Äù, ‚ÄúConny‚Äù, ‚ÄúRejne‚Äù and ‚ÄúBjornstrup‚Äù. You can also set this to `''` to disable fncychap.

Default: `r'\usepackage[Bjarne]{fncychap}'` for English documents, `r'\usepackage[Sonny]{fncychap}'` for internationalized documents, and `''` for Japanese documents.

`'preamble'`

Additional preamble content. One may move all needed macros into some file `mystyle.tex.txt` of the project source repertory, and get LaTeX to import it at run time:

```
'preamble': r'\input{mystyle.tex.txt}',
# or, if the \ProvidesPackage LaTeX macro is used in a file mystyle.sty
'preamble': r'\usepackage{mystyle}',
```

It is then needed to set appropriately [`latex_additional_files`](usage/configuration.html#confval-latex_additional_files), for example:

```
latex_additional_files = ["mystyle.sty"]
```

Do not use `.tex` as suffix, else the file is submitted itself to the PDF build process, use `.tex.txt` or `.sty` as in the examples above.

Default: `''`

`'figure_align'`

Latex figure float alignment. Whenever an image doesn‚Äôt fit into the current page, it will be ‚Äòfloated‚Äô into the next page but may be preceded by any other text. If you don‚Äôt like this behavior, use ‚ÄòH‚Äô which will disable floating and position figures strictly in the order they appear in the source.

Default: `'htbp'` (here, top, bottom, page)

Added in version 1.3.

`'atendofbody'`

Additional document content (right before the indices).

Default: `''`

Added in version 1.5.

`'extrapackages'`

Additional LaTeX packages. For example:

```
latex_elements = {
    'extrapackages': r'\usepackage{isodate}'
}
```

The specified LaTeX packages will be loaded before hyperref package and packages loaded from Sphinx extensions.

Hint

If you‚Äôd like to load additional LaTeX packages after hyperref, use `'preamble'` key instead.

Default: `''`

Added in version 2.3.

`'footer'`

Additional footer content (before the indices).

Default: `''`

Deprecated since version 1.5: Use `'atendofbody'` key instead.

Keys that don‚Äôt need to be overridden unless in special cases are:

`'extraclassoptions'`

The default is the empty string. Example: `'extraclassoptions': 'openany'` will allow chapters (for documents of the `'manual'` type) to start on any page.

Default: `''`

Added in version 1.2.

Changed in version 1.6: Added this documentation.

`'maxlistdepth'`

LaTeX allows by default at most 6 levels for nesting list and quote-like environments, with at most 4 enumerated lists, and 4 bullet lists. Setting this key for example to `'10'` (as a string) will allow up to 10 nested levels (of all sorts). Leaving it to the empty string means to obey the LaTeX default.

Warning

- Using this key may prove incompatible with some LaTeX packages or special document classes which do their own list customization.
- The key setting is silently *ignored* if `\usepackage{enumitem}` is executed inside the document preamble. Use then rather the dedicated commands of this LaTeX package.

Default: `6`

Added in version 1.5.

`'inputenc'`

‚Äúinputenc‚Äù package inclusion.

Default: `r'\usepackage[utf8]{inputenc}'` when using pdflatex, else `''`.

Note

If using `utf8x` in place of `utf8` it is mandatory to extend the LaTeX preamble with suitable `\PreloadUnicodePage{<number>}` commands, as per the `utf8x` documentation (`texdoc ucs` on a TeXLive based TeX installation). Else, unexpected and possibly hard-to-spot problems (i.e. not causing a build crash) may arise in the PDF, in particular regarding hyperlinks.

Even if these precautions are taken, PDF build via `pdflatex` engine may crash due to upstream LaTeX not being fully compatible with `utf8x`. For example, in certain circumstances related to code-blocks, or attempting to include images whose filenames contain Unicode characters. Indeed, starting in 2015, upstream LaTeX with `pdflatex` engine has somewhat enhanced native support for Unicode and is becoming more and more incompatible with `utf8x`. In particular, since the October 2019 LaTeX release, filenames can use Unicode characters, and even spaces. At Sphinx level this means e.g. that the [image](https://docutils.sourceforge.io/docs/ref/rst/directives.html#image) and [figure](https://docutils.sourceforge.io/docs/ref/rst/directives.html#figure) directives are now compatible with such filenames for PDF via LaTeX output. But this is broken if `utf8x` is in use.

Changed in version 1.4.3: Previously `r'\usepackage[utf8]{inputenc}'` was used for all compilers.

`'cmappkg'`

‚Äúcmap‚Äù package inclusion.

Default: `r'\usepackage{cmap}'`

Added in version 1.2.

`'fontenc'`

Its default, for `'pdflatex'` as [`latex_engine`](usage/configuration.html#confval-latex_engine), is `r'\usepackage[T1]{fontenc}'`. Replace it (if using `'pdflatex'`) with:

- `r'\usepackage[X2,T1]{fontenc}'` if you need occasional Cyrillic letters (—Ñ–∏–∑–∏–∫–∞ —á–∞—Å—Ç–∏—Ü),
- `r'\usepackage[LGR,T1]{fontenc}'` if you need occasional Greek letters (Œ£œâŒºŒ±œÑŒπŒ¥ŒπŒ±Œ∫ŒÆ œÜœÖœÉŒπŒ∫ŒÆ),
- `r'\usepackage[LGR,X2,T1]{fontenc}'` if you need both.

The TeX installation may need some extra packages. For example, on Ubuntu xenial:

- `texlive-lang-greek` and `cm-super` are needed for Greek (`LGR`),
- `texlive-lang-cyrillic` and `cm-super` are needed for Cyrillic (`X2`).

With `'xelatex'` and `'lualatex'`, support for Greek and Cyrillic is out-of-the-box: this ['fontenc'](latex.html#fontenc) key defaults to including the LaTeX package `fontspec` (with some extras described below) and selects the GNU FreeSerif font as body font. See ['fontpkg'](latex.html#fontpkg).

Changed in version 1.5: Defaults to `r'\usepackage{fontspec}'` if [`latex_engine`](usage/configuration.html#confval-latex_engine) is set to `'xelatex'`.

Changed in version 1.6: Defaults to `r'\usepackage{fontspec}'` if [`latex_engine`](usage/configuration.html#confval-latex_engine) is set to `'lualatex'`.

Changed in version 2.0: `'lualatex'` executes additionally `\defaultfontfeatures[\rmfamily,\sffamily]{}` to disable TeX ligatures for `<<` and `>>`.

Changed in version 2.0: Extra LaTeX configuration is automatically executed if `LGR`, `T2A`, or `X2` are detected in this key, in order to support occasional Greek or Cyrillic with `'pdflatex'`.

Changed in version 2.2.1: Documents having Greek as main language default to `'xelatex'` and should not set the ['fontenc'](latex.html#fontenc) key, which will load `fontspec`.

Changed in version 2.3.0: `'xelatex'` executes `\defaultfontfeatures[\rmfamily,\sffamily]{}` in order to avoid contractions of `--` into en-dash and also transforms of straight quotes into curly quotes (which otherwise would happen even with [`smartquotes`](usage/configuration.html#confval-smartquotes) set to `False`).

`'fontsubstitution'`

Ignored if `'fontenc'` was not configured to use `LGR` or `X2` (or `T2A`). In case ['fontpkg'](latex.html#fontpkg) key is configured for usage with some TeX fonts known to be available in the `LGR` or `X2` encodings, set this one to be the empty string. Else leave to its default.

Ignored with [`latex_engine`](usage/configuration.html#confval-latex_engine) other than `'pdflatex'`.

Added in version 4.0.0.

`'textgreek'`

For the support of occasional Greek letters.

It is ignored with `'platex'`, `'xelatex'` or `'lualatex'` as [`latex_engine`](usage/configuration.html#confval-latex_engine) and defaults to either the empty string or to `r'\usepackage{textalpha}'` for `'pdflatex'` depending on whether the `'fontenc'` key was used with `LGR` or not. Only expert LaTeX users may want to customize this key.

It can also be used as `r'\usepackage{textalpha,alphabeta}'` to let `'pdflatex'` support Greek Unicode input in [`math`](usage/restructuredtext/directives.html#directive-math "math directive") context. For example ``:math:`Œ±` `` (U+03B1) will render as \\(\\alpha\\).

Default: `r'\usepackage{textalpha}'` or `''` if `fontenc` does not include the `LGR` option.

Added in version 2.0.

`'geometry'`

‚Äúgeometry‚Äù package inclusion, defaults to `r'\usepackage{geometry}'` or `r'\usepackage[dvipdfm]{geometry}'` for Japanese documents. The Sphinx LaTeX style file executes additionally:

```
\PassOptionsToPackage{hmargin=1in,vmargin=1in,marginpar=0.5in}{geometry}
```

which can be customized via corresponding [‚Äòsphinxsetup‚Äô options](latex.html#latexsphinxsetup).

Added in version 1.5.

Changed in version 1.5.2: `dvipdfm` option if [`latex_engine`](usage/configuration.html#confval-latex_engine) is `'platex'`.

Added in version 1.5.3: The [‚Äòsphinxsetup‚Äô keys for the margins](latex.html#latexsphinxsetuphmargin).

Changed in version 1.5.3: The location in the LaTeX file has been moved to after `\usepackage{sphinx}` and `\sphinxsetup{..}`, hence also after insertion of ['fontpkg'](latex.html#fontpkg) key. This is in order to handle the paper layout options in a special way for Japanese documents: the text width will be set to an integer multiple of the *zenkaku* width, and the text height to an integer multiple of the baseline. See the [hmargin](latex.html#latexsphinxsetuphmargin) documentation for more.

`'hyperref'`

‚Äúhyperref‚Äù package inclusion; also loads package ‚Äúhypcap‚Äù and issues `\urlstyle{same}`. This is done after `sphinx.sty` file is loaded and before executing the contents of `'preamble'` key.

Attention

Loading of packages ‚Äúhyperref‚Äù and ‚Äúhypcap‚Äù is mandatory.

Added in version 1.5: Previously this was done from inside `sphinx.sty`.

`'maketitle'`

‚Äúmaketitle‚Äù call. Override if you want to generate a differently styled title page.

Hint

If the key value is set to `r'\newcommandsphinxbackoftitlepage{<Extra material>}\sphinxmaketitle'`, then `<Extra material>` will be typeset on back of title page (`'manual'` docclass only).

Default: `r'\sphinxmaketitle'`

Changed in version 1.8.3: Original `\maketitle` from document class is not overwritten, hence is reusable as part of some custom setting for this key.

Added in version 1.8.3: `\sphinxbackoftitlepage` optional macro. It can also be defined inside `'preamble'` key rather than this one.

`'releasename'`

Value that prefixes `'release'` element on title page. As for *title* and *author* used in the tuples of [`latex_documents`](usage/configuration.html#confval-latex_documents), it is inserted as LaTeX markup.

Default: `'Release'`

`'tableofcontents'`

‚Äútableofcontents‚Äù call. The default of `r'\sphinxtableofcontents'` is a wrapper of unmodified `\tableofcontents`, which may itself be customized by user loaded packages. Override if you want to generate a different table of contents or put content between the title page and the TOC.

Default: `r'\sphinxtableofcontents'`

Changed in version 1.5: Previously the meaning of `\tableofcontents` itself was modified by Sphinx. This created an incompatibility with dedicated packages modifying it also such as ‚Äútocloft‚Äù or ‚Äúetoc‚Äù.

`'transition'`

Commands used to display transitions. Override if you want to display transitions differently.

Default: `'\n\n\\bigskip\\hrule\\bigskip\n\n'`

Added in version 1.2.

Changed in version 1.6: Remove unneeded `{}` formerly located after `\hrule`.

`'makeindex'`

‚Äúmakeindex‚Äù call, the last thing before `\begin{document}`. With `r'\usepackage[columns=1]{idxlayout}\makeindex'` the index will use only one column. You may have to install `idxlayout` LaTeX package.

Default: `r'\makeindex'`

`'printindex'`

‚Äúprintindex‚Äù call, the last thing in the file. Override if you want to generate the index differently, append some content after the index, or change the font. As LaTeX uses two-column mode for the index it is often advisable to set this key to `r'\footnotesize\raggedright\printindex'`. Or, to obtain a one-column index, use `r'\def\twocolumn[#1]{#1}\printindex'` (this trick may fail if using a custom document class; then try the `idxlayout` approach described in the documentation of the `'makeindex'` key).

Default: `r'\printindex'`

`'fvset'`

Customization of `fancyvrb` LaTeX package.

The default value is `r'\fvset{fontsize=auto}'` which means that the font size will adjust correctly if a code-block ends up in a footnote. You may need to modify this when using a custom monospace font, for example set it to `r'\fvset{fontsize=\small}'` if it is Courier-like (for Unicode engines, it is recommended to use rather the `Scale` interface of `\setmonofont` LaTeX command from `fontspec`).

Default: `r'\fvset{fontsize=auto}'`

Added in version 1.8.

Changed in version 2.0: For `'xelatex'` and `'lualatex'` defaults to `r'\fvset{fontsize=\small}'` as this is adapted to the relative widths of the FreeFont family.

Changed in version 4.0.0: Changed default for `'pdflatex'`. Previously it was using `r'\fvset{fontsize=\small}'`.

Changed in version 4.1.0: Changed default for Chinese documents to `r'\fvset{fontsize=\small,formatcom=\xeCJKVerbAddon}'`

Changed in version 8.1.0: Changed default for `'xelatex'` and `'lualatex'` to be also `r'\fvset{fontsize=auto}'`. The rescaling for default monospace font FreeMono is now set via the LaTeX package `fontspec` interface rather. See ['fontpkg'](latex.html#fontpkg).

Keys that are set by other options and therefore should not be overridden are:

`'docclass'` `'classoptions'` `'title'` `'release'` `'author'`

## The `sphinxsetup` configuration setting[¬∂](latex.html#the-sphinxsetup-configuration-setting "Link to this heading")

Added in version 1.5.

The `'sphinxsetup'` key of [latex\_elements](latex.html#latex-elements-confval) provides a LaTeX-type customization interface:

```
latex_elements = {
    'sphinxsetup': 'key1=value1, key2=value2, ...',
}
```

LaTeX syntax for boolean keys requires *lowercase* `true` or `false` e.g `'sphinxsetup': "verbatimwrapslines=false"`. If setting a boolean key to `true`, `=true` is optional. Spaces around the commas and equal signs are ignored, spaces inside LaTeX macros may be significant. Do not use ticks/quotes to enclose string or numerical values.

The `'sphinxsetup'` defaults to empty. If non-empty, it will be passed as argument to the `\sphinxsetup` macro inside the document preamble, like this:

```
\usepackage{sphinx}
\sphinxsetup{key1=value1, key2=value2,...}
```

It is possible to insert uses of the `\sphinxsetup` LaTeX macro directly into the body of the document, via the `raw` directive:

```
.. raw:: latex

   \begingroup
   \sphinxsetup{%
      TitleColor=DarkGoldenrod,
      ... more comma separated key=value using LaTeX syntax ...
   }

All elements here will be under the influence of the raw ``\sphinxsetup``
settings.

.. raw:: latex

   \endgroup

From here on, the raw ``\sphinxsetup`` has no effect anymore.
```

This is the technique which has been used to style especially the present part of the documentation for the PDF output. The actually used options will be found at top of `doc/latex.rst` at the [development repository](https://github.com/sphinx-doc/sphinx).

The color used in the above example is available from having passed the `svgnames` option to the ‚Äúxcolor‚Äù package:

```
latex_elements = {
    'passoptionstopackages': r'\PassOptionsToPackage{svgnames}{xcolor}',
}
```

`bookmarksdepth`

Controls the depth of the collapsible bookmarks panel in the PDF. May be either a number (e.g. `3`) or a LaTeX sectioning name (e.g. `subsubsection`, i.e. without backslash). For details, refer to the `hyperref` LaTeX docs.

Default: `5`

Added in version 4.0.0.

`hmargin, vmargin`

The dimensions of the horizontal (resp. vertical) margins, passed as `hmargin` (resp. `vmargin`) option to the `geometry` package. Example:

```
'sphinxsetup': 'hmargin={2in,1.5in}, vmargin={1.5in,2in}, marginpar=1in',
```

Japanese documents currently accept only the one-dimension format for these parameters. The `geometry` package is then passed suitable options to get the text width set to an exact multiple of the *zenkaku* width, and the text height set to an integer multiple of the baselineskip, with the closest fit for the margins.

Default: `1in` (equivalent to `{1in,1in}`)

Hint

For Japanese `'manual'` docclass with pointsize `11pt` or `12pt`, use the `nomag` extra document class option (cf. `'extraclassoptions'` key of [`latex_elements`](usage/configuration.html#confval-latex_elements)) or so-called TeX ‚Äútrue‚Äù units:

```
'sphinxsetup': 'hmargin=1.5truein, vmargin=1.5truein, marginpar=5zw',
```

Added in version 1.5.3.

`marginpar`

The `\marginparwidth` LaTeX dimension. For Japanese documents, the value is modified to be the closest integer multiple of the *zenkaku* width.

Default: `0.5in`

Added in version 1.5.3.

`mathnumsep`

This defaults to the string (without quotes!) as set by [`math_numsep`](usage/configuration.html#confval-math_numsep) (which itself defaults to `'.'`). Use it if a different setting is needed for LaTeX output.

Added in version 8.1.0.

`verbatimwithframe`

Boolean to specify if [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")s and literal includes are framed. Setting it to `false` does not deactivate use of package ‚Äúframed‚Äù, because it is still in use for the optional background color.

Default: `true`.

`verbatimwrapslines`

Boolean to specify if long lines in [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")‚Äòs contents are wrapped.

If `true`, line breaks may happen at spaces (the last space before the line break will be rendered using a special symbol), and at ASCII punctuation characters (i.e. not at letters or digits). Whenever a long string has no break points, it is moved to next line. If its length is longer than the line width it will overflow.

Default: `true`

`verbatimforcewraps`

Boolean to specify if long lines in [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")‚Äòs contents should be forcefully wrapped to never overflow due to long strings.

Note

It is assumed that the [Pygments](https://pygments.org/) LaTeXFormatter has not been used with its `texcomments` or similar options which allow additional (arbitrary) LaTeX mark-up.

Also, in case of [`latex_engine`](usage/configuration.html#confval-latex_engine) set to `'pdflatex'`, only the default LaTeX handling of Unicode code points, i.e. `utf8` not `utf8x` is allowed.

Default: `false`

Added in version 3.5.0.

`verbatimmaxoverfull`

A number. If an unbreakable long string has length larger than the total linewidth plus this number of characters, and if `verbatimforcewraps` mode is on, the input line will be reset using the forceful algorithm which applies breakpoints at each character.

Default: `3`

Added in version 3.5.0.

`verbatimmaxunderfull`

A number. If `verbatimforcewraps` mode applies, and if after applying the line wrapping at spaces and punctuation, the first part of the split line is lacking at least that number of characters to fill the available width, then the input line will be reset using the forceful algorithm.

As the default is set to a high value, the forceful algorithm is triggered only in overfull case, i.e. in presence of a string longer than full linewidth. Set this to `0` to force all input lines to be hard wrapped at the current available linewidth:

```
latex_elements = {
    'sphinxsetup': "verbatimforcewraps, verbatimmaxunderfull=0",
}
```

This can be done locally for a given code-block via the use of raw latex directives to insert suitable `\sphinxsetup` (before and after) into the latex file.

Default: `100`

Added in version 3.5.0.

`verbatimhintsturnover`

Boolean to specify if code-blocks display ‚Äúcontinued on next page‚Äù and ‚Äúcontinued from previous page‚Äù hints in case of page breaks.

Default: `true`

Added in version 1.6.3.

Changed in version 1.7: the default changed from `false` to `true`.

`verbatimcontinuedalign`, `verbatimcontinuesalign`

Horizontal position relative to the framed contents: either `l` (left aligned), `r` (right aligned) or `c` (centered).

Default: `r`

Added in version 1.7.

`parsedliteralwraps`

Boolean to specify if long lines in [parsed-literal](https://docutils.sourceforge.io/docs/ref/rst/directives.html#parsed-literal)‚Äòs contents should wrap.

Default: `true`

Added in version 1.5.2: set this option value to `false` to recover former behavior.

`inlineliteralwraps`

Boolean to specify if line breaks are allowed inside inline literals: but extra potential break-points (additionally to those allowed by LaTeX at spaces or for hyphenation) are currently inserted only after the characters `. , ; ? ! /` and `\`. Due to TeX internals, white space in the line will be stretched (or shrunk) in order to accommodate the linebreak.

Default: `true`

Added in version 1.5: set this option value to `false` to recover former behavior.

Changed in version 2.3.0: added potential breakpoint at `\` characters.

`verbatimvisiblespace`

When a long code line is split, the last space character from the source code line right before the linebreak location is typeset using this.

Default: `\textcolor{red}{\textvisiblespace}`

`verbatimcontinued`

A LaTeX macro inserted at start of continuation code lines. Its (complicated‚Ä¶) default typesets a small red hook pointing to the right:

```
\makebox[2\fontcharwd\font`\x][r]{\textcolor{red}{\tiny$\hookrightarrow$}}
```

Changed in version 1.5: The breaking of long code lines was added at 1.4.2. The default definition of the continuation symbol was changed at 1.5 to accommodate various font sizes (e.g. code-blocks can be in footnotes).

Note

Values for color keys must either:

- obey the syntax of the `\definecolor` LaTeX command, e.g. something such as `VerbatimColor={rgb}{0.2,0.3,0.5}` or `{RGB}{37,23,255}` or `{gray}{0.75}` or `{HTML}{808080}` or ‚Ä¶
- or obey the syntax of the `\colorlet` command from package `xcolor` e.g. `VerbatimColor=red!10` or `red!50!green` or `-red!75` or `MyPreviouslyDefinedColor` or‚Ä¶ Refer to [xcolor](https://ctan.org/pkg/xcolor) documentation for this syntax.

Changed in version 5.3.0: Formerly only the `\definecolor` syntax was accepted.

`TitleColor`

The color for titles (as configured via use of package ‚Äútitlesec‚Äù.)

Default: `{rgb}{0.126,0.263,0.361}`

`InnerLinkColor`

A color passed to `hyperref` as value of `linkcolor` and `citecolor`.

Default: `{rgb}{0.208,0.374,0.486}`.

`OuterLinkColor`

A color passed to `hyperref` as value of `filecolor`, `menucolor`, and `urlcolor`.

Default: `{rgb}{0.216,0.439,0.388}`

`VerbatimColor`

The background color for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")s.

Default: `{RGB}{242,242,242}` (same as `{gray}{0.95}`).

Changed in version 6.0.0: Formerly, it was `{rgb}{1,1,1}` (white).

`VerbatimBorderColor`

The frame color.

Default: `{RGB}{32,32,32}`

Changed in version 6.0.0: Formerly it was `{rgb}{0,0,0}` (black).

`VerbatimHighlightColor`

The color for highlighted lines.

Default: `{rgb}{0.878,1,1}`

Added in version 1.6.6.

`TableRowColorHeader`

Sets the background color for (all) the header rows of tables.

It will have an effect only if either the [`latex_table_style`](usage/configuration.html#confval-latex_table_style) contains `'colorrows'` or if the table is assigned the `colorrows` class. It is ignored for tables with `nocolorrows` class.

As for the other `'sphinxsetup'` keys, it can also be set or modified from a `\sphinxsetup{...}` LaTeX command inserted via the [raw](https://docutils.sourceforge.io/docs/ref/rst/directives.html#raw) directive, or also from a LaTeX environment associated to a [container class](latex.html#latexcontainer) and using such `\sphinxsetup{...}`.

Default: `{gray}{0.86}`

There is also `TableMergeColorHeader`. If used, sets a specific color for merged single-row cells in the header.

Added in version 5.3.0.

`TableRowColorOdd`

Sets the background color for odd rows in tables (the row count starts at `1` at the first non-header row). Has an effect only if the [`latex_table_style`](usage/configuration.html#confval-latex_table_style) contains `'colorrows'` or for specific tables assigned the `colorrows` class.

Default: `{gray}{0.92}`

There is also `TableMergeColorOdd`.

Added in version 5.3.0.

`TableRowColorEven`

Sets the background color for even rows in tables.

Default `{gray}{0.98}`

There is also `TableMergeColorEven`.

Added in version 5.3.0.

`verbatimsep`

The separation between code lines and the frame.

See [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) for its alias `pre_padding` and additional keys.

Default: `\fboxsep`

`verbatimborder`

The width of the frame around [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")s. See also [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) for `pre_border-width`.

Default: `\fboxrule`

Important

Since 8.1.0 it is possible to style separately the [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives, and their defaults differ. See [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss). The next three keys are kept as legacy interface not distinguishing between the three directives.

`shadowsep`

This legacy option sets the padding (same in all directions) simultaneously for the [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives.

`shadowsize`

This legacy option sets the shadow width simultaneously for the [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives.

`shadowrule`

This legacy option sets the border-width (same on all sides) simultaneously for the [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives.

Important

At 7.4.0 all admonitions (not only danger-type) use the possibilities which were added at 5.1.0 and 6.2.0. All defaults have changed.

`iconpackage`

> The name of the LaTeX package used for icons in the admonition titles. It defaults to `fontawesome5` or to fall-back `fontawesome`. In case neither one is available the option value will automatically default to `none`, which means that no attempt at loading a package is done. Independently of this setting, arbitrary LaTeX code can be associated to each admonition type via `div.<type>_icon-title` keys which are described in the [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) section. If these keys are not used, Sphinx will either apply its default choices of icons (if `fontawesome{5,}` is available) or not draw the icon at all. Notice that if fall-back `fontawesome` is used the common icon for [caution](https://docutils.sourceforge.io/docs/ref/rst/directives.html#caution) and [danger](https://docutils.sourceforge.io/docs/ref/rst/directives.html#danger) will default to ‚Äúbolt‚Äù not ‚Äúradiation‚Äù, which is only found in `fontawesome5`.
>
> Added in version 7.4.0.

`noteBorderColor`, `hintBorderColor`, `importantBorderColor`, `tipBorderColor`

The color for the admonition border.

Default: `{RGB}{134,152,155}`.

Changed in version 7.4.0.

`noteBgColor`, `hintBgColor`, `importantBgColor`, `tipBgColor`

The color for the admonition background.

Default: `{RGB}{247,247,247}`.

Added in version 6.2.0.

Changed in version 7.4.0.

`noteTextColor`, `hintTextColor`, `importantTextColor`, `tipTextColor`

The color for the admonition contents.

Default: unset (contents text uses ambient text color, a priori black)

Added in version 6.2.0: To be considered experimental until 7.0.0. These options have aliases `div.note_TeXcolor` (etc) described in [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss). Using the latter will let Sphinx switch to a more complex LaTeX code, which supports the customizability described in [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss).

`noteTeXextras`, `hintTeXextras`, `importantTeXextras`, `tipTeXextras`

Some extra LaTeX code (such as `\bfseries` or `\footnotesize`) to be executed at start of the contents.

Default: empty

Added in version 6.2.0: To be considered experimental until 7.0.0. These options have aliases `div.note_TeXextras` (etc) described in [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss).

`noteborder`, `hintborder`, `importantborder`, `tipborder`

The width of the border. See [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) for keys allowing to configure separately each border width.

Default: `0.5pt`

`warningBorderColor`, `cautionBorderColor`, `attentionBorderColor`, `dangerBorderColor`, `errorBorderColor`

The color for the admonition border.

Default: `{RGB}{148,0,0}` except for `error` which uses `red`.

Changed in version 7.4.0.

`warningBgColor`, `cautionBgColor`, `attentionBgColor`, `dangerBgColor`, `errorBgColor`

The background color for the admonition background.

Default: `{RGB}{247,247,247}`.

Changed in version 7.4.0.

`warningborder`, `cautionborder`, `attentionborder`, `dangerborder`, `errorborder`

The width of the admonition frame. See [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) for keys allowing to configure separately each border width.

Default: `1pt` except for `error` which uses `1.25pt`.

Changed in version 7.4.0.

`AtStartFootnote`

LaTeX macros inserted at the start of the footnote text at bottom of page, after the footnote number.

Default: `\mbox{ }`

`BeforeFootnote`

LaTeX macros inserted before the footnote mark. The default removes possible space before it (else, TeX could insert a line break there).

Default: `\leavevmode\unskip`

Added in version 1.5.

`HeaderFamily`

default `\sffamily\bfseries`. Sets the font used by headings.

## Additional CSS-like `'sphinxsetup'` keys[¬∂](latex.html#additional-css-like-sphinxsetup-keys "Link to this heading")

Added in version 5.1.0: For [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"), [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) and [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) directive, and strong-type admonitions ([warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning), [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error), ‚Ä¶).

Added in version 6.2.0: Also the [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note), [hint](https://docutils.sourceforge.io/docs/ref/rst/directives.html#hint), [important](https://docutils.sourceforge.io/docs/ref/rst/directives.html#important) and [tip](https://docutils.sourceforge.io/docs/ref/rst/directives.html#tip) admonitions can be styled this way. Using for them *any* of the listed options will trigger usage of a more complex LaTeX code than the one used per default (`sphinxheavybox` vs `sphinxlightbox`). Setting the new `noteBgColor` (or `hintBgColor`, ‚Ä¶) also triggers usage of `sphinxheavybox` for [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note) (or [hint](https://docutils.sourceforge.io/docs/ref/rst/directives.html#hint), ‚Ä¶).

Added in version 7.4.0: For *all* admonition types, the default configuration does set a background color (hence the richer `sphinxheavybox` is always used).

Important

Further, all admonition titles are by default styled using a colored row and an icon, which are modeled on the current rendering of Sphinx own docs at [https://www.sphinx-doc.org](https://www.sphinx-doc.org). CSS-named alike keys are added to set the foreground and background colors for the title as well as the LaTeX code for the icon.

Added in version 7.4.0: Customizability of the [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive") and [`todo`](usage/extensions/todo.html#directive-todo "todo directive") directives.

Added in version 8.1.0: Separate customizability and new defaults for the [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives.

Perhaps in future these 5.1.0 (and 6.2.0) novel settings will be optionally imported from some genuine CSS external file, but currently they have to be used via the `'sphinxsetup'` interface (or the `\sphinxsetup` LaTeX command inserted via the [raw](https://docutils.sourceforge.io/docs/ref/rst/directives.html#raw) directive) and the CSS syntax is only imitated.

Important

Low-level LaTeX errors causing a build failure can happen if the input syntax is not respected.

- In particular colors must be input as for the other color related options previously described, i.e. either in the `\definecolor` syntax or via the `\colorlet` syntax:

  ```
  ...<other options>
  div.warning_border-TeXcolor={rgb}{1,0,0},% \definecolor syntax
  div.error_background-TeXcolor=red!10,%     \colorlet syntax
  ...<other options>
  ```
- A colon in place of the equal sign will break LaTeX.
- `...border-width` or `...padding` expect a *single* dimension: they can not be used so far with space separated dimensions.
- `...top-right-radius` et al. values may be either a single or *two* space separated dimensions.
- Dimension specifications must use TeX units such as `pt` or `cm` or `in`. The `px` unit is recognized by `pdflatex` and `lualatex` but not by `xelatex` or `platex`.
- It is allowed for such specifications to be so-called ‚Äúdimensional expressions‚Äù, e.g. `\fboxsep+2pt` or `0.5\baselineskip` are valid inputs. The expressions will be evaluated only at the typesetting time. Be careful though if using as in these examples TeX control sequences to double the backslash or to employ a raw Python string for the value of the [‚Äòsphinxsetup‚Äô](latex.html#latexsphinxsetup) key.
- As a rule, avoid inserting unneeded spaces in the key values: especially for the radii an input such `2 pt 3pt` will break LaTeX. Beware also that `\fboxsep \fboxsep` will not be seen as space separated in LaTeX. You must use something such as `{\fboxsep} \fboxsep`. Or use directly `3pt 3pt` which is a priori equivalent and simpler.

The options are all named in a similar pattern which depends on a `prefix`, which is then followed by an underscore, then the property name.

| Directive                                                                                                      | Option prefix  | LaTeX environment |
|----------------------------------------------------------------------------------------------------------------|----------------|-------------------|
| [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")             | `pre`          | `sphinxVerbatim`  |
| [`literalinclude`](usage/restructuredtext/directives.html#directive-literalinclude "literalinclude directive") | `pre`          | `sphinxVerbatim`  |
| [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic)                                    | `div.topic`    | `sphinxtopic`     |
| [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents)                     | `div.contents` | `sphinxcontents`  |
| [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar)                                | `div.sidebar`  | `sphinxsidebar`   |
| [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note)                                      | `div.note`     | `sphinxnote`      |
| [warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning)                                | `div.warning`  | `sphinxwarning`   |
| further admonition types `<type>`                                                                              | `div.<type>`   | `sphinx<type>`    |
| [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive")                      | `div.seealso`  | `sphinxseealso`   |
| [`todo`](usage/extensions/todo.html#directive-todo "todo directive")                                           | `div.todo`     | `sphinxtodo`      |

Here are now these options as well as their common defaults. Replace below `<prefix>` by the actual prefix as explained above. Don‚Äôt forget the underscore separating the prefix from the property names.

- `<prefix>_border-top-width`,

  `<prefix>_border-right-width`,

  `<prefix>_border-bottom-width`,

  `<prefix>_border-left-width`,

  `<prefix>_border-width`. The latter can (currently) be only a *single* dimension which then sets all four others.

  The default is that all those dimensions are equal. They are set to:

  - `0.4pt` for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"),
  - `0.5pt` for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) and [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) directive,
  - `1pt` for [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directive,
  - `0.5pt` for [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note) and other ‚Äúlight‚Äù admonitions,
  - `0.5pt` for [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive") and [`todo`](usage/extensions/todo.html#directive-todo "todo directive") directives,
  - `1pt` for [warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning) and other ‚Äústrong‚Äù admonitions except [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error) which uses `1.25pt`.

  Changed in version 7.4.0: Changed defaults for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) and [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error).

  Changed in version 8.1.0: Distinct from [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) defaults for [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar).
- `<prefix>_box-decoration-break` can be set to either `clone` or `slice` and configures the behavior at page breaks. It defaults to `slice` for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive") (i.e. for `<prefix>=pre`) since 6.0.0. For other directives the default is `clone`.
- `<prefix>_padding-top`,

  `<prefix>_padding-right`,

  `<prefix>_padding-bottom`,

  `<prefix>_padding-left`,

  `<prefix>_padding`. The latter can (currently) be only a *single* dimension which then sets all four others.

  The defaults:

  - all four `3pt` for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"),
  - `6pt`, `7pt`, `6pt`, `7pt` for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic),
  - `10pt`, `7pt`, `12pt`, `7pt` for [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents),
  - `6pt`, `5.5pt`, `6pt`, `5.5pt` for [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar),
  - `6pt`, `7pt`, `6pt`, `7pt` for all ‚Äúlight‚Äù admonitions as well as the [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive") and [`todo`](usage/extensions/todo.html#directive-todo "todo directive") directives.
  - `6pt`, `6.5pt`, `6pt`, `6.5pt` for the strong admonition types except [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error) which uses horizontal padding of `6.25pt`.

  Changed in version 7.4.0: All defaults were changed, except for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"). Admonitions are set-up so that left (or right) padding plus left (or right) border-width add up always to `7.5pt`, so contents align well vertically across admonition types on same page in PDF. This is only a property of defaults, not a constraint on possible user choices.

  Changed in version 8.1.0: Separate defaults for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar).
- `<prefix>_border-top-left-radius`,

  `<prefix>_border-top-right-radius`,

  `<prefix>_border-bottom-right-radius`,

  `<prefix>_border-bottom-left-radius`,

  `<prefix>_border-radius`. This last key sets the first four to its assigned value. Each key value can be either a single, or *two*, dimensions which are then space separated.

  The defaults:

  - `3pt` for [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive") (since 6.0.0) and all corners,
  - `8pt` for all corners of [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic),
  - `12pt` for the bottom right corner of [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), others use `0pt`,
  - `12pt` for the top-left and bottom-right corners for [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar), `0pt` for top-right and bottom-left.
  - all radii set to `5pt` for [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note), [hint](https://docutils.sourceforge.io/docs/ref/rst/directives.html#hint) and [tip](https://docutils.sourceforge.io/docs/ref/rst/directives.html#tip),
  - `0pt`, i.e. straight corners for all other directives.

  Changed in version 7.4.0: [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) and [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note)-like admonitions acquire (at least one) rounded corners.

  Changed in version 8.1.0: Separate defaults for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar).

  See a remark above about traps with spaces in LaTeX.
- `<prefix>_box-shadow` is special in so far as it may be:

  - the `none` keyword,
  - or a single dimension (giving both x-offset and y-offset),
  - or two dimensions (separated by a space),
  - or two dimensions followed by the keyword `inset`.

  The x-offset and y-offset may be negative. A negative x-offset means that the shadow is on the left. The shadow extends into the page margin, whether the offset is positive or negative.

  The default is `none` *except* for the [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) directive which uses `4pt 4pt`.

  Changed in version 8.1.0: No shadow per default for [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic) and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar).
- `<prefix>_border-TeXcolor`,

  `<prefix>_background-TeXcolor`,

  `<prefix>_box-shadow-TeXcolor`,

  `<prefix>_TeXcolor`. These are colors.

  Since 6.0.0 the border and background colors of [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"), default respectively to `{RGB}{32,32,32}` (i.e. `{HTML}{202020}`), and `{RGB}{242,242,242}` (i.e. `{gray}{0.95}` or `{HTML}{F2F2F2}`).

  At 7.4.0 other directives acquire non-black/white default border and background colors. Here they are using `xcolor` hexadecimal notation (which requires always 6 hexadecimal digits):

  - `{HTML}{F7F7F7}` serves as background color to all.
  - `{HTML}{86989B}` is border color of light admonitions (inclusive of [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive") and [`todo`](usage/extensions/todo.html#directive-todo "todo directive")) as well as of [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives.
  - `{HTML}{940000}` is border color of [warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning)-type admonitions, except [error](https://docutils.sourceforge.io/docs/ref/rst/directives.html#error) which uses `{HTML}{B40000}`.

  The only directives displaying a shadow per default are [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar). The shadow-color for the former is `{HTML}{6C6C6C}` and for the latter `{HTML}{9EACAF}`.

  The `<prefix>_TeXcolor` stands for the CSS property ‚Äúcolor‚Äù, i.e. it influences the text color of the contents. As for the three other options, the naming `TeXcolor` is to stress that the input syntax is the TeX one for colors not an HTML/CSS one. If package `xcolor` is available in the LaTeX installation, one can use directly named colors as key values. Consider passing options such as `dvipsnames`, `svgnames` or `x11names` to `xcolor` via `'passoptionstopackages'` key of [`latex_elements`](usage/configuration.html#confval-latex_elements).

  If `<prefix>_TeXcolor` is set, a `\color` command is inserted at start of the directive contents; for admonitions, this happens after the heading which reproduces the admonition type.
- `<prefix>_TeXextras`: if set, its value must be some LaTeX command or commands, for example `\itshape`. These commands will be inserted at the start of the contents; for admonitions, this happens after the heading which reproduces the admonition type.

The next keys, for admonitions, [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar), were all three added at 7.4.0 (and 8.1.0 for the latter three).

- `div.<type>_title-background-TeXcolor`: the background color for the title.

  Important

  The colored title-row is produced as a result of the Sphinx default definitions for the various `\sphinxstyle<type>title` commands, which employ the `\sphinxdotitlerow` LaTeX command. See [Macros](latex.html#latex-macros).
- `div.<type>_title-foreground-TeXcolor`: the color to be used for the icon (it applies only to the icon, not to the title of the admonition).
- `div.<type>_title-icon`: the LaTeX code responsible for producing the icon. For example, the default for [note](https://docutils.sourceforge.io/docs/ref/rst/directives.html#note) is `div.note_title-icon=\faIcon{info-circle}`. This uses a command from the LaTeX `fontawesome5` package, which is loaded automatically if available.

  If neither `fontawesome5` nor fall-back `fontawesome` (for which the associated command is `\faicon`, not `\faIcon`) are found, or if the `iconpackage` key of [‚Äòsphinxsetup‚Äô](latex.html#latexsphinxsetup) is set to load some other user-chosen package, or no package at all, all the `title-icons` default to empty LaTeX code. It is up to user to employ this interface to inject the icon (or anything else) into the PDF output.

Note

- All directives support `box-decoration-break` to be set to `slice`.

  Changed in version 6.2.0: Formerly, only [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive") did. The default remains `clone` for all other directives, but this will probably change at 7.0.0.
- The corners of rounded boxes may be elliptical.

  Changed in version 6.2.0: Formerly, only circular rounded corners were supported and a rounded corner forced the whole frame to use the same constant width from `<prefix>_border-width`.
- Inset shadows are incompatible with rounded corners. In case both are specified the inset shadow will simply be ignored.

  Changed in version 6.2.0: Formerly it was to the contrary the rounded corners which were ignored in case an inset shadow was specified.
- `<prefix>_TeXcolor` and `<prefix>_TeXextras` are new with 6.2.0.

  Usefulness is doubtful in the case of [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive"):

  - `pre_TeXcolor` will influence only the few non-Pygments highlighted tokens; it does color the line numbers, but if one wants to color *only* them one has to go through the `fancyvrb` interface.
  - `pre_TeXextras=\footnotesize` (as an example) is equivalent to setting ['fvset'](latex.html#fvset) key value to `r'\fvset{fontsize=\footnotesize}'`.

  Consider these options experimental and that some implementation details may change. For example if the `pre_TeXextras` LaTeX commands were put by Sphinx in another location it could override the ['fvset'](latex.html#fvset) effect, perhaps this is what will be done in a future release.
- Rounded boxes are done using the [pict2e](https://ctan.org/pkg/pict2e) interface to some basic PDF graphics operations. If this LaTeX package can not be found the build will proceed and render all boxes with straight corners.
- Elliptic corners use the [ellipse](https://ctan.org/pkg/ellipse) LaTeX package which extends [pict2e](https://ctan.org/pkg/pict2e). If this LaTeX package can not be found rounded corners will be circular arcs (or straight if [pict2e](https://ctan.org/pkg/pict2e) is not available).

The following legacy behavior applies:

- For [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive") or [`literalinclude`](usage/restructuredtext/directives.html#directive-literalinclude "literalinclude directive"), padding and border-width and shadow (if any) will go into the margin; the code lines remain at the same place independently of the values of the padding and border-width, except for being shifted vertically of course to not overwrite other text due to the width of the border or external shadow.
- For the other directives, shadows extend horizontally into the page margins, but the border and the extra padding are kept within the text area.
- [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive") and [`literalinclude`](usage/restructuredtext/directives.html#directive-literalinclude "literalinclude directive") use the same LaTeX environment and commands and are not separately customizable.

## LaTeX macros and environments[¬∂](latex.html#latex-macros-and-environments "Link to this heading")

The ‚ÄúLaTeX package‚Äù file `sphinx.sty` loads various components providing support macros (aka commands), and environments, which are used in the mark-up produced on output from the `latex` builder, before conversion to `pdf` via the LaTeX toolchain. Also the ‚ÄúLaTeX class‚Äù files `sphinxhowto.cls` and `sphinxmanual.cls` define or customize some environments. All of these files can be found in the latex build repertory.

Some of these provide facilities not available from pre-existing LaTeX packages and work around LaTeX limitations with lists, table cells, verbatim rendering, footnotes, etc‚Ä¶

Others simply define macros with public names to make overwriting their defaults easy via user-added contents to the preamble. We will survey most of those public names here, but defaults have to be looked at in their respective definition files.

Hint

Sphinx LaTeX support code is split across multiple smaller-sized files. Rather than adding code to the preamble via [latex\_elements](latex.html#latex-elements-confval)\[`'preamble'`] it is also possible to replace entirely one of the component files of Sphinx LaTeX code with a custom version, simply by including a modified copy in the project source and adding the filename to the [`latex_additional_files`](usage/configuration.html#confval-latex_additional_files) list. Check the LaTeX build repertory for the filenames and contents.

Changed in version 4.0.0: split of `sphinx.sty` into multiple smaller units, to facilitate customization of many aspects simultaneously.

### Macros[¬∂](latex.html#macros "Link to this heading")

- Text styling commands:

  | Name, `maps argument #1 to:` |                                         |
  |------------------------------|-----------------------------------------|
  | `\sphinxstrong`              | `\textbf{#1}`                           |
  | `\sphinxcode`                | `\texttt{#1}`                           |
  | `\sphinxbfcode`              | `\textbf{\sphinxcode{#1}}`              |
  | `\sphinxemail`               | `\textsf{#1}`                           |
  | `\sphinxtablecontinued`      | `\textsf{#1}`                           |
  | `\sphinxtitleref`            | `\emph{#1}`                             |
  | `\sphinxmenuselection`       | `\emph{#1}`                             |
  | `\sphinxguilabel`            | `\emph{#1}`                             |
  | `\sphinxkeyboard`            | `\sphinxcode{#1}`                       |
  | `\sphinxaccelerator`         | `\underline{#1}`                        |
  | `\sphinxcrossref`            | `\emph{#1}`                             |
  | `\sphinxtermref`             | `\emph{#1}`                             |
  | `\sphinxsamedocref`          | `\emph{#1}`                             |
  | `\sphinxparam`               | `\emph{#1}`                             |
  | `\sphinxtypeparam`           | `\emph{#1}`                             |
  | `\sphinxoptional`            | `[#1]` with larger brackets, see source |

  Added in version 1.4.5: Use of `\sphinx` prefixed macro names to limit possibilities of conflict with LaTeX packages.

  Added in version 1.8: `\sphinxguilabel`

  Added in version 3.0: `\sphinxkeyboard`

  Added in version 6.2.0: `\sphinxparam`, `\sphinxsamedocref`

  Added in version 7.1.0: `\sphinxparamcomma` which defaults to a comma followed by a space and `\sphinxparamcommaoneperline`. It is sed for one-parameter-per-line signatures (see [`maximum_signature_line_length`](usage/configuration.html#confval-maximum_signature_line_length)) and defaults to `\texttt{,}`.

  Signatures of Python functions are rendered as `name<space>(parameters)` or `name<space>[type parameters]<space>(parameters)` (see [**PEP 695**](https://peps.python.org/pep-0695/)) where the length of `<space>` is set to `0pt` by default. This can be changed via `\setlength{\sphinxsignaturelistskip}{1ex}` for instance.
- More text styling:

  | Name, `maps argument #1 to:`          |                                               |
  |---------------------------------------|-----------------------------------------------|
  | `\sphinxstyleindexentry`              | `\texttt{#1}`                                 |
  | `\sphinxstyleindexextra`              | `(\emph{#1})` (with a space upfront)          |
  | `\sphinxstyleindexpageref`            | `, \pageref{#1}`                              |
  | `\sphinxstyleindexpagemain`           | `\textbf{#1}`                                 |
  | `\sphinxstyleindexlettergroup`        | `{\Large\sffamily#1}\nopagebreak\vspace{1mm}` |
  | `\sphinxstyleindexlettergroupDefault` | check source, too long for here               |
  | `\sphinxstyletopictitle`              | `\textbf{#1}\par\medskip`                     |
  | `\sphinxstylesidebartitle`            | `\textbf{#1}\par\medskip`                     |
  | `\sphinxstyleothertitle`              | `\textbf{#1}`                                 |
  | `\sphinxstylesidebarsubtitle`         | `~\\\textbf{#1} \smallskip`                   |
  | `\sphinxstyletheadfamily`             | `\sffamily` (*this one has no argument*)      |
  | `\sphinxstyleemphasis`                | `\emph{#1}`                                   |
  | `\sphinxstyleliteralemphasis`         | `\emph{\sphinxcode{#1}}`                      |
  | `\sphinxstylestrong`                  | `\textbf{#1}`                                 |
  | `\sphinxstyleliteralstrong`           | `\sphinxbfcode{#1}`                           |
  | `\sphinxstyleabbreviation`            | `\textsc{#1}`                                 |
  | `\sphinxstyleliteralintitle`          | `\sphinxcode{#1}`                             |
  | `\sphinxstylecodecontinued`           | `{\footnotesize(#1)}}`                        |
  | `\sphinxstylecodecontinues`           | `{\footnotesize(#1)}}`                        |
  | `\sphinxstylenotetitle`               | `\sphinxdotitlerow{note}{#1}`                 |
  | `\sphinxstylehinttitle`               | `\sphinxdotitlerow{hint}{#1}`                 |
  | `\sphinxstyleimportanttitle`          | `\sphinxdotitlerow{important}{#1}`            |
  | `\sphinxstyletiptitle`                | `\sphinxdotitlerow{tip}{#1}`                  |
  | `\sphinxstylewarningtitle`            | `\sphinxdotitlerow{warning}{#1}`              |
  | `\sphinxstylecautiontitle`            | `\sphinxdotitlerow{caution}{#1}`              |
  | `\sphinxstyleattentiontitle`          | `\sphinxdotitlerow{attention}{#1}`            |
  | `\sphinxstyledangertitle`             | `\sphinxdotitlerow{danger}{#1}`               |
  | `\sphinxstyleerrortitle`              | `\sphinxdotitlerow{error}{#1}`                |
  | `\sphinxstyleseealsotitle`            | `\sphinxdotitlerow{seealso}{#1}`              |
  | `\sphinxstyletodotitle`               | `\sphinxdotitlerow{todo}{#1}`                 |
  | `\sphinxstyletopictitle`              | `\sphinxdotitlerow{topic}{#1}`                |
  | `\sphinxstylecontentstitle`           | `\sphinxdotitlerow{contents}{#1}`             |
  | `\sphinxstylesidebartitle`            | `\sphinxdotitlerow{sidebar}{#1}`              |

  Note

  To let this table fit on the page width in PDF output we have lied a bit. For instance, the actual definition of `\sphinxstylenotetitle` is:

  ```
  \newcommand\sphinxstylenotetitle[1]%
  {\sphinxdotitlerow{note}{\sphinxremovefinalcolon{#1}}}
  ```

  The same remark applies to all other similar commands associated with admonitions. The [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) do not use `\sphinxremovefinalcolon` as they don‚Äôt need it.

  Added in version 1.5: These macros were formerly hard-coded as non customizable `\texttt`, `\emph`, etc‚Ä¶

  Added in version 1.6: `\sphinxstyletheadfamily` which defaults to `\sffamily` and allows multiple paragraphs in header cells of tables.

  Added in version 1.6.3: `\sphinxstylecodecontinued` and `\sphinxstylecodecontinues`.

  Added in version 1.8: `\sphinxstyleindexlettergroup`, `\sphinxstyleindexlettergroupDefault`.

  Added in version 6.2.0: `\sphinxstylenotetitle` et al. The `#1` is the localized name of the directive, with a final colon. Wrap it as `\sphinxremovefinalcolon{#1}` if this final colon is to be removed.

  Added in version 7.4.0: Added the `\sphinxdotitlerowwithicon` LaTeX command.

  Changed in version 8.1.0: `\sphinxdotitlerowwithicon` now detects automatically if an icon is associated or not with the rendered element used as first argument.

  Added in version 8.1.0: Make `\sphinxdotitlerow` an alias to `\sphinxdotitlerowwithicon`.

  Added in version 8.1.0: Titles of [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents), and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives are also styled using `\sphinxdotitlerow` (they have no default icons associated with them).
- `\sphinxtableofcontents`: A wrapper (defined differently in `sphinxhowto.cls` and in `sphinxmanual.cls`) of standard `\tableofcontents`. The macro `\sphinxtableofcontentshook` is executed during its expansion right before `\tableofcontents` itself.

  Changed in version 1.5: Formerly, the meaning of `\tableofcontents` was modified by Sphinx.

  Changed in version 2.0: Hard-coded redefinitions of `\l@section` and `\l@subsection` formerly done during loading of `'manual'` docclass are now executed later via `\sphinxtableofcontentshook`. This macro is also executed by the `'howto'` docclass, but defaults to empty with it.

  Hint

  If adding to preamble the loading of `tocloft` package, also add to preamble `\renewcommandsphinxtableofcontentshook{}` else it will reset `\l@section` and `\l@subsection` cancelling `tocloft` customization.
- `\sphinxmaketitle`: Used as the default setting of the `'maketitle'` [`latex_elements`](usage/configuration.html#confval-latex_elements) key. Defined in the class files `sphinxmanual.cls` and `sphinxhowto.cls`.

  Changed in version 1.8.3: Formerly, `\maketitle` from LaTeX document class was modified by Sphinx.
- `\sphinxbackoftitlepage`: For `'manual'` docclass, and if it is defined, it gets executed at end of `\sphinxmaketitle`, before the final `\clearpage`. Use either the `'maketitle'` key or the `'preamble'` key of [`latex_elements`](usage/configuration.html#confval-latex_elements) to add a custom definition of `\sphinxbackoftitlepage`.

  Added in version 1.8.3.
- `\sphinxcite`: A wrapper of standard `\cite` for citation references.

### The `\sphinxbox` command[¬∂](latex.html#the-sphinxbox-command "Link to this heading")

Added in version 6.2.0.

The `\sphinxbox[key=value,...]{inline text}` command can be used to ‚Äúbox‚Äù inline text elements with all the customizability which has been described in [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss). It is a LaTeX command with one optional argument, which is a comma-separated list of key=value pairs, as for [The sphinxsetup configuration setting](latex.html#latexsphinxsetup). Here is the complete list of keys. They don‚Äôt use any prefix.

- `border-width`,
- `border-top-width`, `border-right-width`, `border-bottom-width`, `border-left-width`,
- `padding`,
- `padding-top`, `padding-right`, `padding-bottom`, `padding-left`,
- `border-radius`,
- `border-top-left-radius`, `border-top-right-radius`, `border-bottom-right-radius`, `border-bottom-left-radius`,
- `box-shadow`,
- `border-TeXcolor`, `background-TeXcolor`, `box-shadow-TeXcolor`, `TeXcolor`,
- `TeXextras`,
- and `addstrut` which is a boolean key, i.e. to be used as `addstrut=true`, or `addstrut` alone where `=true` is omitted, or `addstrut=false`.

This last key is specific to `\sphinxbox` and it means to add a `\strut` so that heights and depths are equalized across various instances on the same line with varying contents. The default is `addstrut=false`. The combination `addstrut, padding-bottom=0pt, padding-top=1pt` is often satisfactory.

Refer to [Additional CSS-like 'sphinxsetup' keys](latex.html#additionalcss) for important syntax information regarding the other keys. The default configuration uses no shadow, a border-width of `\fboxrule`, a padding of `\fboxsep`, circular corners with radii `\fboxsep` and background and border colors as for the default rendering of code-blocks.

When a `\sphinxbox` usage is nested within another one, it will ignore the options of the outer one: it first resets all options to their default state as they were prior to applying the outer box options, then it applies its own specific ones.

One can modify these defaults via the command `\sphinxboxsetup{key=value,...}`. The effect is cumulative, if one uses this command multiple times. Here the options are a mandatory argument so are within curly braces, not square brackets.

Here is some example of use:

```
latex_elements = {
    'preamble': r'''
% modify globally the defaults
\sphinxboxsetup{border-width=2pt,%
                border-radius=4pt,%
                background-TeXcolor=yellow!20}
% configure some styling element with some extra specific options:
\protected\def\sphinxkeyboard#1{\sphinxbox[border-TeXcolor=green]{\sphinxcode{#1}}}
''',
}
```

A utility `\newsphinxbox` is provided to create a new boxing macro, say `\foo` which will act exactly like `\sphinxbox` but with a given extra configuration:

```
% the specific options to \foo are within brackets
\newsphinxbox[border-radius=0pt, box-shadow=2pt 2pt]{\foo}
% then use this \foo, possibly with some extra options still:
\protected\def\sphinxguilabel#1{\foo{#1}}
\protected\def\sphinxmenuselection#1{\foo[box-shadow-TeXcolor=gray]{#1}}
```

Boxes rendered with `\foo` obey as the ones using directly `\sphinxbox` the current configuration as set possibly mid-way in document via `\sphinxboxsetup` (from a [raw](https://docutils.sourceforge.io/docs/ref/rst/directives.html#raw) LaTeX mark-up), the only difference is that they have an initial additional set of default extras.

In the above examples, you can probably use `\renewcommand` syntax if you prefer it to `\protected\def` (with `[1]` in place of `#1` then).

### Environments[¬∂](latex.html#environments "Link to this heading")

- A [figure](https://docutils.sourceforge.io/docs/ref/rst/directives.html#figure) may have an optional legend with arbitrary body elements: they are rendered in a `sphinxlegend` environment. The default definition issues `\small`, and ends with `\par`.

  Added in version 1.5.6: Formerly, the `\small` was hardcoded in LaTeX writer and the ending `\par` was lacking.
- Environments associated with admonitions:

  - `sphinxnote`,
  - `sphinxhint`,
  - `sphinximportant`,
  - `sphinxtip`,
  - `sphinxwarning`,
  - `sphinxcaution`,
  - `sphinxattention`,
  - `sphinxdanger`,
  - `sphinxerror`.

  They may be `\renewenvironment` ‚Äòd individually, and must then be defined with one argument (it is the heading of the notice, for example `Warning:` for [warning](https://docutils.sourceforge.io/docs/ref/rst/directives.html#warning) directive, if English is the document language). Their default definitions use either the *sphinxheavybox* (for the last 5 ones) or the *sphinxlightbox* environments, configured to use the parameters (colors, border thickness) specific to each type, which can be set via `'sphinxsetup'` string.

  Changed in version 1.5: Use of public environment names, separate customizability of the parameters, such as `noteBorderColor`, `noteborder`, `warningBgColor`, `warningBorderColor`, `warningborder`, ‚Ä¶
- Environment for the [`seealso`](usage/restructuredtext/directives.html#directive-seealso "seealso directive") directive: `sphinxseealso`. It takes one argument which will be the localized string `See also` followed with a colon.

  Added in version 6.1.0.

  Changed in version 6.2.0: Colon made part of the mark-up rather than being inserted by the environment for coherence with how admonitions are handled generally.
- Environment for the [`todo`](usage/extensions/todo.html#directive-todo "todo directive") directive: `sphinxtodo`. It takes one argument, namely the localization of `Todo` (with a colon at the end; the default rendering will remove that colon and put the localized string in its own colored title-row).

  Added in version 7.4.0.
- The [topic](https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic), [contents](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents) and [sidebar](https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar) directives are associated with respectively `sphinxtopic`, `sphinxcontents`, and `sphinxsidebar` environments.

  Added in version 1.4.2: Former code refactored into an environment allowing page breaks.

  Changed in version 1.5: Options `shadowsep`, `shadowsize`, `shadowrule`.

  Added in version 8.1.0: Separate environments (all three wrappers around `sphinxShadowBox`) and separate customizability.
- The literal blocks (via `::` or [`code-block`](usage/restructuredtext/directives.html#directive-code-block "code-block directive")), and literal includes ([`literalinclude`](usage/restructuredtext/directives.html#directive-literalinclude "literalinclude directive")) are implemented using `sphinxVerbatim` environment which is a wrapper of `Verbatim` environment from package `fancyvrb.sty`. It adds the handling of the top caption and the wrapping of long lines, and a frame which allows page breaks. Inside tables the used environment is `sphinxVerbatimintable` (it does not draw a frame, but allows a caption).

  Changed in version 1.5: `Verbatim` keeps exact same meaning as in `fancyvrb.sty` (also under the name `OriginalVerbatim`); `sphinxVerbatimintable` is used inside tables.

  Added in version 1.5: Options `verbatimwithframe`, `verbatimwrapslines`, `verbatimsep`, `verbatimborder`.

  Added in version 1.6.6: Support for `:emphasize-lines:` option

  Added in version 1.6.6: Easier customizability of the formatting via exposed to user LaTeX macros such as `\sphinxVerbatimHighlightLine`.
- The bibliography uses `sphinxthebibliography` and the Python Module index as well as the general index both use `sphinxtheindex`; these environments are wrappers of the `thebibliography` and respectively `theindex` environments as provided by the document class (or packages).

  Changed in version 1.5: Formerly, the original environments were modified by Sphinx.

### Miscellany[¬∂](latex.html#miscellany "Link to this heading")

- Every text paragraph in document body starts with `\sphinxAtStartPar`. Currently, this is used to insert a zero width horizontal skip which is a trick to allow TeX hyphenation of the first word of a paragraph in a narrow context (like a table cell). For `'lualatex'` which does not need the trick, the `\sphinxAtStartPar` does nothing.

  Added in version 3.5.0.
- The section, subsection, ‚Ä¶ headings are set using *titlesec*‚Äôs `\titleformat` command.
- For the `'manual'` docclass, the chapter headings can be customized using *fncychap*‚Äôs commands `\ChNameVar`, `\ChNumVar`, `\ChTitleVar`. File `sphinx.sty` has custom re-definitions in case of *fncychap* option `Bjarne`.

  Changed in version 1.5: Formerly, use of *fncychap* with other styles than `Bjarne` was dysfunctional.
- The [role](https://docutils.sourceforge.io/docs/ref/rst/directives.html#role) directive allows to mark inline text with class arguments. This is handled in LaTeX output via the `\DUrole` dispatcher command [as in Docutils](https://docutils.sourceforge.io/docs/user/latex.html#custom-interpreted-text-roles). Object signatures also use `\DUrole` for some components, with one or two-letters class names as in HTML output.

  Changed in version 8.1.0: When multiple classes are injected via a a custom role, the LaTeX output uses nested `\DUrole`‚Äôs as in the [Docutils documentation](https://docutils.sourceforge.io/docs/user/latex.html#custom-interpreted-text-roles). Formerly it used a single `\DUrole` with comma separated classes, making the LaTeX customization more arduous.

<!--THE END-->

- Docutils [container](https://docutils.sourceforge.io/docs/ref/rst/directives.html#container) directives are supported in LaTeX output: to let a container class with name `foo` influence the final PDF via LaTeX, it is only needed to define in the preamble an environment `sphinxclassfoo`. A simple example would be:

  ```
  \newenvironment{sphinxclassred}{\color{red}}{}
  ```

  Currently the class names must contain only ASCII characters and avoid characters special to LaTeX such as `\`.

  Added in version 4.1.0.

Hint

As an experimental feature, Sphinx can use user-defined template file for LaTeX source if you have a file named `_templates/latex.tex.jinja` in your project.

Additional files `longtable.tex.jinja`, `tabulary.tex.jinja` and `tabular.tex.jinja` can be added to `_templates/` to configure some aspects of table rendering (such as the caption position).

Added in version 1.6: currently all template variables are unstable and undocumented.

Changed in version 7.4: Added support for the `.jinja` file extension, which is preferred. The old file names remain supported. (`latex.tex_t`, `longtable.tex_t`, `tabulary.tex_t`, and `tabular.tex_t`)








### Navigation

- [Documentation](../index.html) ¬ª
- [Using Sphinx](index.html) ¬ª

### On this page



The Basics


User guide



Community


Reference


# Markdown[¬∂](markdown.html#markdown "Link to this heading")

[Markdown](https://daringfireball.net/projects/markdown/) is a lightweight markup language with a simplistic plain text formatting syntax. It exists in many syntactically different *flavors*. To support Markdown-based documentation, Sphinx can use [MyST-Parser](https://myst-parser.readthedocs.io/en/latest/). MyST-Parser is a Docutils bridge to [markdown-it-py](https://github.com/executablebooks/markdown-it-py), a Python package for parsing the [CommonMark](https://commonmark.org/) Markdown flavor.

## Configuration[¬∂](markdown.html#configuration "Link to this heading")

To configure your Sphinx project for Markdown support, proceed as follows:

1. Install the Markdown parser *MyST-Parser*:

   ```
   pip install --upgrade myst-parser
   ```
2. Add *myst\_parser* to the [`list of configured extensions`](configuration.html#confval-extensions):

   ```
   extensions = ['myst_parser']
   ```

   Note

   MyST-Parser requires Sphinx 2.1 or newer.
3. If you want to use Markdown files with extensions other than `.md`, adjust the [`source_suffix`](configuration.html#confval-source_suffix) variable. The following example configures Sphinx to parse all files with the extensions `.md` and `.txt` as Markdown:

   ```
   source_suffix = {
       '.rst': 'restructuredtext',
       '.txt': 'markdown',
       '.md': 'markdown',
   }
   ```
4. You can further configure *MyST-Parser* to allow custom syntax that standard *CommonMark* doesn‚Äôt support. Read more in the [MyST-Parser documentation](https://myst-parser.readthedocs.io/en/latest/using/syntax-optional.html).








### Navigation

- [Documentation](../index.html) ¬ª
- [Using Sphinx](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# HTML theming[¬∂](theming.html#html-theming "Link to this heading")

Sphinx provides a number of builders for HTML and HTML-based formats.

## Builders[¬∂](theming.html#builders "Link to this heading")

## Themes[¬∂](theming.html#themes "Link to this heading")

Added in version 0.6.

Note

This section provides information about using pre-existing HTML themes. If you wish to create your own theme, refer to [HTML theme development](../development/html_themes/index.html#extension-html-theme).

Sphinx supports changing the appearance of its HTML output via *themes*. A theme is a collection of HTML templates, stylesheet(s) and other static files. Additionally, it has a configuration file which specifies from which theme to inherit, which highlighting style to use, and what options exist for customizing the theme‚Äôs look and feel.

Themes are meant to be project-unaware, so they can be used for different projects without change.

### Using a theme[¬∂](theming.html#using-a-theme "Link to this heading")

Using a [theme provided with Sphinx](theming.html#builtin-themes) is easy. Since these do not need to be installed, you only need to set the [`html_theme`](configuration.html#confval-html_theme) config value. For example, to enable the `classic` theme, add the following to `conf.py`:

```
html_theme = "classic"
```

You can also set theme-specific options using the [`html_theme_options`](configuration.html#confval-html_theme_options) config value. These options are generally used to change the look and feel of the theme. For example, to place the sidebar on the right side and a black background for the relation bar (the bar with the navigation links at the page‚Äôs top and bottom), add the following `conf.py`:

```
html_theme_options = {
    "rightsidebar": "true",
    "relbarbgcolor": "black"
}
```

If the theme does not come with Sphinx, it can be in two static forms or as a Python package. For the static forms, either a directory (containing `theme.toml` and other needed files), or a zip file with the same contents is supported. The directory or zipfile must be put where Sphinx can find it; for this there is the config value [`html_theme_path`](configuration.html#confval-html_theme_path). This can be a list of directories, relative to the directory containing `conf.py`, that can contain theme directories or zip files. For example, if you have a theme in the file `blue.zip`, you can put it right in the directory containing `conf.py` and use this configuration:

```
html_theme = "blue"
html_theme_path = ["."]
```

The third form is a Python package. If a theme you want to use is distributed as a Python package, you can use it after installing

```
# installing theme package
$ pip install sphinxjp.themes.dotted
```

Once installed, this can be used in the same manner as a directory or zipfile-based theme:

```
html_theme = "dotted"
```

For more information on the design of themes, including information about writing your own themes, refer to [HTML theme development](../development/html_themes/index.html#extension-html-theme).

### Builtin themes[¬∂](theming.html#builtin-themes "Link to this heading")

**Theme overview**

![alabaster](../_images/alabaster.png)

*alabaster*

![classic](../_images/classic.png)

*classic*

![sphinxdoc](../_images/sphinxdoc.png)

*sphinxdoc*

![scrolls](../_images/scrolls.png)

*scrolls*

![agogo](../_images/agogo.png)

*agogo*

![traditional](../_images/traditional.png)

*traditional*

![nature](../_images/nature.png)

*nature*

![haiku](../_images/haiku.png)

*haiku*

![pyramid](../_images/pyramid.png)

*pyramid*

![bizstyle](../_images/bizstyle.png)

*bizstyle*

Sphinx comes with a selection of themes to choose from.

Note that from these themes only the Alabaster and Scrolls themes are mobile-optimated, the other themes resort to horizontal scrolling if the screen is too narrow.

These themes are:

**basic**

This is a basically unstyled layout used as the base for the other themes, and usable as the base for custom themes as well. The HTML contains all important elements like sidebar and relation bar. There are these options (which are inherited by the other themes):

- **nosidebar** (true or false): Don‚Äôt include the sidebar. Defaults to `False`.
- **sidebarwidth** (int or str): Width of the sidebar in pixels. This can be an int, which is interpreted as pixels or a valid CSS dimension string such as ‚Äò70em‚Äô or ‚Äò50%‚Äô. Defaults to 230 pixels.
- **body\_min\_width** (int or str): Minimal width of the document body. This can be an int, which is interpreted as pixels or a valid CSS dimension string such as ‚Äò70em‚Äô or ‚Äò50%‚Äô. Use 0 if you don‚Äôt want a width limit. Defaults may depend on the theme (often 450px).
- **body\_max\_width** (int or str): Maximal width of the document body. This can be an int, which is interpreted as pixels or a valid CSS dimension string such as ‚Äò70em‚Äô or ‚Äò50%‚Äô. Use ‚Äònone‚Äô if you don‚Äôt want a width limit. Defaults may depend on the theme (often 800px).
- **navigation\_with\_keys** (true or false): Allow navigating with the following keyboard shortcuts:

  - `Left` `arrow`: previous page
  - `Right` `arrow`: next page

  Defaults to `False`.
- **enable\_search\_shortcuts** (true or false): Allow jumping to the search box with `/` and allow removal of search highlighting with `Esc`.

  Defaults to `True`.
- **globaltoc\_collapse** (true or false): Only expand subsections of the current document in `globaltoc.html` (see [`html_sidebars`](configuration.html#confval-html_sidebars)). Defaults to `True`.

  Added in version 3.1.
- **globaltoc\_includehidden** (true or false): Show even those subsections in `globaltoc.html` (see [`html_sidebars`](configuration.html#confval-html_sidebars)) which have been included with the `:hidden:` flag of the [`toctree`](restructuredtext/directives.html#directive-toctree "toctree directive") directive. Defaults to `False`.

  Added in version 3.1.
- **globaltoc\_maxdepth** (int): The maximum depth of the toctree in `globaltoc.html` (see [`html_sidebars`](configuration.html#confval-html_sidebars)). Set it to -1 to allow unlimited depth. Defaults to the max depth selected in the toctree directive.

  Added in version 3.2.

**alabaster**

[Alabaster theme](https://pypi.org/project/alabaster/) is a modified ‚ÄúKr‚Äù Sphinx theme from @kennethreitz (especially as used in his Requests project), which was itself originally based on @mitsuhiko‚Äôs theme used for Flask &amp; related projects. Refer to its [installation page](https://alabaster.readthedocs.io/en/latest/installation.html) for information on how to configure [`html_sidebars`](configuration.html#confval-html_sidebars) for its use.

**classic**

This is the classic theme, which looks like [the Python 2 documentation](https://docs.python.org/2/). It can be customized via these options:

- **rightsidebar** (true or false): Put the sidebar on the right side. Defaults to `False`.
- **stickysidebar** (true or false): Make the sidebar ‚Äúfixed‚Äù so that it doesn‚Äôt scroll out of view for long body content. This may not work well with all browsers. Defaults to `False`.
- **collapsiblesidebar** (true or false): Add an *experimental* JavaScript snippet that makes the sidebar collapsible via a button on its side. Defaults to `False`.
- **externalrefs** (true or false): Display external links differently from internal links. Defaults to `False`.

There are also various color and font options that can change the color scheme without having to write a custom stylesheet:

- **footerbgcolor** (CSS color): Background color for the footer line.
- **footertextcolor** (CSS color): Text color for the footer line.
- **sidebarbgcolor** (CSS color): Background color for the sidebar.
- **sidebarbtncolor** (CSS color): Background color for the sidebar collapse button (used when *collapsiblesidebar* is `True`).
- **sidebartextcolor** (CSS color): Text color for the sidebar.
- **sidebarlinkcolor** (CSS color): Link color for the sidebar.
- **relbarbgcolor** (CSS color): Background color for the relation bar.
- **relbartextcolor** (CSS color): Text color for the relation bar.
- **relbarlinkcolor** (CSS color): Link color for the relation bar.
- **bgcolor** (CSS color): Body background color.
- **textcolor** (CSS color): Body text color.
- **linkcolor** (CSS color): Body link color.
- **visitedlinkcolor** (CSS color): Body color for visited links.
- **headbgcolor** (CSS color): Background color for headings.
- **headtextcolor** (CSS color): Text color for headings.
- **headlinkcolor** (CSS color): Link color for headings.
- **codebgcolor** (CSS color): Background color for code blocks.
- **codetextcolor** (CSS color): Default text color for code blocks, if not set differently by the highlighting style.
- **bodyfont** (CSS font-family): Font for normal text.
- **headfont** (CSS font-family): Font for headings.

**sphinxdoc**

The theme originally used by this documentation. It features a sidebar on the right side. There are currently no options beyond *nosidebar* and *sidebarwidth*.

Note

The Sphinx documentation now uses [an adjusted version of the sphinxdoc theme](https://github.com/sphinx-doc/sphinx/tree/master/doc/_themes/sphinx13).

**scrolls**

A more lightweight theme, based on [the Jinja documentation](https://jinja.palletsprojects.com/). The following color options are available:

- **headerbordercolor**
- **subheadlinecolor**
- **linkcolor**
- **visitedlinkcolor**
- **admonitioncolor**

**agogo**

A theme created by Andi Albrecht. The following options are supported:

- **bodyfont** (CSS font family): Font for normal text.
- **headerfont** (CSS font family): Font for headings.
- **pagewidth** (CSS length): Width of the page content, default 70em.
- **documentwidth** (CSS length): Width of the document (without sidebar), default 50em.
- **sidebarwidth** (CSS length): Width of the sidebar, default 20em.
- **rightsidebar** (true or false): Put the sidebar on the right side. Defaults to `True`.
- **bgcolor** (CSS color): Background color.
- **headerbg** (CSS value for ‚Äúbackground‚Äù): background for the header area, default a grayish gradient.
- **footerbg** (CSS value for ‚Äúbackground‚Äù): background for the footer area, default a light gray gradient.
- **linkcolor** (CSS color): Body link color.
- **headercolor1**, **headercolor2** (CSS color): colors for &lt;h1&gt; and &lt;h2&gt; headings.
- **headerlinkcolor** (CSS color): Color for the backreference link in headings.
- **textalign** (CSS *text-align* value): Text alignment for the body, default is `justify`.

**nature**

A greenish theme. There are currently no options beyond *nosidebar* and *sidebarwidth*.

**pyramid**

A theme from the Pyramid web framework project, designed by Blaise Laflamme. There are currently no options beyond *nosidebar* and *sidebarwidth*.

**haiku**

A theme without sidebar inspired by the [Haiku OS user guide](https://www.haiku-os.org/docs/userguide/en/contents.html). The following options are supported:

- **full\_logo** (true or false, default `False`): If this is true, the header will only show the [`html_logo`](configuration.html#confval-html_logo). Use this for large logos. If this is false, the logo (if present) will be shown floating right, and the documentation title will be put in the header.
- **textcolor**, **headingcolor**, **linkcolor**, **visitedlinkcolor**, **hoverlinkcolor** (CSS colors): Colors for various body elements.

**traditional**

A theme resembling the old Python documentation. There are currently no options beyond *nosidebar* and *sidebarwidth*.

**epub**

A theme for the epub builder. This theme tries to save visual space which is a sparse resource on ebook readers. The following options are supported:

- **relbar1** (true or false, default `True`): If this is true, the `relbar1` block is inserted in the epub output, otherwise it is omitted.
- **footer** (true or false, default `True`): If this is true, the `footer` block is inserted in the epub output, otherwise it is omitted.

**bizstyle**

A simple bluish theme. The following options are supported beyond *nosidebar* and *sidebarwidth*:

- **rightsidebar** (true or false): Put the sidebar on the right side. Defaults to `False`.

Added in version 1.3: ‚Äòalabaster‚Äô, ‚Äòsphinx\_rtd\_theme‚Äô and ‚Äòbizstyle‚Äô theme.

Changed in version 1.3: The ‚Äòdefault‚Äô theme has been renamed to ‚Äòclassic‚Äô. ‚Äòdefault‚Äô is still available, however it will emit a notice that it is an alias for the new ‚Äòalabaster‚Äô theme.

### Third Party Themes[¬∂](theming.html#third-party-themes "Link to this heading")

There are many third-party themes created for Sphinx. Some of these are for general use, while others are specific to an individual project.

[sphinx-themes.org](https://sphinx-themes.org/) is a gallery that showcases various themes for Sphinx, with demo documentation rendered under each theme. Themes can also be found on [PyPI](https://pypi.org/search/?q=&o=&c=Framework%20%3A%3A%20Sphinx%20%3A%3A%20Theme) (using the classifier `Framework :: Sphinx :: Theme`), [GitHub](https://github.com/search?utf8=%E2%9C%93&q=sphinx%20theme) and [GitLab](https://gitlab.com/explore?name=sphinx%20theme).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# Domains[¬∂](index.html#domains "Link to this heading")

Added in version 1.0.

Originally, Sphinx was conceived for a single project, the documentation of the Python language. Shortly afterwards, it was made available for everyone as a documentation tool, but the documentation of Python modules remained deeply built in ‚Äì the most fundamental directives, like `function`, were designed for Python objects. Since Sphinx has become somewhat popular, interest developed in using it for many different purposes: C/C++ projects, JavaScript, or even reStructuredText markup (like in this documentation).

While this was always possible, it is now much easier to easily support documentation of projects using different programming languages or even ones not supported by the main Sphinx distribution, by providing a **domain** for every such purpose.

A domain is a collection of markup (reStructuredText [directive](../../glossary.html#term-directive)s and [role](../../glossary.html#term-role)s) to describe and link to [object](../../glossary.html#term-object)s belonging together, e.g. elements of a programming language. Directive and role names in a domain have names like `domain:name`, e.g. `py:function`. Domains can also provide custom indices (like the Python Module Index).

Having domains means that there are no naming problems when one set of documentation wants to refer to e.g. C++ and Python classes. It also means that extensions that support the documentation of whole new languages are much easier to write.

This section describes what the domains that are included with Sphinx provide. The domain API is documented as well, in the section [Domain API](../../extdev/domainapi.html#domain-api).

## Basic Markup[¬∂](index.html#basic-markup "Link to this heading")

Most domains provide a number of *object description directives*, used to describe specific objects provided by modules. Each directive requires one or more signatures to provide basic information about what is being described, and the content should be the description.

A domain will typically keep an internal index of all entities to aid cross-referencing. Typically, it will also add entries in the shown general index. If you want to suppress the addition of an entry in the shown index, you can give the directive option flag `:no-index-entry:`. If you want to exclude the object description from the table of contents, you can give the directive option flag `:no-contents-entry:`. If you want to typeset an object description, without even making it available for cross-referencing, you can give the directive option flag `:no-index:` (which implies `:no-index-entry:`). If you do not want to typeset anything, you can give the directive option flag `:no-typesetting:`. This can for example be used to create only a target and index entry for later reference. Though, note that not every directive in every domain may support these options.

Added in version 3.2: The directive option `noindexentry` in the Python, C, C++, and Javascript domains.

Added in version 5.2.3: The directive option `:nocontentsentry:` in the Python, C, C++, Javascript, and reStructuredText domains.

Added in version 7.2: The directive option `no-typesetting` in the Python, C, C++, Javascript, and reStructuredText domains.

Changed in version 7.2:

- The directive option `:noindex:` was renamed to `:no-index:`.
- The directive option `:noindexentry:` was renamed to `:no-index-entry:`.
- The directive option `:nocontentsentry:` was renamed to `:no-contents-entry:`.

The previous names are retained as aliases, but will be deprecated and removed in a future version of Sphinx.

An example using a Python domain directive:

```
.. py:function:: spam(eggs)
                 ham(eggs)

   Spam or ham the foo.
```

This describes the two Python functions `spam` and `ham`. (Note that when signatures become too long, you can break them if you add a backslash to lines that are continued in the next line. Example:

```
.. py:function:: filterwarnings(action, message='', category=Warning, \
                                module='', lineno=0, append=False)
   :no-index:
```

(This example also shows how to use the `:no-index:` flag.)

The domains also provide roles that link back to these object descriptions. For example, to link to one of the functions described in the example above, you could say

```
The function :py:func:`spam` does a similar thing.
```

As you can see, both directive and role names contain the domain name and the directive name.

The directive option `:no-typesetting:` can be used to create a target (and index entry) which can later be referenced by the roles provided by the domain. This is particularly useful for literate programming:

```
.. py:function:: spam(eggs)
   :no-typesetting:

.. code:: python

   def spam(eggs):
       pass

The function :py:func:`spam` does nothing.
```

Default Domain

For documentation describing objects from solely one domain, authors will not have to state again its name at each directive, role, etc‚Ä¶ after having specified a default. This can be done either via the config value [`primary_domain`](../configuration.html#confval-primary_domain) or via this directive:

.. default-domain:: name[¬∂](index.html#directive-default-domain "Link to this definition")

Select a new default domain. While the [`primary_domain`](../configuration.html#confval-primary_domain) selects a global default, this only has an effect within the same file.

If no other default is selected, the Python domain (named `py`) is the default one, mostly for compatibility with documentation written for older versions of Sphinx.

Directives and roles that belong to the default domain can be mentioned without giving the domain name, i.e.

```
.. function:: pyfunc()

   Describes a Python function.

Reference to :func:`pyfunc`.
```

### Cross-referencing syntax[¬∂](index.html#cross-referencing-syntax "Link to this heading")

For cross-reference roles provided by domains, the same [cross-referencing modifiers](../referencing.html#xref-modifiers) exist as for general cross-references. In short:

- You may supply an explicit title and reference target: ``:py:mod:`mathematical functions <math>` `` will refer to the `math` module, but the link text will be ‚Äúmathematical functions‚Äù.
- If you prefix the content with an exclamation mark (`!`), no reference/hyperlink will be created.
- If you prefix the content with `~`, the link text will only be the last component of the target. For example, ``:py:meth:`~queue.Queue.get` `` will refer to `queue.Queue.get` but only display `get` as the link text.

## Built-in domains[¬∂](index.html#built-in-domains "Link to this heading")

The following domains are included within Sphinx:


## More domains[¬∂](index.html#more-domains "Link to this heading")

There are several third-party domains available as extensions, including:









### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page










The Basics


User guide




Community


Reference


# The C Domain[¬∂](c.html#the-c-domain "Link to this heading")

Added in version 1.0.

The C domain (name **c**) is suited for documentation of C API.

.. c:member:: declaration[¬∂](c.html#directive-c-member "Link to this definition")

.. c:var:: declaration[¬∂](c.html#directive-c-var "Link to this definition")

Describes a C struct member or variable. Example signature:

```
.. c:member:: PyObject *PyTypeObject.tp_bases
```

The difference between the two directives is only cosmetic.

.. c:function:: function prototype[¬∂](c.html#directive-c-function "Link to this definition")

Describes a C function. The signature should be given as in C, e.g.:

```
.. c:function:: PyObject *PyType_GenericAlloc(PyTypeObject *type, Py_ssize_t nitems)
```

Note that you don‚Äôt have to backslash-escape asterisks in the signature, as it is not parsed by the reStructuredText inliner.

In the description of a function you can use the following info fields (see also [Info field lists](python.html#info-field-lists)).

- `param`, `parameter`, `arg`, `argument`, Description of a parameter.
- `type`: Type of a parameter, written as if passed to the [`c:expr`](c.html#role-c-expr "c:expr role") role.
- `returns`, `return`: Description of the return value.
- `rtype`: Return type, written as if passed to the [`c:expr`](c.html#role-c-expr "c:expr role") role.
- `retval`, `retvals`: An alternative to `returns` for describing the result of the function.

Added in version 4.3: The `retval` field type.

For example:

```
.. c:function:: PyObject *PyType_GenericAlloc(PyTypeObject *type, Py_ssize_t nitems)

   :param type: description of the first parameter.
   :param nitems: description of the second parameter.
   :returns: a result.
   :retval NULL: under some conditions.
   :retval NULL: under some other conditions as well.
```

which renders as

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "(in Python v3.13)") \*PyType\_GenericAlloc([PyTypeObject](https://docs.python.org/3/c-api/type.html#c.PyTypeObject "(in Python v3.13)") \*type, [Py\_ssize\_t](https://docs.python.org/3/c-api/intro.html#c.Py_ssize_t "(in Python v3.13)") nitems)[¬∂](c.html#c.PyType_GenericAlloc "Link to this definition")

No-contents-entry:

No-index-entry:

Parameters:

- **type** ‚Äì description of the first parameter.
- **nitems** ‚Äì description of the second parameter.

Returns:

a result.

Return values:

- **NULL** ‚Äì under some conditions.
- **NULL** ‚Äì under some other conditions as well.

:single-line-parameter-list: *(no value)*[¬∂](c.html#directive-option-c-function-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs parameters will be emitted on a single logical line, overriding [`c_maximum_signature_line_length`](../configuration.html#confval-c_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. c:macro:: name[¬∂](c.html#directive-c-macro "Link to this definition")

.. c:macro:: name(arg list)

Describes a C macro, i.e., a C-language `#define`, without the replacement text.

In the description of a macro you can use the same info fields as for the [`c:function`](c.html#directive-c-function "c:function directive") directive.

Added in version 3.0: The function style variant.

:single-line-parameter-list: *(no value)*[¬∂](c.html#directive-option-c-macro-single-line-parameter-list "Link to this definition")

Ensures that the macro‚Äôs parameters will be emitted on a single logical line, overriding [`c_maximum_signature_line_length`](../configuration.html#confval-c_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. c:struct:: name[¬∂](c.html#directive-c-struct "Link to this definition")

Describes a C struct.

Added in version 3.0.

.. c:union:: name[¬∂](c.html#directive-c-union "Link to this definition")

Describes a C union.

Added in version 3.0.

.. c:enum:: name[¬∂](c.html#directive-c-enum "Link to this definition")

Describes a C enum.

Added in version 3.0.

.. c:enumerator:: name[¬∂](c.html#directive-c-enumerator "Link to this definition")

Describes a C enumerator.

Added in version 3.0.

.. c:type:: typedef-like declaration[¬∂](c.html#directive-c-type "Link to this definition")

.. c:type:: name

Describes a C type, either as a typedef, or the alias for an unspecified type.

## Cross-referencing C constructs[¬∂](c.html#cross-referencing-c-constructs "Link to this heading")

The following roles create cross-references to C-language constructs if they are defined in the documentation:

:c:member:[¬∂](c.html#role-c-member "Link to this definition")

:c:data:[¬∂](c.html#role-c-data "Link to this definition")

:c:var:[¬∂](c.html#role-c-var "Link to this definition")

:c:func:[¬∂](c.html#role-c-func "Link to this definition")

:c:macro:[¬∂](c.html#role-c-macro "Link to this definition")

:c:struct:[¬∂](c.html#role-c-struct "Link to this definition")

:c:union:[¬∂](c.html#role-c-union "Link to this definition")

:c:enum:[¬∂](c.html#role-c-enum "Link to this definition")

:c:enumerator:[¬∂](c.html#role-c-enumerator "Link to this definition")

:c:type:[¬∂](c.html#role-c-type "Link to this definition")

Reference a C declaration, as defined above. Note that [`c:member`](c.html#role-c-member "c:member role"), [`c:data`](c.html#role-c-data "c:data role"), and [`c:var`](c.html#role-c-var "c:var role") are equivalent.

Added in version 3.0: The var, struct, union, enum, and enumerator roles.

## Anonymous Entities[¬∂](c.html#anonymous-entities "Link to this heading")

C supports anonymous structs, enums, and unions. For the sake of documentation they must be given some name that starts with `@`, e.g., `@42` or `@data`. These names can also be used in cross-references, though nested symbols will be found even when omitted. The `@...` name will always be rendered as **\[anonymous]** (possibly as a link).

Example:

```
.. c:struct:: Data

   .. c:union:: @data

      .. c:var:: int a

      .. c:var:: double b

Explicit ref: :c:var:`[email¬†protected]`. Short-hand ref: :c:var:`Data.a`.
```

This will be rendered as:

struct Data[¬∂](c.html#c.Data "Link to this definition")

union \[anonymous][¬∂](c.html#c.Data.@data "Link to this definition")

int a[¬∂](c.html#c.Data.@data.a "Link to this definition")

double b[¬∂](c.html#c.Data.@data.b "Link to this definition")

Explicit ref: [`Data.[anonymous].a`](c.html#c.Data.@data.a "Data.[anonymous].a"). Short-hand ref: [`Data.a`](c.html#c.Data.@data.a "Data.a").

Added in version 3.0.

## Aliasing Declarations[¬∂](c.html#aliasing-declarations "Link to this heading")

Sometimes it may be helpful list declarations elsewhere than their main documentation, e.g., when creating a synopsis of an interface. The following directive can be used for this purpose.

.. c:alias:: name[¬∂](c.html#directive-c-alias "Link to this definition")

Insert one or more alias declarations. Each entity can be specified as they can in the `c:any` role.

For example:

```
.. c:var:: int data
.. c:function:: int f(double k)

.. c:alias:: data
             f
```

becomes

int data[¬∂](c.html#c.@alias.data "Link to this definition")

int f(double k)[¬∂](c.html#c.@alias.f "Link to this definition")

int [data](c.html#c.@alias.data "data")

int [f](c.html#c.@alias.f "f")(double k)

Added in version 3.2.

Options

:maxdepth: *int*[¬∂](c.html#directive-option-c-alias-maxdepth "Link to this definition")

Insert nested declarations as well, up to the total depth given. Use 0 for infinite depth and 1 for just the mentioned declaration. Defaults to 1.

Added in version 3.3.

:noroot:[¬∂](c.html#directive-option-c-alias-noroot "Link to this definition")

Skip the mentioned declarations and only render nested declarations. Requires `maxdepth` either 0 or at least 2.

Added in version 3.5.

## Inline Expressions and Types[¬∂](c.html#inline-expressions-and-types "Link to this heading")

:c:expr:[¬∂](c.html#role-c-expr "Link to this definition")

:c:texpr:[¬∂](c.html#role-c-texpr "Link to this definition")

Insert a C expression or type either as inline code (`cpp:expr`) or inline text (`cpp:texpr`). For example:

```
.. c:var:: int a = 42

.. c:function:: int f(int i)

An expression: :c:expr:`a * f(a)` (or as text: :c:texpr:`a * f(a)`).

A type: :c:expr:`const Data*`
(or as text :c:texpr:`const Data*`).
```

will be rendered as follows:

int a = 42[¬∂](c.html#c.a "Link to this definition")

int f(int i)[¬∂](c.html#c.f "Link to this definition")

An expression: [a](c.html#c.a "a") * [f](c.html#c.f "f")([a](c.html#c.a "a")) (or as text: [a](c.html#c.a "a") * [f](c.html#c.f "f")([a](c.html#c.a "a"))).

A type: const [Data](c.html#c.Data "Data")* (or as text const [Data](c.html#c.Data "Data")\*).

Added in version 3.0.

## Namespacing[¬∂](c.html#namespacing "Link to this heading")

Added in version 3.1.

The C language it self does not support namespacing, but it can sometimes be useful to emulate it in documentation, e.g., to show alternate declarations. The feature may also be used to document members of structs/unions/enums separate from their parent declaration.

The current scope can be changed using three namespace directives. They manage a stack declarations where `c:namespace` resets the stack and changes a given scope.

The `c:namespace-push` directive changes the scope to a given inner scope of the current one.

The `c:namespace-pop` directive undoes the most recent `c:namespace-push` directive.

.. c:namespace:: scope specification[¬∂](c.html#directive-c-namespace "Link to this definition")

Changes the current scope for the subsequent objects to the given scope, and resets the namespace directive stack. Note that nested scopes can be specified by separating with a dot, e.g.:

```
.. c:namespace:: Namespace1.Namespace2.SomeStruct.AnInnerStruct
```

All subsequent objects will be defined as if their name were declared with the scope prepended. The subsequent cross-references will be searched for starting in the current scope.

Using `NULL` or `0` as the scope will change to global scope.

.. c:namespace-push:: scope specification[¬∂](c.html#directive-c-namespace-push "Link to this definition")

Change the scope relatively to the current scope. For example, after:

```
.. c:namespace:: A.B

.. c:namespace-push:: C.D
```

the current scope will be `A.B.C.D`.

.. c:namespace-pop::[¬∂](c.html#directive-c-namespace-pop "Link to this definition")

Undo the previous `c:namespace-push` directive (*not* just pop a scope). For example, after:

```
.. c:namespace:: A.B

.. c:namespace-push:: C.D

.. c:namespace-pop::
```

the current scope will be `A.B` (*not* `A.B.C`).

If no previous `c:namespace-push` directive has been used, but only a `c:namespace` directive, then the current scope will be reset to global scope. That is, `.. c:namespace:: A.B` is equivalent to:

```
.. c:namespace:: NULL

.. c:namespace-push:: A.B
```

## Configuration Variables[¬∂](c.html#configuration-variables "Link to this heading")

See [Options for the C domain](../configuration.html#c-config).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page












The Basics


User guide




Community


Reference


# The C++ Domain[¬∂](cpp.html#the-c-domain "Link to this heading")

Added in version 1.0.

The C++ domain (name **cpp**) supports documenting C++ projects.

## Directives for Declaring Entities[¬∂](cpp.html#directives-for-declaring-entities "Link to this heading")

The following directives are available. All declarations can start with a visibility statement (`public`, `private` or `protected`).

.. cpp:class:: class specifier[¬∂](cpp.html#directive-cpp-class "Link to this definition")

.. cpp:struct:: class specifier[¬∂](cpp.html#directive-cpp-struct "Link to this definition")

Describe a class/struct, possibly with specification of inheritance, e.g.,:

```
.. cpp:class:: MyClass : public MyBase, MyOtherBase
```

The difference between [`cpp:class`](cpp.html#directive-cpp-class "cpp:class directive") and [`cpp:struct`](cpp.html#directive-cpp-struct "cpp:struct directive") is only cosmetic: the prefix rendered in the output, and the specifier shown in the index.

The class can be directly declared inside a nested scope, e.g.,:

```
.. cpp:class:: OuterScope::MyClass : public MyBase, MyOtherBase
```

A class template can be declared:

```
.. cpp:class:: template<typename T, std::size_t N> std::array
```

or with a line break:

```
.. cpp:class:: template<typename T, std::size_t N> \
               std::array
```

Full and partial template specialisations can be declared:

```
.. cpp:class:: template<> \
               std::array<bool, 256>

.. cpp:class:: template<typename T> \
               std::array<T, 42>
```

Added in version 2.0: The [`cpp:struct`](cpp.html#directive-cpp-struct "cpp:struct directive") directive.

.. cpp:function:: (member) function prototype[¬∂](cpp.html#directive-cpp-function "Link to this definition")

Describe a function or member function, e.g.,:

```
.. cpp:function:: bool myMethod(int arg1, std::string arg2)

   A function with parameters and types.

.. cpp:function:: bool myMethod(int, double)

   A function with unnamed parameters.

.. cpp:function:: const T &MyClass::operator[](std::size_t i) const

   An overload for the indexing operator.

.. cpp:function:: operator bool() const

   A casting operator.

.. cpp:function:: constexpr void foo(std::string &bar[2]) noexcept

   A constexpr function.

.. cpp:function:: MyClass::MyClass(const MyClass&) = default

   A copy constructor with default implementation.
```

Function templates can also be described:

```
.. cpp:function:: template<typename U> \
                  void print(U &&u)
```

and function template specialisations:

```
.. cpp:function:: template<> \
                  void print(int i)
```

:single-line-parameter-list: *(no value)*[¬∂](cpp.html#directive-option-cpp-function-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs parameters will be emitted on a single logical line, overriding [`cpp_maximum_signature_line_length`](../configuration.html#confval-cpp_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. cpp:member:: (member) variable declaration[¬∂](cpp.html#directive-cpp-member "Link to this definition")

.. cpp:var:: (member) variable declaration[¬∂](cpp.html#directive-cpp-var "Link to this definition")

Describe a variable or member variable, e.g.,:

```
.. cpp:member:: std::string MyClass::myMember

.. cpp:var:: std::string MyClass::myOtherMember[N][M]

.. cpp:member:: int a = 42
```

Variable templates can also be described:

```
.. cpp:member:: template<class T> \
                constexpr T pi = T(3.1415926535897932385)
```

.. cpp:type:: typedef declaration[¬∂](cpp.html#directive-cpp-type "Link to this definition")

.. cpp:type:: name

.. cpp:type:: type alias declaration

Describe a type as in a typedef declaration, a type alias declaration, or simply the name of a type with unspecified type, e.g.,:

```
.. cpp:type:: std::vector<int> MyList

   A typedef-like declaration of a type.

.. cpp:type:: MyContainer::const_iterator

   Declaration of a type alias with unspecified type.

.. cpp:type:: MyType = std::unordered_map<int, std::string>

   Declaration of a type alias.
```

A type alias can also be templated:

```
.. cpp:type:: template<typename T> \
              MyContainer = std::vector<T>
```

The example are rendered as follows.

typedef std::vector&lt;int&gt; MyList[¬∂](cpp.html#_CPPv46MyList "Link to this definition")

A typedef-like declaration of a type.

type MyContainer::const\_iterator[¬∂](cpp.html#_CPPv4N11MyContainer14const_iteratorE "Link to this definition")

Declaration of a type alias with unspecified type.

using MyType = std::unordered\_map&lt;int, std::string&gt;[¬∂](cpp.html#_CPPv46MyType "Link to this definition")

Declaration of a type alias.

template&lt;typename T&gt;
using MyContainer = std::vector&lt;[T](cpp.html#_CPPv4I0E11MyContainer "MyContainer::T")&gt;[¬∂](cpp.html#_CPPv4I0E11MyContainer "Link to this definition")

.. cpp:enum:: unscoped enum declaration[¬∂](cpp.html#directive-cpp-enum "Link to this definition")

.. cpp:enum-struct:: scoped enum declaration[¬∂](cpp.html#directive-cpp-enum-struct "Link to this definition")

.. cpp:enum-class:: scoped enum declaration[¬∂](cpp.html#directive-cpp-enum-class "Link to this definition")

Describe a (scoped) enum, possibly with the underlying type specified. Any enumerators declared inside an unscoped enum will be declared both in the enum scope and in the parent scope. Examples:

```
.. cpp:enum:: MyEnum

   An unscoped enum.

.. cpp:enum:: MySpecificEnum : long

   An unscoped enum with specified underlying type.

.. cpp:enum-class:: MyScopedEnum

   A scoped enum.

.. cpp:enum-struct:: protected MyScopedVisibilityEnum : std::underlying_type<MySpecificEnum>::type

   A scoped enum with non-default visibility, and with a specified
   underlying type.
```

.. cpp:enumerator:: name[¬∂](cpp.html#directive-cpp-enumerator "Link to this definition")

.. cpp:enumerator:: name = constant

Describe an enumerator, optionally with its value defined, e.g.,:

```
.. cpp:enumerator:: MyEnum::myEnumerator

.. cpp:enumerator:: MyEnum::myOtherEnumerator = 42
```

.. cpp:union:: name[¬∂](cpp.html#directive-cpp-union "Link to this definition")

Describe a union.

Added in version 1.8.

.. cpp:concept:: template-parameter-list name[¬∂](cpp.html#directive-cpp-concept "Link to this definition")

Warning

The support for concepts is experimental. It is based on the current draft standard and the Concepts Technical Specification. The features may change as they evolve.

Describe a concept. It must have exactly 1 template parameter list. The name may be a nested name. Example:

```
.. cpp:concept:: template<typename It> std::Iterator

   Proxy to an element of a notional sequence that can be compared,
   indirected, or incremented.

   **Notation**

   .. cpp:var:: It r

      An lvalue.

   **Valid Expressions**

   - :cpp:expr:`*r`, when :cpp:expr:`r` is dereferenceable.
   - :cpp:expr:`++r`, with return type :cpp:expr:`It&`, when
     :cpp:expr:`r` is incrementable.
```

This will render as follows:

template&lt;typename It&gt;
concept std::Iterator[¬∂](cpp.html#_CPPv4I0ENSt8IteratorE "Link to this definition")

Proxy to an element of a notional sequence that can be compared, indirected, or incremented.

**Notation**

[It](cpp.html#_CPPv4I0ENSt8IteratorE "std::Iterator::It") r[¬∂](cpp.html#_CPPv4NSt8Iterator1rE "Link to this definition")

An lvalue.

**Valid Expressions**

- \*[r](cpp.html#_CPPv4NSt8Iterator1rE "std::Iterator::r"), when [r](cpp.html#_CPPv4NSt8Iterator1rE "std::Iterator::r") is dereferenceable.
- ++[r](cpp.html#_CPPv4NSt8Iterator1rE "std::Iterator::r"), with return type [It](cpp.html#_CPPv4I0ENSt8IteratorE "std::Iterator::It")&amp;, when [r](cpp.html#_CPPv4NSt8Iterator1rE "std::Iterator::r") is incrementable.

Added in version 1.5.

### Options[¬∂](cpp.html#options "Link to this heading")

Some directives support options:

- `:no-index-entry:` and `:no-contents-entry:`, see [Basic Markup](index.html#basic-domain-markup).
- `:tparam-line-spec:`, for templated declarations. If specified, each template parameter will be rendered on a separate line.

  Added in version 1.6.

## Anonymous Entities[¬∂](cpp.html#anonymous-entities "Link to this heading")

C++ supports anonymous namespaces, classes, enums, and unions. For the sake of documentation they must be given some name that starts with `@`, e.g., `@42` or `@data`. These names can also be used in cross-references and (type) expressions, though nested symbols will be found even when omitted. The `@...` name will always be rendered as **\[anonymous]** (possibly as a link).

Example:

```
.. cpp:class:: Data

   .. cpp:union:: @data

      .. cpp:var:: int a

      .. cpp:var:: double b

Explicit ref: :cpp:var:`Data::@data::a`. Short-hand ref: :cpp:var:`Data::a`.
```

This will be rendered as:

class Data[¬∂](cpp.html#_CPPv44Data "Link to this definition")

union \[anonymous][¬∂](cpp.html#_CPPv4N4DataUt4_dataE "Link to this definition")

int a[¬∂](cpp.html#_CPPv4N4DataUt4_data1aE "Link to this definition")

double b[¬∂](cpp.html#_CPPv4N4DataUt4_data1bE "Link to this definition")

Explicit ref: [`Data::[anonymous]::a`](cpp.html#_CPPv4N4DataUt4_data1aE "Data::[anonymous]::a"). Short-hand ref: [`Data::a`](cpp.html#_CPPv4N4DataUt4_data1aE "Data::[anonymous]::a").

Added in version 1.8.

## Aliasing Declarations[¬∂](cpp.html#aliasing-declarations "Link to this heading")

Sometimes it may be helpful list declarations elsewhere than their main documentation, e.g., when creating a synopsis of a class interface. The following directive can be used for this purpose.

.. cpp:alias:: name or function signature[¬∂](cpp.html#directive-cpp-alias "Link to this definition")

Insert one or more alias declarations. Each entity can be specified as they can in the [`cpp:any`](cpp.html#role-cpp-any "cpp:any role") role. If the name of a function is given (as opposed to the complete signature), then all overloads of the function will be listed.

For example:

```
.. cpp:alias:: Data::a
               overload_example::C::f
```

becomes

int [a](cpp.html#_CPPv4N4DataUt4_data1aE "Data::[anonymous]::a")

void [f](cpp.html#_CPPv4NK16overload_example1C1fEd "overload_example::C::f")(double d) const

void [f](cpp.html#_CPPv4N16overload_example1C1fEd "overload_example::C::f")(double d)

void [f](cpp.html#_CPPv4N16overload_example1C1fEi "overload_example::C::f")(int i)

void [f](cpp.html#_CPPv4N16overload_example1C1fEv "overload_example::C::f")()

whereas:

```
.. cpp:alias:: void overload_example::C::f(double d) const
               void overload_example::C::f(double d)
```

becomes

void [f](cpp.html#_CPPv4NK16overload_example1C1fEd "overload_example::C::f")(double d) const

void [f](cpp.html#_CPPv4N16overload_example1C1fEd "overload_example::C::f")(double d)

Added in version 2.0.

Options

:maxdepth: *int*[¬∂](cpp.html#directive-option-cpp-alias-maxdepth "Link to this definition")

Insert nested declarations as well, up to the total depth given. Use 0 for infinite depth and 1 for just the mentioned declaration. Defaults to 1.

Added in version 3.5.

:noroot:[¬∂](cpp.html#directive-option-cpp-alias-noroot "Link to this definition")

Skip the mentioned declarations and only render nested declarations. Requires `maxdepth` either 0 or at least 2.

Added in version 3.5.

## Constrained Templates[¬∂](cpp.html#constrained-templates "Link to this heading")

Warning

The support for concepts is experimental. It is based on the current draft standard and the Concepts Technical Specification. The features may change as they evolve.

Note

Sphinx does not currently support `requires` clauses.

### Placeholders[¬∂](cpp.html#placeholders "Link to this heading")

Declarations may use the name of a concept to introduce constrained template parameters, or the keyword `auto` to introduce unconstrained template parameters:

```
.. cpp:function:: void f(auto &&arg)

   A function template with a single unconstrained template parameter.

.. cpp:function:: void f(std::Iterator it)

   A function template with a single template parameter, constrained by the
   Iterator concept.
```

### Template Introductions[¬∂](cpp.html#template-introductions "Link to this heading")

Simple constrained function or class templates can be declared with a template introduction instead of a template parameter list:

```
.. cpp:function:: std::Iterator{It} void advance(It &it)

    A function template with a template parameter constrained to be an
    Iterator.

.. cpp:class:: std::LessThanComparable{T} MySortedContainer

    A class template with a template parameter constrained to be
    LessThanComparable.
```

They are rendered as follows.

std::[Iterator](cpp.html#_CPPv4I0ENSt8IteratorE "std::Iterator"){It}
void advance([It](cpp.html#_CPPv4I0EXNSt8IteratorEI2ItEE7advancevR2It "advance::It") &amp;it)[¬∂](cpp.html#_CPPv4I0EXNSt8IteratorEI2ItEE7advancevR2It "Link to this definition")

A function template with a template parameter constrained to be an Iterator.

std::LessThanComparable{T}
class MySortedContainer[¬∂](cpp.html#_CPPv4I0EXNSt18LessThanComparableEI1TEE17MySortedContainer "Link to this definition")

A class template with a template parameter constrained to be LessThanComparable.

Note however that no checking is performed with respect to parameter compatibility. E.g., `Iterator{A, B, C}` will be accepted as an introduction even though it would not be valid C++.

## Inline Expressions and Types[¬∂](cpp.html#inline-expressions-and-types "Link to this heading")

:cpp:expr:[¬∂](cpp.html#role-cpp-expr "Link to this definition")

:cpp:texpr:[¬∂](cpp.html#role-cpp-texpr "Link to this definition")

Insert a C++ expression or type either as inline code (`cpp:expr`) or inline text (`cpp:texpr`). For example:

```
.. cpp:var:: int a = 42

.. cpp:function:: int f(int i)

An expression: :cpp:expr:`a * f(a)` (or as text: :cpp:texpr:`a * f(a)`).

A type: :cpp:expr:`const MySortedContainer<int>&`
(or as text :cpp:texpr:`const MySortedContainer<int>&`).
```

will be rendered as follows:

int a = 42[¬∂](cpp.html#_CPPv41a "Link to this definition")

int f(int i)[¬∂](cpp.html#_CPPv41fi "Link to this definition")

An expression: [a](cpp.html#_CPPv41a "a") * [f](cpp.html#_CPPv41fi "f")([a](cpp.html#_CPPv41a "a")) (or as text: [a](cpp.html#_CPPv41a "a") * [f](cpp.html#_CPPv41fi "f")([a](cpp.html#_CPPv41a "a"))).

A type: const [MySortedContainer](cpp.html#_CPPv4I0EXNSt18LessThanComparableEI1TEE17MySortedContainer "MySortedContainer")&lt;int&gt;&amp; (or as text const [MySortedContainer](cpp.html#_CPPv4I0EXNSt18LessThanComparableEI1TEE17MySortedContainer "MySortedContainer")&lt;int&gt;&amp;).

Added in version 1.7: The [`cpp:expr`](cpp.html#role-cpp-expr "cpp:expr role") role.

Added in version 1.8: The [`cpp:texpr`](cpp.html#role-cpp-texpr "cpp:texpr role") role.

## Namespacing[¬∂](cpp.html#namespacing "Link to this heading")

Declarations in the C++ domain are as default placed in global scope. The current scope can be changed using three namespace directives. They manage a stack declarations where `cpp:namespace` resets the stack and changes a given scope.

The `cpp:namespace-push` directive changes the scope to a given inner scope of the current one.

The `cpp:namespace-pop` directive undoes the most recent `cpp:namespace-push` directive.

.. cpp:namespace:: scope specification[¬∂](cpp.html#directive-cpp-namespace "Link to this definition")

Changes the current scope for the subsequent objects to the given scope, and resets the namespace directive stack. Note that the namespace does not need to correspond to C++ namespaces, but can end in names of classes, e.g.,:

```
.. cpp:namespace:: Namespace1::Namespace2::SomeClass::AnInnerClass
```

All subsequent objects will be defined as if their name were declared with the scope prepended. The subsequent cross-references will be searched for starting in the current scope.

Using `NULL`, `0`, or `nullptr` as the scope will change to global scope.

A namespace declaration can also be templated, e.g.,:

```
.. cpp:class:: template<typename T> \
               std::vector

.. cpp:namespace:: template<typename T> std::vector

.. cpp:function:: std::size_t size() const
```

declares `size` as a member function of the class template `std::vector`. Equivalently this could have been declared using:

```
.. cpp:class:: template<typename T> \
               std::vector

   .. cpp:function:: std::size_t size() const
```

or:

```
.. cpp:class:: template<typename T> \
               std::vector
```

.. cpp:namespace-push:: scope specification[¬∂](cpp.html#directive-cpp-namespace-push "Link to this definition")

Change the scope relatively to the current scope. For example, after:

```
.. cpp:namespace:: A::B

.. cpp:namespace-push:: C::D
```

the current scope will be `A::B::C::D`.

Added in version 1.4.

.. cpp:namespace-pop::[¬∂](cpp.html#directive-cpp-namespace-pop "Link to this definition")

Undo the previous `cpp:namespace-push` directive (*not* just pop a scope). For example, after:

```
.. cpp:namespace:: A::B

.. cpp:namespace-push:: C::D

.. cpp:namespace-pop::
```

the current scope will be `A::B` (*not* `A::B::C`).

If no previous `cpp:namespace-push` directive has been used, but only a `cpp:namespace` directive, then the current scope will be reset to global scope. That is, `.. cpp:namespace:: A::B` is equivalent to:

```
.. cpp:namespace:: nullptr

.. cpp:namespace-push:: A::B
```

Added in version 1.4.

## Info field lists[¬∂](cpp.html#info-field-lists "Link to this heading")

All the C++ directives for declaring entities support the following info fields (see also [Info field lists](python.html#info-field-lists)):

- `tparam`: Description of a template parameter.

The [`cpp:function`](cpp.html#directive-cpp-function "cpp:function directive") directive additionally supports the following fields:

- `param`, `parameter`, `arg`, `argument`: Description of a parameter.
- `returns`, `return`: Description of a return value.
- `retval`, `retvals`: An alternative to `returns` for describing the result of the function.
- `throws`, `throw`, `exception`: Description of a possibly thrown exception.

Added in version 4.3: The `retval` field type.

## Cross-referencing[¬∂](cpp.html#cross-referencing "Link to this heading")

These roles link to the given declaration types:

:cpp:any:[¬∂](cpp.html#role-cpp-any "Link to this definition")

:cpp:class:[¬∂](cpp.html#role-cpp-class "Link to this definition")

:cpp:struct:[¬∂](cpp.html#role-cpp-struct "Link to this definition")

:cpp:func:[¬∂](cpp.html#role-cpp-func "Link to this definition")

:cpp:member:[¬∂](cpp.html#role-cpp-member "Link to this definition")

:cpp:var:[¬∂](cpp.html#role-cpp-var "Link to this definition")

:cpp:type:[¬∂](cpp.html#role-cpp-type "Link to this definition")

:cpp:concept:[¬∂](cpp.html#role-cpp-concept "Link to this definition")

:cpp:enum:[¬∂](cpp.html#role-cpp-enum "Link to this definition")

:cpp:enumerator:[¬∂](cpp.html#role-cpp-enumerator "Link to this definition")

Reference a C++ declaration by name (see below for details). The name must be properly qualified relative to the position of the link.

Added in version 2.0: The [`cpp:struct`](cpp.html#role-cpp-struct "cpp:struct role") role as alias for the [`cpp:class`](cpp.html#role-cpp-class "cpp:class role") role.

Note on References with Templates Parameters/Arguments

These roles follow the Sphinx [Syntax](../referencing.html#xref-syntax) rules. This means care must be taken when referencing a (partial) template specialization, e.g. if the link looks like this: ``:cpp:class:`MyClass<int>` ``. This is interpreted as a link to `int` with a title of `MyClass`. In this case, escape the opening angle bracket with a backslash, like this: ``:cpp:class:`MyClass\<int>` ``.

When a custom title is not needed it may be useful to use the roles for inline expressions, [`cpp:expr`](cpp.html#role-cpp-expr "cpp:expr role") and [`cpp:texpr`](cpp.html#role-cpp-texpr "cpp:texpr role"), where angle brackets do not need escaping.

### Declarations without template parameters and template arguments[¬∂](cpp.html#declarations-without-template-parameters-and-template-arguments "Link to this heading")

For linking to non-templated declarations the name must be a nested name, e.g., `f` or `MyClass::f`.

### Overloaded (member) functions[¬∂](cpp.html#overloaded-member-functions "Link to this heading")

When a (member) function is referenced using just its name, the reference will point to an arbitrary matching overload. The [`cpp:any`](cpp.html#role-cpp-any "cpp:any role") and [`cpp:func`](cpp.html#role-cpp-func "cpp:func role") roles use an alternative format, which simply is a complete function declaration. This will resolve to the exact matching overload. As example, consider the following class declaration:

class C[¬∂](cpp.html#_CPPv4N16overload_example1CE "Link to this definition")

void f(double d) const[¬∂](cpp.html#_CPPv4NK16overload_example1C1fEd "Link to this definition")

void f(double d)[¬∂](cpp.html#_CPPv4N16overload_example1C1fEd "Link to this definition")

void f(int i)[¬∂](cpp.html#_CPPv4N16overload_example1C1fEi "Link to this definition")

void f()[¬∂](cpp.html#_CPPv4N16overload_example1C1fEv "Link to this definition")

References using the [`cpp:func`](cpp.html#role-cpp-func "cpp:func role") role:

- Arbitrary overload: `C::f`, [`C::f()`](cpp.html#_CPPv4NK16overload_example1C1fEd "overload_example::C::f")
- Also arbitrary overload: `C::f()`, [`C::f()`](cpp.html#_CPPv4NK16overload_example1C1fEd "overload_example::C::f")
- Specific overload: `void C::f()`, [`void C::f()`](cpp.html#_CPPv4N16overload_example1C1fEv "void C::f()")
- Specific overload: `void C::f(int)`, [`void C::f(int)`](cpp.html#_CPPv4N16overload_example1C1fEi "void C::f(int)")
- Specific overload: `void C::f(double)`, [`void C::f(double)`](cpp.html#_CPPv4N16overload_example1C1fEd "void C::f(double)")
- Specific overload: `void C::f(double) const`, [`void C::f(double) const`](cpp.html#_CPPv4NK16overload_example1C1fEd "void C::f(double) const")

Note that the [`add_function_parentheses`](../configuration.html#confval-add_function_parentheses) configuration variable does not influence specific overload references.

### Templated declarations[¬∂](cpp.html#templated-declarations "Link to this heading")

Assume the following declarations.

class Wrapper[¬∂](cpp.html#_CPPv47Wrapper "Link to this definition")

template&lt;typename TOuter&gt;
class Outer[¬∂](cpp.html#_CPPv4I0EN7Wrapper5OuterE "Link to this definition")

template&lt;typename TInner&gt;
class Inner[¬∂](cpp.html#_CPPv4I0EN7Wrapper5Outer5InnerE "Link to this definition")

In general the reference must include the template parameter declarations, and template arguments for the prefix of qualified names. For example:

- `template\<typename TOuter> Wrapper::Outer` ([`template<typename TOuter> Wrapper::Outer`](cpp.html#_CPPv4I0EN7Wrapper5OuterE "Wrapper::Outer"))
- `template\<typename TOuter> template\<typename TInner> Wrapper::Outer<TOuter>::Inner` (`template<typename TOuter> template<typename TInner> Wrapper::Outer<TOuter>::Inner`)

Currently the lookup only succeed if the template parameter identifiers are equal strings. That is, `template\<typename UOuter> Wrapper::Outer` will not work.

As a shorthand notation, if a template parameter list is omitted, then the lookup will assume either a primary template or a non-template, but not a partial template specialisation. This means the following references work as well:

- `Wrapper::Outer` ([`Wrapper::Outer`](cpp.html#_CPPv4I0EN7Wrapper5OuterE "Wrapper::Outer"))
- `Wrapper::Outer::Inner` ([`Wrapper::Outer::Inner`](cpp.html#_CPPv4I0EN7Wrapper5Outer5InnerE "Wrapper::Outer::Inner"))
- `template\<typename TInner> Wrapper::Outer::Inner` ([`template<typename TInner> Wrapper::Outer::Inner`](cpp.html#_CPPv4I0EN7Wrapper5Outer5InnerE "Wrapper::Outer::Inner"))

### (Full) Template Specialisations[¬∂](cpp.html#full-template-specialisations "Link to this heading")

Assume the following declarations.

template&lt;typename TOuter&gt;
class Outer[¬∂](cpp.html#_CPPv4I0E5Outer "Link to this definition")

template&lt;typename TInner&gt;
class Inner[¬∂](cpp.html#_CPPv4I0EN5Outer5InnerE "Link to this definition")

template&lt;&gt;
class Outer&lt;int&gt;[¬∂](cpp.html#_CPPv4IE5OuterIiE "Link to this definition")

template&lt;typename TInner&gt;
class Inner[¬∂](cpp.html#_CPPv4I0EN5OuterIiE5InnerE "Link to this definition")

template&lt;&gt;
class Inner&lt;bool&gt;[¬∂](cpp.html#_CPPv4IEN5OuterIiE5InnerIbEE "Link to this definition")

In general the reference must include a template parameter list for each template argument list. The full specialisation above can therefore be referenced with `template\<> Outer\<int>` ([`template<> Outer<int>`](cpp.html#_CPPv4IE5OuterIiE "Outer<int>")) and `template\<> template\<> Outer\<int>::Inner\<bool>` ([`template<> template<> Outer<int>::Inner<bool>`](cpp.html#_CPPv4IEN5OuterIiE5InnerIbEE "Outer<int>::Inner<bool>")). As a shorthand the empty template parameter list can be omitted, e.g., `Outer\<int>` ([`Outer<int>`](cpp.html#_CPPv4IE5OuterIiE "Outer<int>")) and `Outer\<int>::Inner\<bool>` ([`Outer<int>::Inner<bool>`](cpp.html#_CPPv4IEN5OuterIiE5InnerIbEE "Outer<int>::Inner<bool>")).

### Partial Template Specialisations[¬∂](cpp.html#partial-template-specialisations "Link to this heading")

Assume the following declaration.

template&lt;typename T&gt;
class Outer&lt;[T](cpp.html#_CPPv4I0E5OuterIP1TE "Outer<T*>::T")\*&gt;[¬∂](cpp.html#_CPPv4I0E5OuterIP1TE "Link to this definition")

References to partial specialisations must always include the template parameter lists, e.g., `template\<typename T> Outer\<T*>` ([`template<typename T> Outer<T*>`](cpp.html#_CPPv4I0E5OuterIP1TE "Outer<T*>")). Currently the lookup only succeed if the template parameter identifiers are equal strings.

## Configuration Variables[¬∂](cpp.html#configuration-variables "Link to this heading")

See [Options for the C++ domain](../configuration.html#cpp-config).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page






The Basics


User guide




Community


Reference


# The JavaScript Domain[¬∂](javascript.html#the-javascript-domain "Link to this heading")

Added in version 1.0.

The JavaScript domain (name **js**) provides the following directives:

.. js:module:: name[¬∂](javascript.html#directive-js-module "Link to this definition")

This directive sets the module name for object declarations that follow after. The module name is used in the global module index and in cross references. This directive does not create an object heading like [`py:class`](python.html#directive-py-class "py:class directive") would, for example.

By default, this directive will create a linkable entity and will cause an entry in the global module index, unless the `no-index` option is specified. If this option is specified, the directive will only update the current module name.

Added in version 1.6.

Changed in version 5.2: Module directives support body content.

.. js:function:: name(signature)[¬∂](javascript.html#directive-js-function "Link to this definition")

Describes a JavaScript function or method. If you want to describe arguments as optional use square brackets as [documented](python.html#signatures) for Python signatures.

You can use fields to give more details about arguments and their expected types, errors which may be thrown by the function, and the value being returned:

```
.. js:function:: $.getJSON(href, callback[, errback])

   :param string href: An URI to the location of the resource.
   :param callback: Gets called with the object.
   :param errback:
       Gets called in case the request fails. And a lot of other
       text so we need multiple lines.
   :throws SomeError: For whatever reason in that case.
   :returns: Something.
```

This is rendered as:

$.getJSON(*href*, *callback*\[, *errback*])[¬∂](javascript.html#getJSON "Link to this definition")

Arguments:

- **href** (`string()`) ‚Äì An URI to the location of the resource.
- **callback** ‚Äì Gets called with the object.
- **errback** ‚Äì Gets called in case the request fails. And a lot of other text so we need multiple lines.

Throws:

`SomeError()` ‚Äì For whatever reason in that case.

Returns:

Something.

:single-line-parameter-list: *(no value)*[¬∂](javascript.html#directive-option-js-function-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs parameters will be emitted on a single logical line, overriding [`javascript_maximum_signature_line_length`](../configuration.html#confval-javascript_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. js:method:: name(signature)[¬∂](javascript.html#directive-js-method "Link to this definition")

This directive is an alias for [`js:function`](javascript.html#directive-js-function "js:function directive"), however it describes a function that is implemented as a method on a class object.

Added in version 1.6.

:single-line-parameter-list: *(no value)*[¬∂](javascript.html#directive-option-js-method-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs parameters will be emitted on a single logical line, overriding [`javascript_maximum_signature_line_length`](../configuration.html#confval-javascript_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. js:class:: name[¬∂](javascript.html#directive-js-class "Link to this definition")

Describes a constructor that creates an object. This is basically like a function but will show up with a class prefix:

```
.. js:class:: MyAnimal(name[, age])

   :param string name: The name of the animal
   :param number age: an optional age for the animal
```

This is rendered as:

*class* MyAnimal(*name*\[, *age*])[¬∂](javascript.html#MyAnimal "Link to this definition")

Arguments:

- **name** (`string()`) ‚Äì The name of the animal
- **age** (`number()`) ‚Äì an optional age for the animal

:single-line-parameter-list: *(no value)*[¬∂](javascript.html#directive-option-js-class-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs parameters will be emitted on a single logical line, overriding [`javascript_maximum_signature_line_length`](../configuration.html#confval-javascript_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. js:data:: name[¬∂](javascript.html#directive-js-data "Link to this definition")

Describes a global variable or constant.

.. js:attribute:: object.name[¬∂](javascript.html#directive-js-attribute "Link to this definition")

Describes the attribute *name* of *object*.

These roles are provided to refer to the described objects:

:js:mod:[¬∂](javascript.html#role-js-mod "Link to this definition")

:js:func:[¬∂](javascript.html#role-js-func "Link to this definition")

:js:meth:[¬∂](javascript.html#role-js-meth "Link to this definition")

:js:class:[¬∂](javascript.html#role-js-class "Link to this definition")

:js:data:[¬∂](javascript.html#role-js-data "Link to this definition")

:js:attr:[¬∂](javascript.html#role-js-attr "Link to this definition")








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference


# The Mathematics Domain[¬∂](mathematics.html#the-mathematics-domain "Link to this heading")

Added in version 1.8.

The math domain (name **math**) provides the following roles:

:math:numref:[¬∂](mathematics.html#role-math-numref "Link to this definition")

Role for cross-referencing equations defined by [`math`](../restructuredtext/directives.html#directive-math "math directive") directive via their label. Example:

```
.. math:: e^{i\pi} + 1 = 0
   :label: euler

Euler's identity, equation :math:numref:`euler`, was elected one of the
most beautiful mathematical formulas.
```

Added in version 1.8.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page














The Basics


User guide




Community


Reference


# The Python Domain[¬∂](python.html#the-python-domain "Link to this heading")

Added in version 1.0.

The Python domain (name **py**) provides the following directives for module declarations:

.. py:module:: name[¬∂](python.html#directive-py-module "Link to this definition")

This directive marks the beginning of the description of a module (or package submodule, in which case the name should be fully qualified, including the package name). A description of the module such as the docstring can be placed in the body of the directive.

This directive will also cause an entry in the global module index.

Changed in version 5.2: Module directives support body content.

options

:platform: *platforms (comma separated list)*[¬∂](python.html#directive-option-py-module-platform "Link to this definition")

Indicate platforms which the module is available (if it is available on all platforms, the option should be omitted). The keys are short identifiers; examples that are in use include ‚ÄúIRIX‚Äù, ‚ÄúMac‚Äù, ‚ÄúWindows‚Äù and ‚ÄúUnix‚Äù. It is important to use a key which has already been used when applicable.

:synopsis: *purpose (text)*[¬∂](python.html#directive-option-py-module-synopsis "Link to this definition")

Consist of one sentence describing the module‚Äôs purpose ‚Äì it is currently only used in the Global Module Index.

:deprecated: *(no argument)*[¬∂](python.html#directive-option-py-module-deprecated "Link to this definition")

Mark a module as deprecated; it will be designated as such in various locations then.

.. py:currentmodule:: name[¬∂](python.html#directive-py-currentmodule "Link to this definition")

This directive tells Sphinx that the classes, functions etc. documented from here are in the given module (like [`py:module`](python.html#directive-py-module "py:module directive")), but it will not create index entries, an entry in the Global Module Index, or a link target for [`py:mod`](python.html#role-py-mod "py:mod role"). This is helpful in situations where documentation for things in a module is spread over multiple files or sections ‚Äì one location has the [`py:module`](python.html#directive-py-module "py:module directive") directive, the others only [`py:currentmodule`](python.html#directive-py-currentmodule "py:currentmodule directive").

The following directives are provided for module and class contents:

.. py:function:: name(parameters)[¬∂](python.html#directive-py-function "Link to this definition")

.. py:function:: name\[type parameters](parameters)

Describes a module-level function. The signature should include the parameters, together with optional type parameters, as given in the Python function definition, see [Python Signatures](python.html#signatures). For example:

```
.. py:function:: Timer.repeat(repeat=3, number=1_000_000)
.. py:function:: add[T](a: T, b: T) -> T
```

For methods you should use [`py:method`](python.html#directive-py-method "py:method directive").

The description normally includes information about the parameters required and how they are used (especially whether mutable objects passed as parameters are modified), side effects, and possible exceptions.

This information can (in any `py` directive) optionally be given in a structured form, see [Info field lists](python.html#info-field-lists).

options

:async: *(no value)*[¬∂](python.html#directive-option-py-function-async "Link to this definition")

Indicate the function is an async function.

Added in version 2.1.

:canonical: *(full qualified name including module name)*[¬∂](python.html#directive-option-py-function-canonical "Link to this definition")

Describe the location where the object is defined if the object is imported from other modules

Added in version 4.0.

:single-line-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-function-single-line-parameter-list "Link to this definition")

Ensures that the function‚Äôs arguments will be emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

:single-line-type-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-function-single-line-type-parameter-list "Link to this definition")

Ensure that the function‚Äôs type parameters are emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

.. py:data:: name[¬∂](python.html#directive-py-data "Link to this definition")

Describes global data in a module, including both variables and values used as ‚Äúdefined constants.‚Äù Consider using [`py:type`](python.html#directive-py-type "py:type directive") for type aliases instead and [`py:attribute`](python.html#directive-py-attribute "py:attribute directive") for class variables and instance attributes.

options

:type: *type of the variable (text)*[¬∂](python.html#directive-option-py-data-type "Link to this definition")

This will be parsed as a Python expression for cross-referencing the type annotation. As such, the argument to `:type:` should be a valid [annotation expression](https://typing.readthedocs.io/en/latest/spec/annotations.html#type-and-annotation-expressions).

Caution

The valid syntax for the `:type:` directive option differs from the syntax for the `:type:` [info field](python.html#info-field-lists). The `:type:` directive option does not understand reStructuredText markup or the `or` or `of` keywords, meaning unions must use `|` and sequences must use square brackets, and roles such as ``:ref:`...` `` cannot be used.

Added in version 2.4.

:value: *initial value of the variable (text)*[¬∂](python.html#directive-option-py-data-value "Link to this definition")

Added in version 2.4.

:canonical: *(full qualified name including module name)*[¬∂](python.html#directive-option-py-data-canonical "Link to this definition")

Describe the location where the object is defined if the object is imported from other modules

Added in version 4.0.

.. py:exception:: name[¬∂](python.html#directive-py-exception "Link to this definition")

.. py:exception:: name(parameters)

.. py:exception:: name\[type parameters](parameters)

Describes an exception class. The signature can, but need not include parentheses with constructor arguments, or may optionally include type parameters (see [**PEP 695**](https://peps.python.org/pep-0695/)).

options

:final: *(no value)*[¬∂](python.html#directive-option-py-exception-final "Link to this definition")

Indicate the class is a final class.

Added in version 3.1.

:single-line-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-exception-single-line-parameter-list "Link to this definition")

See [`py:class:single-line-parameter-list`](python.html#directive-option-py-class-single-line-parameter-list "py:class:single-line-parameter-list directive:option").

Added in version 7.1.

:single-line-type-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-exception-single-line-type-parameter-list "Link to this definition")

See [`py:class:single-line-type-parameter-list`](python.html#directive-option-py-class-single-line-type-parameter-list "py:class:single-line-type-parameter-list directive:option").

Added in version 7.1.

.. py:class:: name[¬∂](python.html#directive-py-class "Link to this definition")

.. py:class:: name(parameters)

.. py:class:: name\[type parameters](parameters)

Describes a class. The signature can optionally include type parameters (see [**PEP 695**](https://peps.python.org/pep-0695/)) or parentheses with parameters which will be shown as the constructor arguments. See also [Python Signatures](python.html#signatures).

Methods and attributes belonging to the class should be placed in this directive‚Äôs body. If they are placed outside, the supplied name should contain the class name so that cross-references still work. Example:

```
.. py:class:: Foo

   .. py:method:: quux()

-- or --

.. py:class:: Bar

.. py:method:: Bar.quux()
```

The first way is the preferred one.

options

:abstract: *(no value)*[¬∂](python.html#directive-option-py-class-abstract "Link to this definition")

Indicate that the class is an abstract base class. This produces the following output:

*abstract class* Cheese

A cheesy representation.

Added in version 8.2.

:canonical: *(full qualified name including module name)*[¬∂](python.html#directive-option-py-class-canonical "Link to this definition")

Describe the location where the object is defined if the object is imported from other modules

Added in version 4.0.

:final: *(no value)*[¬∂](python.html#directive-option-py-class-final "Link to this definition")

Indicate the class is a final class.

Added in version 3.1.

:single-line-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-class-single-line-parameter-list "Link to this definition")

Ensures that the class constructor‚Äôs arguments will be emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

:single-line-type-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-class-single-line-type-parameter-list "Link to this definition")

Ensure that the class type parameters are emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

.. py:attribute:: name[¬∂](python.html#directive-py-attribute "Link to this definition")

Describes an object data attribute. The description should include information about the type of the data to be expected and whether it may be changed directly. Type aliases should be documented with [`py:type`](python.html#directive-py-type "py:type directive").

options

:type: *type of the attribute (text)*[¬∂](python.html#directive-option-py-attribute-type "Link to this definition")

This will be parsed as a Python expression for cross-referencing the type annotation. As such, the argument to `:type:` should be a valid [annotation expression](https://typing.readthedocs.io/en/latest/spec/annotations.html#type-and-annotation-expressions).

Caution

The valid syntax for the `:type:` directive option differs from the syntax for the `:type:` [info field](python.html#info-field-lists). The `:type:` directive option does not understand reStructuredText markup or the `or` or `of` keywords, meaning unions must use `|` and sequences must use square brackets, and roles such as ``:ref:`...` `` cannot be used.

Added in version 2.4.

:value: *initial value of the attribute (text)*[¬∂](python.html#directive-option-py-attribute-value "Link to this definition")

Added in version 2.4.

:canonical: *(full qualified name including module name)*[¬∂](python.html#directive-option-py-attribute-canonical "Link to this definition")

Describe the location where the object is defined if the object is imported from other modules

Added in version 4.0.

.. py:property:: name[¬∂](python.html#directive-py-property "Link to this definition")

Describes an object property.

Added in version 4.0.

options

:abstract: *(no value)*[¬∂](python.html#directive-option-py-property-abstract "Link to this definition")

:abstractmethod: *(no value)*[¬∂](python.html#directive-option-py-property-abstractmethod "Link to this definition")

Indicate the property is abstract. This produces the following output:

*abstract property* Cheese.amount\_in\_stock

Cheese levels at the *National Cheese Emporium*.

Changed in version 8.2: The `:abstract:` alias is also supported.

:classmethod: *(no value)*[¬∂](python.html#directive-option-py-property-classmethod "Link to this definition")

Indicate the property is a classmethod.

Added in version 4.2.

:type: *type of the property (text)*[¬∂](python.html#directive-option-py-property-type "Link to this definition")

This will be parsed as a Python expression for cross-referencing the type annotation. As such, the argument to `:type:` should be a valid [annotation expression](https://typing.readthedocs.io/en/latest/spec/annotations.html#type-and-annotation-expressions).

Caution

The valid syntax for the `:type:` directive option differs from the syntax for the `:type:` [info field](python.html#info-field-lists). The `:type:` directive option does not understand reStructuredText markup or the `or` or `of` keywords, meaning unions must use `|` and sequences must use square brackets, and roles such as ``:ref:`...` `` cannot be used.

.. py:type:: name[¬∂](python.html#directive-py-type "Link to this definition")

Describe a [type alias](https://docs.python.org/3/library/typing.html#type-aliases "(in Python v3.13)").

The type that the alias represents should be described with the `canonical` option. This directive supports an optional description body.

For example:

```
.. py:type:: UInt64

   Represent a 64-bit positive integer.
```

will be rendered as follows:

*type* UInt64[¬∂](python.html#UInt64 "Link to this definition")

Represent a 64-bit positive integer.

options

:canonical: *(text)*[¬∂](python.html#directive-option-py-type-canonical "Link to this definition")

The canonical type represented by this alias, for example:

```
.. py:type:: StrPattern
   :canonical: str | re.Pattern[str]

   Represent a regular expression or a compiled pattern.
```

This is rendered as:

*type* StrPattern *= [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [re.Pattern](https://docs.python.org/3/library/re.html#re.Pattern "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*[¬∂](python.html#StrPattern "Link to this definition")

Represent a regular expression or a compiled pattern.

Added in version 7.4.

.. py:method:: name(parameters)[¬∂](python.html#directive-py-method "Link to this definition")

.. py:method:: name\[type parameters](parameters)

Describes an object method. The parameters should not include the `self` parameter. The description should include similar information to that described for `function`. See also [Python Signatures](python.html#signatures) and [Info field lists](python.html#info-field-lists).

options

:abstract: *(no value)*[¬∂](python.html#directive-option-py-method-abstract "Link to this definition")

:abstractmethod: *(no value)*[¬∂](python.html#directive-option-py-method-abstractmethod "Link to this definition")

Indicate the method is an abstract method. This produces the following output:

*abstractmethod* Cheese.order\_more\_stock()

Order more cheese (we‚Äôre fresh out!).

Added in version 2.1.

Changed in version 8.2: The `:abstract:` alias is also supported.

:async: *(no value)*[¬∂](python.html#directive-option-py-method-async "Link to this definition")

Indicate the method is an async method.

Added in version 2.1.

:canonical: *(full qualified name including module name)*[¬∂](python.html#directive-option-py-method-canonical "Link to this definition")

Describe the location where the object is defined if the object is imported from other modules

Added in version 4.0.

:classmethod: *(no value)*[¬∂](python.html#directive-option-py-method-classmethod "Link to this definition")

Indicate the method is a class method.

Added in version 2.1.

:final: *(no value)*[¬∂](python.html#directive-option-py-method-final "Link to this definition")

Indicate the method is a final method.

Added in version 3.1.

:single-line-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-method-single-line-parameter-list "Link to this definition")

Ensures that the method‚Äôs arguments will be emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

:single-line-type-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-method-single-line-type-parameter-list "Link to this definition")

Ensure that the method‚Äôs type parameters are emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.2.

:staticmethod: *(no value)*[¬∂](python.html#directive-option-py-method-staticmethod "Link to this definition")

Indicate the method is a static method.

Added in version 2.1.

.. py:staticmethod:: name(parameters)[¬∂](python.html#directive-py-staticmethod "Link to this definition")

.. py:staticmethod:: name\[type parameters](parameters)

Like [`py:method`](python.html#directive-py-method "py:method directive"), but indicates that the method is a static method.

Added in version 0.4.

.. py:classmethod:: name(parameters)[¬∂](python.html#directive-py-classmethod "Link to this definition")

.. py:classmethod:: name\[type parameters](parameters)

Like [`py:method`](python.html#directive-py-method "py:method directive"), but indicates that the method is a class method.

Added in version 0.6.

.. py:decorator:: name[¬∂](python.html#directive-py-decorator "Link to this definition")

.. py:decorator:: name(parameters)

.. py:decorator:: name\[type parameters](parameters)

Describes a decorator function. The signature should represent the usage as a decorator. For example, given the functions

```
def removename(func):
    func.__name__ = ''
    return func

def setnewname(name):
    def decorator(func):
        func.__name__ = name
        return func
    return decorator
```

the descriptions should look like this:

```
.. py:decorator:: removename

   Remove name of the decorated function.

.. py:decorator:: setnewname(name)

   Set name of the decorated function to *name*.
```

(as opposed to `.. py:decorator:: removename(func)`.)

Refer to a decorator function using the [`py:deco`](python.html#role-py-deco "py:deco role") role.

:single-line-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-decorator-single-line-parameter-list "Link to this definition")

Ensures that the decorator‚Äôs arguments will be emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

:single-line-type-parameter-list: *(no value)*[¬∂](python.html#directive-option-py-decorator-single-line-type-parameter-list "Link to this definition")

Ensure that the decorator‚Äôs type parameters are emitted on a single logical line, overriding [`python_maximum_signature_line_length`](../configuration.html#confval-python_maximum_signature_line_length) and [`maximum_signature_line_length`](../configuration.html#confval-maximum_signature_line_length).

Added in version 7.2.

.. py:decoratormethod:: name[¬∂](python.html#directive-py-decoratormethod "Link to this definition")

.. py:decoratormethod:: name(signature)

.. py:decoratormethod:: name\[type parameters](signature)

Same as [`py:decorator`](python.html#directive-py-decorator "py:decorator directive"), but for decorators that are methods.

Refer to a decorator method using the [`py:deco`](python.html#role-py-deco "py:deco role") role.

## Python Signatures[¬∂](python.html#python-signatures "Link to this heading")

Signatures of functions, methods and class constructors can be given like they would be written in Python. This can include default values, positional-only or keyword-only parameters, type annotations, and type parameters. For example:

```
.. py:function:: compile(source: str, filename: Path, symbol: str = 'file') -> ast.AST
```

compile(*source: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *filename: Path*, *symbol: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'file'*) ‚Üí [ast.AST](https://docs.python.org/3/library/ast.html#ast.AST "(in Python v3.13)")

For functions with optional parameters that don‚Äôt have default values (typically functions implemented in C extension modules without keyword argument support), you can list multiple versions of the same signature in a single directive:

compile(*source*)

compile(*source*, *filename*)

compile(*source*, *filename*, *symbol*)

Another approach is to use square brackets to specify the optional parts. When using square brackets, it is customary to place the opening bracket before the comma (`[,`).

compile(*source*\[, *filename*\[, *symbol*]])

Python 3.12 introduced *type parameters*, which are type variables declared directly within the class or function definition:

```
class AnimalList[AnimalT](list[AnimalT]):
    ...

def add[T](a: T, b: T) -> T:
    return a + b
```

The corresponding reStructuredText markup would be:

```
.. py:class:: AnimalList[AnimalT]

.. py:function:: add[T](a: T, b: T) -> T
```

See also

[**PEP 695**](https://peps.python.org/pep-0695/) and [**PEP 696**](https://peps.python.org/pep-0696/), for details and the full specification.

## Info field lists[¬∂](python.html#info-field-lists "Link to this heading")

Added in version 0.4.

Changed in version 3.0: meta fields are added.

Inside Python object description directives, reStructuredText field lists with these fields are recognized and formatted nicely:

- `param`, `parameter`, `arg`, `argument`, `key`, `keyword`: Description of a parameter.
- `type`: Type of a parameter. Creates a link if possible.
- `raises`, `raise`, `except`, `exception`: That (and when) a specific exception is raised.
- `var`, `ivar`, `cvar`: Description of a variable.
- `vartype`: Type of a variable. Creates a link if possible.
- `returns`, `return`: Description of the return value.
- `rtype`: Return type. Creates a link if possible.
- `meta`: Add metadata to description of the python object. The metadata will not be shown on output document. For example, `:meta private:` indicates the python object is private member. It is used in [`sphinx.ext.autodoc`](../extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") for filtering members.

Note

In current release, all `var`, `ivar` and `cvar` are represented as ‚ÄúVariable‚Äù. There is no difference at all.

The field names must consist of one of these keywords and an argument (except for `returns` and `rtype`, which do not need an argument). This is best explained by an example:

```
.. py:function:: send_message(sender, recipient, message_body, [priority=1])

   Send a message to a recipient

   :param str sender: The person sending the message
   :param str recipient: The recipient of the message
   :param str message_body: The body of the message
   :param priority: The priority of the message, can be a number 1-5
   :type priority: int or None
   :return: the message id
   :rtype: int
   :raises ValueError: if the message_body exceeds 160 characters
   :raises TypeError: if the message_body is not a basestring
```

This will render like this:

send\_message(*sender*, *recipient*, *message\_body*\[, *priority=1*])[¬∂](python.html#send_message "Link to this definition")

Send a message to a recipient

Parameters:

- **sender** ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")) ‚Äì The person sending the message
- **recipient** ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")) ‚Äì The recipient of the message
- **message\_body** ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")) ‚Äì The body of the message
- **priority** ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") *or None*) ‚Äì The priority of the message, can be a number 1-5

Returns:

the message id

Return type:

[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Raises:

- [**ValueError**](https://docs.python.org/3/library/exceptions.html#ValueError "(in Python v3.13)") ‚Äì if the message\_body exceeds 160 characters
- [**TypeError**](https://docs.python.org/3/library/exceptions.html#TypeError "(in Python v3.13)") ‚Äì if the message\_body is not a basestring

It is also possible to combine parameter type and description, if the type is a single word, like this:

```
:param int priority: The priority of the message, can be a number 1-5
```

Added in version 1.5.

Container types such as lists and dictionaries can be linked automatically using the following syntax:

```
:type priorities: list(int)
:type priorities: list[int]
:type mapping: dict(str, int)
:type mapping: dict[str, int]
:type point: tuple(float, float)
:type point: tuple[float, float]
```

Multiple types in a type field will be linked automatically if separated by either the vertical bar (`|`) or the word ‚Äúor‚Äù:

```
:type an_arg: int or None
:vartype a_var: str or int
:rtype: float or str

:type an_arg: int | None
:vartype a_var: str | int
:rtype: float | str
```

## Cross-referencing Python objects[¬∂](python.html#cross-referencing-python-objects "Link to this heading")

The following roles refer to objects in modules and are possibly hyperlinked if a matching identifier is found:

:py:mod:[¬∂](python.html#role-py-mod "Link to this definition")

Reference a module; a dotted name may be used. This should also be used for package names.

:py:func:[¬∂](python.html#role-py-func "Link to this definition")

Reference a Python function; dotted names may be used. The role text needs not include trailing parentheses to enhance readability; they will be added automatically by Sphinx if the [`add_function_parentheses`](../configuration.html#confval-add_function_parentheses) config value is `True` (the default).

:py:deco:[¬∂](python.html#role-py-deco "Link to this definition")

Reference a Python decorator; dotted names may be used. The rendered output will be prepended with an at-sign (`@`), for example: ``:py:deco:`removename` `` produces [`@removename`](python.html#removename "removename").

:py:data:[¬∂](python.html#role-py-data "Link to this definition")

Reference a module-level variable.

:py:const:[¬∂](python.html#role-py-const "Link to this definition")

Reference a ‚Äúdefined‚Äù constant. This may be a Python variable that is not intended to be changed.

:py:class:[¬∂](python.html#role-py-class "Link to this definition")

Reference a class; a dotted name may be used.

:py:meth:[¬∂](python.html#role-py-meth "Link to this definition")

Reference a method of an object. The role text can include the type name and the method name; if it occurs within the description of a type, the type name can be omitted. A dotted name may be used.

:py:attr:[¬∂](python.html#role-py-attr "Link to this definition")

Reference a data attribute of an object.

Note

The role is also able to refer to property.

:py:type:[¬∂](python.html#role-py-type "Link to this definition")

Reference a type alias.

:py:exc:[¬∂](python.html#role-py-exc "Link to this definition")

Reference an exception. A dotted name may be used.

:py:obj:[¬∂](python.html#role-py-obj "Link to this definition")

Reference an object of unspecified type. Useful e.g. as the [`default_role`](../configuration.html#confval-default_role).

Added in version 0.4.

### Target specification[¬∂](python.html#target-specification "Link to this heading")

The target can be specified as a fully qualified name (e.g. ``:py:meth:`my_module.MyClass.my_method` ``) or any shortened version (e.g. ``:py:meth:`MyClass.my_method` `` or ``:py:meth:`my_method` ``). See [target resolution](python.html#target-resolution) for details on the resolution of shortened names.

[Cross-referencing modifiers](../referencing.html#xref-modifiers) can be applied. In short:

- You may supply an explicit title and reference target: ``:py:mod:`mathematical functions <math>` `` will refer to the `math` module, but the link text will be ‚Äúmathematical functions‚Äù.
- If you prefix the content with an exclamation mark (`!`), no reference/hyperlink will be created.
- If you prefix the content with `~`, the link text will only be the last component of the target. For example, ``:py:meth:`~queue.Queue.get` `` will refer to `queue.Queue.get` but only display `get` as the link text.

### Target resolution[¬∂](python.html#target-resolution "Link to this heading")

A given link target name is resolved to an object using the following strategy:

Names in these roles are searched first without any further qualification, then with the current module name prepended, then with the current module and class name (if any) prepended.

If you prefix the name with a dot (`.`), this order is reversed. For example, in the documentation of Python‚Äôs [`codecs`](https://docs.python.org/3/library/codecs.html#module-codecs "(in Python v3.13)") module, ``:py:func:`open` `` always refers to the built-in function, while ``:py:func:`.open` `` refers to [`codecs.open()`](https://docs.python.org/3/library/codecs.html#codecs.open "(in Python v3.13)").

A similar heuristic is used to determine whether the name is an attribute of the currently documented class.

Also, if the name is prefixed with a dot, and no exact match is found, the target is taken as a suffix and all object names with that suffix are searched. For example, ``:py:meth:`.TarFile.close` `` references the `tarfile.TarFile.close()` function, even if the current module is not `tarfile`. Since this can get ambiguous, if there is more than one possible match, you will get a warning from Sphinx.

Note that you can combine the `~` and `.` prefixes: ``:py:meth:`~.TarFile.close` `` will reference the `tarfile.TarFile.close()` method, but the visible link caption will only be `close()`.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# The reStructuredText Domain[¬∂](restructuredtext.html#the-restructuredtext-domain "Link to this heading")

Added in version 1.0.

The reStructuredText domain (name **rst**) provides the following directives:

.. rst:directive:: name[¬∂](restructuredtext.html#directive-rst-directive "Link to this definition")

Describes a reStructuredText directive. The *name* can be a single directive name or actual directive syntax (.. prefix and :: suffix) with arguments that will be rendered differently. For example:

```
.. rst:directive:: foo

   Foo description.

.. rst:directive:: .. bar:: baz

   Bar description.
```

will be rendered as:

.. foo::[¬∂](restructuredtext.html#directive-foo "Link to this definition")

Foo description.

.. bar:: baz[¬∂](restructuredtext.html#directive-bar "Link to this definition")

Bar description.

.. rst:directive:option:: name[¬∂](restructuredtext.html#directive-rst-directive-option "Link to this definition")

Describes an option for reStructuredText directive. The *name* can be a single option name or option name with arguments which separated with colon (`:`). For example:

```
.. rst:directive:: toctree

   .. rst:directive:option:: caption: caption of ToC

   .. rst:directive:option:: glob
```

will be rendered as:

.. toctree::

:caption: *caption of ToC*

:glob:

options

:type: *description of argument (text)*[¬∂](restructuredtext.html#directive-option-rst-directive-option-type "Link to this definition")

Describe the type of option value.

For example:

```
.. rst:directive:: toctree

   .. rst:directive:option:: maxdepth
      :type: integer or no value
```

Added in version 2.1.

.. rst:role:: name[¬∂](restructuredtext.html#directive-rst-role "Link to this definition")

Describes a reStructuredText role. For example:

```
.. rst:role:: foo

   Foo description.
```

will be rendered as:

:foo:[¬∂](restructuredtext.html#role-foo "Link to this definition")

Foo description.

These roles are provided to refer to the described objects:

:rst:dir:[¬∂](restructuredtext.html#role-rst-dir "Link to this definition")

Reference directives and directive options. Examples:

- Use ``:rst:dir:`my-directive` `` to reference a directive.
- Use ``:rst:dir:`my-directive:my-option` `` to reference a directive option.

:rst:role:[¬∂](restructuredtext.html#role-rst-role "Link to this definition")

Reference a role. Example: ``:rst:role:`my-role` ``.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª
- [Domains](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# The Standard Domain[¬∂](standard.html#the-standard-domain "Link to this heading")

Added in version 1.0.

The so-called ‚Äústandard‚Äù domain collects all markup that doesn‚Äôt warrant a domain of its own. Its directives and roles are not prefixed with a domain name.

The standard domain is also where custom object descriptions, added using the [`add_object_type()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_object_type "sphinx.application.Sphinx.add_object_type") API, are placed.

There is a set of directives allowing documenting command-line programs:

.. option:: name args, name args, ...[¬∂](standard.html#directive-option "Link to this definition")

Describes a command line argument or switch. Option argument names should be enclosed in angle brackets. Examples:

```
.. option:: dest_dir

   Destination directory.

.. option:: -m <module>, --module <module>

   Run a module as a script.
```

The directive will create cross-reference targets for the given options, referenceable by [`option`](../referencing.html#role-option "option role") (in the example case, you‚Äôd use something like ``:option:`dest_dir` ``, ``:option:`-m` ``, or ``:option:`--module` ``).

Changed in version 5.3: One can cross-reference including an option value: ``:option:`--module=foobar` ``, ,\`\`:option:‚Äìmodule\[=foobar]\`\` or ``:option:`--module foobar` ``.

Use [`option_emphasise_placeholders`](../configuration.html#confval-option_emphasise_placeholders) for parsing of ‚Äúvariable part‚Äù of a literal text (similarly to the [`samp`](../restructuredtext/roles.html#role-samp "samp role") role).

`cmdoption` directive is a deprecated alias for the `option` directive.

.. confval:: name[¬∂](standard.html#directive-confval "Link to this definition")

Added in version 7.4.

Describes a configuration value or setting that the documented code or program uses or defines. Referenceable by [`confval`](../referencing.html#role-confval "confval role").

:type: *(text)*[¬∂](standard.html#directive-option-confval-type "Link to this definition")

Describes the type of the configuration value. This is optional, and if specified will be interpreted as reStructuredText.

:default: *(text)*[¬∂](standard.html#directive-option-confval-default "Link to this definition")

Describes the default value of the configuration value. This is optional, and if specified will be interpreted as reStructuredText.

Example:

```
.. confval:: the_answer
   :type: ``int`` (a *number*)
   :default: **42**

   This is a setting that controls the value of the answer.
```

will be rendered as follows:

the\_answer[¬∂](standard.html#confval-the_answer "Link to this definition")

Type:

`int` (a *number*)

Default:

**42**

This is a setting that controls the value of the answer.

.. envvar:: name[¬∂](standard.html#directive-envvar "Link to this definition")

Describes an environment variable that the documented code or program uses or defines. Referenceable by [`envvar`](../referencing.html#role-envvar "envvar role").

.. program:: name[¬∂](standard.html#directive-program "Link to this definition")

Like [`py:currentmodule`](python.html#directive-py-currentmodule "py:currentmodule directive"), this directive produces no output. Instead, it serves to notify Sphinx that all following [`option`](standard.html#directive-option "option directive") directives document options for the program called *name*.

If you use [`program`](standard.html#directive-program "program directive"), you have to qualify the references in your [`option`](../referencing.html#role-option "option role") roles by the program name, so if you have the following situation

```
.. program:: rm

.. option:: -r

   Work recursively.

.. program:: svn

.. option:: -r <revision>

   Specify the revision to work upon.
```

then ``:option:`rm -r` `` would refer to the first option, while ``:option:`svn -r` `` would refer to the second one.

If `None` is passed to the argument, the directive will reset the current program name.

The program name may contain spaces (in case you want to document subcommands like `svn add` and `svn commit` separately).

Added in version 0.5.

There is also a very generic object description directive, which is not tied to any domain:

.. describe:: text[¬∂](standard.html#directive-describe "Link to this definition")

.. object:: text[¬∂](standard.html#directive-object "Link to this definition")

This directive produces the same formatting as the specific ones provided by domains, but does not create index entries or cross-referencing targets. Example:

```
.. describe:: PAPER

   You can set this variable to select a paper size.
```








### Navigation

- [Documentation](../../index.html) ¬ª
- [Using Sphinx](../index.html) ¬ª

### On this page
























The Basics


User guide



Community


Reference


# Builders[¬∂](index.html#builders "Link to this heading")

These are the built-in Sphinx builders. More builders can be added by [extensions](../extensions/index.html).

The builder‚Äôs ‚Äúname‚Äù must be given to the **-M** or **-b** command-line options of **sphinx-build** to select a builder.

The most common builders are:

**html**

Build HTML pages. This is the default builder.

**dirhtml**

Build HTML pages, but with a single directory per document. Makes for prettier URLs (no `.html`) if served from a webserver.

**singlehtml**

Build a single HTML with the whole content.

**htmlhelp**, **qthelp**, **devhelp**, **epub**

Build HTML files with additional information for building a documentation collection in one of these formats.

**applehelp**

Build an Apple Help Book. Requires **hiutil** and **codesign**, which are not Open Source and presently only available on Mac OS X 10.6 and higher.

**latex**

Build LaTeX sources that can be compiled to a PDF document using **pdflatex**.

**man**

Build manual pages in groff format for UNIX systems.

**texinfo**

Build Texinfo files that can be processed into Info files using **makeinfo**.

**text**

Build plain text files.

**gettext**

Build gettext-style message catalogs (`.pot` files).

**doctest**

Run all doctests in the documentation, if the [`doctest`](../extensions/doctest.html#module-sphinx.ext.doctest "sphinx.ext.doctest: Test snippets in the documentation.") extension is enabled.

**linkcheck**

Check the integrity of all external links.

**xml**

Build Docutils-native XML files.

**pseudoxml**

Build compact pretty-printed ‚Äúpseudo-XML‚Äù files displaying the internal structure of the intermediate document trees.

* * *

*class* sphinx.builders.html.StandaloneHTMLBuilder[\[source\]](../../_modules/sphinx/builders/html.html#StandaloneHTMLBuilder)[¬∂](index.html#sphinx.builders.html.StandaloneHTMLBuilder "Link to this definition")

This is the standard HTML builder. Its output is a directory with HTML files, complete with style sheets and optionally the reStructuredText sources. There are quite a few configuration values that customize the output of this builder, see the chapter [Options for HTML output](../configuration.html#html-options) for details.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinx.builders.html.StandaloneHTMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinx.builders.html.StandaloneHTMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinx.builders.html.StandaloneHTMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

*class* sphinx.builders.dirhtml.DirectoryHTMLBuilder[\[source\]](../../_modules/sphinx/builders/dirhtml.html#DirectoryHTMLBuilder)[¬∂](index.html#sphinx.builders.dirhtml.DirectoryHTMLBuilder "Link to this definition")

This is a subclass of the standard HTML builder. Its output is a directory with HTML files, where each file is called `index.html` and placed in a subdirectory named like its page name. For example, the document `markup/rest.rst` will not result in an output file `markup/rest.html`, but `markup/rest/index.html`. When generating links between pages, the `index.html` is omitted, so that the URL would look like `markup/rest/`.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'dirhtml'*[¬∂](index.html#sphinx.builders.dirhtml.DirectoryHTMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinx.builders.dirhtml.DirectoryHTMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinx.builders.dirhtml.DirectoryHTMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 0.6.

*class* sphinx.builders.singlehtml.SingleFileHTMLBuilder[\[source\]](../../_modules/sphinx/builders/singlehtml.html#SingleFileHTMLBuilder)[¬∂](index.html#sphinx.builders.singlehtml.SingleFileHTMLBuilder "Link to this definition")

This is an HTML builder that combines the whole project in one output file. (Obviously this only works with smaller projects.) The file is named like the root document. No indices will be generated.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'singlehtml'*[¬∂](index.html#sphinx.builders.singlehtml.SingleFileHTMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinx.builders.singlehtml.SingleFileHTMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinx.builders.singlehtml.SingleFileHTMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.0.

*class* sphinxcontrib.htmlhelp.HTMLHelpBuilder[\[source\]](../../_modules/sphinxcontrib/htmlhelp.html#HTMLHelpBuilder)[¬∂](index.html#sphinxcontrib.htmlhelp.HTMLHelpBuilder "Link to this definition")

This builder produces the same output as the standalone HTML builder, but also generates HTML Help support files that allow the Microsoft HTML Help Workshop to compile them into a CHM file.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'htmlhelp'*[¬∂](index.html#sphinxcontrib.htmlhelp.HTMLHelpBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.htmlhelp.HTMLHelpBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinxcontrib.htmlhelp.HTMLHelpBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

*class* sphinxcontrib.qthelp.QtHelpBuilder[\[source\]](../../_modules/sphinxcontrib/qthelp.html#QtHelpBuilder)[¬∂](index.html#sphinxcontrib.qthelp.QtHelpBuilder "Link to this definition")

This builder produces the same output as the standalone HTML builder, but also generates [Qt help](https://doc.qt.io/qt-4.8/qthelp-framework.html) collection support files that allow the Qt collection generator to compile them.

Changed in version 2.0: Moved to sphinxcontrib.qthelp from sphinx.builders package.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'qthelp'*[¬∂](index.html#sphinxcontrib.qthelp.QtHelpBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.qthelp.QtHelpBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinxcontrib.qthelp.QtHelpBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

*class* sphinxcontrib.applehelp.AppleHelpBuilder[\[source\]](../../_modules/sphinxcontrib/applehelp.html#AppleHelpBuilder)[¬∂](index.html#sphinxcontrib.applehelp.AppleHelpBuilder "Link to this definition")

This builder produces an Apple Help Book based on the same output as the standalone HTML builder.

If the source directory contains any `.lproj` folders, the one corresponding to the selected language will have its contents merged with the generated output. These folders will be ignored by all other documentation types.

In order to generate a valid help book, this builder requires the command line tool **hiutil**, which is only available on Mac OS X 10.6 and above. You can disable the indexing step by setting [`applehelp_disable_external_tools`](../configuration.html#confval-applehelp_disable_external_tools) to `True`, in which case the output will not be valid until **hiutil** has been run on all of the `.lproj` folders within the bundle.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'applehelp'*[¬∂](index.html#sphinxcontrib.applehelp.AppleHelpBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.applehelp.AppleHelpBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/png', 'image/gif', 'image/jpeg', 'image/tiff', 'image/jp2', 'image/svg+xml']*[¬∂](index.html#sphinxcontrib.applehelp.AppleHelpBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.3.

Changed in version 2.0: Moved to sphinxcontrib.applehelp from sphinx.builders package.

*class* sphinxcontrib.devhelp.DevhelpBuilder[\[source\]](../../_modules/sphinxcontrib/devhelp.html#DevhelpBuilder)[¬∂](index.html#sphinxcontrib.devhelp.DevhelpBuilder "Link to this definition")

This builder produces the same output as the standalone HTML builder, but also generates [GNOME Devhelp](https://wiki.gnome.org/Apps/Devhelp) support file that allows the GNOME Devhelp reader to view them.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'devhelp'*[¬∂](index.html#sphinxcontrib.devhelp.DevhelpBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.devhelp.DevhelpBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinxcontrib.devhelp.DevhelpBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Changed in version 2.0: Moved to sphinxcontrib.devhelp from sphinx.builders package.

*class* sphinx.builders.epub3.Epub3Builder[\[source\]](../../_modules/sphinx/builders/epub3.html#Epub3Builder)[¬∂](index.html#sphinx.builders.epub3.Epub3Builder "Link to this definition")

This builder produces the same output as the standalone HTML builder, but also generates an *epub* file for ebook readers. See [Epub info](../../faq.html#epub-faq) for details about it. For definition of the epub format, have a look at [https://idpf.org/epub](https://idpf.org/epub) or [https://en.wikipedia.org/wiki/EPUB](https://en.wikipedia.org/wiki/EPUB). The builder creates *EPUB 3* files.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'epub'*[¬∂](index.html#sphinx.builders.epub3.Epub3Builder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinx.builders.epub3.Epub3Builder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinx.builders.epub3.Epub3Builder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.4.

Changed in version 1.5: Since Sphinx 1.5, the epub3 builder is used as the default epub builder.

*class* sphinx.builders.latex.LaTeXBuilder[\[source\]](../../_modules/sphinx/builders/latex.html#LaTeXBuilder)[¬∂](index.html#sphinx.builders.latex.LaTeXBuilder "Link to this definition")

This builder produces LaTeX source files in the output directory. The actual PDF builds happen inside this output directory and need to be triggered in a second step. This can be done via **make all-pdf** there. To combine the two steps into only one, use [`sphinx-build -M`](../../man/sphinx-build.html#cmdoption-sphinx-build-M) (i.e. `-M latexpdf` not `-b latexpdf`) or **make latexpdf** at the project root.

See [`latex_documents`](../configuration.html#confval-latex_documents) and the chapter [Options for LaTeX output](../configuration.html#latex-options) for available options.

PDF builds need a sufficiently complete LaTeX installation. The testing is currently (since 5.3.0) done on Ubuntu 22.04LTS, whose LaTeX distribution matches upstream TeXLive 2021 as of 2022/02/04, but PDF builds can be successfully done on much older LaTeX installations.

At any rate, on Ubuntu for example, following packages must all be present:

- `texlive-latex-recommended`
- `texlive-fonts-recommended`
- `texlive-fonts-extra` (needed for `fontawesome5`, see the 7.4.0 change notice below)
- `tex-gyre` (if [`latex_engine`](../configuration.html#confval-latex_engine) left to default)
- `texlive-latex-extra`
- `latexmk`

Changed in version 4.0.0: TeX Gyre fonts now required for `'pdflatex'` engine (default).

Changed in version 7.4.0: LaTeX package `xcolor` is now required (it is part of Ubuntu `texlive-latex-recommended` anyhow). The LaTeX package `fontawesome5` is recommended. See the [‚Äòsphinxsetup‚Äô](../../latex.html#latexsphinxsetup) `iconpackage` key for more.

Additional packages are needed in some circumstances:

- `texlive-lang-cyrillic` for Cyrillic (and also then `cm-super` if using the default fonts),
- `texlive-lang-greek` for Greek (and also then `cm-super` if using the default fonts),
- `texlive-xetex` if [`latex_engine`](../configuration.html#confval-latex_engine) is `'xelatex'`,
- `texlive-luatex` if [`latex_engine`](../configuration.html#confval-latex_engine) is `'lualatex'`,
- `fonts-freefont-otf` if [`latex_engine`](../configuration.html#confval-latex_engine) is either `'xelatex'` or `'lualatex'`.

Note

Since 1.6, `make latexpdf` uses on GNU/Linux and macOS **latexmk**, as it makes sure the needed number of runs is automatically executed. On Windows the PDF builds execute a fix number of LaTeX runs (three, then `makeindex`, then two more).

One can pass to `latexmk` options via the `LATEXMKOPTS` Makefile variable. For example:

```
make latexpdf LATEXMKOPTS="-silent"
```

reduces console output to a minimum.

Also, if `latexmk` is at version 4.52b or higher (January 2017) `LATEXMKOPTS="-xelatex"` speeds up PDF builds via XeLateX in case of numerous graphics inclusions.

To pass options directly to the `(pdf|xe|lua)latex` binary, use variable `LATEXOPTS`, for example:

```
make latexpdf LATEXOPTS="--halt-on-error"
```

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'latex'*[¬∂](index.html#sphinx.builders.latex.LaTeXBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'latex'*[¬∂](index.html#sphinx.builders.latex.LaTeXBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['application/pdf', 'image/png', 'image/jpeg']*[¬∂](index.html#sphinx.builders.latex.LaTeXBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Note that a direct PDF builder is being provided by [rinohtype](https://github.com/brechtm/rinohtype). The builder‚Äôs name is `rinoh`. Refer to the [rinohtype manual](https://www.mos6581.org/rinohtype/master/quickstart.html#sphinx-builder) for details.

*class* sphinx.builders.text.TextBuilder[\[source\]](../../_modules/sphinx/builders/text.html#TextBuilder)[¬∂](index.html#sphinx.builders.text.TextBuilder "Link to this definition")

This builder produces a text file for each reStructuredText file. This is almost the same as the reStructuredText source, but with much of the markup stripped for better readability.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'text'*[¬∂](index.html#sphinx.builders.text.TextBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'text'*[¬∂](index.html#sphinx.builders.text.TextBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.text.TextBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 0.4.

*class* sphinx.builders.manpage.ManualPageBuilder[\[source\]](../../_modules/sphinx/builders/manpage.html#ManualPageBuilder)[¬∂](index.html#sphinx.builders.manpage.ManualPageBuilder "Link to this definition")

This builder produces manual pages in the groff format. You have to specify which documents are to be included in which manual pages via the [`man_pages`](../configuration.html#confval-man_pages) configuration value.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'man'*[¬∂](index.html#sphinx.builders.manpage.ManualPageBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'man'*[¬∂](index.html#sphinx.builders.manpage.ManualPageBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.manpage.ManualPageBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.0.

*class* sphinx.builders.texinfo.TexinfoBuilder[\[source\]](../../_modules/sphinx/builders/texinfo.html#TexinfoBuilder)[¬∂](index.html#sphinx.builders.texinfo.TexinfoBuilder "Link to this definition")

This builder produces Texinfo files that can be processed into Info files by the **makeinfo** program. You have to specify which documents are to be included in which Texinfo files via the [`texinfo_documents`](../configuration.html#confval-texinfo_documents) configuration value.

The Info format is the basis of the on-line help system used by GNU Emacs and the terminal-based program **info**. See [Texinfo info](../../faq.html#texinfo-faq) for more details. The Texinfo format is the official documentation system used by the GNU project. More information on Texinfo can be found at [https://www.gnu.org/software/texinfo/](https://www.gnu.org/software/texinfo/).

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'texinfo'*[¬∂](index.html#sphinx.builders.texinfo.TexinfoBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'texinfo'*[¬∂](index.html#sphinx.builders.texinfo.TexinfoBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/png', 'image/jpeg', 'image/gif']*[¬∂](index.html#sphinx.builders.texinfo.TexinfoBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.1.

*class* sphinxcontrib.serializinghtml.SerializingHTMLBuilder[\[source\]](../../_modules/sphinxcontrib/serializinghtml.html#SerializingHTMLBuilder)[¬∂](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder "Link to this definition")

This builder uses a module that implements the Python serialization API (`pickle`, `simplejson`, `phpserialize`, and others) to dump the generated HTML documentation. The pickle builder is a subclass of it.

A concrete subclass of this builder serializing to the [PHP serialization](https://pypi.org/project/phpserialize/) format could look like this:

```
import phpserialize

class PHPSerializedBuilder(SerializingHTMLBuilder):
    name = 'phpserialized'
    implementation = phpserialize
    out_suffix = '.file.phpdump'
    globalcontext_filename = 'globalcontext.phpdump'
    searchindex_filename = 'searchindex.phpdump'
```

implementation[¬∂](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.implementation "Link to this definition")

A module that implements `dump()`, `load()`, `dumps()` and `loads()` functions that conform to the functions with the same names from the pickle module. Known modules implementing this interface are `simplejson`, `phpserialize`, `plistlib`, and others.

out\_suffix[¬∂](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.out_suffix "Link to this definition")

The suffix for all regular files.

globalcontext\_filename[¬∂](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.globalcontext_filename "Link to this definition")

The filename for the file that contains the ‚Äúglobal context‚Äù. This is a dict with some general configuration values such as the name of the project.

searchindex\_filename[¬∂](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.searchindex_filename "Link to this definition")

The filename for the search index Sphinx generates.

See [Serialization builder details](index.html#serialization-details) for details about the output format.

Added in version 0.5.

*class* sphinxcontrib.serializinghtml.PickleHTMLBuilder[\[source\]](../../_modules/sphinxcontrib/serializinghtml.html#PickleHTMLBuilder)[¬∂](index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder "Link to this definition")

This builder produces a directory with pickle files containing mostly HTML fragments and TOC information, for use of a web application (or custom postprocessing tool) that doesn‚Äôt use the standard HTML templates.

See [Serialization builder details](index.html#serialization-details) for details about the output format.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'pickle'*[¬∂](index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

The old name `web` still works as well.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

The file suffix is `.fpickle`. The global context is called `globalcontext.pickle`, the search index `searchindex.pickle`.

*class* sphinxcontrib.serializinghtml.JSONHTMLBuilder[\[source\]](../../_modules/sphinxcontrib/serializinghtml.html#JSONHTMLBuilder)[¬∂](index.html#sphinxcontrib.serializinghtml.JSONHTMLBuilder "Link to this definition")

This builder produces a directory with JSON files containing mostly HTML fragments and TOC information, for use of a web application (or custom postprocessing tool) that doesn‚Äôt use the standard HTML templates.

See [Serialization builder details](index.html#serialization-details) for details about the output format.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'json'*[¬∂](index.html#sphinxcontrib.serializinghtml.JSONHTMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'html'*[¬∂](index.html#sphinxcontrib.serializinghtml.JSONHTMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \['image/svg+xml', 'image/png', 'image/gif', 'image/jpeg']*[¬∂](index.html#sphinxcontrib.serializinghtml.JSONHTMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

The file suffix is `.fjson`. The global context is called `globalcontext.json`, the search index `searchindex.json`.

Added in version 0.5.

*class* sphinx.builders.gettext.MessageCatalogBuilder[\[source\]](../../_modules/sphinx/builders/gettext.html#MessageCatalogBuilder)[¬∂](index.html#sphinx.builders.gettext.MessageCatalogBuilder "Link to this definition")

This builder produces gettext-style message catalogs. Each top-level file or subdirectory grows a single `.pot` catalog template.

See the documentation on [Internationalization](../advanced/intl.html#intl) for further reference.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'gettext'*[¬∂](index.html#sphinx.builders.gettext.MessageCatalogBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](index.html#sphinx.builders.gettext.MessageCatalogBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.gettext.MessageCatalogBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.1.

*class* sphinx.builders.changes.ChangesBuilder[\[source\]](../../_modules/sphinx/builders/changes.html#ChangesBuilder)[¬∂](index.html#sphinx.builders.changes.ChangesBuilder "Link to this definition")

This builder produces an HTML overview of all [`versionadded`](../restructuredtext/directives.html#directive-versionadded "versionadded directive"), [`versionchanged`](../restructuredtext/directives.html#directive-versionchanged "versionchanged directive"), [`deprecated`](../restructuredtext/directives.html#directive-deprecated "deprecated directive") and [`versionremoved`](../restructuredtext/directives.html#directive-versionremoved "versionremoved directive") directives for the current [`version`](../configuration.html#confval-version). This is useful to generate a changelog file, for example.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'changes'*[¬∂](index.html#sphinx.builders.changes.ChangesBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](index.html#sphinx.builders.changes.ChangesBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.changes.ChangesBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

*class* sphinx.builders.dummy.DummyBuilder[\[source\]](../../_modules/sphinx/builders/dummy.html#DummyBuilder)[¬∂](index.html#sphinx.builders.dummy.DummyBuilder "Link to this definition")

This builder produces no output. The input is only parsed and checked for consistency. This is useful for linting purposes.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'dummy'*[¬∂](index.html#sphinx.builders.dummy.DummyBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.dummy.DummyBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.4.

*class* sphinx.builders.linkcheck.CheckExternalLinksBuilder[\[source\]](../../_modules/sphinx/builders/linkcheck.html#CheckExternalLinksBuilder)[¬∂](index.html#sphinx.builders.linkcheck.CheckExternalLinksBuilder "Link to this definition")

This builder scans all documents for external links, tries to open them with `requests`, and writes an overview which ones are broken and redirected to standard output and to `output.txt` in the output directory.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'linkcheck'*[¬∂](index.html#sphinx.builders.linkcheck.CheckExternalLinksBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](index.html#sphinx.builders.linkcheck.CheckExternalLinksBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.linkcheck.CheckExternalLinksBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Changed in version 1.5: Since Sphinx 1.5, the linkcheck builder uses the requests module.

Changed in version 3.4: The linkcheck builder retries links when servers apply rate limits.

*class* sphinx.builders.xml.XMLBuilder[\[source\]](../../_modules/sphinx/builders/xml.html#XMLBuilder)[¬∂](index.html#sphinx.builders.xml.XMLBuilder "Link to this definition")

This builder produces Docutils-native XML files. The output can be transformed with standard XML tools such as XSLT processors into arbitrary final forms.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'xml'*[¬∂](index.html#sphinx.builders.xml.XMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'xml'*[¬∂](index.html#sphinx.builders.xml.XMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.xml.XMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.2.

*class* sphinx.builders.xml.PseudoXMLBuilder[\[source\]](../../_modules/sphinx/builders/xml.html#PseudoXMLBuilder)[¬∂](index.html#sphinx.builders.xml.PseudoXMLBuilder "Link to this definition")

This builder is used for debugging the Sphinx/Docutils ‚ÄúReader to Transform to Writer‚Äù pipeline. It produces compact pretty-printed ‚Äúpseudo-XML‚Äù, files where nesting is indicated by indentation (no end-tags). External attributes for all elements are output, and internal attributes for any leftover ‚Äúpending‚Äù elements are also given.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'pseudoxml'*[¬∂](index.html#sphinx.builders.xml.PseudoXMLBuilder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'pseudoxml'*[¬∂](index.html#sphinx.builders.xml.PseudoXMLBuilder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](../../extdev/utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](index.html#sphinx.builders.xml.PseudoXMLBuilder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

Added in version 1.2.

Built-in Sphinx extensions that offer more builders are:


## Serialization builder details[¬∂](index.html#serialization-builder-details "Link to this heading")

All serialization builders outputs one file per source file and a few special files. They also copy the reStructuredText source files to the `_sources` directory under the output directory.

The [`PickleHTMLBuilder`](index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder "sphinxcontrib.serializinghtml.PickleHTMLBuilder") is a builtin subclass that implements the pickle serialization interface.

The files per source file have the extensions of [`out_suffix`](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.out_suffix "sphinxcontrib.serializinghtml.SerializingHTMLBuilder.out_suffix"), and are arranged in directories just as the source files are. They unserialize to a dictionary (or dictionary like structure) with these keys:

`body`

The HTML ‚Äúbody‚Äù (that is, the HTML rendering of the source file), as rendered by the HTML translator.

`title`

The title of the document, as HTML (may contain markup).

`toc`

The table of contents for the file, rendered as an HTML `<ul>`.

`display_toc`

A boolean that is `True` if the `toc` contains more than one entry.

`current_page_name`

The document name of the current file.

`parents`, `prev` and `next`

Information about related chapters in the TOC tree. Each relation is a dictionary with the keys `link` (HREF for the relation) and `title` (title of the related document, as HTML). `parents` is a list of relations, while `prev` and `next` are a single relation.

`sourcename`

The name of the source file under `_sources`.

The special files are located in the root output directory. They are:

[`SerializingHTMLBuilder.globalcontext_filename`](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.globalcontext_filename "sphinxcontrib.serializinghtml.SerializingHTMLBuilder.globalcontext_filename")

A pickled dict with these keys:

`project`, `copyright`, `release`, `version`

The same values as given in the configuration file.

`style`

[`html_style`](../configuration.html#confval-html_style).

`last_updated`

Date of last build.

`builder`

Name of the used builder, in the case of pickles this is always `'pickle'`.

`titles`

A dictionary of all documents‚Äô titles, as HTML strings.

[`SerializingHTMLBuilder.searchindex_filename`](index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.searchindex_filename "sphinxcontrib.serializinghtml.SerializingHTMLBuilder.searchindex_filename")

An index that can be used for searching the documentation. It is a pickled list with these entries:

- A list of indexed docnames.
- A list of document titles, as HTML strings, in the same order as the first list.
- A dict mapping word roots (processed by an English-language stemmer) to a list of integers, which are indices into the first list.

`environment.pickle`

The build environment. This is always a pickle file, independent of the builder and a copy of the environment that was used when the builder was started.

Unlike the other pickle files this pickle file requires that the `sphinx` package is available on unpickling.








### Navigation

- [Documentation](../../../index.html) ¬ª
- [Using Sphinx](../../index.html) ¬ª

The Basics


User guide




Community


Reference


# Sphinx Web Support[¬∂](index.html#sphinx-web-support "Link to this heading")

Added in version 1.1.

Sphinx provides a Python API to easily integrate Sphinx documentation into your web application. To learn more read the [Web Support Quick Start](quickstart.html#websupportquickstart).

















### Navigation

- [Documentation](../../../index.html) ¬ª
- [Using Sphinx](../../index.html) ¬ª
- [Sphinx Web Support](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# The WebSupport class[¬∂](api.html#the-websupport-class "Link to this heading")

*class* sphinxcontrib.websupport.WebSupport[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport)[¬∂](api.html#sphinxcontrib.websupport.WebSupport "Link to this definition")

The main API class for the web support package. All interactions with the web support package should occur through this class.

The class takes the following keyword arguments:

srcdir

The directory containing reStructuredText source files.

builddir

The directory that build data and static files should be placed in. This should be used when creating a [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object that will be used to build data.

datadir

The directory that the web support data is in. This should be used when creating a [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object that will be used to retrieve data.

search

This may contain either a string (e.g. ‚Äòxapian‚Äô) referencing a built-in search adapter to use, or an instance of a subclass of [`BaseSearch`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch "sphinxcontrib.websupport.search.BaseSearch").

storage

This may contain either a string representing a database uri, or an instance of a subclass of [`StorageBackend`](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend "sphinxcontrib.websupport.storage.StorageBackend"). If this is not provided, a new sqlite database will be created.

moderation\_callback

A callable to be called when a new comment is added that is not displayed. It must accept one argument: a dictionary representing the comment that was added.

staticdir

If the static files should be created in a different location **and not in** `'/static'`, this should be a string with the name of that location (e.g. `builddir + '/static_files'`).

Note

If you specify `staticdir`, you will typically want to adjust `staticroot` accordingly.

staticroot

If the static files are not served from `'/static'`, this should be a string with the name of that location (e.g. `'/static_files'`).

docroot

If the documentation is not served from the base path of a URL, this should be a string specifying that path (e.g. `'docs'`).

Changed in version 1.6: WebSupport class is moved to sphinxcontrib.websupport from sphinx.websupport. Please add `sphinxcontrib-websupport` package in your dependency and use moved class instead.

## Methods[¬∂](api.html#methods "Link to this heading")

WebSupport.build()[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.build)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.build "Link to this definition")

Build the documentation. Places the data into the outdir directory. Use it like this:

```
support = WebSupport(srcdir, builddir, search='xapian')
support.build()
```

This will read reStructured text files from srcdir. Then it will build the pickles and search index, placing them into builddir. It will also save node data to the database.

WebSupport.get\_document(*docname*, *username=''*, *moderator=False*)[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.get_document)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.get_document "Link to this definition")

Load and return a document from a pickle. The document will be a dict object which can be used to render a template:

```
support = WebSupport(datadir=datadir)
support.get_document('index', username, moderator)
```

In most cases docname will be taken from the request path and passed directly to this function. In Flask, that would be something like this:

```
@app.route('/<path:docname>')
def index(docname):
    username = g.user.name if g.user else ''
    moderator = g.user.moderator if g.user else False
    try:
        document = support.get_document(docname, username,
                                        moderator)
    except DocumentNotFoundError:
        abort(404)
    render_template('doc.html', document=document)
```

The document dict that is returned contains the following items to be used during template rendering.

- **body**: The main body of the document as HTML
- **sidebar**: The sidebar of the document as HTML
- **relbar**: A div containing links to related documents
- **title**: The title of the document
- **css**: Links to css files used by Sphinx
- **script**: Javascript containing comment options

This raises `DocumentNotFoundError` if a document matching docname is not found.

Parameters:

**docname** ‚Äì the name of the document to load.

WebSupport.get\_data(*node\_id*, *username=None*, *moderator=False*)[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.get_data)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.get_data "Link to this definition")

Get the comments and source associated with node\_id. If username is given vote information will be included with the returned comments. The default CommentBackend returns a dict with two keys, *source*, and *comments*. *source* is raw source of the node and is used as the starting point for proposals a user can add. *comments* is a list of dicts that represent a comment, each having the following items:

| Key            | Contents                                                                                                                                                                                                                                            |
|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| text           | The comment text.                                                                                                                                                                                                                                   |
| username       | The username that was stored with the comment.                                                                                                                                                                                                      |
| id             | The comment‚Äôs unique identifier.                                                                                                                                                                                                                    |
| rating         | The comment‚Äôs current rating.                                                                                                                                                                                                                       |
| age            | The time in seconds since the comment was added.                                                                                                                                                                                                    |
| time           | A dict containing time information. It contains the following keys: year, month, day, hour, minute, second, iso, and delta. iso is the time formatted in ISO 8601 format. delta is a printable form of how old the comment is (e.g. ‚Äú3 hours ago‚Äù). |
| vote           | If user\_id was given, this will be an integer representing the vote. 1 for an upvote, -1 for a downvote, or 0 if unvoted.                                                                                                                          |
| node           | The id of the node that the comment is attached to. If the comment‚Äôs parent is another comment rather than a node, this will be null.                                                                                                               |
| parent         | The id of the comment that this comment is attached to if it is not attached to a node.                                                                                                                                                             |
| children       | A list of all children, in this format.                                                                                                                                                                                                             |
| proposal\_diff | An HTML representation of the differences between the the current source and the user‚Äôs proposed source.                                                                                                                                            |

Parameters:

- **node\_id** ‚Äì the id of the node to get comments for.
- **username** ‚Äì the username of the user viewing the comments.
- **moderator** ‚Äì whether the user is a moderator.

WebSupport.add\_comment(*text*, *node\_id=''*, *parent\_id=''*, *displayed=True*, *username=None*, *time=None*, *proposal=None*, *moderator=False*)[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.add_comment)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.add_comment "Link to this definition")

Add a comment to a node or another comment. Returns the comment in the same format as `get_comments()`. If the comment is being attached to a node, pass in the node‚Äôs id (as a string) with the node keyword argument:

```
comment = support.add_comment(text, node_id=node_id)
```

If the comment is the child of another comment, provide the parent‚Äôs id (as a string) with the parent keyword argument:

```
comment = support.add_comment(text, parent_id=parent_id)
```

If you would like to store a username with the comment, pass in the optional username keyword argument:

```
comment = support.add_comment(text, node=node_id,
                              username=username)
```

Parameters:

- **parent\_id** ‚Äì the prefixed id of the comment‚Äôs parent.
- **text** ‚Äì the text of the comment.
- **displayed** ‚Äì for moderation purposes
- **username** ‚Äì the username of the user making the comment.
- **time** ‚Äì the time the comment was created, defaults to now.

WebSupport.process\_vote(*comment\_id*, *username*, *value*)[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.process_vote)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.process_vote "Link to this definition")

Process a user‚Äôs vote. The web support package relies on the API user to perform authentication. The API user will typically receive a comment\_id and value from a form, and then make sure the user is authenticated. A unique username must be passed in, which will also be used to retrieve the user‚Äôs past voting data. An example, once again in Flask:

```
@app.route('/docs/process_vote', methods=['POST'])
def process_vote():
    if g.user is None:
        abort(401)
    comment_id = request.form.get('comment_id')
    value = request.form.get('value')
    if value is None or comment_id is None:
        abort(400)
    support.process_vote(comment_id, g.user.name, value)
    return "success"
```

Parameters:

- **comment\_id** ‚Äì the comment being voted on
- **username** ‚Äì the unique username of the user voting
- **value** ‚Äì 1 for an upvote, -1 for a downvote, 0 for an unvote.

WebSupport.get\_search\_results(*q*)[\[source\]](../../../_modules/sphinxcontrib/websupport/core.html#WebSupport.get_search_results)[¬∂](api.html#sphinxcontrib.websupport.WebSupport.get_search_results "Link to this definition")

Perform a search for the query q, and create a set of search results. Then render the search results as html and return a context dict like the one created by [`get_document()`](api.html#sphinxcontrib.websupport.WebSupport.get_document "sphinxcontrib.websupport.WebSupport.get_document"):

```
document = support.get_search_results(q)
```

Parameters:

**q** ‚Äì the search query








### Navigation

- [Documentation](../../../index.html) ¬ª
- [Using Sphinx](../../index.html) ¬ª
- [Sphinx Web Support](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# Web Support Quick Start[¬∂](quickstart.html#web-support-quick-start "Link to this heading")

## Building documentation data[¬∂](quickstart.html#building-documentation-data "Link to this heading")

To make use of the web support package in your application you‚Äôll need to build the data it uses. This data includes pickle files representing documents, search indices, and node data that is used to track where comments and other things are in a document. To do this you will need to create an instance of the [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") class and call its [`build()`](api.html#sphinxcontrib.websupport.WebSupport.build "sphinxcontrib.websupport.WebSupport.build") method:

```
from sphinxcontrib.websupport import WebSupport

support = WebSupport(srcdir='/path/to/rst/sources/',
                     builddir='/path/to/build/outdir',
                     search='xapian')

support.build()
```

This will read reStructuredText sources from `srcdir` and place the necessary data in `builddir`. The `builddir` will contain two subdirectories: one named ‚Äúdata‚Äù that contains all the data needed to display documents, search through documents, and add comments to documents. The other directory will be called ‚Äústatic‚Äù and contains static files that should be served from ‚Äú/static‚Äù.

Note

If you wish to serve static files from a path other than ‚Äú/static‚Äù, you can do so by providing the *staticdir* keyword argument when creating the [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object.

## Integrating Sphinx documents into your web-app[¬∂](quickstart.html#integrating-sphinx-documents-into-your-web-app "Link to this heading")

Now that the data is built, it‚Äôs time to do something useful with it. Start off by creating a [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object for your application:

```
from sphinxcontrib.websupport import WebSupport

support = WebSupport(datadir='/path/to/the/data',
                     search='xapian')
```

You‚Äôll only need one of these for each set of documentation you will be working with. You can then call its [`get_document()`](api.html#sphinxcontrib.websupport.WebSupport.get_document "sphinxcontrib.websupport.WebSupport.get_document") method to access individual documents:

```
contents = support.get_document('contents')
```

This will return a dictionary containing the following items:

- **body**: The main body of the document as HTML
- **sidebar**: The sidebar of the document as HTML
- **relbar**: A div containing links to related documents
- **title**: The title of the document
- **css**: Links to CSS files used by Sphinx
- **script**: JavaScript containing comment options

This dict can then be used as context for templates. The goal is to be easy to integrate with your existing templating system. An example using [Jinja2](https://jinja.palletsprojects.com/) is:

```
{%- extends "layout.html" %}

{%- block title %}
    {{ document.title }}
{%- endblock %}

{% block css %}
    {{ super() }}
    {{ document.css|safe }}
    <link rel="stylesheet" href="/static/websupport-custom.css" type="text/css">
{% endblock %}

{%- block script %}
    {{ super() }}
    {{ document.script|safe }}
{%- endblock %}

{%- block relbar %}
    {{ document.relbar|safe }}
{%- endblock %}

{%- block body %}
    {{ document.body|safe }}
{%- endblock %}

{%- block sidebar %}
    {{ document.sidebar|safe }}
{%- endblock %}
```

### Authentication[¬∂](quickstart.html#authentication "Link to this heading")

To use certain features such as voting, it must be possible to authenticate users. The details of the authentication are left to your application. Once a user has been authenticated you can pass the user‚Äôs details to certain [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") methods using the *username* and *moderator* keyword arguments. The web support package will store the username with comments and votes. The only caveat is that if you allow users to change their username you must update the websupport package‚Äôs data:

```
support.update_username(old_username, new_username)
```

*username* should be a unique string which identifies a user, and *moderator* should be a boolean representing whether the user has moderation privileges. The default value for *moderator* is `False`.

An example [Flask](https://flask.palletsprojects.com/) function that checks whether a user is logged in and then retrieves a document is:

```
from sphinxcontrib.websupport.errors import *

@app.route('/<path:docname>')
def doc(docname):
    username = g.user.name if g.user else ''
    moderator = g.user.moderator if g.user else False
    try:
        document = support.get_document(docname, username, moderator)
    except DocumentNotFoundError:
        abort(404)
    return render_template('doc.html', document=document)
```

The first thing to notice is that the *docname* is just the request path. This makes accessing the correct document easy from a single view. If the user is authenticated, then the username and moderation status are passed along with the docname to [`get_document()`](api.html#sphinxcontrib.websupport.WebSupport.get_document "sphinxcontrib.websupport.WebSupport.get_document"). The web support package will then add this data to the `COMMENT_OPTIONS` that are used in the template.

Note

This only works if your documentation is served from your document root. If it is served from another directory, you will need to prefix the url route with that directory, and give the *docroot* keyword argument when creating the web support object:

```
support = WebSupport(..., docroot='docs')

@app.route('/docs/<path:docname>')
```

## Performing searches[¬∂](quickstart.html#performing-searches "Link to this heading")

To use the search form built-in to the Sphinx sidebar, create a function to handle requests to the URL ‚Äòsearch‚Äô relative to the documentation root. The user‚Äôs search query will be in the GET parameters, with the key `q`. Then use the [`get_search_results()`](api.html#sphinxcontrib.websupport.WebSupport.get_search_results "sphinxcontrib.websupport.WebSupport.get_search_results") method to retrieve search results. In [Flask](https://flask.palletsprojects.com/) that would be like this:

```
@app.route('/search')
def search():
    q = request.args.get('q')
    document = support.get_search_results(q)
    return render_template('doc.html', document=document)
```

Note that we used the same template to render our search results as we did to render our documents. That‚Äôs because [`get_search_results()`](api.html#sphinxcontrib.websupport.WebSupport.get_search_results "sphinxcontrib.websupport.WebSupport.get_search_results") returns a context dict in the same format that [`get_document()`](api.html#sphinxcontrib.websupport.WebSupport.get_document "sphinxcontrib.websupport.WebSupport.get_document") does.

## Comments &amp; proposals[¬∂](quickstart.html#comments-proposals "Link to this heading")

Now that this is done it‚Äôs time to define the functions that handle the AJAX calls from the script. You will need three functions. The first function is used to add a new comment, and will call the web support method [`add_comment()`](api.html#sphinxcontrib.websupport.WebSupport.add_comment "sphinxcontrib.websupport.WebSupport.add_comment"):

```
@app.route('/docs/add_comment', methods=['POST'])
def add_comment():
    parent_id = request.form.get('parent', '')
    node_id = request.form.get('node', '')
    text = request.form.get('text', '')
    proposal = request.form.get('proposal', '')
    username = g.user.name if g.user is not None else 'Anonymous'
    comment = support.add_comment(text, node_id='node_id',
                                  parent_id='parent_id',
                                  username=username, proposal=proposal)
    return jsonify(comment=comment)
```

You‚Äôll notice that both a `parent_id` and `node_id` are sent with the request. If the comment is being attached directly to a node, `parent_id` will be empty. If the comment is a child of another comment, then `node_id` will be empty. Then next function handles the retrieval of comments for a specific node, and is aptly named [`get_data()`](api.html#sphinxcontrib.websupport.WebSupport.get_data "sphinxcontrib.websupport.WebSupport.get_data"):

```
@app.route('/docs/get_comments')
def get_comments():
    username = g.user.name if g.user else None
    moderator = g.user.moderator if g.user else False
    node_id = request.args.get('node', '')
    data = support.get_data(node_id, username, moderator)
    return jsonify(**data)
```

The final function that is needed will call [`process_vote()`](api.html#sphinxcontrib.websupport.WebSupport.process_vote "sphinxcontrib.websupport.WebSupport.process_vote"), and will handle user votes on comments:

```
@app.route('/docs/process_vote', methods=['POST'])
def process_vote():
    if g.user is None:
        abort(401)
    comment_id = request.form.get('comment_id')
    value = request.form.get('value')
    if value is None or comment_id is None:
        abort(400)
    support.process_vote(comment_id, g.user.id, value)
    return "success"
```

## Comment moderation[¬∂](quickstart.html#comment-moderation "Link to this heading")

By default, all comments added through [`add_comment()`](api.html#sphinxcontrib.websupport.WebSupport.add_comment "sphinxcontrib.websupport.WebSupport.add_comment") are automatically displayed. If you wish to have some form of moderation, you can pass the `displayed` keyword argument:

```
comment = support.add_comment(text, node_id='node_id',
                              parent_id='parent_id',
                              username=username, proposal=proposal,
                              displayed=False)
```

You can then create a new view to handle the moderation of comments. It will be called when a moderator decides a comment should be accepted and displayed:

```
@app.route('/docs/accept_comment', methods=['POST'])
def accept_comment():
    moderator = g.user.moderator if g.user else False
    comment_id = request.form.get('id')
    support.accept_comment(comment_id, moderator=moderator)
    return 'OK'
```

Rejecting comments happens via comment deletion.

To perform a custom action (such as emailing a moderator) when a new comment is added but not displayed, you can pass callable to the [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") class when instantiating your support object:

```
def moderation_callback(comment):
    """Do something..."""

support = WebSupport(..., moderation_callback=moderation_callback)
```

The moderation callback must take one argument, which will be the same comment dict that is returned by [`WebSupport.add_comment()`](api.html#sphinxcontrib.websupport.WebSupport.add_comment "sphinxcontrib.websupport.WebSupport.add_comment").








### Navigation

- [Documentation](../../../index.html) ¬ª
- [Using Sphinx](../../index.html) ¬ª
- [Sphinx Web Support](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# Search adapters[¬∂](searchadapters.html#search-adapters "Link to this heading")

To create a custom search adapter you will need to subclass the [`BaseSearch`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch "sphinxcontrib.websupport.search.BaseSearch") class. Then create an instance of the new class and pass that as the *search* keyword argument when you create the [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object:

```
support = WebSupport(srcdir=srcdir,
                     builddir=builddir,
                     search=MySearch())
```

For more information about creating a custom search adapter, please see the documentation of the [`BaseSearch`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch "sphinxcontrib.websupport.search.BaseSearch") class below.

*class* sphinxcontrib.websupport.search.BaseSearch[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch "Link to this definition")

Defines an interface for search adapters.

Changed in version 1.6: BaseSearch class is moved to sphinxcontrib.websupport.search from sphinx.websupport.search.

## Methods[¬∂](searchadapters.html#methods "Link to this heading")

The following methods are defined in the BaseSearch class. Some methods do not need to be overridden, but some ([`add_document()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.add_document "sphinxcontrib.websupport.search.BaseSearch.add_document") and [`handle_query()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.handle_query "sphinxcontrib.websupport.search.BaseSearch.handle_query")) must be overridden in your subclass. For a working example, look at the built-in adapter for whoosh.

BaseSearch.init\_indexing(*changed: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = ()*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.init_indexing)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.init_indexing "Link to this definition")

Called by the builder to initialize the search indexer. changed is a list of pagenames that will be reindexed. You may want to remove these from the search index before indexing begins.

Parameters:

**changed** ‚Äì a list of pagenames that will be re-indexed

BaseSearch.finish\_indexing()[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.finish_indexing)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.finish_indexing "Link to this definition")

Called by the builder when writing has been completed. Use this to perform any finalization or cleanup actions after indexing is complete.

BaseSearch.feed(*pagename*, *filename*, *title*, *doctree*)[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.feed)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.feed "Link to this definition")

Called by the builder to add a doctree to the index. Converts the doctree to text and passes it to [`add_document()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.add_document "sphinxcontrib.websupport.search.BaseSearch.add_document"). You probably won‚Äôt want to override this unless you need access to the doctree. Override [`add_document()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.add_document "sphinxcontrib.websupport.search.BaseSearch.add_document") instead.

Parameters:

- **pagename** ‚Äì the name of the page to be indexed
- **filename** ‚Äì the name of the original source file
- **title** ‚Äì the title of the page to be indexed
- **doctree** ‚Äì is the docutils doctree representation of the page

BaseSearch.add\_document(*pagename*, *filename*, *title*, *text*)[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.add_document)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.add_document "Link to this definition")

Called by [`feed()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.feed "sphinxcontrib.websupport.search.BaseSearch.feed") to add a document to the search index. This method should should do everything necessary to add a single document to the search index.

pagename is name of the page being indexed. It is the combination of the source files relative path and filename, minus the extension. For example, if the source file is ‚Äúext/builders.rst‚Äù, the pagename would be ‚Äúext/builders‚Äù. This will need to be returned with search results when processing a query.

Parameters:

- **pagename** ‚Äì the name of the page being indexed
- **filename** ‚Äì the name of the original source file
- **title** ‚Äì the page‚Äôs title
- **text** ‚Äì the full text of the page

BaseSearch.query(*q*)[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.query)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.query "Link to this definition")

Called by the web support api to get search results. This method compiles the regular expression to be used when [`extracting context`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.extract_context "sphinxcontrib.websupport.search.BaseSearch.extract_context"), then calls [`handle_query()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.handle_query "sphinxcontrib.websupport.search.BaseSearch.handle_query"). You won‚Äôt want to override this unless you don‚Äôt want to use the included [`extract_context()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.extract_context "sphinxcontrib.websupport.search.BaseSearch.extract_context") method. Override [`handle_query()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.handle_query "sphinxcontrib.websupport.search.BaseSearch.handle_query") instead.

Parameters:

**q** ‚Äì the search query string.

BaseSearch.handle\_query(*q*)[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.handle_query)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.handle_query "Link to this definition")

Called by [`query()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.query "sphinxcontrib.websupport.search.BaseSearch.query") to retrieve search results for a search query q. This should return an iterable containing tuples of the following format:

```
(<path>, <title>, <context>)
```

path and title are the same values that were passed to [`add_document()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.add_document "sphinxcontrib.websupport.search.BaseSearch.add_document"), and context should be a short text snippet of the text surrounding the search query in the document.

The [`extract_context()`](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.extract_context "sphinxcontrib.websupport.search.BaseSearch.extract_context") method is provided as a simple way to create the context.

Parameters:

**q** ‚Äì the search query

BaseSearch.extract\_context(*text*, *length=240*)[\[source\]](../../../_modules/sphinxcontrib/websupport/search.html#BaseSearch.extract_context)[¬∂](searchadapters.html#sphinxcontrib.websupport.search.BaseSearch.extract_context "Link to this definition")

Extract the context for the search query from the document‚Äôs full text.

Parameters:

- **text** ‚Äì the full text of the document to create the context for
- **length** ‚Äì the length of the context snippet to return.








### Navigation

- [Documentation](../../../index.html) ¬ª
- [Using Sphinx](../../index.html) ¬ª
- [Sphinx Web Support](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# Storage backends[¬∂](storagebackends.html#storage-backends "Link to this heading")

To create a custom storage backend you will need to subclass the [`StorageBackend`](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend "sphinxcontrib.websupport.storage.StorageBackend") class. Then create an instance of the new class and pass that as the *storage* keyword argument when you create the [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport") object:

```
support = WebSupport(srcdir=srcdir,
                     builddir=builddir,
                     storage=MyStorage())
```

For more information about creating a custom storage backend, please see the documentation of the [`StorageBackend`](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend "sphinxcontrib.websupport.storage.StorageBackend") class below.

*class* sphinxcontrib.websupport.storage.StorageBackend[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend "Link to this definition")

Defines an interface for storage backends.

Changed in version 1.6: StorageBackend class is moved to sphinxcontrib.websupport.storage from sphinx.websupport.storage.

## Methods[¬∂](storagebackends.html#methods "Link to this heading")

StorageBackend.pre\_build()[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.pre_build)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.pre_build "Link to this definition")

Called immediately before the build process begins. Use this to prepare the StorageBackend for the addition of nodes.

StorageBackend.add\_node(*id*, *document*, *source*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.add_node)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.add_node "Link to this definition")

Add a node to the StorageBackend.

Parameters:

- **id** ‚Äì a unique id for the comment.
- **document** ‚Äì the name of the document the node belongs to.
- **source** ‚Äì the source files name.

StorageBackend.post\_build()[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.post_build)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.post_build "Link to this definition")

Called after a build has completed. Use this to finalize the addition of nodes if needed.

StorageBackend.add\_comment(*text*, *displayed*, *username*, *time*, *proposal*, *node\_id*, *parent\_id*, *moderator*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.add_comment)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.add_comment "Link to this definition")

Called when a comment is being added.

Parameters:

- **text** ‚Äì the text of the comment
- **displayed** ‚Äì whether the comment should be displayed
- **username** ‚Äì the name of the user adding the comment
- **time** ‚Äì a date object with the time the comment was added
- **proposal** ‚Äì the text of the proposal the user made
- **node\_id** ‚Äì the id of the node that the comment is being added to
- **parent\_id** ‚Äì the id of the comment‚Äôs parent comment.
- **moderator** ‚Äì whether the user adding the comment is a moderator

StorageBackend.delete\_comment(*comment\_id*, *username*, *moderator*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.delete_comment)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.delete_comment "Link to this definition")

Delete a comment.

Raises `UserNotAuthorizedError` if moderator is False and username doesn‚Äôt match the username on the comment.

Parameters:

- **comment\_id** ‚Äì The id of the comment being deleted.
- **username** ‚Äì The username of the user requesting the deletion.
- **moderator** ‚Äì Whether the user is a moderator.

StorageBackend.get\_data(*node\_id*, *username*, *moderator*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.get_data)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.get_data "Link to this definition")

Called to retrieve all data for a node. This should return a dict with two keys, *source* and *comments* as described by [`WebSupport`](api.html#sphinxcontrib.websupport.WebSupport "sphinxcontrib.websupport.WebSupport")‚Äôs [`get_data()`](api.html#sphinxcontrib.websupport.WebSupport.get_data "sphinxcontrib.websupport.WebSupport.get_data") method.

Parameters:

- **node\_id** ‚Äì The id of the node to get data for.
- **username** ‚Äì The name of the user requesting the data.
- **moderator** ‚Äì Whether the requestor is a moderator.

StorageBackend.process\_vote(*comment\_id*, *username*, *value*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.process_vote)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.process_vote "Link to this definition")

Process a vote that is being cast. value will be either -1, 0, or 1.

Parameters:

- **comment\_id** ‚Äì The id of the comment being voted on.
- **username** ‚Äì The username of the user casting the vote.
- **value** ‚Äì The value of the vote being cast.

StorageBackend.update\_username(*old\_username*, *new\_username*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.update_username)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.update_username "Link to this definition")

If a user is allowed to change their username this method should be called so that there is not stagnate data in the storage system.

Parameters:

- **old\_username** ‚Äì The username being changed.
- **new\_username** ‚Äì What the username is being changed to.

StorageBackend.accept\_comment(*comment\_id*)[\[source\]](../../../_modules/sphinxcontrib/websupport/storage.html#StorageBackend.accept_comment)[¬∂](storagebackends.html#sphinxcontrib.websupport.storage.StorageBackend.accept_comment "Link to this definition")

Called when a moderator accepts a comment. After the method is called the comment should be displayed to all users.

Parameters:

**comment\_id** ‚Äì The id of the comment being accepted.








### Navigation

- [Documentation](../index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference



# Command-line tools[¬∂](index.html#command-line-tools "Link to this heading")

These are the applications provided as part of Sphinx.

## Core applications[¬∂](index.html#core-applications "Link to this heading")




## Additional applications[¬∂](index.html#additional-applications "Link to this heading")











### Navigation

- [Documentation](../index.html) ¬ª
- [Command-line tools](index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference



# sphinx-apidoc[¬∂](sphinx-apidoc.html#sphinx-apidoc "Link to this heading")

## Synopsis[¬∂](sphinx-apidoc.html#synopsis "Link to this heading")

**sphinx-apidoc** \[*OPTIONS*] -o &lt;*OUTPUT\_PATH*&gt; &lt;*MODULE\_PATH*&gt; \[*EXCLUDE\_PATTERN* ‚Ä¶]

## Description[¬∂](sphinx-apidoc.html#description "Link to this heading")

**sphinx-apidoc** is a tool for automatic generation of Sphinx sources that, using the [`autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension, document a whole package in the style of other automatic API documentation tools.

*MODULE\_PATH* is the path to a Python package to document, and *OUTPUT\_PATH* is the directory where the generated sources are placed. Any *EXCLUDE\_PATTERN*s given are [fnmatch-style](https://docs.python.org/3/library/fnmatch.html) file and/or directory patterns that will be excluded from generation.

Warning

`sphinx-apidoc` generates source files that use [`sphinx.ext.autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") to document all found modules. If any modules have side effects on import, these will be executed by `autodoc` when `sphinx-build` is run.

If you document scripts (as opposed to library modules), make sure their main routine is protected by a `if __name__ == '__main__'` condition.

## Options[¬∂](sphinx-apidoc.html#options "Link to this heading")

-o &lt;OUTPUT\_PATH&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-o "Link to this definition")

Directory to place the output files. If it does not exist, it is created.

-q[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-q "Link to this definition")

Do not output anything on standard output, only write warnings and errors to standard error.

-f, --force[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-f "Link to this definition")

Force overwriting of any existing generated files.

-l, --follow-links[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-l "Link to this definition")

Follow symbolic links. Defaults to `False`.

-n, --dry-run[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-n "Link to this definition")

Do not create or remove any files.

-s &lt;suffix&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-s "Link to this definition")

Suffix for the source files generated. Defaults to `rst`.

-d &lt;MAXDEPTH&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-d "Link to this definition")

Maximum depth for the generated table of contents file. Defaults to `4`.

--tocfile[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-tocfile "Link to this definition")

Filename for a table of contents file. Defaults to `modules`.

-T, --no-toc[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-T "Link to this definition")

Do not create a table of contents file. Ignored when [`--full`](sphinx-apidoc.html#cmdoption-sphinx-apidoc-F) is provided.

--remove-old[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-remove-old "Link to this definition")

Remove existing files in the output directory that are not created anymore. Not compatible with [`--full`](sphinx-apidoc.html#cmdoption-sphinx-apidoc-F).

-F, --full[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-F "Link to this definition")

Generate a full Sphinx project (`conf.py`, `Makefile` etc.) using the same mechanism as **sphinx-quickstart**.

-e, --separate[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-e "Link to this definition")

Put documentation for each module on its own page.

Added in version 1.2.

-E, --no-headings[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-E "Link to this definition")

Do not create headings for the modules/packages. This is useful, for example, when docstrings already contain headings.

-P, --private[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-P "Link to this definition")

Include ‚Äú\_private‚Äù modules.

Added in version 1.2.

--implicit-namespaces[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-implicit-namespaces "Link to this definition")

Without this option, **sphinx-apidoc** searches [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") for Python packages containing `__init__.py` files, or single-file Python modules.

This option instead uses [**PEP 420**](https://peps.python.org/pep-0420/) implicit namespaces that allow layouts paths such as `foo/bar/module.py` or `foo/bar/baz/__init__.py` (note that `bar` and `foo` are namespaces, not modules).

-M, --module-first[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-M "Link to this definition")

Put module documentation before submodule documentation.

These options are used when [`--full`](sphinx-apidoc.html#cmdoption-sphinx-apidoc-F) is specified:

-a[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-a "Link to this definition")

Append module\_path to sys.path.

-H &lt;project&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-H "Link to this definition")

Sets the project name to put in generated files (see [`project`](../usage/configuration.html#confval-project)).

-A &lt;author&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-A "Link to this definition")

Sets the author name(s) to put in generated files (see [`copyright`](../usage/configuration.html#confval-copyright)).

-V &lt;version&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-V "Link to this definition")

Sets the project version to put in generated files (see [`version`](../usage/configuration.html#confval-version)).

-R &lt;release&gt;[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-R "Link to this definition")

Sets the project release to put in generated files (see [`release`](../usage/configuration.html#confval-release)).

Project templating

Added in version 2.2: Project templating options for sphinx-apidoc

-t, --templatedir=TEMPLATEDIR[¬∂](sphinx-apidoc.html#cmdoption-sphinx-apidoc-t "Link to this definition")

Template directory for template files. You can modify the templates of sphinx project files generated by apidoc. Following Jinja2 template files are allowed:

- `module.rst.jinja`
- `package.rst.jinja`
- `toc.rst.jinja`
- `root_doc.rst.jinja`
- `conf.py.jinja`
- `Makefile.jinja`
- `Makefile.new.jinja`
- `make.bat.jinja`
- `make.bat.new.jinja`

In detail, please refer the system template files Sphinx provides. (`sphinx/templates/apidoc` and `sphinx/templates/quickstart`)

## Environment[¬∂](sphinx-apidoc.html#environment "Link to this heading")

SPHINX\_APIDOC\_OPTIONS[¬∂](sphinx-apidoc.html#envvar-SPHINX_APIDOC_OPTIONS "Link to this definition")

A comma-separated list of option to append to generated `automodule` directives. Defaults to `members,undoc-members,show-inheritance`.

## See also[¬∂](sphinx-apidoc.html#see-also "Link to this heading")

*sphinx-build(1)*, *sphinx-autogen(1)*








### Navigation

- [Documentation](../index.html) ¬ª
- [Command-line tools](index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference



# sphinx-autogen[¬∂](sphinx-autogen.html#sphinx-autogen "Link to this heading")

## Synopsis[¬∂](sphinx-autogen.html#synopsis "Link to this heading")

**sphinx-autogen** \[*options*] &lt;sourcefile&gt; ‚Ä¶

## Description[¬∂](sphinx-autogen.html#description "Link to this heading")

**sphinx-autogen** is a tool for automatic generation of Sphinx sources that, using the [`autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension, document items included in [`autosummary`](../usage/extensions/autosummary.html#directive-autosummary "autosummary directive") listing(s).

*sourcefile* is the path to one or more reStructuredText documents containing [`autosummary`](../usage/extensions/autosummary.html#directive-autosummary "autosummary directive") entries with the `:toctree:` option set. *sourcefile* can be an [`fnmatch`](https://docs.python.org/3/library/fnmatch.html#module-fnmatch "(in Python v3.13)")-style pattern.

## Options[¬∂](sphinx-autogen.html#options "Link to this heading")

-o &lt;outputdir&gt;[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-o "Link to this definition")

Directory to place the output file. If it does not exist, it is created. Defaults to the value passed to the `:toctree:` option.

-s &lt;suffix&gt;, --suffix &lt;suffix&gt;[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-s "Link to this definition")

Default suffix to use for generated files. Defaults to `rst`.

-t &lt;templates&gt;, --templates &lt;templates&gt;[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-t "Link to this definition")

Custom template directory. Defaults to `None`.

-i, --imported-members[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-i "Link to this definition")

Document imported members.

-a, --respect-module-all[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-a "Link to this definition")

Document exactly the members in a module‚Äôs `__all__` attribute.

--remove-old[¬∂](sphinx-autogen.html#cmdoption-sphinx-autogen-remove-old "Link to this definition")

Remove existing files in the output directory that are not generated anymore.

## Example[¬∂](sphinx-autogen.html#example "Link to this heading")

Given the following directory structure:

```
docs
‚îú‚îÄ‚îÄ index.rst
‚îî‚îÄ‚îÄ ...
foobar
‚îú‚îÄ‚îÄ foo
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ bar
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ baz
        ‚îî‚îÄ‚îÄ __init__.py
```

and assuming `docs/index.rst` contained the following:

```
Modules
=======

.. autosummary::
   :toctree: modules

   foobar.foo
   foobar.bar
   foobar.bar.baz
```

If you run the following:

```
$ PYTHONPATH=. sphinx-autogen docs/index.rst
```

then the following stub files will be created in `docs`:

```
docs
‚îú‚îÄ‚îÄ index.rst
‚îî‚îÄ‚îÄ modules
    ‚îú‚îÄ‚îÄ foobar.bar.rst
    ‚îú‚îÄ‚îÄ foobar.bar.baz.rst
    ‚îî‚îÄ‚îÄ foobar.foo.rst
```

and each of those files will contain a [`autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") directive and some other information.

## See also[¬∂](sphinx-autogen.html#see-also "Link to this heading")

*sphinx-build(1)*, *sphinx-apidoc(1)*








### Navigation

- [Documentation](../index.html) ¬ª
- [Command-line tools](index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference



# sphinx-build[¬∂](sphinx-build.html#sphinx-build "Link to this heading")

## Synopsis[¬∂](sphinx-build.html#synopsis "Link to this heading")

**sphinx-build** \[*options*] &lt;*sourcedir*&gt; &lt;*outputdir*&gt; \[*filenames* ‚Ä¶]

## Description[¬∂](sphinx-build.html#description "Link to this heading")

**sphinx-build** generates documentation from the files in `<sourcedir>` and places it in the `<outputdir>`.

**sphinx-build** looks for `<sourcedir>/conf.py` for the configuration settings. *sphinx-quickstart(1)* may be used to generate template files, including `conf.py`.

**sphinx-build** can create documentation in different formats. A format is selected by specifying the builder name on the command line; it defaults to HTML. Builders can also perform other tasks related to documentation processing. For a list of available builders, refer to [Builders](../usage/builders/index.html).

By default, everything that is outdated is built. Output only for selected files can be built by specifying individual filenames.

## Options[¬∂](sphinx-build.html#options "Link to this heading")

-M buildername[¬∂](sphinx-build.html#cmdoption-sphinx-build-M "Link to this definition")

Select a builder, using the *make-mode*. See [Builders](../usage/builders/index.html) for a list of all of Sphinx‚Äôs built-in builders. Extensions can add their own builders.

Important

Sphinx only recognizes the `-M` option if it is used first, along with the source and output directories, before any other options are passed. For example:

```
sphinx-build -M html ./source ./build --fail-on-warning
```

The *make-mode* provides the same build functionality as a default [Makefile or Make.bat](sphinx-build.html#makefile-options), and provides the following additional build pipelines:

*latexpdf*

Build LaTeX files and run them through **pdflatex**, or as per [`latex_engine`](../usage/configuration.html#confval-latex_engine) setting. If [`language`](../usage/configuration.html#confval-language) is set to `'ja'`, will use automatically the **platex/dvipdfmx** latex to PDF pipeline.

*info*

Build Texinfo files and run them through **makeinfo**.

Note

The default output directory locations when using *make-mode* differ from the defaults when using [`-b`](sphinx-build.html#cmdoption-sphinx-build-b).

- doctrees are saved to `<outputdir>/doctrees`
- output files are saved to `<outputdir>/<builder name>`

Added in version 1.2.1.

-b buildername, --builder buildername[¬∂](sphinx-build.html#cmdoption-sphinx-build-b "Link to this definition")

Selects a builder.

See [Builders](../usage/builders/index.html) for a list of all of Sphinx‚Äôs built-in builders. Extensions can add their own builders.

Changed in version 7.3: Add `--builder` long option.

-a, --write-all[¬∂](sphinx-build.html#cmdoption-sphinx-build-a "Link to this definition")

If given, always write all output files. The default is to only write output files for new and changed source files. (This may not apply to all builders.)

Note

This option does not re-read source files. To read and re-process every file, use [`--fresh-env`](sphinx-build.html#cmdoption-sphinx-build-E) instead.

Changed in version 7.3: Add `--write-all` long option.

-E, --fresh-env[¬∂](sphinx-build.html#cmdoption-sphinx-build-E "Link to this definition")

Don‚Äôt use a saved [environment](../glossary.html#term-environment) (the structure caching all cross-references), but rebuild it completely. The default is to only read and parse source files that are new or have changed since the last run.

Changed in version 7.3: Add `--fresh-env` long option.

-t tag, --tag tag[¬∂](sphinx-build.html#cmdoption-sphinx-build-t "Link to this definition")

Define the tag *tag*. This is relevant for [`only`](../usage/restructuredtext/directives.html#directive-only "only directive") directives that include their content only if certain tags are set. See [including content based on tags](../usage/restructuredtext/directives.html#tags) for further detail.

Added in version 0.6.

Changed in version 7.3: Add `--tag` long option.

-d path, --doctree-dir path[¬∂](sphinx-build.html#cmdoption-sphinx-build-d "Link to this definition")

Since Sphinx has to read and parse all source files before it can write an output file, the parsed source files are cached as ‚Äúdoctree pickles‚Äù. Normally, these files are put in a directory called `.doctrees` under the build directory; with this option you can select a different cache directory (the doctrees can be shared between all builders).

Changed in version 7.3: Add `--doctree-dir` long option.

-j N, --jobs N[¬∂](sphinx-build.html#cmdoption-sphinx-build-j "Link to this definition")

Distribute the build over *N* processes in parallel, to make building on multiprocessor machines more effective. This feature only works on systems supporting ‚Äúfork‚Äù. Windows is not supported. Note that not all parts and not all builders of Sphinx can be parallelized. If `auto` argument is given, Sphinx uses the number of CPUs as *N*. Defaults to 1.

Added in version 1.2: This option should be considered *experimental*.

Changed in version 1.7: Support `auto` argument.

Changed in version 6.2: Add `--jobs` long option.

-c path, --conf-dir path[¬∂](sphinx-build.html#cmdoption-sphinx-build-c "Link to this definition")

Don‚Äôt look for the `conf.py` in the source directory, but use the given configuration directory instead. Note that various other files and paths given by configuration values are expected to be relative to the configuration directory, so they will have to be present at this location too.

Added in version 0.3.

Changed in version 7.3: Add `--conf-dir` long option.

-C, --isolated[¬∂](sphinx-build.html#cmdoption-sphinx-build-C "Link to this definition")

Don‚Äôt look for a configuration file; only take options via the [`--define`](sphinx-build.html#cmdoption-sphinx-build-D) option.

Added in version 0.5.

Changed in version 7.3: Add `--isolated` long option.

-D setting=value, --define setting=value[¬∂](sphinx-build.html#cmdoption-sphinx-build-D "Link to this definition")

Override a configuration value set in the `conf.py` file. The value must be a number, string, list or dictionary value.

For lists, you can separate elements with a comma like this: `-D html_theme_path=path1,path2`.

For dictionary values, supply the setting name and key like this: `-D latex_elements.docclass=scrartcl`.

For boolean values, use `0` or `1` as the value.

Changed in version 0.6: The value can now be a dictionary value.

Changed in version 1.3: The value can now also be a list value.

Changed in version 7.3: Add `--define` long option.

-A name=value, --html-define name=value[¬∂](sphinx-build.html#cmdoption-sphinx-build-A "Link to this definition")

Make the *name* assigned to *value* in the HTML templates.

Added in version 0.5.

Changed in version 7.3: Add `--html-define` long option.

-n, --nitpicky[¬∂](sphinx-build.html#cmdoption-sphinx-build-n "Link to this definition")

Run in nitpicky mode. Currently, this generates warnings for all missing references. See the config value [`nitpick_ignore`](../usage/configuration.html#confval-nitpick_ignore) for a way to exclude some references as ‚Äúknown missing‚Äù.

Changed in version 7.3: Add `--nitpicky` long option.

-N, --no-color[¬∂](sphinx-build.html#cmdoption-sphinx-build-N "Link to this definition")

Do not emit colored output.

Changed in version 1.6: Add `--no-color` long option.

--color[¬∂](sphinx-build.html#cmdoption-sphinx-build-color "Link to this definition")

Emit colored output. Auto-detected by default.

Added in version 1.6.

-v, --verbose[¬∂](sphinx-build.html#cmdoption-sphinx-build-v "Link to this definition")

Increase verbosity (log-level). This option can be given up to three times to get more debug logging output. It implies [`-T`](sphinx-build.html#cmdoption-sphinx-build-T).

Added in version 1.2.

Changed in version 7.3: Add `--verbose` long option.

-q, --quiet[¬∂](sphinx-build.html#cmdoption-sphinx-build-q "Link to this definition")

Do not output anything on standard output, only write warnings and errors to standard error.

Changed in version 7.3: Add `--quiet` long option.

-Q, --silent[¬∂](sphinx-build.html#cmdoption-sphinx-build-Q "Link to this definition")

Do not output anything on standard output, also suppress warnings. Only errors are written to standard error.

Changed in version 7.3: Add `--silent` long option.

-w file, --warning-file file[¬∂](sphinx-build.html#cmdoption-sphinx-build-w "Link to this definition")

Write warnings (and errors) to the given file, in addition to standard error.

Changed in version 7.3: ANSI control sequences are stripped when writing to *file*.

Changed in version 7.3: Add `--warning-file` long option.

-W, --fail-on-warning[¬∂](sphinx-build.html#cmdoption-sphinx-build-W "Link to this definition")

Turn warnings into errors. This means that **sphinx-build** exits with exit status 1 if any warnings are generated during the build.

Changed in version 7.3: Add `--fail-on-warning` long option.

Changed in version 8.1: **sphinx-build** no longer exits on the first warning, but instead runs the entire build and exits with exit status 1 if any warnings were generated. This behaviour was previously enabled with [`--keep-going`](sphinx-build.html#cmdoption-sphinx-build-keep-going).

--keep-going[¬∂](sphinx-build.html#cmdoption-sphinx-build-keep-going "Link to this definition")

From Sphinx 8.1, `--keep-going` is always enabled. Previously, it was only applicable whilst using [`--fail-on-warning`](sphinx-build.html#cmdoption-sphinx-build-W), which by default exited **sphinx-build** on the first warning. Using `--keep-going` runs **sphinx-build** to completion and exits with exit status 1 if errors are encountered.

Added in version 1.8.

Changed in version 8.1: **sphinx-build** no longer exits on the first warning, meaning that in effect `--keep-going` is always enabled. The option is retained for compatibility, but may be removed at some later date.

-T, --show-traceback[¬∂](sphinx-build.html#cmdoption-sphinx-build-T "Link to this definition")

Display the full traceback when an unhandled exception occurs. Otherwise, only a summary is displayed and the traceback information is saved to a file for further analysis.

Added in version 1.2.

Changed in version 7.3: Add `--show-traceback` long option.

-P, --pdb[¬∂](sphinx-build.html#cmdoption-sphinx-build-P "Link to this definition")

(Useful for debugging only.) Run the Python debugger, [`pdb`](https://docs.python.org/3/library/pdb.html#module-pdb "(in Python v3.13)"), if an unhandled exception occurs while building.

Changed in version 7.3: Add `--pdb` long option.

--exception-on-warning[¬∂](sphinx-build.html#cmdoption-sphinx-build-exception-on-warning "Link to this definition")

Raise an exception when a warning is emitted during the build. This can be useful in combination with [`--pdb`](sphinx-build.html#cmdoption-sphinx-build-P) to debug warnings.

Added in version 8.1.

-h, --help, --version[¬∂](sphinx-build.html#cmdoption-sphinx-build-h "Link to this definition")

Display usage summary or Sphinx version.

Added in version 1.2.

You can also give one or more filenames on the command line after the source and build directories. Sphinx will then try to build only these output files (and their dependencies).

## Environment Variables[¬∂](sphinx-build.html#environment-variables "Link to this heading")

The **sphinx-build** refers following environment variables:

MAKE

A path to make command. A command name is also allowed. **sphinx-build** uses it to invoke sub-build process on make-mode.

Makefile Options

The `Makefile` and `make.bat` files created by **sphinx-quickstart** usually run **sphinx-build** only with the [`-b`](sphinx-build.html#cmdoption-sphinx-build-b) and [`-d`](sphinx-build.html#cmdoption-sphinx-build-d) options. However, they support the following variables to customize behavior:

PAPER

This sets the `'papersize'` key of [`latex_elements`](../usage/configuration.html#confval-latex_elements): i.e. `PAPER=a4` sets it to `'a4paper'` and `PAPER=letter` to `'letterpaper'`.

Note

Usage of this environment variable got broken at Sphinx 1.5 as `a4` or `letter` ended up as option to LaTeX document in place of the needed `a4paper`, resp. `letterpaper`. Fixed at 1.7.7.

SPHINXBUILD

The command to use instead of `sphinx-build`.

BUILDDIR

The build directory to use instead of the one chosen in **sphinx-quickstart**.

SPHINXOPTS

Additional options for **sphinx-build**. These options can also be set via the shortcut variable **O** (capital ‚Äòo‚Äô).

NO\_COLOR

When set (regardless of value), **sphinx-build** will not use color in terminal output. `NO_COLOR` takes precedence over `FORCE_COLOR`. See [no-color.org](https://no-color.org/) for other libraries supporting this community standard.

Added in version 4.5.0.

FORCE\_COLOR

When set (regardless of value), **sphinx-build** will use color in terminal output. `NO_COLOR` takes precedence over `FORCE_COLOR`.

Added in version 4.5.0.

## Deprecation Warnings[¬∂](sphinx-build.html#deprecation-warnings "Link to this heading")

If any deprecation warning like `RemovedInSphinxXXXWarning` are displayed when building a user‚Äôs document, some Sphinx extension is using deprecated features. In that case, please report it to author of the extension.

To disable the deprecation warnings, please set `PYTHONWARNINGS=` environment variable to your environment. For example:

- `PYTHONWARNINGS= make html` (Linux/Mac)
- `export PYTHONWARNINGS=` and do `make html` (Linux/Mac)
- `set PYTHONWARNINGS=` and do `make html` (Windows)
- modify your Makefile/make.bat and set the environment variable

## See also[¬∂](sphinx-build.html#see-also "Link to this heading")

*sphinx-quickstart(1)*








### Navigation

- [Documentation](../index.html) ¬ª
- [Command-line tools](index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference



# sphinx-quickstart[¬∂](sphinx-quickstart.html#sphinx-quickstart "Link to this heading")

## Synopsis[¬∂](sphinx-quickstart.html#synopsis "Link to this heading")

**sphinx-quickstart**

## Description[¬∂](sphinx-quickstart.html#description "Link to this heading")

**sphinx-quickstart** is an interactive tool that asks some questions about your project and then generates a complete documentation directory and sample Makefile to be used with *sphinx-build(1)*.

## Options[¬∂](sphinx-quickstart.html#options "Link to this heading")

-q, --quiet[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-q "Link to this definition")

Quiet mode that skips the interactive wizard for specifying options. This option requires -p, -a and -v options.

-h, --help, --version[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-h "Link to this definition")

Display usage summary or Sphinx version.

Structure Options

--sep[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-sep "Link to this definition")

If specified, separate source and build directories.

--no-sep[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-no-sep "Link to this definition")

If specified, create build directory under source directory.

--dot=DOT[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-dot "Link to this definition")

Inside the root directory, two more directories will be created; ‚Äú\_templates‚Äù for custom HTML templates and ‚Äú\_static‚Äù for custom stylesheets and other static files. You can enter another prefix (such as ‚Äú.‚Äù) to replace the underscore.

Project Basic Options

-p PROJECT, --project=PROJECT[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-p "Link to this definition")

Project name will be set. (see [`project`](../usage/configuration.html#confval-project)).

-a AUTHOR, --author=AUTHOR[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-a "Link to this definition")

Author names. (see [`copyright`](../usage/configuration.html#confval-copyright)).

-v VERSION[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-v "Link to this definition")

Version of project. (see [`version`](../usage/configuration.html#confval-version)).

-r RELEASE, --release=RELEASE[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-r "Link to this definition")

Release of project. (see [`release`](../usage/configuration.html#confval-release)).

-l LANGUAGE, --language=LANGUAGE[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-l "Link to this definition")

Document language. (see [`language`](../usage/configuration.html#confval-language)).

--suffix=SUFFIX[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-suffix "Link to this definition")

Source file suffix. (see [`source_suffix`](../usage/configuration.html#confval-source_suffix)).

--master=MASTER[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-master "Link to this definition")

Master document name. (see [`root_doc`](../usage/configuration.html#confval-root_doc)).

Extension Options

--ext-autodoc[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-autodoc "Link to this definition")

Enable [`sphinx.ext.autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension.

--ext-doctest[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-doctest "Link to this definition")

Enable sphinx.ext.doctest extension.

--ext-intersphinx[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-intersphinx "Link to this definition")

Enable sphinx.ext.intersphinx extension.

--ext-todo[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-todo "Link to this definition")

Enable sphinx.ext.todo extension.

--ext-coverage[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-coverage "Link to this definition")

Enable sphinx.ext.coverage extension.

--ext-imgmath[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-imgmath "Link to this definition")

Enable sphinx.ext.imgmath extension.

--ext-mathjax[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-mathjax "Link to this definition")

Enable sphinx.ext.mathjax extension.

--ext-ifconfig[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-ifconfig "Link to this definition")

Enable sphinx.ext.ifconfig extension.

--ext-viewcode[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-viewcode "Link to this definition")

Enable sphinx.ext.viewcode extension.

--ext-githubpages[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-ext-githubpages "Link to this definition")

Enable sphinx.ext.githubpages extension.

--extensions=EXTENSIONS[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-extensions "Link to this definition")

Enable arbitrary extensions.

Makefile and Batchfile Creation Options

--use-make-mode (-m), --no-use-make-mode (-M)[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-use-make-mode "Link to this definition")

`Makefile/make.bat` uses (or doesn‚Äôt use) [make-mode](sphinx-build.html#make-mode). Default is `use`, which generates a more concise `Makefile/make.bat`.

Changed in version 1.5: make-mode is default.

Changed in version 7.3: Support for disabling the make-mode will be removed in Sphinx 8.

Removed in version 8.0: The `--no-use-make-mode` option. The `--use-make-mode` now has no effect.

--makefile, --no-makefile[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-makefile "Link to this definition")

Create (or not create) makefile.

--batchfile, --no-batchfile[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-batchfile "Link to this definition")

Create (or not create) batchfile

Project templating

Added in version 1.5: Project templating options for sphinx-quickstart

-t, --templatedir=TEMPLATEDIR[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-t "Link to this definition")

Template directory for template files. You can modify the templates of sphinx project files generated by quickstart. Following Jinja2 template files are allowed:

- `root_doc.rst.jinja`
- `conf.py.jinja`
- `Makefile.jinja`
- `Makefile.new.jinja`
- `make.bat.jinja`
- `make.bat.new.jinja`

In detail, please refer the system template files Sphinx provides. (`sphinx/templates/quickstart`)

-d NAME=VALUE[¬∂](sphinx-quickstart.html#cmdoption-sphinx-quickstart-d "Link to this definition")

Define a template variable

## See also[¬∂](sphinx-quickstart.html#see-also "Link to this heading")

*sphinx-build(1)*








### Navigation

- [Documentation](../index.html) ¬ª

The Basics


User guide


Community



Reference


# Contribute to Sphinx[¬∂](index.html#contribute-to-sphinx "Link to this heading")

This guide contains information about the Sphinx open source project itself. This is where you can find information about how Sphinx is managed and learn how to contribute to the project.












### Navigation

- [Documentation](../index.html) ¬ª
- [Contribute to Sphinx](index.html) ¬ª

The Basics


User guide


Community



Reference


# Sphinx Code of Conduct[¬∂](code-of-conduct.html#sphinx-code-of-conduct "Link to this heading")

Like the technical community as a whole, the Sphinx team and community is made up of volunteers from all over the world. Diversity is a strength, but it can also lead to communication issues and unhappiness. To that end, we have a few ground rules that we ask people to adhere to.

- **Be friendly and patient.**
- **Be welcoming.** We strive to be a community that welcomes and supports people of all backgrounds and identities. This includes, but is not limited to members of any race, ethnicity, culture, national origin, colour, immigration status, social and economic class, educational level, sex, sexual orientation, gender identity and expression, age, size, family status, political belief, religion, and mental and physical ability.
- **Be considerate.** Your work will be used by other people, and you in turn will depend on the work of others. Any decision you take will affect users and colleagues, and you should take those consequences into account when making decisions. Remember that we‚Äôre a world-wide community, so you might not be communicating in someone else‚Äôs primary language.
- **Be respectful.** Not all of us will agree all the time, but disagreement is no excuse for poor behavior and poor manners. We might all experience some frustration now and then, but we cannot allow that frustration to turn into a personal attack. It‚Äôs important to remember that a community where people feel uncomfortable or threatened is not a productive one. Members of the Sphinx community should be respectful when dealing with other members as well as with people outside the Sphinx community.
- **Be careful in the words that you choose.** We are a community of professionals, and we conduct ourselves professionally. Be kind to others. Do not insult or put down other participants. Harassment and other exclusionary behavior aren‚Äôt acceptable. This includes, but is not limited to:

  - Violent threats or language directed against another person.
  - Discriminatory jokes and language.
  - Posting sexually explicit or violent material.
  - Posting (or threatening to post) other people‚Äôs personally identifying information (‚Äúdoxing‚Äù).
  - Personal insults, especially those using racist or sexist terms.
  - Unwelcome sexual attention.
  - Advocating for, or encouraging, any of the above behavior.
  - Repeated harassment of others. In general, if someone asks you to stop, then stop.
- **When we disagree, try to understand why.** Disagreements, both social and technical, happen all the time and Sphinx is no exception. It is important that we resolve disagreements and differing views constructively. Remember that we‚Äôre different. Different people have different perspectives on issues. Being unable to understand why someone holds a viewpoint doesn‚Äôt mean that they‚Äôre wrong. Don‚Äôt forget that it is human to err and blaming each other doesn‚Äôt get us anywhere. Instead, focus on helping to resolve issues and learning from mistakes.

This isn‚Äôt an exhaustive list of things that you can‚Äôt do. Rather, take it in the spirit in which it‚Äôs intended - a guide to make it easier to enrich all of us and the technical communities in which we participate. This code of conduct applies to all spaces of the Sphinx community.

Attribution

Original text courtesy of the Speak Up! project: [http://web.archive.org/web/20141109123859/http://speakup.io/coc.html](http://web.archive.org/web/20141109123859/http://speakup.io/coc.html).








### Navigation

- [Documentation](../index.html) ¬ª
- [Contribute to Sphinx](index.html) ¬ª

### On this page





The Basics


User guide


Community



Reference


# Contributing to Sphinx[¬∂](contributing.html#contributing-to-sphinx "Link to this heading")

There are many ways you can contribute to Sphinx, be it filing bug reports or feature requests, writing new documentation or submitting patches for new or fixed behavior. This guide serves to illustrate how you can get started with this.

## Get help[¬∂](contributing.html#get-help "Link to this heading")

The Sphinx community maintains a number of mailing lists and IRC channels.

Stack Overflow with tag [python-sphinx](https://stackoverflow.com/questions/tagged/python-sphinx)

Questions and answers about use and development.

[GitHub Discussions Q&amp;A](https://github.com/orgs/sphinx-doc/discussions/categories/q-a)

Question-and-answer style forum for discussions.

sphinx-users &lt;[sphinx-users@googlegroups.com](https://www.sphinx-doc.org/cdn-cgi/l/email-protection#51222139383f297c2422342322777262666a777264636a777265696a363e3e363d3436233e242122777265676a323e3c)&gt;

Mailing list for user support.

sphinx-dev &lt;[sphinx-dev@googlegroups.com](https://www.sphinx-doc.org/cdn-cgi/l/email-protection#b2c1c2dadbdcca9fd6d7c4949181858994918780899491868a89d5ddddd5ded7d5c0ddc7c2c19491868489d1dddf)&gt;

Mailing list for development related discussions.

#sphinx-doc on irc.libera.chat

IRC channel for development questions and user support.

## Bug Reports and Feature Requests[¬∂](contributing.html#bug-reports-and-feature-requests "Link to this heading")

If you have encountered a problem with Sphinx or have an idea for a new feature, please submit it to the [issue tracker](https://github.com/sphinx-doc/sphinx/issues) on GitHub.

For bug reports, please include the output produced during the build process and also the log file Sphinx creates after it encounters an unhandled exception. The location of this file should be shown towards the end of the error message. Please also include the output of **sphinx-build --bug-report**.

Including or providing a link to the source files involved may help us fix the issue. If possible, try to create a minimal project that produces the error and post that instead.

## Contribute code[¬∂](contributing.html#contribute-code "Link to this heading")

The Sphinx source code is managed using Git and is [hosted on GitHub](https://github.com/sphinx-doc/sphinx). The recommended way for new contributors to submit code to Sphinx is to fork this repository and submit a pull request after committing changes to their fork. The pull request will then need to be approved by one of the core developers before it is merged into the main repository.

### Getting started[¬∂](contributing.html#getting-started "Link to this heading")

Before starting on a patch, we recommend checking for open issues or opening a fresh issue to start a discussion around a feature idea or a bug. If you feel uncomfortable or uncertain about an issue or your changes, feel free to [start a discussion](https://github.com/orgs/sphinx-doc/discussions/).

These are the basic steps needed to start developing on Sphinx.

01. Create an account on GitHub.
02. [Fork](https://github.com/sphinx-doc/sphinx/fork) the main Sphinx repository ([sphinx-doc/sphinx](https://github.com/sphinx-doc/sphinx)) using the GitHub interface.
03. Clone the forked repository to your machine.

    ```
    git clone https://github.com/<USERNAME>/sphinx
    cd sphinx
    ```
04. Setup a virtual environment.

    This is not necessary for unit testing, thanks to **tox**, but it is necessary if you wish to run **sphinx-build** locally or run unit tests without the help of **tox**:

    ```
    virtualenv ~/.venv
    . ~/.venv/bin/activate
    pip install -e .
    ```
05. Create a new working branch. Choose any name you like.

    ```
    git switch -c feature-xyz
    ```
06. Hack, hack, hack.

    Write your code along with tests that shows that the bug was fixed or that the feature works as expected.
07. Add a bullet point to `CHANGES.rst` if the fix or feature is not trivial (small doc updates, typo fixes), then commit:

    ```
    git commit -m 'Add useful new feature that does this.'
    ```
08. Push changes in the branch to your forked repository on GitHub:

    ```
    git push origin feature-xyz
    ```
09. Submit a pull request from your branch to the `master` branch.

    GitHub recognizes certain phrases that can be used to automatically update the issue tracker. For example, including ‚ÄòCloses #42‚Äô in the body of your pull request will close issue #42 if the PR is merged.
10. Wait for a core developer or contributor to review your changes.

### Coding style[¬∂](contributing.html#coding-style "Link to this heading")

Please follow these guidelines when writing code for Sphinx:

- Try to use the same code style as used in the rest of the project.
- For non-trivial changes, please update the `CHANGES.rst` file. If your changes alter existing behavior, please document this.
- New features should be documented. Include examples and use cases where appropriate. If possible, include a sample that is displayed in the generated output.
- When adding a new configuration variable, be sure to [document it](../usage/configuration.html) and update `sphinx/cmd/quickstart.py` if it‚Äôs important enough.
- Add appropriate unit tests.

Style and type checks can be run as follows:

```
ruff check .
mypy
```

### Unit tests[¬∂](contributing.html#unit-tests "Link to this heading")

Sphinx is tested using [pytest](https://docs.pytest.org/en/latest/) for Python code and [Jasmine](https://jasmine.github.io/) for JavaScript.

To run Python unit tests, we recommend using **tox**, which provides a number of targets and allows testing against multiple different Python environments:

- To list all possible targets:

  ```
  tox -av
  ```
- To run unit tests for a specific Python version, such as Python 3.13:

  ```
  tox -e py313
  ```
- Arguments to **pytest** can be passed via **tox**, e.g., in order to run a particular test:

  ```
  tox -e py313 tests/test_module.py::test_new_feature
  ```

You can also test by installing dependencies in your local environment:

> ```
> pip install .[test]
> ```

To run JavaScript tests, use **npm**:

```
npm install
npm run test
```

Tip

**jasmine** requires a Firefox binary to use as a test browser.

On Unix systems, you can check the presence and location of the `firefox` binary at the command-line by running `command -v firefox`.

New unit tests should be included in the `tests/` directory where necessary:

- For bug fixes, first add a test that fails without your changes and passes after they are applied.
- Tests that need a **sphinx-build** run should be integrated in one of the existing test modules if possible.
- Tests should be quick and only test the relevant components, as we aim that *the test suite should not take more than a minute to run*. In general, avoid using the `app` fixture and `app.build()` unless a full integration test is required.

Added in version 1.8: Sphinx also runs JavaScript tests.

Changed in version 1.5.2: Sphinx was switched from nose to pytest.

## Contribute documentation[¬∂](contributing.html#contribute-documentation "Link to this heading")

Contributing to documentation involves modifying the source files found in the `doc/` folder. To get started, you should first follow [Getting started](contributing.html#contribute-get-started), and then take the steps below to work with the documentation.

The following sections describe how to get started with contributing documentation, as well as key aspects of a few different tools that we use.

### Build the documentation[¬∂](contributing.html#build-the-documentation "Link to this heading")

To build the documentation, run the following command:

```
sphinx-build -M html ./doc ./build/sphinx --fail-on-warning
```

This will parse the Sphinx documentation‚Äôs source files and generate HTML for you to preview in `build/sphinx/html`.

You can also build a **live version of the documentation** that you can preview in the browser. It will detect changes and reload the page any time you make edits. To do so, use [sphinx-autobuild](https://github.com/sphinx-doc/sphinx-autobuild) to run the following command:

```
sphinx-autobuild ./doc ./build/sphinx/
```

### Translations[¬∂](contributing.html#translations "Link to this heading")

The parts of messages in Sphinx that go into builds are translated into several locales. The translations are kept as gettext `.po` files translated from the master template `sphinx/locale/sphinx.pot`.

Sphinx uses [Babel](https://babel.pocoo.org/en/latest/) to extract messages and maintain the catalog files. The `utils` directory contains a helper script, `babel_runner.py`.

- Use `python babel_runner.py extract` to update the `.pot` template.
- Use `python babel_runner.py update` to update all existing language catalogs in `sphinx/locale/*/LC_MESSAGES` with the current messages in the template file.
- Use `python babel_runner.py compile` to compile the `.po` files to binary `.mo` files and `.js` files.

When an updated `.po` file is submitted, run `python babel_runner.py compile` to commit both the source and the compiled catalogs.

When a new locale is submitted, add a new directory with the ISO 639-1 language identifier and put `sphinx.po` in there. Don‚Äôt forget to update the possible values for [`language`](../usage/configuration.html#confval-language) in `doc/usage/configuration.rst`.

The Sphinx core messages can also be translated on [Transifex](https://www.transifex.com/sphinx-doc/sphinx-1/). There `tx` client tool, which is provided by the `transifex_client` Python package, can be used to pull translations in `.po` format from Transifex. To do this, go to `sphinx/locale` and then run `tx pull -f -l LANG` where `LANG` is an existing language identifier. It is good practice to run `python babel_runner.py update` afterwards to make sure the `.po` file has the canonical Babel formatting.

## Debugging tips[¬∂](contributing.html#debugging-tips "Link to this heading")

- Delete the build cache before building documents if you make changes in the code by running the command `make clean` or using the [`sphinx-build --fresh-env`](../man/sphinx-build.html#cmdoption-sphinx-build-E) option.
- Use the [`sphinx-build --pdb`](../man/sphinx-build.html#cmdoption-sphinx-build-P) option to run `pdb` on exceptions.
- Use `node.pformat()` and `node.asdom().toxml()` to generate a printable representation of the document structure.
- Set the configuration variable [`keep_warnings`](../usage/configuration.html#confval-keep_warnings) to `True` so warnings will be displayed in the generated output.
- Set the configuration variable [`nitpicky`](../usage/configuration.html#confval-nitpicky) to `True` so that Sphinx will complain about references without a known target.
- Set the debugging options in the [Docutils configuration file](https://docutils.sourceforge.io/docs/user/config.html).

## Updating generated files[¬∂](contributing.html#updating-generated-files "Link to this heading")

- JavaScript stemming algorithms in `sphinx/search/non-minified-js/*.js` are generated using [snowball](https://github.com/snowballstem/snowball) by cloning the repository, executing `make dist_libstemmer_js` and then unpacking the tarball which is generated in `dist` directory.

  Minified files in `sphinx/search/minified-js/*.js` are generated from non-minified ones using **uglifyjs** (installed via npm), with `-m` option to enable mangling.
- The `searchindex.js` files found in the `tests/js/fixtures/*` directories are generated by using the standard Sphinx HTML builder on the corresponding input projects found in `tests/js/roots/*`. The fixtures provide test data used by the Sphinx JavaScript unit tests, and can be regenerated by running the `utils/generate_js_fixtures.py` script.








### Navigation

- [Documentation](../index.html) ¬ª
- [Contribute to Sphinx](index.html) ¬ª

### On this page




The Basics


User guide


Community



Reference


# Organization of the Sphinx project[¬∂](organization.html#organization-of-the-sphinx-project "Link to this heading")

The guide explains how the Sphinx project is organized.

## Core developers[¬∂](organization.html#core-developers "Link to this heading")

The core developers of Sphinx have write access to the main repository. They can commit changes, accept/reject pull requests, and manage items on the issue tracker.

### Guidelines[¬∂](organization.html#guidelines "Link to this heading")

The following are some general guidelines for core developers:

- Questionable or extensive changes should be submitted as a pull request instead of being committed directly to the main repository. The pull request should be reviewed by another core developer before it is merged.
- Trivial changes can be committed directly but be sure to keep the repository in a good working state and that all tests pass before pushing your changes.
- When committing code written by someone else, please attribute the original author in the commit message and any relevant `CHANGES.rst` entry.

### Membership[¬∂](organization.html#membership "Link to this heading")

Core membership is predicated on continued active contribution to the project. In general, prospective cores should demonstrate:

- a good understanding of one of more components of Sphinx
- a history of helpful, constructive contributions
- a willingness to invest time improving Sphinx

Refer to [Contributing to Sphinx](contributing.html) for more information on how you can get started.

## Other contributors[¬∂](organization.html#other-contributors "Link to this heading")

You do not need to be a core developer or have write access to be involved in the development of Sphinx. You can submit patches or create pull requests from forked repositories and have a core developer add the changes for you.

Similarly, contributions are not limited to code patches. We also welcome help triaging bugs, input on design decisions, reviews of existing patches and documentation improvements. More information can be found in [Contributing to Sphinx](contributing.html).

A list of people that have contributed to Sphinx can be found in [Sphinx authors](../authors.html).








### Navigation

- [Documentation](../index.html) ¬ª
- [Contribute to Sphinx](index.html) ¬ª

### On this page




The Basics


User guide


Community



Reference


# Sphinx‚Äôs release process[¬∂](release-process.html#sphinx-s-release-process "Link to this heading")

## Versioning[¬∂](release-process.html#versioning "Link to this heading")

Sphinx adheres to [**PEP 440**](https://peps.python.org/pep-0440/) versions, with a `major.minor.micro` scheme for the *release segment* (e.g. 1.2.3). The major, minor, and micro version parts should be altered as follows:

- The major version part should be incremented for incompatible behavior change and public API updates.
- The minor version part should be incremented for most releases of Sphinx, where backwards-compatibility of API and features are preserves.
- The micro version part should only be incremented for urgent bugfix-only releases.

When the major version part is incremented, the minor and micro version parts must be set to `0`. When the minor version part is incremented, the micro version part must be set to `0`.

New major versions should come with a beta-testing period before the final release.

## Deprecating a feature[¬∂](release-process.html#deprecating-a-feature "Link to this heading")

There are a couple reasons that code in Sphinx might be deprecated:

- If a feature has been improved or modified in a backwards-incompatible way, the old feature or behavior will be deprecated.
- Sometimes Sphinx will include a backport of a Python library that‚Äôs not included in a version of Python that Sphinx currently supports. When Sphinx no longer needs to support the older version of Python that doesn‚Äôt include the library, the library will be deprecated in Sphinx.

As the [Deprecation policy](release-process.html#deprecation-policy) describes, the first release of Sphinx that deprecates a feature (`A.B`) should raise a `RemovedInSphinxXXWarning` (where `XX` is the Sphinx version where the feature will be removed) when the deprecated feature is invoked. Assuming we have good test coverage, these warnings are converted to errors when running the test suite with warnings enabled:

```
pytest -Wall
```

Thus, when adding a `RemovedInSphinxXXWarning` you need to eliminate or silence any warnings generated when running the tests.

## Deprecation policy[¬∂](release-process.html#deprecation-policy "Link to this heading")

MAJOR and MINOR releases may deprecate certain features from previous releases. If a feature is deprecated in a release A.x, it will continue to work in all A.x.x versions (for all versions of x). It will continue to work in all B.x.x versions but raise deprecation warnings. Deprecated features will be removed at the C.0.0. It means the deprecated feature will work during 2 MAJOR releases at least.

So, for example, if we decided to start the deprecation of a function in Sphinx 2.x:

- Sphinx 2.x will contain a backwards-compatible replica of the function which will raise a `RemovedInSphinx40Warning`. This is a subclass of [`PendingDeprecationWarning`](https://docs.python.org/3/library/exceptions.html#PendingDeprecationWarning "(in Python v3.13)"), i.e. it will not get displayed by default.
- Sphinx 3.x will still contain the backwards-compatible replica, but `RemovedInSphinx40Warning` will be a subclass of [`DeprecationWarning`](https://docs.python.org/3/library/exceptions.html#DeprecationWarning "(in Python v3.13)") then, and gets displayed by default.
- Sphinx 4.0 will remove the feature outright.

### Deprecation warnings[¬∂](release-process.html#deprecation-warnings "Link to this heading")

Sphinx will enable its `RemovedInNextVersionWarning` warnings by default, if [`PYTHONWARNINGS`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONWARNINGS "(in Python v3.13)") is not set. Therefore you can disable them using:

- `PYTHONWARNINGS= make html` (Linux/Mac)
- `export PYTHONWARNINGS=` and do `make html` (Linux/Mac)
- `set PYTHONWARNINGS=` and do `make html` (Windows)

But you can also explicitly enable the pending ones using e.g. `PYTHONWARNINGS=default` (see the [Python docs on configuring warnings](https://docs.python.org/3/library/warnings.html#describing-warning-filters "(in Python v3.13)")) for more details.

## Python version support policy[¬∂](release-process.html#python-version-support-policy "Link to this heading")

Sphinx supports at all minor versions of Python released in the past 3 years from the anticipated release date with a minimum of 3 minor versions of Python. This policy is derived from [SPEC 0](https://scientific-python.org/specs/spec-0000/), a scientific Python domain standard.

For example, a version of Sphinx released in May 2025 would support Python 3.11, 3.12, and 3.13.

This is a summary table with the current policy:

| Date        | Python |
|-------------|--------|
| 05 Oct 2023 | 3.10+  |
| 04 Oct 2024 | 3.11+  |
| 24 Oct 2025 | 3.12+  |
| 01 Oct 2026 | 3.13+  |
| 01 Oct 2027 | 3.14+  |

## Release procedures[¬∂](release-process.html#release-procedures "Link to this heading")

The release procedures are listed in `utils/release-checklist.rst`.








### Navigation

- [Documentation](../index.html) ¬ª

### On this page



The Basics


User guide



Community


Reference


# Sphinx API[¬∂](index.html#sphinx-api "Link to this heading")

Since many projects will need special features in their documentation, Sphinx is designed to be extensible on several levels.

Here are a few things you can do in an extension:

- Add new [builder](../glossary.html#term-builder)s to support new output formats or actions on the parsed documents.
- Register custom reStructuredText roles and directives, extending the markup using the [Docutils markup API](markupapi.html).
- Add custom code to so-called ‚Äúhook points‚Äù at strategic places throughout the build process, allowing you to register a hook and run specialized code. For example, see the [Event callbacks API](event_callbacks.html#events).

An extension is simply a Python module with a `setup()` function. A user activates the extension by placing the extension‚Äôs module name (or a sub-module) in their [`extensions`](../usage/configuration.html#confval-extensions) configuration value.

When **sphinx-build** is executed, Sphinx will attempt to import each module that is listed, and execute `yourmodule.setup(app)`. This function is used to prepare the extension (e.g., by executing Python code), linking resources that Sphinx uses in the build process (like CSS or HTML files), and notifying Sphinx of everything the extension offers (such as directive or role definitions). The `app` argument is an instance of [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx") and gives you control over most aspects of the Sphinx build.

Note

The configuration file itself can be treated as an extension if it contains a `setup()` function. All other extensions to load must be listed in the [`extensions`](../usage/configuration.html#confval-extensions) configuration value.

The rest of this page describes some high-level aspects of developing extensions and various parts of Sphinx‚Äôs behavior that you can control. For some examples of how extensions can be built and used to control different parts of Sphinx, see the [Tutorials](../development/tutorials/index.html#extension-tutorials-index).

## Important objects[¬∂](index.html#important-objects "Link to this heading")

There are several key objects whose API you will use while writing an extension. These are:

**Application**

The application object (usually called `app`) is an instance of [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"). It controls most high-level functionality, such as the setup of extensions, event dispatching and producing output (logging).

If you have the environment object, the application is available as `env.app`.

**Environment**

The build environment object (usually called `env`) is an instance of [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"). It is responsible for parsing the source documents, stores all metadata about the document collection and is serialized to disk after each build.

Its API provides methods to do with access to metadata, resolving references, etc. It can also be used by extensions to cache information that should persist for incremental rebuilds.

If you have the application or builder object, the environment is available as `app.env` or `builder.env`.

**Builder**

The builder object (usually called `builder`) is an instance of a specific subclass of [`Builder`](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder"). Each builder class knows how to convert the parsed documents into an output format, or otherwise process them (e.g. check external links).

If you have the application object, the builder is available as `app.builder`.

**Config**

The config object (usually called `config`) provides the values of configuration values set in `conf.py` as attributes. It is an instance of [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config").

The config is available as `app.config` or `env.config`.

To see an example of use of these objects, refer to [the tutorials](../development/tutorials/index.html#extension-tutorials-index).

## Build phases[¬∂](index.html#build-phases "Link to this heading")

One thing that is vital in order to understand extension mechanisms is the way in which a Sphinx project is built: this works in several phases.

![digraph phases {      graph \[         rankdir = LR     \]      node \[         shape = rect;         style = filled;         fillcolor ="#f7f7f7";         fontcolor = "#0a507a"     \]      Initialization -> Reading;     Reading -> "Consistency checks";     "Consistency checks" -> Resolving;     Resolving -> Writing; }](../_images/graphviz-339e3ad43e173f7c950f79bf4d41f82f906d2175.png)

Build phases[¬∂](index.html#id3 "Link to this image")

**Phase 0: Initialization**

In this phase, almost nothing of interest to us happens. The source directory is searched for source files, and extensions are initialized. Should a stored build environment exist, it is loaded, otherwise a new one is created.

**Phase 1: Reading**

In Phase 1, all source files (and on subsequent builds, those that are new or changed) are read and parsed. This is the phase where directives and roles are encountered by docutils, and the corresponding code is executed. The output of this phase is a *doctree* for each source file; that is a tree of docutils nodes. For document elements that aren‚Äôt fully known until all existing files are read, temporary nodes are created.

There are nodes provided by docutils, which are documented [in the docutils documentation](https://docutils.sourceforge.io/docs/ref/doctree.html). Additional nodes are provided by Sphinx and [documented here](nodes.html#nodes).

During reading, the build environment is updated with all meta- and cross reference data of the read documents, such as labels, the names of headings, described Python objects and index entries. This will later be used to replace the temporary nodes.

The parsed doctrees are stored on the disk, because it is not possible to hold all of them in memory.

**Phase 2: Consistency checks**

Some checking is done to ensure no surprises in the built documents.

**Phase 3: Resolving**

Now that the metadata and cross-reference data of all existing documents is known, all temporary nodes are replaced by nodes that can be converted into output using components called transforms. For example, links are created for object references that exist, and simple literal nodes are created for those that don‚Äôt.

**Phase 4: Writing**

This phase converts the resolved doctrees to the desired output format, such as HTML or LaTeX. This happens via a so-called docutils writer that visits the individual nodes of each doctree and produces some output in the process.

Note

Some builders deviate from this general build plan, for example, the builder that checks external links does not need anything more than the parsed doctrees and therefore does not have phases 2‚Äì4.

To see an example of application, refer to [Extending the build process](../development/tutorials/extending_build.html#tutorial-extend-build).

## Extension metadata[¬∂](index.html#extension-metadata "Link to this heading")

Added in version 1.3.

The `setup()` function should return a dictionary. This is treated by Sphinx as metadata of the extension. Metadata keys currently recognized are:

`'version'`

A string that identifies the extension version. It is used for extension version requirement checking (see [`needs_extensions`](../usage/configuration.html#confval-needs_extensions)) and informational purposes. If no version string is returned, `'unknown version'` is used by default.

`'env_version'`

A non-zero positive integer integer that records the version of data stored in the environment by the extension.

Attention

If `'env_version'` is not set, the extension **must not** store any data or state directly on the environment object (`env`).

This key must be defined if the extension uses the `env` object to store data. The version number must be incremented whenever the type, structure, or meaning of the stored data change, to ensure Sphinx does not try and load invalid data from a cached environment.

Added in version 1.8.

`'parallel_read_safe'`

A boolean that specifies if parallel reading of source files can be used when the extension is loaded. It defaults to `False`, meaning that you have to explicitly specify your extension to be safe for parallel reading after checking that it is.

Important

When *parallel-read-safe* is `True`, the extension must satisfy the following conditions:

- The core logic of the extension is parallelly executable during the reading phase.
- It has event handlers for [`env-merge-info`](event_callbacks.html#event-env-merge-info) and [`env-purge-doc`](event_callbacks.html#event-env-purge-doc) events if it stores data to the build environment object (`env`) during the reading phase.

`'parallel_write_safe'`

A boolean that specifies if parallel writing of output files can be used when the extension is loaded. Since extensions usually don‚Äôt negatively influence the process, this defaults to `True`.

Important

When *parallel-write-safe* is `True`, the extension must satisfy the following conditions:

- The core logic of the extension is parallelly executable during the writing phase.

## APIs used for writing extensions[¬∂](index.html#apis-used-for-writing-extensions "Link to this heading")

These sections provide a more complete description of the tools at your disposal when developing Sphinx extensions. Some are core to Sphinx (such as the [Application API](appapi.html)) while others trigger specific behavior (such as the [i18n API](i18n.html))























### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page












The Basics


User guide



Community


Reference


# Application API[¬∂](appapi.html#module-sphinx.application "Link to this heading")

Each Sphinx extension is a Python module with at least a `setup()` function. This function is called at initialization time with one argument, the application object representing the Sphinx process.

*class* sphinx.application.Sphinx[\[source\]](../_modules/sphinx/application.html#Sphinx)[¬∂](appapi.html#sphinx.application.Sphinx "Link to this definition")

This application object has the public API described in the following.

## Extension setup[¬∂](appapi.html#extension-setup "Link to this heading")

These methods are usually called in an extension‚Äôs `setup()` function.

Examples of using the Sphinx extension API can be seen in the `sphinx.ext` package.

Sphinx.setup\_extension(*extname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.setup_extension)[¬∂](appapi.html#sphinx.application.Sphinx.setup_extension "Link to this definition")

Import and setup a Sphinx extension module.

Load the extension given by the module *name*. Use this if your extension needs the features provided by another extension. No-op if called twice.

*static* Sphinx.require\_sphinx(*version: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)"), [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")] | [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.require_sphinx)[¬∂](appapi.html#sphinx.application.Sphinx.require_sphinx "Link to this definition")

Check the Sphinx version if requested.

Compare *version* with the version of the running Sphinx, and abort the build when it is too old.

Parameters:

**version** ‚Äì The required version in the form of `major.minor` or `(major, minor)`.

Added in version 1.0.

Changed in version 7.1: Type of *version* now allows `(major, minor)` form.

Sphinx.connect(*event: Literal\['config-inited']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.connect)[¬∂](appapi.html#sphinx.application.Sphinx.connect "Link to this definition")

Sphinx.connect(*event: Literal\['builder-inited']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-get-outdated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], Sequence\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-before-read-docs']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-purge-doc']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['source-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['include-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Path, [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['doctree-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), nodes.document], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-merge-info']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-updated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-get-updated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['env-check-consistency']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['write-started']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['doctree-resolved']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), nodes.document, [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['missing-reference']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [addnodes.pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref"), nodes.TextElement], nodes.reference | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['warn-missing-reference']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Domain](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain"), [addnodes.pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref")], [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['build-finished']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['html-collect-pages']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")], Iterable\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['html-page-context']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any], nodes.document], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['linkcheck-process-uri']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['object-description-transform']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [addnodes.desc\_content](nodes.html#sphinx.addnodes.desc_content "sphinx.addnodes.desc_content")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['autodoc-process-docstring']*, *callback: \_AutodocProcessDocstringListener*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['autodoc-before-process-signature']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Any, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['autodoc-process-signature']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Literal\['module', 'class', 'exception', 'function', 'method', 'attribute'], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")], [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['autodoc-process-bases']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['autodoc-skip-member']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Literal\['module', 'class', 'exception', 'function', 'method', 'attribute'], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")]], [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['todo-defined']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), todo\_node], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['viewcode-find-source']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[Literal\['class', 'def', 'other'], [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)"), [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")]]]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: Literal\['viewcode-follow-imported']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Sphinx.connect(*event: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *callback: Callable\[..., Any]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Register *callback* to be called when *event* is emitted.

For details on available core events and the arguments of callback functions, please see [Event callbacks API](event_callbacks.html#events).

Parameters:

- **event** ‚Äì The name of target event
- **callback** ‚Äì Callback function for the event
- **priority** ‚Äì The priority of the callback. The callbacks will be invoked in order of *priority* (ascending).

Returns:

A listener ID. It can be used for [`disconnect()`](appapi.html#sphinx.application.Sphinx.disconnect "sphinx.application.Sphinx.disconnect").

Changed in version 3.0: Support *priority*

Sphinx.disconnect(*listener\_id: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.disconnect)[¬∂](appapi.html#sphinx.application.Sphinx.disconnect "Link to this definition")

Unregister callback by *listener\_id*.

Parameters:

**listener\_id** ‚Äì A listener\_id that [`connect()`](appapi.html#sphinx.application.Sphinx.connect "sphinx.application.Sphinx.connect") returns

Sphinx.add\_builder(*builder: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_builder)[¬∂](appapi.html#sphinx.application.Sphinx.add_builder "Link to this definition")

Register a new builder.

Parameters:

- **builder** ‚Äì A builder class
- **override** ‚Äì If true, install the builder forcedly even if another builder is already installed as the same name

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_config\_value(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *default: Any*, *rebuild: \_ConfigRebuild*, *types: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)") | Collection\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")] | [ENUM](appapi.html#sphinx.config.ENUM "sphinx.config.ENUM") = ()*, *description: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_config_value)[¬∂](appapi.html#sphinx.application.Sphinx.add_config_value "Link to this definition")

Register a configuration value.

This is necessary for Sphinx to recognize new values and set default values accordingly.

Parameters:

- **name** ‚Äì The name of the configuration value. It is recommended to be prefixed with the extension name (ex. `html_logo`, `epub_title`)
- **default** ‚Äì The default value of the configuration.
- **rebuild** ‚Äì

  The condition of rebuild. It must be one of those values:

  - `'env'` if a change in the setting only takes effect when a document is parsed ‚Äì this means that the whole environment must be rebuilt.
  - `'html'` if a change in the setting needs a full rebuild of HTML documents.
  - `''` if a change in the setting will not need any special rebuild.
- **types** ‚Äì The type of configuration value. A list of types can be specified. For example, `[str]` is used to describe a configuration that takes string value.
- **description** ‚Äì A short description of the configuration value.

Changed in version 0.4: If the *default* value is a callable, it will be called with the config object as its argument in order to get the default value. This can be used to implement config values whose default depends on other values.

Changed in version 0.6: Changed *rebuild* from a simple boolean (equivalent to `''` or `'env'`) to a string. However, booleans are still accepted and converted internally.

Added in version 7.4: The *description* parameter.

Sphinx.add\_event(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_event)[¬∂](appapi.html#sphinx.application.Sphinx.add_event "Link to this definition")

Register an event called *name*.

This is needed to be able to emit it.

Parameters:

**name** ‚Äì The name of the event

Sphinx.set\_translator(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *translator\_class: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[nodes.NodeVisitor]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.set_translator)[¬∂](appapi.html#sphinx.application.Sphinx.set_translator "Link to this definition")

Register or override a Docutils translator class.

This is used to register a custom output translator or to replace a builtin translator. This allows extensions to use a custom translator and define custom nodes for the translator (see [`add_node()`](appapi.html#sphinx.application.Sphinx.add_node "sphinx.application.Sphinx.add_node")).

Parameters:

- **name** ‚Äì The name of the builder for the translator
- **translator\_class** ‚Äì A translator class
- **override** ‚Äì If true, install the translator forcedly even if another translator is already installed as the same name

Added in version 1.3.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_node(*node: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Element]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*, *\*\*kwargs: \_NodeHandlerPair*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_node)[¬∂](appapi.html#sphinx.application.Sphinx.add_node "Link to this definition")

Register a Docutils node class.

This is necessary for Docutils internals. It may also be used in the future to validate nodes in the parsed documents.

Parameters:

- **node** ‚Äì A node class
- **kwargs** ‚Äì Visitor functions for each builder (see below)
- **override** ‚Äì If true, install the node forcedly even if another node is already installed as the same name

Node visitor functions for the Sphinx HTML, LaTeX, text and manpage writers can be given as keyword arguments: the keyword should be one or more of `'html'`, `'latex'`, `'text'`, `'man'`, `'texinfo'` or any other supported translators, the value a 2-tuple of `(visit, depart)` methods. `depart` can be `None` if the `visit` function raises `docutils.nodes.SkipNode`. Example:

```
class math(docutils.nodes.Element): ...

def visit_math_html(self, node):
    self.body.append(self.starttag(node, 'math'))

def depart_math_html(self, node):
    self.body.append('</math>')

app.add_node(math, html=(visit_math_html, depart_math_html))
```

Obviously, translators for which you don‚Äôt specify visitor methods will choke on the node when encountered in a document to translate.

Changed in version 0.5: Added the support for keyword arguments giving visit functions.

Sphinx.add\_enumerable\_node(*node: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Element]*, *figtype: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *title\_getter: TitleGetter | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*, *\*\*kwargs: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[\_NodeHandler, \_NodeHandler]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_enumerable_node)[¬∂](appapi.html#sphinx.application.Sphinx.add_enumerable_node "Link to this definition")

Register a Docutils node class as a numfig target.

Sphinx numbers the node automatically. And then the users can refer it using [`numref`](../usage/referencing.html#role-numref "numref role").

Parameters:

- **node** ‚Äì A node class
- **figtype** ‚Äì The type of enumerable nodes. Each figtype has individual numbering sequences. As system figtypes, `figure`, `table` and `code-block` are defined. It is possible to add custom nodes to these default figtypes. It is also possible to define new custom figtype if a new figtype is given.
- **title\_getter** ‚Äì A getter function to obtain the title of node. It takes an instance of the enumerable node, and it must return its title as string. The title is used to the default title of references for [`ref`](../usage/referencing.html#role-ref "ref role"). By default, Sphinx searches `docutils.nodes.caption` or `docutils.nodes.title` from the node as a title.
- **kwargs** ‚Äì Visitor functions for each builder (same as [`add_node()`](appapi.html#sphinx.application.Sphinx.add_node "sphinx.application.Sphinx.add_node"))
- **override** ‚Äì If true, install the node forcedly even if another node is already installed as the same name

Added in version 1.4.

Sphinx.add\_directive(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *cls: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Directive](markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_directive)[¬∂](appapi.html#sphinx.application.Sphinx.add_directive "Link to this definition")

Register a Docutils directive.

Parameters:

- **name** ‚Äì The name of the directive
- **cls** ‚Äì A directive class
- **override** ‚Äì If false, do not install it if another directive is already installed as the same name If true, unconditionally install the directive.

For example, a custom directive named `my-directive` would be added like this:

```
from docutils.parsers.rst import Directive, directives

class MyDirective(Directive):
    has_content = True
    required_arguments = 1
    optional_arguments = 0
    final_argument_whitespace = True
    option_spec = {
        'class': directives.class_option,
        'name': directives.unchanged,
    }

    def run(self):
        pass

def setup(app):
    app.add_directive('my-directive', MyDirective)
```

For more details, see [the Docutils docs](https://docutils.sourceforge.io/docs/howto/rst-directives.html) .

Changed in version 0.6: Docutils 0.5-style directive classes are now supported.

Deprecated since version 1.8: Docutils 0.4-style (function based) directives support is deprecated.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_role(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *role: Any*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_role)[¬∂](appapi.html#sphinx.application.Sphinx.add_role "Link to this definition")

Register a Docutils role.

Parameters:

- **name** ‚Äì The name of role
- **role** ‚Äì A role function
- **override** ‚Äì If false, do not install it if another role is already installed as the same name If true, unconditionally install the role.

For more details about role functions, see [the Docutils docs](https://docutils.sourceforge.io/docs/howto/rst-roles.html) .

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_generic\_role(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *nodeclass: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Node]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_generic_role)[¬∂](appapi.html#sphinx.application.Sphinx.add_generic_role "Link to this definition")

Register a generic Docutils role.

Register a Docutils role that does nothing but wrap its contents in the node given by *nodeclass*.

Parameters:

**override** ‚Äì If false, do not install it if another role is already installed as the same name If true, unconditionally install the role.

Added in version 0.6.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_domain(*domain: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Domain](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_domain)[¬∂](appapi.html#sphinx.application.Sphinx.add_domain "Link to this definition")

Register a domain.

Parameters:

- **domain** ‚Äì A domain class
- **override** ‚Äì If false, do not install it if another domain is already installed as the same name If true, unconditionally install the domain.

Added in version 1.0.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_directive\_to\_domain(*domain: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *cls: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Directive](markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_directive_to_domain)[¬∂](appapi.html#sphinx.application.Sphinx.add_directive_to_domain "Link to this definition")

Register a Docutils directive in a domain.

Like [`add_directive()`](appapi.html#sphinx.application.Sphinx.add_directive "sphinx.application.Sphinx.add_directive"), but the directive is added to the domain named *domain*.

Parameters:

- **domain** ‚Äì The name of target domain
- **name** ‚Äì A name of directive
- **cls** ‚Äì A directive class
- **override** ‚Äì If false, do not install it if another directive is already installed as the same name If true, unconditionally install the directive.

Added in version 1.0.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_role\_to\_domain(*domain: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *role: RoleFunction | XRefRole*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_role_to_domain)[¬∂](appapi.html#sphinx.application.Sphinx.add_role_to_domain "Link to this definition")

Register a Docutils role in a domain.

Like [`add_role()`](appapi.html#sphinx.application.Sphinx.add_role "sphinx.application.Sphinx.add_role"), but the role is added to the domain named *domain*.

Parameters:

- **domain** ‚Äì The name of the target domain
- **name** ‚Äì The name of the role
- **role** ‚Äì The role function
- **override** ‚Äì If false, do not install it if another role is already installed as the same name If true, unconditionally install the role.

Added in version 1.0.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_index\_to\_domain(*domain: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *index: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Index](domainapi.html#sphinx.domains.Index "sphinx.domains.Index")]*, *\_override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_index_to_domain)[¬∂](appapi.html#sphinx.application.Sphinx.add_index_to_domain "Link to this definition")

Register a custom index for a domain.

Add a custom *index* class to the domain named *domain*.

Parameters:

- **domain** ‚Äì The name of the target domain
- **index** ‚Äì The index class
- **override** ‚Äì If false, do not install it if another index is already installed as the same name If true, unconditionally install the index.

Added in version 1.0.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_object\_type(*directivename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *rolename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *indextemplate: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *parse\_node: Callable\[\[[BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [addnodes.desc\_signature](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *ref\_nodeclass: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[nodes.TextElement] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *objname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *doc\_field\_types: Sequence\[Field] = ()*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_object_type)[¬∂](appapi.html#sphinx.application.Sphinx.add_object_type "Link to this definition")

Register a new object type.

This method is a very convenient way to add a new [object](../glossary.html#term-object) type that can be cross-referenced. It will do this:

- Create a new directive (called *directivename*) for documenting an object. It will automatically add index entries if *indextemplate* is nonempty; if given, it must contain exactly one instance of `%s`. See the example below for how the template will be interpreted.
- Create a new role (called *rolename*) to cross-reference to these object descriptions.
- If you provide *parse\_node*, it must be a function that takes a string and a docutils node, and it must populate the node with children parsed from the string. It must then return the name of the item to be used in cross-referencing and index entries. See the `conf.py` file in the source for this documentation for an example.
- The *objname* (if not given, will default to *directivename*) names the type of object. It is used when listing objects, e.g. in search results.

For example, if you have this call in a custom Sphinx extension:

```
app.add_object_type('directive', 'dir', 'pair: %s; directive')
```

you can use this markup in your documents:

```
.. rst:directive:: function

   Document a function.

<...>

See also the :rst:dir:`function` directive.
```

For the directive, an index entry will be generated as if you had prepended

```
.. index:: pair: function; directive
```

The reference node will be of class `literal` (so it will be rendered in a proportional font, as appropriate for code) unless you give the *ref\_nodeclass* argument, which must be a docutils node class. Most useful are `docutils.nodes.emphasis` or `docutils.nodes.strong` ‚Äì you can also use `docutils.nodes.generated` if you want no further text decoration. If the text should be treated as literal (e.g. no smart quote replacement), but not have typewriter styling, use `sphinx.addnodes.literal_emphasis` or `sphinx.addnodes.literal_strong`.

For the role content, you have the same syntactical possibilities as for standard Sphinx roles (see [Syntax](../usage/referencing.html#xref-syntax)).

If *override* is True, the given object\_type is forcedly installed even if an object\_type having the same name is already installed.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_crossref\_type(*directivename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *rolename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *indextemplate: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *ref\_nodeclass: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[nodes.TextElement] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *objname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_crossref_type)[¬∂](appapi.html#sphinx.application.Sphinx.add_crossref_type "Link to this definition")

Register a new crossref object type.

This method is very similar to [`add_object_type()`](appapi.html#sphinx.application.Sphinx.add_object_type "sphinx.application.Sphinx.add_object_type") except that the directive it generates must be empty, and will produce no output.

That means that you can add semantic targets to your sources, and refer to them using custom roles instead of generic ones (like [`ref`](../usage/referencing.html#role-ref "ref role")). Example call:

```
app.add_crossref_type(
    'topic', 'topic', 'single: %s', docutils.nodes.emphasis
)
```

Example usage:

```
.. topic:: application API

The application API
-------------------

Some random text here.

See also :topic:`this section <application API>`.
```

(Of course, the element following the `topic` directive needn‚Äôt be a section.)

Parameters:

**override** ‚Äì If false, do not install it if another cross-reference type is already installed as the same name If true, unconditionally install the cross-reference type.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_transform(*transform: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Transform]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_transform)[¬∂](appapi.html#sphinx.application.Sphinx.add_transform "Link to this definition")

Register a Docutils transform to be applied after parsing.

Add the standard docutils `Transform` subclass *transform* to the list of transforms that are applied after Sphinx parses a reST document.

Parameters:

**transform** ‚Äì A transform class

|          |                                                              |
|----------|--------------------------------------------------------------|
| Priority | Main purpose in Sphinx                                       |
| 0-99     | Fix invalid nodes by docutils. Translate a doctree.          |
| 100-299  | Preparation                                                  |
| 300-399  | early                                                        |
| 400-699  | main                                                         |
| 700-799  | Post processing. Deadline to modify text and referencing.    |
| 800-899  | Collect referencing and referenced nodes. Domain processing. |
| 900-999  | Finalize and clean up.                                       |

priority range categories for Sphinx transforms[¬∂](appapi.html#id3 "Link to this table")

refs: [Transform Priority Range Categories](https://docutils.sourceforge.io/docs/ref/transforms.html#transform-priority-range-categories)

Sphinx.add\_post\_transform(*transform: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Transform]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_post_transform)[¬∂](appapi.html#sphinx.application.Sphinx.add_post_transform "Link to this definition")

Register a Docutils transform to be applied before writing.

Add the standard docutils `Transform` subclass *transform* to the list of transforms that are applied before Sphinx writes a document.

Parameters:

**transform** ‚Äì A transform class

Sphinx.add\_js\_file(*filename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*, *loading\_method: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *\*\*kwargs: Any*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_js_file)[¬∂](appapi.html#sphinx.application.Sphinx.add_js_file "Link to this definition")

Register a JavaScript file to include in the HTML output.

Parameters:

- **filename** ‚Äì The name of a JavaScript file that the default HTML template will include. It must be relative to the HTML static path, or a full URI with scheme, or `None` . The `None` value is used to create an inline `<script>` tag. See the description of *kwargs* below.
- **priority** ‚Äì Files are included in ascending order of priority. If multiple JavaScript files have the same priority, those files will be included in order of registration. See list of ‚Äúpriority range for JavaScript files‚Äù below.
- **loading\_method** ‚Äì The loading method for the JavaScript file. Either `'async'` or `'defer'` are allowed.
- **kwargs** ‚Äì Extra keyword arguments are included as attributes of the `<script>` tag. If the special keyword argument `body` is given, its value will be added as the content of the `<script>` tag.

Example:

```
app.add_js_file('example.js')
# => <script src="_static/example.js"></script>

app.add_js_file('example.js', loading_method='async')
# => <script src="_static/example.js" async="async"></script>

app.add_js_file(None, body="var myVariable = 'foo';")
# => <script>var myVariable = 'foo';</script>
```

|          |                                                                                           |
|----------|-------------------------------------------------------------------------------------------|
| Priority | Main purpose in Sphinx                                                                    |
| 200      | default priority for built-in JavaScript files                                            |
| 500      | default priority for extensions                                                           |
| 800      | default priority for [`html_js_files`](../usage/configuration.html#confval-html_js_files) |

priority range for JavaScript files[¬∂](appapi.html#id4 "Link to this table")

A JavaScript file can be added to the specific HTML page when an extension calls this method on [`html-page-context`](event_callbacks.html#event-html-page-context) event.

Added in version 0.5.

Changed in version 1.8: Renamed from `app.add_javascript()`. And it allows keyword arguments as attributes of script tag.

Changed in version 3.5: Take priority argument. Allow to add a JavaScript file to the specific page.

Changed in version 4.4: Take loading\_method argument. Allow to change the loading method of the JavaScript file.

Sphinx.add\_css\_file(*filename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 500*, *\*\*kwargs: Any*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_css_file)[¬∂](appapi.html#sphinx.application.Sphinx.add_css_file "Link to this definition")

Register a stylesheet to include in the HTML output.

Parameters:

- **filename** ‚Äì The name of a CSS file that the default HTML template will include. It must be relative to the HTML static path, or a full URI with scheme.
- **priority** ‚Äì Files are included in ascending order of priority. If multiple CSS files have the same priority, those files will be included in order of registration. See list of ‚Äúpriority range for CSS files‚Äù below.
- **kwargs** ‚Äì Extra keyword arguments are included as attributes of the `<link>` tag.

Example:

```
app.add_css_file('custom.css')
# => <link rel="stylesheet" href="_static/custom.css" type="text/css" />

app.add_css_file('print.css', media='print')
# => <link rel="stylesheet" href="_static/print.css"
#          type="text/css" media="print" />

app.add_css_file('fancy.css', rel='alternate stylesheet', title='fancy')
# => <link rel="alternate stylesheet" href="_static/fancy.css"
#          type="text/css" title="fancy" />
```

|          |                                                                                             |
|----------|---------------------------------------------------------------------------------------------|
| Priority | Main purpose in Sphinx                                                                      |
| 200      | default priority for built-in CSS files                                                     |
| 500      | default priority for extensions                                                             |
| 800      | default priority for [`html_css_files`](../usage/configuration.html#confval-html_css_files) |

priority range for CSS files[¬∂](appapi.html#id5 "Link to this table")

A CSS file can be added to the specific HTML page when an extension calls this method on [`html-page-context`](event_callbacks.html#event-html-page-context) event.

Added in version 1.0.

Changed in version 1.6: Optional `alternate` and/or `title` attributes can be supplied with the arguments *alternate* (a Boolean) and *title* (a string). The default is no title and *alternate* = `False`. For more information, refer to the [documentation](https://mdn.io/Web/CSS/Alternative_style_sheets).

Changed in version 1.8: Renamed from `app.add_stylesheet()`. And it allows keyword arguments as attributes of link tag.

Changed in version 3.5: Take priority argument. Allow to add a CSS file to the specific page.

Sphinx.add\_latex\_package(*packagename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *options: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *after\_hyperref: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_latex_package)[¬∂](appapi.html#sphinx.application.Sphinx.add_latex_package "Link to this definition")

Register a package to include in the LaTeX source code.

Add *packagename* to the list of packages that LaTeX source code will include. If you provide *options*, it will be taken to the usepackage declaration. If you set *after\_hyperref* truthy, the package will be loaded after `hyperref` package.

```
app.add_latex_package('mypackage')
# => \usepackage{mypackage}
app.add_latex_package('mypackage', 'foo,bar')
# => \usepackage[foo,bar]{mypackage}
```

Added in version 1.3.

Added in version 3.1: *after\_hyperref* option.

Sphinx.add\_lexer(*alias: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *lexer: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Lexer]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_lexer)[¬∂](appapi.html#sphinx.application.Sphinx.add_lexer "Link to this definition")

Register a new lexer for source code.

Use *lexer* to highlight code blocks with the given language *alias*.

Added in version 0.6.

Changed in version 2.1: Take a lexer class as an argument.

Changed in version 4.0: Removed support for lexer instances as an argument.

Sphinx.add\_autodocumenter(*cls: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Documenter]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_autodocumenter)[¬∂](appapi.html#sphinx.application.Sphinx.add_autodocumenter "Link to this definition")

Register a new documenter class for the autodoc extension.

Add *cls* as a new documenter class for the [`sphinx.ext.autodoc`](../usage/extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") extension. It must be a subclass of `sphinx.ext.autodoc.Documenter`. This allows auto-documenting new types of objects. See the source of the autodoc module for examples on how to subclass `Documenter`.

If *override* is True, the given *cls* is forcedly installed even if a documenter having the same name is already installed.

See [Developing autodoc extensions](../development/tutorials/autodoc_ext.html#autodoc-ext-tutorial).

Added in version 0.6.

Changed in version 2.2: Add *override* keyword.

Sphinx.add\_autodoc\_attrgetter(*typ: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")*, *getter: Callable\[\[Any, [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any], Any]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_autodoc_attrgetter)[¬∂](appapi.html#sphinx.application.Sphinx.add_autodoc_attrgetter "Link to this definition")

Register a new `getattr`-like function for the autodoc extension.

Add *getter*, which must be a function with an interface compatible to the [`getattr()`](https://docs.python.org/3/library/functions.html#getattr "(in Python v3.13)") builtin, as the autodoc attribute getter for objects that are instances of *typ*. All cases where autodoc needs to get an attribute of a type are then handled by this function instead of [`getattr()`](https://docs.python.org/3/library/functions.html#getattr "(in Python v3.13)").

Added in version 0.6.

Sphinx.add\_search\_language(*cls: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[SearchLanguage]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_search_language)[¬∂](appapi.html#sphinx.application.Sphinx.add_search_language "Link to this definition")

Register a new language for the HTML search index.

Add *cls*, which must be a subclass of `sphinx.search.SearchLanguage`, as a support language for building the HTML full-text search index. The class must have a *lang* attribute that indicates the language it should be used for. See [`html_search_language`](../usage/configuration.html#confval-html_search_language).

Added in version 1.1.

Sphinx.add\_source\_suffix(*suffix: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *filetype: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_source_suffix)[¬∂](appapi.html#sphinx.application.Sphinx.add_source_suffix "Link to this definition")

Register a suffix of source files.

Same as [`source_suffix`](../usage/configuration.html#confval-source_suffix). The users can override this using the config setting.

Parameters:

**override** ‚Äì If false, do not install it the same suffix is already installed. If true, unconditionally install the suffix.

Added in version 1.8.

Sphinx.add\_source\_parser(*parser: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Parser](parserapi.html#sphinx.parsers.Parser "sphinx.parsers.Parser")]*, *override: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_source_parser)[¬∂](appapi.html#sphinx.application.Sphinx.add_source_parser "Link to this definition")

Register a parser class.

Parameters:

**override** ‚Äì If false, do not install it if another parser is already installed for the same suffix. If true, unconditionally install the parser.

Added in version 1.4.

Changed in version 1.8: *suffix* argument is deprecated. It only accepts *parser* argument. Use [`add_source_suffix()`](appapi.html#sphinx.application.Sphinx.add_source_suffix "sphinx.application.Sphinx.add_source_suffix") API to register suffix instead.

Changed in version 1.8: Add *override* keyword.

Sphinx.add\_env\_collector(*collector: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[EnvironmentCollector](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector "sphinx.environment.collectors.EnvironmentCollector")]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_env_collector)[¬∂](appapi.html#sphinx.application.Sphinx.add_env_collector "Link to this definition")

Register an environment collector class.

Refer to [Environment Collector API](collectorapi.html#collector-api).

Added in version 1.6.

Sphinx.add\_html\_theme(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *theme\_path: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [os.PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_html_theme)[¬∂](appapi.html#sphinx.application.Sphinx.add_html_theme "Link to this definition")

Register a HTML Theme.

The *name* is a name of theme, and *theme\_path* is a full path to the theme (refs: [Distribute your theme as a Python package](../development/html_themes/index.html#distribute-your-theme)).

Added in version 1.6.

Sphinx.add\_html\_math\_renderer(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *inline\_renderers: \_MathsInlineRenderers | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *block\_renderers: \_MathsBlockRenderers | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_html_math_renderer)[¬∂](appapi.html#sphinx.application.Sphinx.add_html_math_renderer "Link to this definition")

Register a math renderer for HTML.

The *name* is a name of math renderer. Both *inline\_renderers* and *block\_renderers* are used as visitor functions for the HTML writer: the former for inline math node (`nodes.math`), the latter for block math node (`nodes.math_block`). Regarding visitor functions, see [`add_node()`](appapi.html#sphinx.application.Sphinx.add_node "sphinx.application.Sphinx.add_node") for details.

Added in version 1.8.

Sphinx.add\_message\_catalog(*catalog: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *locale\_dir: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [os.PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.add_message_catalog)[¬∂](appapi.html#sphinx.application.Sphinx.add_message_catalog "Link to this definition")

Register a message catalog.

Parameters:

- **catalog** ‚Äì The name of the catalog
- **locale\_dir** ‚Äì The base path of the message catalog

For more details, see [`sphinx.locale.get_translation()`](i18n.html#sphinx.locale.get_translation "sphinx.locale.get_translation").

Added in version 1.8.

Sphinx.is\_parallel\_allowed(*typ: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.is_parallel_allowed)[¬∂](appapi.html#sphinx.application.Sphinx.is_parallel_allowed "Link to this definition")

Check whether parallel processing is allowed or not.

Parameters:

**typ** ‚Äì A type of processing; `'read'` or `'write'`.

Sphinx.set\_html\_assets\_policy(*policy: Literal\['always', 'per\_page']*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#Sphinx.set_html_assets_policy)[¬∂](appapi.html#sphinx.application.Sphinx.set_html_assets_policy "Link to this definition")

Set the policy to include assets in HTML pages.

- always: include the assets in all the pages
- per\_page: include the assets only in pages where they are used

*exception* sphinx.application.ExtensionError[¬∂](appapi.html#sphinx.application.ExtensionError "Link to this definition")

All these methods raise this exception if something went wrong with the extension API.

## Emitting events[¬∂](appapi.html#emitting-events "Link to this heading")

*class* sphinx.application.Sphinx[\[source\]](../_modules/sphinx/application.html#Sphinx)

emit(*event: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\*args: Any*, *allowed\_exceptions: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)")], ...] = ()*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Any][\[source\]](../_modules/sphinx/application.html#Sphinx.emit)[¬∂](appapi.html#sphinx.application.Sphinx.emit "Link to this definition")

Emit *event* and pass *arguments* to the callback functions.

Return the return values of all callbacks as a list. Do not emit core Sphinx events in extensions!

Parameters:

- **event** ‚Äì The name of event that will be emitted
- **args** ‚Äì The arguments for the event
- **allowed\_exceptions** ‚Äì The list of exceptions that are allowed in the callbacks

Changed in version 3.1: Added *allowed\_exceptions* to specify path-through exceptions

emit\_firstresult(*event: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\*args: Any*, *allowed\_exceptions: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)")], ...] = ()*) ‚Üí Any[\[source\]](../_modules/sphinx/application.html#Sphinx.emit_firstresult)[¬∂](appapi.html#sphinx.application.Sphinx.emit_firstresult "Link to this definition")

Emit *event* and pass *arguments* to the callback functions.

Return the result of the first callback that doesn‚Äôt return `None`.

Parameters:

- **event** ‚Äì The name of event that will be emitted
- **args** ‚Äì The arguments for the event
- **allowed\_exceptions** ‚Äì The list of exceptions that are allowed in the callbacks

Added in version 0.5.

Changed in version 3.1: Added *allowed\_exceptions* to specify path-through exceptions

## Sphinx runtime information[¬∂](appapi.html#sphinx-runtime-information "Link to this heading")

The application object also provides runtime information as attributes.

Sphinx.project[¬∂](appapi.html#sphinx.application.Sphinx.project "Link to this definition")

Target project. See [`Project`](projectapi.html#sphinx.project.Project "sphinx.project.Project").

Sphinx.srcdir[¬∂](appapi.html#sphinx.application.Sphinx.srcdir "Link to this definition")

Source directory.

Sphinx.confdir[¬∂](appapi.html#sphinx.application.Sphinx.confdir "Link to this definition")

Directory containing `conf.py`.

Sphinx.doctreedir[¬∂](appapi.html#sphinx.application.Sphinx.doctreedir "Link to this definition")

Directory for storing pickled doctrees.

Sphinx.outdir[¬∂](appapi.html#sphinx.application.Sphinx.outdir "Link to this definition")

Directory for storing built document.

Sphinx.fresh\_env\_used[¬∂](appapi.html#sphinx.application.Sphinx.fresh_env_used "Link to this definition")

True/False as to whether a new environment was created for this build, or None if the environment has not been initialised yet.

## Sphinx core events[¬∂](appapi.html#sphinx-core-events "Link to this heading")

Note

Moved to [Event callbacks API](event_callbacks.html#events).

## Checking the Sphinx version[¬∂](appapi.html#checking-the-sphinx-version "Link to this heading")

Use this to adapt your extension to API changes in Sphinx.

sphinx.version\_info*: Final = (8, 3, 0, 'beta', 0)*[¬∂](appapi.html#sphinx.version_info "Link to this definition")

Version info for better programmatic use.

A tuple of five elements; for Sphinx version 1.2.1 beta 3 this would be `(1, 2, 1, 'beta', 3)`. The fourth element can be one of: `alpha`, `beta`, `rc`, `final`. `final` always has 0 as the last element.

Added in version 1.2: Before version 1.2, check the string `sphinx.__version__`.

## The Config object[¬∂](appapi.html#the-config-object "Link to this heading")

*class* sphinx.config.Config(*config: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *overrides: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*)[\[source\]](../_modules/sphinx/config.html#Config)[¬∂](appapi.html#sphinx.config.Config "Link to this definition")

Configuration file abstraction.

The Config object makes the values of all config options available as attributes.

It is exposed via the [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")`.config` and [`sphinx.environment.BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")`.config` attributes. For example, to get the value of [`language`](../usage/configuration.html#confval-language), use either `app.config.language` or `env.config.language`.

## The template bridge[¬∂](appapi.html#the-template-bridge "Link to this heading")

*class* sphinx.application.TemplateBridge[\[source\]](../_modules/sphinx/application.html#TemplateBridge)[¬∂](appapi.html#sphinx.application.TemplateBridge "Link to this definition")

This class defines the interface for a ‚Äútemplate bridge‚Äù, that is, a class that renders templates given a template name and a context.

init(*builder: [Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")*, *theme: Theme | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *dirs: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#TemplateBridge.init)[¬∂](appapi.html#sphinx.application.TemplateBridge.init "Link to this definition")

Called by the builder to initialize the template system.

*builder* is the builder object; you‚Äôll probably want to look at the value of `builder.config.templates_path`.

*theme* is a `sphinx.theming.Theme` object or None; in the latter case, *dirs* can be list of fixed directories to look for templates.

newest\_template\_mtime() ‚Üí [float](https://docs.python.org/3/library/functions.html#float "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#TemplateBridge.newest_template_mtime)[¬∂](appapi.html#sphinx.application.TemplateBridge.newest_template_mtime "Link to this definition")

Called by the builder to determine if output files are outdated because of template changes. Return the mtime of the newest template file that was changed. The default implementation returns `0`.

render(*template: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *context: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#TemplateBridge.render)[¬∂](appapi.html#sphinx.application.TemplateBridge.render "Link to this definition")

Called by the builder to render a template given as a filename with a specified context (a Python dictionary).

render\_string(*template: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *context: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any]*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/application.html#TemplateBridge.render_string)[¬∂](appapi.html#sphinx.application.TemplateBridge.render_string "Link to this definition")

Called by the builder to render a template given as a string with a specified context (a Python dictionary).

## Exceptions[¬∂](appapi.html#exceptions "Link to this heading")

*exception* sphinx.errors.SphinxError[\[source\]](../_modules/sphinx/errors.html#SphinxError)[¬∂](appapi.html#sphinx.errors.SphinxError "Link to this definition")

Base class for Sphinx errors.

This is the base class for ‚Äúnice‚Äù exceptions. When such an exception is raised, Sphinx will abort the build and present the exception category and message to the user.

Extensions are encouraged to derive from this exception for their custom errors.

Exceptions *not* derived from [`SphinxError`](appapi.html#sphinx.errors.SphinxError "sphinx.errors.SphinxError") are treated as unexpected and shown to the user with a part of the traceback (and the full traceback saved in a temporary file).

category[¬∂](appapi.html#sphinx.errors.SphinxError.category "Link to this definition")

Description of the exception ‚Äúcategory‚Äù, used in converting the exception to a string (‚Äúcategory: message‚Äù). Should be set accordingly in subclasses.

*exception* sphinx.errors.ConfigError[\[source\]](../_modules/sphinx/errors.html#ConfigError)[¬∂](appapi.html#sphinx.errors.ConfigError "Link to this definition")

Configuration error.

*exception* sphinx.errors.ExtensionError(*message: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *orig\_exc: [Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *modname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*)[\[source\]](../_modules/sphinx/errors.html#ExtensionError)[¬∂](appapi.html#sphinx.errors.ExtensionError "Link to this definition")

Extension error.

*exception* sphinx.errors.ThemeError[\[source\]](../_modules/sphinx/errors.html#ThemeError)[¬∂](appapi.html#sphinx.errors.ThemeError "Link to this definition")

Theme error.

*exception* sphinx.errors.VersionRequirementError[\[source\]](../_modules/sphinx/errors.html#VersionRequirementError)[¬∂](appapi.html#sphinx.errors.VersionRequirementError "Link to this definition")

Incompatible Sphinx version error.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Builder API[¬∂](builderapi.html#builder-api "Link to this heading")

*class* sphinx.builders.Builder[\[source\]](../_modules/sphinx/builders.html#Builder)[¬∂](builderapi.html#sphinx.builders.Builder "Link to this definition")

This is the base class for all builders.

It follows this basic workflow:

![// UML for the standard Sphinx build workflow  digraph build {     graph \[         rankdir=LR     \];     node \[         shape=rect         style=rounded     \];      "Sphinx" \[         shape=record         label = "Sphinx | <init> __init__ | <build> build"     \];     "legend" \[         shape=record         label = <<table border="0" cellborder="0" cellspacing="0">             <tr><td align="center"><u><b>Method types</b></u></td></tr>             <tr><td align="left"><font color="darkorange">Final</font></td></tr>             <tr><td align="left"><font color="darkblue">Overridable</font></td></tr>             <tr><td align="left"><font color="darkgreen">Abstract</font></td></tr>         </table>>     \];     {rank=same; "Sphinx" "legend" };      "Builder.init" \[color=darkblue\];     "Builder.build_all" \[color=darkorange\];     "Builder.build_specific" \[color=darkorange\];     "Builder.build_update" \[color=darkorange\];      "Sphinx":init -> "Builder.init";     "Sphinx":build -> "Builder.build_all";     "Sphinx":build -> "Builder.build_specific";     "Sphinx":build -> "Builder.build_update";      "Builder.get_outdated_docs" \[color=darkgreen\];     "Builder.build_update" -> "Builder.get_outdated_docs";      "Builder.build" \[color=darkorange\];      "Builder.build_all" -> "Builder.build";     "Builder.build_specific" -> "Builder.build";     "Builder.build_update":p1 -> "Builder.build";      "Builder.read" \[color=darkorange\];     "Builder.write" \[color=darkorange\];     "Builder.finish" \[color=darkblue\];      "Builder.build" -> "Builder.read";     "Builder.build" -> "Builder.write";     "Builder.build" -> "Builder.finish";      "Builder.read_doc" \[color=darkorange\];     "Builder.write_doctree" \[color=darkorange\];      "Builder.read" -> "Builder.read_doc";     "Builder.read_doc" -> "Builder.write_doctree";      "Builder.prepare_writing" \[color=darkblue\];     "Builder.copy_assets" \[color=darkblue\];     "Builder.write_documents" \[color=darkblue\];      "Builder.write":p1 -> "Builder.prepare_writing";     "Builder.write":p1 -> "Builder.copy_assets";     "Builder.write_documents" \[         shape=record         label = "<p1> Builder.write_documents | Builder._write_serial | Builder._write_parallel"     \];     "Builder.write":p1 -> "Builder.write_documents";      "Builder.write_doc" \[color=darkgreen\];     "Builder.get_relative_uri" \[color=darkblue\];      "Builder.write_documents":p1 -> "Builder.write_doc";     "Builder.write_doc" -> "Builder.get_relative_uri";      "Builder.get_target_uri" \[color=darkgreen\];      "Builder.get_relative_uri" -> "Builder.get_target_uri"; }](../_images/graphviz-e87ab1666a7685a706a5bed2a7744d43bb33cbd4.png)

Call graph for the standard Sphinx build workflow[¬∂](builderapi.html#id1 "Link to this image")

Overridable Attributes

These class attributes should be set on builder sub-classes:

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](builderapi.html#sphinx.builders.Builder.name "Link to this definition")

The builder‚Äôs name. This is the value used to select builders on the command line.

format*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](builderapi.html#sphinx.builders.Builder.format "Link to this definition")

The builder‚Äôs output format, or ‚Äò‚Äô if no document output is produced. This is commonly the file extension, e.g. ‚Äúhtml‚Äù, though any string value is accepted. The builder‚Äôs format string can be used by various components such as [`SphinxPostTransform`](utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "sphinx.transforms.post_transforms.SphinxPostTransform") or extensions to determine their compatibility with the builder.

epilog*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*[¬∂](builderapi.html#sphinx.builders.Builder.epilog "Link to this definition")

The message emitted upon successful build completion. This can be a printf-style template string with the following keys: `outdir`, `project`

allow\_parallel*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*[¬∂](builderapi.html#sphinx.builders.Builder.allow_parallel "Link to this definition")

Whether it is safe to make parallel [`write_doc()`](builderapi.html#sphinx.builders.Builder.write_doc "sphinx.builders.Builder.write_doc") calls.

supported\_image\_types*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = \[]*[¬∂](builderapi.html#sphinx.builders.Builder.supported_image_types "Link to this definition")

The list of MIME types of image formats supported by the builder. Image files are searched in the order in which they appear here.

supported\_remote\_images*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*[¬∂](builderapi.html#sphinx.builders.Builder.supported_remote_images "Link to this definition")

The builder can produce output documents that may fetch external images when opened.

supported\_data\_uri\_images*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*[¬∂](builderapi.html#sphinx.builders.Builder.supported_data_uri_images "Link to this definition")

The file format produced by the builder allows images to be embedded using data-URIs.

default\_translator\_class*: [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[nodes.NodeVisitor]*[¬∂](builderapi.html#sphinx.builders.Builder.default_translator_class "Link to this definition")

default translator class for the builder. This can be overridden by [`set_translator()`](appapi.html#sphinx.application.Sphinx.set_translator "sphinx.application.Sphinx.set_translator").

Core Methods

These methods define the core build workflow and must not be overridden:

*final* build\_all() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.build_all)[¬∂](builderapi.html#sphinx.builders.Builder.build_all "Link to this definition")

Build all source files.

*final* build\_specific(*filenames: Sequence\[Path]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.build_specific)[¬∂](builderapi.html#sphinx.builders.Builder.build_specific "Link to this definition")

Only rebuild as much as needed for changes in the *filenames*.

*final* build\_update() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.build_update)[¬∂](builderapi.html#sphinx.builders.Builder.build_update "Link to this definition")

Only rebuild what was changed or added since last build.

*final* build(*docnames: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*, *summary: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *method: Literal\['all', 'specific', 'update'] = 'update'*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.build)[¬∂](builderapi.html#sphinx.builders.Builder.build "Link to this definition")

Main build method, usually called by a specific `build_*` method.

First updates the environment, and then calls `write()`.

*final* read() ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/builders.html#Builder.read)[¬∂](builderapi.html#sphinx.builders.Builder.read "Link to this definition")

(Re-)read all files new or changed since last update.

Store all environment docnames in the canonical format (ie using SEP as a separator in place of os.path.sep).

*final* read\_doc(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\**, *\_cache: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = True*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.read_doc)[¬∂](builderapi.html#sphinx.builders.Builder.read_doc "Link to this definition")

Parse a file and add/update inventory entries for the doctree.

*final* write\_doctree(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *doctree: document*, *\**, *\_cache: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = True*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.write_doctree)[¬∂](builderapi.html#sphinx.builders.Builder.write_doctree "Link to this definition")

Write the doctree to a file, to be used as a cache by re-builds.

*final* write(*build\_docnames: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*, *updated\_docnames: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *method: Literal\['all', 'specific', 'update'] = 'update'*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.write)[¬∂](builderapi.html#sphinx.builders.Builder.write "Link to this definition")

Write builder specific output files.

Abstract Methods

These must be implemented in builder sub-classes:

get\_outdated\_docs() ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/builders.html#Builder.get_outdated_docs)[¬∂](builderapi.html#sphinx.builders.Builder.get_outdated_docs "Link to this definition")

Return an iterable of output files that are outdated, or a string describing what an update build will build.

If the builder does not output individual files corresponding to source files, return a string here. If it does, return an iterable of those files that need to be written.

write\_doc(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *doctree: document*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.write_doc)[¬∂](builderapi.html#sphinx.builders.Builder.write_doc "Link to this definition")

Write the output file for the document

Parameters:

- **docname** ‚Äì the [docname](../glossary.html#term-document-name).
- **doctree** ‚Äì defines the content to be written.

The output filename must be determined within this method, typically by calling [`get_target_uri()`](builderapi.html#sphinx.builders.Builder.get_target_uri "sphinx.builders.Builder.get_target_uri") or [`get_relative_uri()`](builderapi.html#sphinx.builders.Builder.get_relative_uri "sphinx.builders.Builder.get_relative_uri").

get\_target\_uri(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *typ: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.get_target_uri)[¬∂](builderapi.html#sphinx.builders.Builder.get_target_uri "Link to this definition")

Return the target URI for a document name.

*typ* can be used to qualify the link characteristic for individual builders.

Overridable Methods

These methods can be overridden in builder sub-classes:

init() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.init)[¬∂](builderapi.html#sphinx.builders.Builder.init "Link to this definition")

Load necessary templates and perform initialization. The default implementation does nothing.

write\_documents(*docnames: Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.write_documents)[¬∂](builderapi.html#sphinx.builders.Builder.write_documents "Link to this definition")

Write all documents in *docnames*.

This method can be overridden if a builder does not create output files for each document.

prepare\_writing(*docnames: Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.prepare_writing)[¬∂](builderapi.html#sphinx.builders.Builder.prepare_writing "Link to this definition")

A place where you can add logic before [`write_doc()`](builderapi.html#sphinx.builders.Builder.write_doc "sphinx.builders.Builder.write_doc") is run

copy\_assets() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.copy_assets)[¬∂](builderapi.html#sphinx.builders.Builder.copy_assets "Link to this definition")

Where assets (images, static files, etc) are copied before writing

get\_relative\_uri(*from\_: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *to: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *typ: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.get_relative_uri)[¬∂](builderapi.html#sphinx.builders.Builder.get_relative_uri "Link to this definition")

Return a relative URI between two source filenames.

Raises:

`NoUri` if there‚Äôs no way to return a sensible URI.

finish() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/builders.html#Builder.finish)[¬∂](builderapi.html#sphinx.builders.Builder.finish "Link to this definition")

Finish the building process.

The default implementation does nothing.

Attributes

Attributes that are callable from the builder instance:

events[¬∂](builderapi.html#sphinx.builders.Builder.events "Link to this definition")

An [`EventManager`](utils.html#sphinx.events.EventManager "sphinx.events.EventManager") object.

Overridable Attributes (extensions)

Builder sub-classes can set these attributes to support built-in extensions:

supported\_linkcode*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](builderapi.html#sphinx.builders.Builder.supported_linkcode "Link to this definition")

By default, the [`linkcode`](../usage/extensions/linkcode.html#module-sphinx.ext.linkcode "sphinx.ext.linkcode: Add external links to source code.") extension will only inject references for an `html` builder. The `supported_linkcode` class attribute can be defined in a non-HTML builder to support managing references generated by linkcode. The expected value for this attribute is an expression which is compatible with [`only`](../usage/restructuredtext/directives.html#directive-only "only directive").

For example, if a builder was named `custom-builder`, the following can be used:

```
class CustomBuilder(Builder):
    supported_linkcode = 'custom-builder'
    ...
```








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Environment Collector API[¬∂](collectorapi.html#module-sphinx.environment.collectors "Link to this heading")

*class* sphinx.environment.collectors.EnvironmentCollector[\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector "Link to this definition")

An EnvironmentCollector is a specific data collector from each document.

It gathers data and stores [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment") as a database. Examples of specific data would be images, download files, section titles, metadatas, index entries and toctrees, etc.

Note

This class essentially wraps a sub-set of [Sphinx event callbacks](event_callbacks.html#events).

clear\_doc(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*, *env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector.clear_doc)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector.clear_doc "Link to this definition")

Remove specified data of a document.

This method is called on the removal of the document.

See also

[`env-purge-doc`](event_callbacks.html#event-env-purge-doc)

get\_outdated\_docs(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*, *env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *added: [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *changed: [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *removed: [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector.get_outdated_docs)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector.get_outdated_docs "Link to this definition")

Return a list of docnames to re-read.

This method is called before reading the documents.

See also

[`env-get-outdated`](event_callbacks.html#event-env-get-outdated)

get\_updated\_docs(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*, *env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector.get_updated_docs)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector.get_updated_docs "Link to this definition")

Return a list of docnames to re-read.

This method is called after reading the whole of documents.

See also

[`env-get-updated`](event_callbacks.html#event-env-get-updated)

merge\_other(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*, *env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *docnames: Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *other: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector.merge_other)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector.merge_other "Link to this definition")

Merge in specified data regarding docnames from a different BuildEnvironment object which coming from a subprocess in parallel builds.

See also

[`env-merge-info`](event_callbacks.html#event-env-merge-info)

process\_doc(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*, *doctree: nodes.document*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment/collectors.html#EnvironmentCollector.process_doc)[¬∂](collectorapi.html#sphinx.environment.collectors.EnvironmentCollector.process_doc "Link to this definition")

Process a document and gather specific data from it.

This method is called after the document is read.

See also

[`doctree-read`](event_callbacks.html#event-doctree-read)








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

The Basics


User guide



Community


Reference


# Deprecated APIs[¬∂](deprecated.html#deprecated-apis "Link to this heading")

On developing Sphinx, we are always careful to the compatibility of our APIs. But, sometimes, the change of interface are needed for some reasons. In such cases, we‚Äôve marked them as deprecated. And they are kept during the two major versions (for more details, please see [Deprecation policy](../internals/release-process.html#deprecation-policy)).

The following is a list of deprecated interfaces.

| Target                                                                                                                                                                                           | Deprecated | Removed | Alternatives                                                                                                                                                                              |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `sphinx.builders.singlehtml.SingleFileHTMLBuilder.fix_refuris`                                                                                                                                   | 8.2        | 10.0    | N/A                                                                                                                                                                                       |
| `sphinx.util.FilenameUniqDict`                                                                                                                                                                   | 8.1        | 10.0    | N/A                                                                                                                                                                                       |
| `sphinx.util.DownloadFiles`                                                                                                                                                                      | 8.1        | 10.0    | N/A                                                                                                                                                                                       |
| `sphinx.ext.intersphinx.normalize_intersphinx_mapping`                                                                                                                                           | 8.0        | 10.0    | `sphinx.ext.intersphinx.validate_intersphinx_mapping`                                                                                                                                     |
| `sphinx.testing.util.strip_escseq`                                                                                                                                                               | 7.3        | 9.0     | `sphinx.util.console.strip_colors`                                                                                                                                                        |
| Old-style Makefiles in `sphinx-quickstart` and the `-M`, `-m`, `--no-use-make-mode`, and `--use-make-mode` options                                                                               | 7.3        | 9.0     | Vendoring the [old style Makefile templates](https://github.com/sphinx-doc/sphinx/blob/v7.0.0/sphinx/templates/quickstart/Makefile_t)                                                     |
| `sphinx.ext.autodoc.preserve_defaults.get_function_def()`                                                                                                                                        | 7.2        | 9.0     | N/A (replacement is private)                                                                                                                                                              |
| `sphinx.builders.html.StandaloneHTMLBuilder.css_files`                                                                                                                                           | 7.2        | 9.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.html.StandaloneHTMLBuilder.script_files`                                                                                                                                        | 7.2        | 9.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.html.Stylesheet`                                                                                                                                                                | 7.2        | 9.0     | `sphinx.application.Sphinx.add_css_file()`                                                                                                                                                |
| `sphinx.builders.html.JavaScript`                                                                                                                                                                | 7.2        | 9.0     | `sphinx.application.Sphinx.add_js_file()`                                                                                                                                                 |
| `sphinx.util.split_into`                                                                                                                                                                         | 7.2        | 9.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.split_index_msg`                                                                                                                                                                    | 7.2        | 9.0     | `sphinx.util.index_entries.split_index_msg`                                                                                                                                               |
| `sphinx.testing.path`                                                                                                                                                                            | 7.2        | 9.0     | `os.path` or `pathlib`                                                                                                                                                                    |
| `sphinx.util.md5`                                                                                                                                                                                | 7.2        | 9.0     | `hashlib.md5`                                                                                                                                                                             |
| `sphinx.util.sha1`                                                                                                                                                                               | 7.2        | 9.0     | `hashlib.sha1`                                                                                                                                                                            |
| `sphinx.util.osutil.cd`                                                                                                                                                                          | 6.2        | 8.0     | `contextlib.chdir`                                                                                                                                                                        |
| `sphinx.util.save_traceback`                                                                                                                                                                     | 6.1        | 8.0     | `sphinx.util.exceptions.save_traceback`                                                                                                                                                   |
| `sphinx.util.format_exception_cut_frames`                                                                                                                                                        | 6.1        | 8.0     | `sphinx.util.exceptions.format_exception_cut_frames`                                                                                                                                      |
| `sphinx.util.epoch_to_rfc1123`                                                                                                                                                                   | 6.1        | 8.0     | `sphinx.util.http_date.epoch_to_rfc1123`                                                                                                                                                  |
| `sphinx.util.rfc1123_to_epoch`                                                                                                                                                                   | 6.1        | 8.0     | `sphinx.util.http_date.rfc1123_to_epoch`                                                                                                                                                  |
| `sphinx.util.status_iterator`                                                                                                                                                                    | 6.1        | 8.0     | `sphinx.util.display.status_iterator`                                                                                                                                                     |
| `sphinx.util.display_chunk`                                                                                                                                                                      | 6.1        | 8.0     | `sphinx.util.display.display_chunk`                                                                                                                                                       |
| `sphinx.util.SkipProgressMessage`                                                                                                                                                                | 6.1        | 8.0     | `sphinx.util.display.SkipProgressMessage`                                                                                                                                                 |
| `sphinx.util.progress_message`                                                                                                                                                                   | 6.1        | 8.0     | `sphinx.util.display.progress_message`                                                                                                                                                    |
| `sphinx.util.typing.stringify`                                                                                                                                                                   | 6.1        | 8.0     | `sphinx.util.typing.stringify_annotation`                                                                                                                                                 |
| HTML 4 support                                                                                                                                                                                   | 5.2        | 7.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.path_stabilize`                                                                                                                                                                     | 5.1        | 7.0     | `sphinx.util.osutil.path_stabilize`                                                                                                                                                       |
| `sphinx.util.get_matching_files`                                                                                                                                                                 | 5.1        | 7.0     | `sphinx.util.matching.get_matching_files`                                                                                                                                                 |
| `sphinx.ext.napoleon.iterators`                                                                                                                                                                  | 5.1        | 7.0     | `pockets.iterators`                                                                                                                                                                       |
| `sphinx.util.stemmer`                                                                                                                                                                            | 5.1        | 7.0     | `snowballstemmer`                                                                                                                                                                         |
| `sphinx.util.jsdump`                                                                                                                                                                             | 5.0        | 7.0     | The standard library `json` module.                                                                                                                                                       |
| The Setuptools integration (`setup.py build_sphinx`)                                                                                                                                             | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| The `locale` argument of `sphinx.util.i18n:babel_format_date()`                                                                                                                                  | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| The `language` argument of `sphinx.util.i18n:format_date()`                                                                                                                                      | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.html.html5_ready`                                                                                                                                                               | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.read_doc()`                                                                                                                                                                           | 5.0        | 7.0     | `sphinx.builders.Builder.read_doc()`                                                                                                                                                      |
| `sphinx.util.docutils.__version_info__`                                                                                                                                                          | 5.0        | 7.0     | `docutils.__version_info__`                                                                                                                                                               |
| `sphinx.util.docutils.is_html5_writer_available()`                                                                                                                                               | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXWriter.docclasses`                                                                                                                                                    | 5.0        | 7.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.napoleon.docstring.GoogleDocstring._qualify_name()`                                                                                                                                  | 4.5        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.AttributeDocumenter._datadescriptor`                                                                                                                                         | 4.3        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html.HTMLTranslator._fieldlist_row_index`                                                                                                                                        | 4.3        | 6.0     | `sphinx.writers.html.HTMLTranslator._fieldlist_row_indices`                                                                                                                               |
| `sphinx.writers.html.HTMLTranslator._table_row_index`                                                                                                                                            | 4.3        | 6.0     | `sphinx.writers.html.HTMLTranslator._table_row_indices`                                                                                                                                   |
| `sphinx.writers.html5.HTML5Translator._fieldlist_row_index`                                                                                                                                      | 4.3        | 6.0     | `sphinx.writers.html5.HTML5Translator._fieldlist_row_indices`                                                                                                                             |
| `sphinx.writers.html5.HTML5Translator._table_row_index`                                                                                                                                          | 4.3        | 6.0     | `sphinx.writers.html5.HTML5Translator._table_row_indices`                                                                                                                                 |
| The optional argument `app` for `sphinx.environment.BuildEnvironment`                                                                                                                            | 4.1        | 6.0     | The required argument                                                                                                                                                                     |
| `sphinx.application.Sphinx.html_theme`                                                                                                                                                           | 4.1        | 6.0     | `sphinx.registry.SphinxComponentRegistry.html_themes`                                                                                                                                     |
| `sphinx.ext.autosummary._app`                                                                                                                                                                    | 4.1        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.docstrings.extract_metadata()`                                                                                                                                                      | 4.1        | 6.0     | `sphinx.util.docstrings.separate_metadata()`                                                                                                                                              |
| `favicon` variable in HTML templates                                                                                                                                                             | 4.0        | 6.0     | `favicon_url`                                                                                                                                                                             |
| `logo` variable in HTML templates                                                                                                                                                                | 4.0        | 6.0     | `logo_url`                                                                                                                                                                                |
| `sphinx.directives.patches.ListTable`                                                                                                                                                            | 4.0        | 6.0     | `docutils.parsers.rst.directives.tables.ListSVTable`                                                                                                                                      |
| `sphinx.directives.patches.RSTTable`                                                                                                                                                             | 4.0        | 6.0     | `docutils.parsers.rst.directives.tables.RSTTable`                                                                                                                                         |
| `sphinx.ext.autodoc.directive.DocumenterBridge.filename_set`                                                                                                                                     | 4.0        | 6.0     | `sphinx.ext.autodoc.directive.DocumenterBridge.record_dependencies`                                                                                                                       |
| `sphinx.ext.autodoc.directive.DocumenterBridge.warn()`                                                                                                                                           | 4.0        | 6.0     | [Logging API](logging.html#logging-api)                                                                                                                                                   |
| `sphinx.registry.SphinxComponentRegistry.get_source_input()`                                                                                                                                     | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.registry.SphinxComponentRegistry.source_inputs`                                                                                                                                          | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.transforms.FigureAligner`                                                                                                                                                                | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.pycompat.convert_with_2to3()`                                                                                                                                                       | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.pycompat.execfile_()`                                                                                                                                                               | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.smartypants`                                                                                                                                                                        | 4.0        | 6.0     | `docutils.utils.smartquotes`                                                                                                                                                              |
| `sphinx.util.typing.DirectiveOption`                                                                                                                                                             | 4.0        | 6.0     | N/A                                                                                                                                                                                       |
| pending\_xref node for viewcode extension                                                                                                                                                        | 3.5        | 5.0     | `sphinx.ext.viewcode.viewcode_anchor`                                                                                                                                                     |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.anchors_ignore`                                                                                                                             | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.auth`                                                                                                                                       | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.broken`                                                                                                                                     | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.good`                                                                                                                                       | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.redirected`                                                                                                                                 | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.rqueue`                                                                                                                                     | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.to_ignore`                                                                                                                                  | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.workers`                                                                                                                                    | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.CheckExternalLinksBuilder.wqueue`                                                                                                                                     | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.linkcheck.node_line_or_0()`                                                                                                                                                     | 3.5        | 5.0     | `sphinx.util.nodes.get_node_line()`                                                                                                                                                       |
| `sphinx.ext.autodoc.AttributeDocumenter.isinstanceattribute()`                                                                                                                                   | 3.5        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.importer.get_module_members()`                                                                                                                                               | 3.5        | 5.0     | `sphinx.ext.autodoc.ModuleDocumenter.get_module_members()`                                                                                                                                |
| `sphinx.ext.autosummary.generate._simple_info()`                                                                                                                                                 | 3.5        | 5.0     | [Logging API](logging.html#logging-api)                                                                                                                                                   |
| `sphinx.ext.autosummary.generate._simple_warn()`                                                                                                                                                 | 3.5        | 5.0     | [Logging API](logging.html#logging-api)                                                                                                                                                   |
| `sphinx.writers.html.HTMLTranslator.permalink_text`                                                                                                                                              | 3.5        | 5.0     | [`html_permalinks_icon`](../usage/configuration.html#confval-html_permalinks_icon)                                                                                                        |
| `sphinx.writers.html5.HTML5Translator.permalink_text`                                                                                                                                            | 3.5        | 5.0     | [`html_permalinks_icon`](../usage/configuration.html#confval-html_permalinks_icon)                                                                                                        |
| The `follow_wrapped` argument of `sphinx.util.inspect.signature()`                                                                                                                               | 3.4        | 5.0     | N/A                                                                                                                                                                                       |
| The `no_docstring` argument of `sphinx.ext.autodoc.Documenter.add_content()`                                                                                                                     | 3.4        | 5.0     | `sphinx.ext.autodoc.Documenter.get_doc()`                                                                                                                                                 |
| `sphinx.ext.autodoc.Documenter.get_object_members()`                                                                                                                                             | 3.4        | 6.0     | `sphinx.ext.autodoc.ClassDocumenter.get_object_members()`                                                                                                                                 |
| `sphinx.ext.autodoc.DataDeclarationDocumenter`                                                                                                                                                   | 3.4        | 5.0     | `sphinx.ext.autodoc.DataDocumenter`                                                                                                                                                       |
| `sphinx.ext.autodoc.GenericAliasDocumenter`                                                                                                                                                      | 3.4        | 5.0     | `sphinx.ext.autodoc.DataDocumenter`                                                                                                                                                       |
| `sphinx.ext.autodoc.InstanceAttributeDocumenter`                                                                                                                                                 | 3.4        | 5.0     | `sphinx.ext.autodoc.AttributeDocumenter`                                                                                                                                                  |
| `sphinx.ext.autodoc.SlotsAttributeDocumenter`                                                                                                                                                    | 3.4        | 5.0     | `sphinx.ext.autodoc.AttributeDocumenter`                                                                                                                                                  |
| `sphinx.ext.autodoc.TypeVarDocumenter`                                                                                                                                                           | 3.4        | 5.0     | `sphinx.ext.autodoc.DataDocumenter`                                                                                                                                                       |
| `sphinx.ext.autodoc.directive.DocumenterBridge.reporter`                                                                                                                                         | 3.5        | 5.0     | `sphinx.util.logging`                                                                                                                                                                     |
| `sphinx.ext.autodoc.importer._getannotations()`                                                                                                                                                  | 3.4        | 4.0     | `sphinx.util.inspect.getannotations()`                                                                                                                                                    |
| `sphinx.ext.autodoc.importer._getmro()`                                                                                                                                                          | 3.4        | 4.0     | `sphinx.util.inspect.getmro()`                                                                                                                                                            |
| `sphinx.pycode.ModuleAnalyzer.parse()`                                                                                                                                                           | 3.4        | 5.0     | `sphinx.pycode.ModuleAnalyzer.analyze()`                                                                                                                                                  |
| `sphinx.util.osutil.movefile()`                                                                                                                                                                  | 3.4        | 5.0     | `os.replace()`                                                                                                                                                                            |
| `sphinx.util.requests.is_ssl_error()`                                                                                                                                                            | 3.4        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.latex.LaTeXBuilder.usepackages`                                                                                                                                                 | 3.3        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders.latex.LaTeXBuilder.usepackages_afger_hyperref`                                                                                                                                  | 3.3        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.SingledispatchFunctionDocumenter`                                                                                                                                            | 3.3        | 5.0     | `sphinx.ext.autodoc.FunctionDocumenter`                                                                                                                                                   |
| `sphinx.ext.autodoc.SingledispatchMethodDocumenter`                                                                                                                                              | 3.3        | 5.0     | `sphinx.ext.autodoc.MethodDocumenter`                                                                                                                                                     |
| `sphinx.ext.autodoc.members_set_option()`                                                                                                                                                        | 3.2        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.merge_special_members_option()`                                                                                                                                              | 3.2        | 5.0     | `sphinx.ext.autodoc.merge_members_option()`                                                                                                                                               |
| `sphinx.writers.texinfo.TexinfoWriter.desc`                                                                                                                                                      | 3.2        | 5.0     | `sphinx.writers.texinfo.TexinfoWriter.descs`                                                                                                                                              |
| The first argument for `sphinx.ext.autosummary.generate.AutosummaryRenderer` has been changed to Sphinx object                                                                                   | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autosummary.generate.AutosummaryRenderer` takes an object type as an argument                                                                                                        | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| The `ignore` argument of `sphinx.ext.autodoc.Documenter.get_doc()`                                                                                                                               | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| The `template_dir` argument of `sphinx.ext.autosummary.generate.AutosummaryRenderer`                                                                                                             | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| The `module` argument of `sphinx.ext.autosummary.generate.find_autosummary_in_docstring()`                                                                                                       | 3.0        | 5.0     | N/A                                                                                                                                                                                       |
| The `builder` argument of `sphinx.ext.autosummary.generate.generate_autosummary_docs()`                                                                                                          | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| The `template_dir` argument of `sphinx.ext.autosummary.generate.generate_autosummary_docs()`                                                                                                     | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autosummary.generate.AutosummaryRenderer.exists()`                                                                                                                                   | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| The `ignore` argument of `sphinx.util.docstring.prepare_docstring()`                                                                                                                             | 3.1        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.rpartition()`                                                                                                                                                                       | 3.1        | 5.0     | `str.rpartition()`                                                                                                                                                                        |
| `desc_signature['first']`                                                                                                                                                                        |            | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.directives.DescDirective`                                                                                                                                                                | 3.0        | 5.0     | `sphinx.directives.ObjectDescription`                                                                                                                                                     |
| `sphinx.domains.std.StandardDomain.add_object()`                                                                                                                                                 | 3.0        | 5.0     | `sphinx.domains.std.StandardDomain.note_object()`                                                                                                                                         |
| `sphinx.domains.python.PyDecoratorMixin`                                                                                                                                                         | 3.0        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.get_documenters()`                                                                                                                                                           | 3.0        | 5.0     | `sphinx.registry.documenters`                                                                                                                                                             |
| `sphinx.ext.autosummary.process_autosummary_toc()`                                                                                                                                               | 3.0        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.parsers.Parser.app`                                                                                                                                                                      | 3.0        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.testing.path.Path.text()`                                                                                                                                                                | 3.0        | 5.0     | `sphinx.testing.path.Path.read_text()`                                                                                                                                                    |
| `sphinx.testing.path.Path.bytes()`                                                                                                                                                               | 3.0        | 5.0     | `sphinx.testing.path.Path.read_bytes()`                                                                                                                                                   |
| `sphinx.util.inspect.getargspec()`                                                                                                                                                               | 3.0        | 5.0     | `inspect.getargspec()`                                                                                                                                                                    |
| `sphinx.writers.latex.LaTeXWriter.format_docclass()`                                                                                                                                             | 3.0        | 5.0     | LaTeX Themes                                                                                                                                                                              |
| `decode` argument of `sphinx.pycode.ModuleAnalyzer()`                                                                                                                                            | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.directives.other.Index`                                                                                                                                                                  | 2.4        | 4.0     | `sphinx.domains.index.IndexDirective`                                                                                                                                                     |
| `sphinx.environment.temp_data['gloss_entries']`                                                                                                                                                  | 2.4        | 4.0     | `documents.nameids`                                                                                                                                                                       |
| `sphinx.environment.BuildEnvironment.indexentries`                                                                                                                                               | 2.4        | 4.0     | `sphinx.domains.index.IndexDomain`                                                                                                                                                        |
| `sphinx.environment.collectors.indexentries.IndexEntriesCollector`                                                                                                                               | 2.4        | 4.0     | `sphinx.domains.index.IndexDomain`                                                                                                                                                        |
| `sphinx.io.FiletypeNotFoundError`                                                                                                                                                                | 2.4        | 4.0     | `sphinx.errors.FiletypeNotFoundError`                                                                                                                                                     |
| `sphinx.ext.apidoc.INITPY`                                                                                                                                                                       | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.apidoc.shall_skip()`                                                                                                                                                                 | 2.4        | 4.0     | `sphinx.ext.apidoc.is_skipped_package`                                                                                                                                                    |
| `sphinx.io.get_filetype()`                                                                                                                                                                       | 2.4        | 4.0     | `sphinx.util.get_filetype()`                                                                                                                                                              |
| `sphinx.pycode.ModuleAnalyzer.encoding`                                                                                                                                                          | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.roles.Index`                                                                                                                                                                             | 2.4        | 4.0     | `sphinx.domains.index.IndexRole`                                                                                                                                                          |
| `sphinx.util.detect_encoding()`                                                                                                                                                                  | 2.4        | 4.0     | `tokenize.detect_encoding()`                                                                                                                                                              |
| `sphinx.util.get_module_source()`                                                                                                                                                                | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.inspect.Signature`                                                                                                                                                                  | 2.4        | 4.0     | `sphinx.util.inspect.signature` and `sphinx.util.inspect.stringify_signature()`                                                                                                           |
| `sphinx.util.inspect.safe_getmembers()`                                                                                                                                                          | 2.4        | 4.0     | `inspect.getmembers()`                                                                                                                                                                    |
| `sphinx.writers.latex.LaTeXTranslator.settings.author`                                                                                                                                           | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.settings.contentsname`                                                                                                                                     | 2.4        | 4.0     | `document['contentsname']`                                                                                                                                                                |
| `sphinx.writers.latex.LaTeXTranslator.settings.docclass`                                                                                                                                         | 2.4        | 4.0     | `document['docclass']`                                                                                                                                                                    |
| `sphinx.writers.latex.LaTeXTranslator.settings.docname`                                                                                                                                          | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.settings.title`                                                                                                                                            | 2.4        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.ADDITIONAL_SETTINGS`                                                                                                                                                       | 2.4        | 4.0     | `sphinx.builders.latex.constants.ADDITIONAL_SETTINGS`                                                                                                                                     |
| `sphinx.writers.latex.DEFAULT_SETTINGS`                                                                                                                                                          | 2.4        | 4.0     | `sphinx.builders.latex.constants.DEFAULT_SETTINGS`                                                                                                                                        |
| `sphinx.writers.latex.LUALATEX_DEFAULT_FONTPKG`                                                                                                                                                  | 2.4        | 4.0     | `sphinx.builders.latex.constants.LUALATEX_DEFAULT_FONTPKG`                                                                                                                                |
| `sphinx.writers.latex.PDFLATEX_DEFAULT_FONTPKG`                                                                                                                                                  | 2.4        | 4.0     | `sphinx.builders.latex.constants.PDFLATEX_DEFAULT_FONTPKG`                                                                                                                                |
| `sphinx.writers.latex.XELATEX_DEFAULT_FONTPKG`                                                                                                                                                   | 2.4        | 4.0     | `sphinx.builders.latex.constants.XELATEX_DEFAULT_FONTPKG`                                                                                                                                 |
| `sphinx.writers.latex.XELATEX_GREEK_DEFAULT_FONTPKG`                                                                                                                                             | 2.4        | 4.0     | `sphinx.builders.latex.constants.XELATEX_GREEK_DEFAULT_FONTPKG`                                                                                                                           |
| `sphinx.builders.gettext.POHEADER`                                                                                                                                                               | 2.3        | 4.0     | `sphinx/templates/gettext/message.pot_t` (template file)                                                                                                                                  |
| `sphinx.io.SphinxStandaloneReader.app`                                                                                                                                                           | 2.3        | 4.0     | `sphinx.io.SphinxStandaloneReader.setup()`                                                                                                                                                |
| `sphinx.io.SphinxStandaloneReader.env`                                                                                                                                                           | 2.3        | 4.0     | `sphinx.io.SphinxStandaloneReader.setup()`                                                                                                                                                |
| `sphinx.util.texescape.tex_escape_map`                                                                                                                                                           | 2.3        | 4.0     | `sphinx.util.texescape.escape()`                                                                                                                                                          |
| `sphinx.util.texescape.tex_hl_escape_map_new`                                                                                                                                                    | 2.3        | 4.0     | `sphinx.util.texescape.hlescape()`                                                                                                                                                        |
| `sphinx.writers.latex.LaTeXTranslator.no_contractions`                                                                                                                                           | 2.3        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.domains.math.MathDomain.add_equation()`                                                                                                                                                  | 2.2        | 4.0     | `sphinx.domains.math.MathDomain.note_equation()`                                                                                                                                          |
| `sphinx.domains.math.MathDomain.get_next_equation_number()`                                                                                                                                      | 2.2        | 4.0     | `sphinx.domains.math.MathDomain.note_equation()`                                                                                                                                          |
| The `info` and `warn` arguments of `sphinx.ext.autosummary.generate.generate_autosummary_docs()`                                                                                                 | 2.2        | 4.0     | `logging.info()` and `logging.warning()`                                                                                                                                                  |
| `sphinx.ext.autosummary.generate._simple_info()`                                                                                                                                                 | 2.2        | 4.0     | `logging.info()`                                                                                                                                                                          |
| `sphinx.ext.autosummary.generate._simple_warn()`                                                                                                                                                 | 2.2        | 4.0     | `logging.warning()`                                                                                                                                                                       |
| `sphinx.ext.todo.merge_info()`                                                                                                                                                                   | 2.2        | 4.0     | `sphinx.ext.todo.TodoDomain`                                                                                                                                                              |
| `sphinx.ext.todo.process_todo_nodes()`                                                                                                                                                           | 2.2        | 4.0     | `sphinx.ext.todo.TodoDomain`                                                                                                                                                              |
| `sphinx.ext.todo.process_todos()`                                                                                                                                                                | 2.2        | 4.0     | `sphinx.ext.todo.TodoDomain`                                                                                                                                                              |
| `sphinx.ext.todo.purge_todos()`                                                                                                                                                                  | 2.2        | 4.0     | `sphinx.ext.todo.TodoDomain`                                                                                                                                                              |
| `sphinx.builders.latex.LaTeXBuilder.apply_transforms()`                                                                                                                                          | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.builders._epub_base.EpubBuilder.esc()`                                                                                                                                                   | 2.1        | 4.0     | `html.escape()`                                                                                                                                                                           |
| `sphinx.directives.Acks`                                                                                                                                                                         | 2.1        | 4.0     | `sphinx.directives.other.Acks`                                                                                                                                                            |
| `sphinx.directives.Author`                                                                                                                                                                       | 2.1        | 4.0     | `sphinx.directives.other.Author`                                                                                                                                                          |
| `sphinx.directives.Centered`                                                                                                                                                                     | 2.1        | 4.0     | `sphinx.directives.other.Centered`                                                                                                                                                        |
| `sphinx.directives.Class`                                                                                                                                                                        | 2.1        | 4.0     | `sphinx.directives.other.Class`                                                                                                                                                           |
| `sphinx.directives.CodeBlock`                                                                                                                                                                    | 2.1        | 4.0     | `sphinx.directives.code.CodeBlock`                                                                                                                                                        |
| `sphinx.directives.Figure`                                                                                                                                                                       | 2.1        | 4.0     | `sphinx.directives.patches.Figure`                                                                                                                                                        |
| `sphinx.directives.HList`                                                                                                                                                                        | 2.1        | 4.0     | `sphinx.directives.other.HList`                                                                                                                                                           |
| `sphinx.directives.Highlight`                                                                                                                                                                    | 2.1        | 4.0     | `sphinx.directives.code.Highlight`                                                                                                                                                        |
| `sphinx.directives.Include`                                                                                                                                                                      | 2.1        | 4.0     | `sphinx.directives.other.Include`                                                                                                                                                         |
| `sphinx.directives.Index`                                                                                                                                                                        | 2.1        | 4.0     | `sphinx.directives.other.Index`                                                                                                                                                           |
| `sphinx.directives.LiteralInclude`                                                                                                                                                               | 2.1        | 4.0     | `sphinx.directives.code.LiteralInclude`                                                                                                                                                   |
| `sphinx.directives.Meta`                                                                                                                                                                         | 2.1        | 4.0     | `sphinx.directives.patches.Meta`                                                                                                                                                          |
| `sphinx.directives.Only`                                                                                                                                                                         | 2.1        | 4.0     | `sphinx.directives.other.Only`                                                                                                                                                            |
| `sphinx.directives.SeeAlso`                                                                                                                                                                      | 2.1        | 4.0     | `sphinx.directives.other.SeeAlso`                                                                                                                                                         |
| `sphinx.directives.TabularColumns`                                                                                                                                                               | 2.1        | 4.0     | `sphinx.directives.other.TabularColumns`                                                                                                                                                  |
| `sphinx.directives.TocTree`                                                                                                                                                                      | 2.1        | 4.0     | `sphinx.directives.other.TocTree`                                                                                                                                                         |
| `sphinx.directives.VersionChange`                                                                                                                                                                | 2.1        | 4.0     | `sphinx.domains.changeset.VersionChange`                                                                                                                                                  |
| `sphinx.domains.python.PyClassmember`                                                                                                                                                            | 2.1        | 4.0     | `sphinx.domains.python.PyAttribute`, `sphinx.domains.python.PyMethod`, `sphinx.domains.python.PyClassMethod`, `sphinx.domains.python.PyObject` and `sphinx.domains.python.PyStaticMethod` |
| `sphinx.domains.python.PyModulelevel`                                                                                                                                                            | 2.1        | 4.0     | `sphinx.domains.python.PyFunction`, `sphinx.domains.python.PyObject` and `sphinx.domains.python.PyVariable`                                                                               |
| `sphinx.domains.std.StandardDomain._resolve_citation_xref()`                                                                                                                                     | 2.1        | 4.0     | `sphinx.domains.citation.CitationDomain.resolve_xref()`                                                                                                                                   |
| `sphinx.domains.std.StandardDomain.note_citations()`                                                                                                                                             | 2.1        | 4.0     | `sphinx.domains.citation.CitationDomain.note_citation()`                                                                                                                                  |
| `sphinx.domains.std.StandardDomain.note_citation_refs()`                                                                                                                                         | 2.1        | 4.0     | `sphinx.domains.citation.CitationDomain.note_citation_reference()`                                                                                                                        |
| `sphinx.domains.std.StandardDomain.note_labels()`                                                                                                                                                | 2.1        | 4.0     | `sphinx.domains.std.StandardDomain.process_doc()`                                                                                                                                         |
| `sphinx.domains.js.JSObject.display_prefix`                                                                                                                                                      |            | 4.3     | `sphinx.domains.js.JSObject.get_display_prefix()`                                                                                                                                         |
| `sphinx.environment.NoUri`                                                                                                                                                                       | 2.1        | 3.0     | `sphinx.errors.NoUri`                                                                                                                                                                     |
| `sphinx.ext.apidoc.format_directive()`                                                                                                                                                           | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.apidoc.format_heading()`                                                                                                                                                             | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.apidoc.makename()`                                                                                                                                                                   | 2.1        | 4.0     | `sphinx.ext.apidoc.module_join()`                                                                                                                                                         |
| `sphinx.ext.autodoc.importer.MockFinder`                                                                                                                                                         | 2.1        | 4.0     | `sphinx.ext.autodoc.mock.MockFinder`                                                                                                                                                      |
| `sphinx.ext.autodoc.importer.MockLoader`                                                                                                                                                         | 2.1        | 4.0     | `sphinx.ext.autodoc.mock.MockLoader`                                                                                                                                                      |
| `sphinx.ext.autodoc.importer.mock()`                                                                                                                                                             | 2.1        | 4.0     | `sphinx.ext.autodoc.mock.mock()`                                                                                                                                                          |
| `sphinx.ext.autosummary.autolink_role()`                                                                                                                                                         | 2.1        | 4.0     | `sphinx.ext.autosummary.AutoLink`                                                                                                                                                         |
| `sphinx.ext.imgmath.DOC_BODY`                                                                                                                                                                    | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.imgmath.DOC_BODY_PREVIEW`                                                                                                                                                            | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.imgmath.DOC_HEAD`                                                                                                                                                                    | 2.1        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.transforms.CitationReferences`                                                                                                                                                           | 2.1        | 4.0     | `sphinx.domains.citation.CitationReferenceTransform`                                                                                                                                      |
| `sphinx.transforms.SmartQuotesSkipper`                                                                                                                                                           | 2.1        | 4.0     | `sphinx.domains.citation.CitationDefinitionTransform`                                                                                                                                     |
| `sphinx.util.docfields.DocFieldTransformer.preprocess_fieldtypes()`                                                                                                                              | 2.1        | 4.0     | `sphinx.directives.ObjectDescription.get_field_type_map()`                                                                                                                                |
| `sphinx.util.node.find_source_node()`                                                                                                                                                            | 2.1        | 4.0     | `sphinx.util.node.get_node_source()`                                                                                                                                                      |
| `sphinx.util.i18n.find_catalog()`                                                                                                                                                                | 2.1        | 4.0     | `sphinx.util.i18n.docname_to_domain()`                                                                                                                                                    |
| `sphinx.util.i18n.find_catalog_files()`                                                                                                                                                          | 2.1        | 4.0     | `sphinx.util.i18n.CatalogRepository`                                                                                                                                                      |
| `sphinx.util.i18n.find_catalog_source_files()`                                                                                                                                                   | 2.1        | 4.0     | `sphinx.util.i18n.CatalogRepository`                                                                                                                                                      |
| `encoding` argument of `autodoc.Documenter.get_doc()`, `autodoc.DocstringSignatureMixin.get_doc()`, `autodoc.DocstringSignatureMixin._find_signature()`, and `autodoc.ClassDocumenter.get_doc()` | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| arguments of `EpubBuilder.build_mimetype()`, `EpubBuilder.build_container()`, `EpubBuilder.build_content()`, `EpubBuilder.build_toc()` and `EpubBuilder.build_epub()`                            | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| arguments of `Epub3Builder.build_navigation_doc()`                                                                                                                                               | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `nodetype` argument of `sphinx.search.WordCollector.is_meta_keywords()`                                                                                                                          | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `suffix` argument of `BuildEnvironment.doc2path()`                                                                                                                                               | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| string style `base` argument of `BuildEnvironment.doc2path()`                                                                                                                                    | 2.0        | 4.0     | `os.path.join()`                                                                                                                                                                          |
| `sphinx.addnodes.abbreviation`                                                                                                                                                                   | 2.0        | 4.0     | `docutils.nodes.abbreviation`                                                                                                                                                             |
| `sphinx.builders.applehelp`                                                                                                                                                                      | 2.0        | 4.0     | `sphinxcontrib.applehelp`                                                                                                                                                                 |
| `sphinx.builders.devhelp`                                                                                                                                                                        | 2.0        | 4.0     | `sphinxcontrib.devhelp`                                                                                                                                                                   |
| `sphinx.builders.epub3.Epub3Builder.validate_config_value()`                                                                                                                                     | 2.0        | 4.0     | `sphinx.builders.epub3.validate_config_values()`                                                                                                                                          |
| `sphinx.builders.html.JSONHTMLBuilder`                                                                                                                                                           | 2.0        | 4.0     | `sphinx.builders.serializinghtml.JSONHTMLBuilder`                                                                                                                                         |
| `sphinx.builders.html.PickleHTMLBuilder`                                                                                                                                                         | 2.0        | 4.0     | `sphinx.builders.serializinghtml.PickleHTMLBuilder`                                                                                                                                       |
| `sphinx.builders.html.SerializingHTMLBuilder`                                                                                                                                                    | 2.0        | 4.0     | `sphinx.builders.serializinghtml.SerializingHTMLBuilder`                                                                                                                                  |
| `sphinx.builders.html.SingleFileHTMLBuilder`                                                                                                                                                     | 2.0        | 4.0     | `sphinx.builders.singlehtml.SingleFileHTMLBuilder`                                                                                                                                        |
| `sphinx.builders.html.WebHTMLBuilder`                                                                                                                                                            | 2.0        | 4.0     | `sphinx.builders.serializinghtml.PickleHTMLBuilder`                                                                                                                                       |
| `sphinx.builders.htmlhelp`                                                                                                                                                                       | 2.0        | 4.0     | `sphinxcontrib.htmlhelp`                                                                                                                                                                  |
| `sphinx.builders.htmlhelp.HTMLHelpBuilder.open_file()`                                                                                                                                           | 2.0        | 4.0     | `open()`                                                                                                                                                                                  |
| `sphinx.builders.qthelp`                                                                                                                                                                         | 2.0        | 4.0     | `sphinxcontrib.qthelp`                                                                                                                                                                    |
| `sphinx.cmd.quickstart.term_decode()`                                                                                                                                                            | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.cmd.quickstart.TERM_ENCODING`                                                                                                                                                            | 2.0        | 4.0     | `sys.stdin.encoding`                                                                                                                                                                      |
| `sphinx.config.check_unicode()`                                                                                                                                                                  | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.config.string_classes`                                                                                                                                                                   | 2.0        | 4.0     | `[str]`                                                                                                                                                                                   |
| `sphinx.domains.cpp.DefinitionError.description`                                                                                                                                                 | 2.0        | 4.0     | `str(exc)`                                                                                                                                                                                |
| `sphinx.domains.cpp.NoOldIdError.description`                                                                                                                                                    | 2.0        | 4.0     | `str(exc)`                                                                                                                                                                                |
| `sphinx.domains.cpp.UnsupportedMultiCharacterCharLiteral.decoded`                                                                                                                                | 2.0        | 4.0     | `str(exc)`                                                                                                                                                                                |
| `sphinx.ext.autosummary.Autosummary.warn()`                                                                                                                                                      | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autosummary.Autosummary.genopt`                                                                                                                                                      | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autosummary.Autosummary.warnings`                                                                                                                                                    | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autosummary.Autosummary.result`                                                                                                                                                      | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.doctest.doctest_encode()`                                                                                                                                                            | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.jsmath`                                                                                                                                                                              | 2.0        | 4.0     | `sphinxcontrib.jsmath`                                                                                                                                                                    |
| `sphinx.roles.abbr_role()`                                                                                                                                                                       | 2.0        | 4.0     | `sphinx.roles.Abbreviation`                                                                                                                                                               |
| `sphinx.roles.emph_literal_role()`                                                                                                                                                               | 2.0        | 4.0     | `sphinx.roles.EmphasizedLiteral`                                                                                                                                                          |
| `sphinx.roles.menusel_role()`                                                                                                                                                                    | 2.0        | 4.0     | `sphinx.roles.GUILabel` or `sphinx.roles.MenuSelection`                                                                                                                                   |
| `sphinx.roles.index_role()`                                                                                                                                                                      | 2.0        | 4.0     | `sphinx.roles.Index`                                                                                                                                                                      |
| `sphinx.roles.indexmarkup_role()`                                                                                                                                                                | 2.0        | 4.0     | `sphinx.roles.PEP` or `sphinx.roles.RFC`                                                                                                                                                  |
| `sphinx.testing.util.remove_unicode_literal()`                                                                                                                                                   | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.attrdict`                                                                                                                                                                           | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.force_decode()`                                                                                                                                                                     | 2.0        | 5.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.get_matching_docs()`                                                                                                                                                                | 2.0        | 4.0     | `sphinx.util.get_matching_files()`                                                                                                                                                        |
| `sphinx.util.inspect.Parameter`                                                                                                                                                                  | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.jsonimpl`                                                                                                                                                                           | 2.0        | 4.0     | `sphinxcontrib.serializinghtml.jsonimpl`                                                                                                                                                  |
| `sphinx.util.osutil.EEXIST`                                                                                                                                                                      | 2.0        | 4.0     | `errno.EEXIST` or `FileExistsError`                                                                                                                                                       |
| `sphinx.util.osutil.EINVAL`                                                                                                                                                                      | 2.0        | 4.0     | `errno.EINVAL`                                                                                                                                                                            |
| `sphinx.util.osutil.ENOENT`                                                                                                                                                                      | 2.0        | 4.0     | `errno.ENOENT` or `FileNotFoundError`                                                                                                                                                     |
| `sphinx.util.osutil.EPIPE`                                                                                                                                                                       | 2.0        | 4.0     | `errno.ENOENT` or `BrokenPipeError`                                                                                                                                                       |
| `sphinx.util.osutil.walk()`                                                                                                                                                                      | 2.0        | 4.0     | `os.walk()`                                                                                                                                                                               |
| `sphinx.util.pycompat.NoneType`                                                                                                                                                                  | 2.0        | 4.0     | `sphinx.util.typing.NoneType`                                                                                                                                                             |
| `sphinx.util.pycompat.TextIOWrapper`                                                                                                                                                             | 2.0        | 4.0     | `io.TextIOWrapper`                                                                                                                                                                        |
| `sphinx.util.pycompat.UnicodeMixin`                                                                                                                                                              | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.pycompat.htmlescape()`                                                                                                                                                              | 2.0        | 4.0     | `html.escape()`                                                                                                                                                                           |
| `sphinx.util.pycompat.indent()`                                                                                                                                                                  | 2.0        | 4.0     | `textwrap.indent()`                                                                                                                                                                       |
| `sphinx.util.pycompat.sys_encoding`                                                                                                                                                              | 2.0        | 4.0     | `sys.getdefaultencoding()`                                                                                                                                                                |
| `sphinx.util.pycompat.terminal_safe()`                                                                                                                                                           | 2.0        | 4.0     | `sphinx.util.console.terminal_safe()`                                                                                                                                                     |
| `sphinx.util.pycompat.u`                                                                                                                                                                         | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.util.PeekableIterator`                                                                                                                                                                   | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| Omitting the `filename` argument in an overriddent `IndexBuilder.feed()` method.                                                                                                                 | 2.0        | 4.0     | `IndexBuilder.feed(docname, filename, title, doctree)`                                                                                                                                    |
| `sphinx.writers.latex.ExtBabel`                                                                                                                                                                  | 2.0        | 4.0     | `sphinx.builders.latex.util.ExtBabel`                                                                                                                                                     |
| `sphinx.writers.latex.LaTeXTranslator.babel_defmacro()`                                                                                                                                          | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.application.Sphinx._setting_up_extension`                                                                                                                                                | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| The `importer` argument of `sphinx.ext.autodoc.importer._MockModule`                                                                                                                             | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.autodoc.importer._MockImporter`                                                                                                                                                      | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.SphinxBaseFileInput`                                                                                                                                                                  | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.SphinxFileInput.supported`                                                                                                                                                            | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.SphinxRSTFileInput`                                                                                                                                                                   | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.registry.SphinxComponentRegistry.add_source_input()`                                                                                                                                     | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator._make_visit_admonition()`                                                                                                                                  | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.collect_footnotes()`                                                                                                                                       | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.texinfo.TexinfoTranslator._make_visit_admonition()`                                                                                                                              | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.text.TextTranslator._make_depart_admonition()`                                                                                                                                   | 2.0        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.generate_numfig_format()`                                                                                                                                  | 2.0        | 4.0     | N/A                                                                                                                                                                                       |
| `highlightlang`                                                                                                                                                                                  | 1.8        | 4.0     | [`highlight`](../usage/restructuredtext/directives.html#directive-highlight "highlight directive")                                                                                        |
| `add_stylesheet()`                                                                                                                                                                               | 1.8        | 6.0     | [`add_css_file()`](appapi.html#sphinx.application.Sphinx.add_css_file "sphinx.application.Sphinx.add_css_file")                                                                           |
| `add_javascript()`                                                                                                                                                                               | 1.8        | 4.0     | [`add_js_file()`](appapi.html#sphinx.application.Sphinx.add_js_file "sphinx.application.Sphinx.add_js_file")                                                                              |
| `autodoc_default_flags`                                                                                                                                                                          | 1.8        | 4.0     | [`autodoc_default_options`](../usage/extensions/autodoc.html#confval-autodoc_default_options)                                                                                             |
| `content` arguments of `sphinx.util.image.guess_mimetype()`                                                                                                                                      | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `gettext_compact` arguments of `sphinx.util.i18n.find_catalog_source_files()`                                                                                                                    | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.SphinxI18nReader.set_lineno_for_reporter()`                                                                                                                                           | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.io.SphinxI18nReader.line`                                                                                                                                                                | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.directives.other.VersionChange`                                                                                                                                                          | 1.8        | 3.0     | `sphinx.domains.changeset.VersionChange`                                                                                                                                                  |
| `sphinx.highlighting.PygmentsBridge.unhighlight()`                                                                                                                                               | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `trim_doctest_flags` arguments of `sphinx.highlighting.PygmentsBridge`                                                                                                                           | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.mathbase`                                                                                                                                                                            | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.mathbase.MathDomain`                                                                                                                                                                 | 1.8        | 3.0     | `sphinx.domains.math.MathDomain`                                                                                                                                                          |
| `sphinx.ext.mathbase.MathDirective`                                                                                                                                                              | 1.8        | 3.0     | `sphinx.directives.patches.MathDirective`                                                                                                                                                 |
| `sphinx.ext.mathbase.math_role()`                                                                                                                                                                | 1.8        | 3.0     | `docutils.parsers.rst.roles.math_role()`                                                                                                                                                  |
| `sphinx.ext.mathbase.setup_math()`                                                                                                                                                               | 1.8        | 3.0     | [`add_html_math_renderer()`](appapi.html#sphinx.application.Sphinx.add_html_math_renderer "sphinx.application.Sphinx.add_html_math_renderer")                                             |
| `sphinx.ext.mathbase.is_in_section_title()`                                                                                                                                                      | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.ext.mathbase.get_node_equation_number()`                                                                                                                                                 | 1.8        | 3.0     | `sphinx.util.math.get_node_equation_number()`                                                                                                                                             |
| `sphinx.ext.mathbase.wrap_displaymath()`                                                                                                                                                         | 1.8        | 3.0     | `sphinx.util.math.wrap_displaymath()`                                                                                                                                                     |
| `sphinx.ext.mathbase.math` (node)                                                                                                                                                                | 1.8        | 3.0     | `docutils.nodes.math`                                                                                                                                                                     |
| `sphinx.ext.mathbase.displaymath` (node)                                                                                                                                                         | 1.8        | 3.0     | `docutils.nodes.math_block`                                                                                                                                                               |
| `sphinx.ext.mathbase.eqref` (node)                                                                                                                                                               | 1.8        | 3.0     | `sphinx.builders.latex.nodes.math_reference`                                                                                                                                              |
| `viewcode_import` (config value)                                                                                                                                                                 | 1.8        | 3.0     | [`viewcode_follow_imported_members`](../usage/extensions/viewcode.html#confval-viewcode_follow_imported_members)                                                                          |
| `sphinx.writers.latex.Table.caption_footnotetexts`                                                                                                                                               | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.Table.header_footnotetexts`                                                                                                                                                | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.footnotestack`                                                                                                                                             | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.in_container_literal_block`                                                                                                                                | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.next_section_ids`                                                                                                                                          | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.next_hyperlink_ids`                                                                                                                                        | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.restrict_footnote()`                                                                                                                                       | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.unrestrict_footnote()`                                                                                                                                     | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.push_hyperlink_ids()`                                                                                                                                      | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.pop_hyperlink_ids()`                                                                                                                                       | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.bibitems`                                                                                                                                                  | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.hlsettingstack`                                                                                                                                            | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.ExtBabel.get_shorthandoff()`                                                                                                                                               | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html.HTMLTranslator.highlightlang()`                                                                                                                                             | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html.HTMLTranslator.highlightlang_base()`                                                                                                                                        | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html.HTMLTranslator.highlightlangopts()`                                                                                                                                         | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html.HTMLTranslator.highlightlinenothreshold()`                                                                                                                                  | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html5.HTMLTranslator.highlightlang()`                                                                                                                                            | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html5.HTMLTranslator.highlightlang_base()`                                                                                                                                       | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html5.HTMLTranslator.highlightlangopts()`                                                                                                                                        | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.html5.HTMLTranslator.highlightlinenothreshold()`                                                                                                                                 | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `sphinx.writers.latex.LaTeXTranslator.check_latex_elements()`                                                                                                                                    | 1.8        | 3.0     | Nothing                                                                                                                                                                                   |
| `sphinx.application.CONFIG_FILENAME`                                                                                                                                                             | 1.8        | 3.0     | `sphinx.config.CONFIG_FILENAME`                                                                                                                                                           |
| `Config.check_unicode()`                                                                                                                                                                         | 1.8        | 3.0     | `sphinx.config.check_unicode()`                                                                                                                                                           |
| `Config.check_types()`                                                                                                                                                                           | 1.8        | 3.0     | `sphinx.config.check_confval_types()`                                                                                                                                                     |
| `dirname`, `filename` and `tags` arguments of `Config.__init__()`                                                                                                                                | 1.8        | 3.0     | `Config.read()`                                                                                                                                                                           |
| The value of [`html_search_options`](../usage/configuration.html#confval-html_search_options)                                                                                                    | 1.8        | 3.0     | see [`html_search_options`](../usage/configuration.html#confval-html_search_options)                                                                                                      |
| `sphinx.versioning.prepare()`                                                                                                                                                                    | 1.8        | 3.0     | `sphinx.versioning.UIDTransform`                                                                                                                                                          |
| `Sphinx.override_domain()`                                                                                                                                                                       | 1.8        | 3.0     | [`add_domain()`](appapi.html#sphinx.application.Sphinx.add_domain "sphinx.application.Sphinx.add_domain")                                                                                 |
| `Sphinx.import_object()`                                                                                                                                                                         | 1.8        | 3.0     | `sphinx.util.import_object()`                                                                                                                                                             |
| `suffix` argument of [`add_source_parser()`](appapi.html#sphinx.application.Sphinx.add_source_parser "sphinx.application.Sphinx.add_source_parser")                                              | 1.8        | 3.0     | [`add_source_suffix()`](appapi.html#sphinx.application.Sphinx.add_source_suffix "sphinx.application.Sphinx.add_source_suffix")                                                            |
| `BuildEnvironment.load()`                                                                                                                                                                        | 1.8        | 3.0     | `pickle.load()`                                                                                                                                                                           |
| `BuildEnvironment.loads()`                                                                                                                                                                       | 1.8        | 3.0     | `pickle.loads()`                                                                                                                                                                          |
| `BuildEnvironment.frompickle()`                                                                                                                                                                  | 1.8        | 3.0     | `pickle.load()`                                                                                                                                                                           |
| `BuildEnvironment.dump()`                                                                                                                                                                        | 1.8        | 3.0     | `pickle.dump()`                                                                                                                                                                           |
| `BuildEnvironment.dumps()`                                                                                                                                                                       | 1.8        | 3.0     | `pickle.dumps()`                                                                                                                                                                          |
| `BuildEnvironment.topickle()`                                                                                                                                                                    | 1.8        | 3.0     | `pickle.dump()`                                                                                                                                                                           |
| `BuildEnvironment._nitpick_ignore`                                                                                                                                                               | 1.8        | 3.0     | [`nitpick_ignore`](../usage/configuration.html#confval-nitpick_ignore)                                                                                                                    |
| `BuildEnvironment.versionchanges`                                                                                                                                                                | 1.8        | 3.0     | N/A                                                                                                                                                                                       |
| `BuildEnvironment.update()`                                                                                                                                                                      | 1.8        | 3.0     | `Builder.read()`                                                                                                                                                                          |
| `BuildEnvironment.read_doc()`                                                                                                                                                                    | 1.8        | 3.0     | `Builder.read_doc()`                                                                                                                                                                      |
| `BuildEnvironment._read_serial()`                                                                                                                                                                | 1.8        | 3.0     | `Builder.read()`                                                                                                                                                                          |
| `BuildEnvironment._read_parallel()`                                                                                                                                                              | 1.8        | 3.0     | `Builder.read()`                                                                                                                                                                          |
| `BuildEnvironment.write_doctree()`                                                                                                                                                               | 1.8        | 3.0     | `Builder.write_doctree()`                                                                                                                                                                 |
| `BuildEnvironment.note_versionchange()`                                                                                                                                                          | 1.8        | 3.0     | `ChangesDomain.note_changeset()`                                                                                                                                                          |
| `warn()` (template helper function)                                                                                                                                                              | 1.8        | 3.0     | `warning()`                                                                                                                                                                               |
| `source_parsers`                                                                                                                                                                                 | 1.8        | 3.0     | [`add_source_parser()`](appapi.html#sphinx.application.Sphinx.add_source_parser "sphinx.application.Sphinx.add_source_parser")                                                            |
| `sphinx.util.docutils.directive_helper()`                                                                                                                                                        | 1.8        | 3.0     | `Directive` class of docutils                                                                                                                                                             |
| `sphinx.cmdline`                                                                                                                                                                                 | 1.8        | 3.0     | `sphinx.cmd.build`                                                                                                                                                                        |
| `sphinx.make_mode`                                                                                                                                                                               | 1.8        | 3.0     | `sphinx.cmd.make_mode`                                                                                                                                                                    |
| `sphinx.locale.l_()`                                                                                                                                                                             | 1.8        | 3.0     | [`sphinx.locale._()`](i18n.html#sphinx.locale._ "sphinx.locale._")                                                                                                                        |
| `sphinx.locale.lazy_gettext()`                                                                                                                                                                   | 1.8        | 3.0     | [`sphinx.locale._()`](i18n.html#sphinx.locale._ "sphinx.locale._")                                                                                                                        |
| `sphinx.locale.mygettext()`                                                                                                                                                                      | 1.8        | 3.0     | [`sphinx.locale._()`](i18n.html#sphinx.locale._ "sphinx.locale._")                                                                                                                        |
| `sphinx.util.copy_static_entry()`                                                                                                                                                                | 1.5        | 3.0     | `sphinx.util.fileutil.copy_asset()`                                                                                                                                                       |
| `sphinx.build_main()`                                                                                                                                                                            | 1.7        | 2.0     | `sphinx.cmd.build.build_main()`                                                                                                                                                           |
| `sphinx.ext.intersphinx.debug()`                                                                                                                                                                 | 1.7        | 2.0     | `sphinx.ext.intersphinx.inspect_main()`                                                                                                                                                   |
| `sphinx.ext.autodoc.format_annotation()`                                                                                                                                                         | 1.7        | 2.0     | `sphinx.util.inspect.Signature`                                                                                                                                                           |
| `sphinx.ext.autodoc.formatargspec()`                                                                                                                                                             | 1.7        | 2.0     | `sphinx.util.inspect.Signature`                                                                                                                                                           |
| `sphinx.ext.autodoc.AutodocReporter`                                                                                                                                                             | 1.7        | 2.0     | `sphinx.util.docutils.switch_source_input()`                                                                                                                                              |
| `sphinx.ext.autodoc.add_documenter()`                                                                                                                                                            | 1.7        | 2.0     | [`add_autodocumenter()`](appapi.html#sphinx.application.Sphinx.add_autodocumenter "sphinx.application.Sphinx.add_autodocumenter")                                                         |
| `sphinx.ext.autodoc.AutoDirective._register`                                                                                                                                                     | 1.7        | 2.0     | [`add_autodocumenter()`](appapi.html#sphinx.application.Sphinx.add_autodocumenter "sphinx.application.Sphinx.add_autodocumenter")                                                         |
| `AutoDirective._special_attrgetters`                                                                                                                                                             | 1.7        | 2.0     | [`add_autodoc_attrgetter()`](appapi.html#sphinx.application.Sphinx.add_autodoc_attrgetter "sphinx.application.Sphinx.add_autodoc_attrgetter")                                             |
| `Sphinx.warn()`, `Sphinx.info()`                                                                                                                                                                 | 1.6        | 2.0     | [Logging API](logging.html#logging-api)                                                                                                                                                   |
| `BuildEnvironment.set_warnfunc()`                                                                                                                                                                | 1.6        | 2.0     | [Logging API](logging.html#logging-api)                                                                                                                                                   |
| `BuildEnvironment.note_toctree()`                                                                                                                                                                | 1.6        | 2.0     | `Toctree.note()` (in `sphinx.environment.adapters.toctree`)                                                                                                                               |
| `BuildEnvironment.get_toc_for()`                                                                                                                                                                 | 1.6        | 2.0     | `Toctree.get_toc_for()` (in `sphinx.environment.adapters.toctree`)                                                                                                                        |
| `BuildEnvironment.get_toctree_for()`                                                                                                                                                             | 1.6        | 2.0     | `Toctree.get_toctree_for()` (in `sphinx.environment.adapters.toctree`)                                                                                                                    |
| `BuildEnvironment.create_index()`                                                                                                                                                                | 1.6        | 2.0     | `IndexEntries.create_index()` (in `sphinx.environment.adapters.indexentries`)                                                                                                             |
| `sphinx.websupport`                                                                                                                                                                              | 1.6        | 2.0     | [sphinxcontrib-websupport](https://pypi.org/project/sphinxcontrib-websupport/)                                                                                                            |
| `StandaloneHTMLBuilder.css_files`                                                                                                                                                                | 1.6        | 2.0     | `add_stylesheet()`                                                                                                                                                                        |
| `document.settings.gettext_compact`                                                                                                                                                              | 1.8        | 1.8     | [`gettext_compact`](../usage/configuration.html#confval-gettext_compact)                                                                                                                  |
| `Sphinx.status_iterator()`                                                                                                                                                                       | 1.6        | 1.7     | `sphinx.util.status_iterator()`                                                                                                                                                           |
| `Sphinx.old_status_iterator()`                                                                                                                                                                   | 1.6        | 1.7     | `sphinx.util.old_status_iterator()`                                                                                                                                                       |
| `Sphinx._directive_helper()`                                                                                                                                                                     | 1.6        | 1.7     | `sphinx.util.docutils.directive_helper()`                                                                                                                                                 |
| `sphinx.util.compat.Directive`                                                                                                                                                                   | 1.6        | 1.7     | `docutils.parsers.rst.Directive`                                                                                                                                                          |
| `sphinx.util.compat.docutils_version`                                                                                                                                                            | 1.6        | 1.7     | `sphinx.util.docutils.__version_info__`                                                                                                                                                   |

deprecated APIs[¬∂](deprecated.html#id2 "Link to this table")

Note

On deprecating on public APIs (internal functions and classes), we also follow the policy as much as possible.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page









The Basics


User guide



Community


Reference


# Domain API[¬∂](domainapi.html#module-sphinx.domains "Link to this heading")

*class* sphinx.domains.Domain(*env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*)[\[source\]](../_modules/sphinx/domains.html#Domain)[¬∂](domainapi.html#sphinx.domains.Domain "Link to this definition")

A Domain is meant to be a group of ‚Äúobject‚Äù description directives for objects of a similar nature, and corresponding roles to create references to them. Examples would be Python modules, classes, functions etc., elements of a templating language, Sphinx roles and directives, etc.

Each domain has a separate storage for information about existing objects and how to reference them in self.data, which must be a dictionary. It also must implement several functions that expose the object information in a uniform way to parts of Sphinx that allow the user to reference or search for objects in a domain-agnostic way.

About self.data: since all object and cross-referencing information is stored on a BuildEnvironment instance, the domain.data object is also stored in the env.domaindata dict under the key domain.name. Before the build process starts, every active domain is instantiated and given the environment object; the domaindata dict must then either be nonexistent or a dictionary whose ‚Äòversion‚Äô key is equal to the domain class‚Äô [`data_version`](domainapi.html#sphinx.domains.Domain.data_version "sphinx.domains.Domain.data_version") attribute. Otherwise, OSError is raised and the pickled environment is discarded.

add\_object\_type(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *objtype: [ObjType](domainapi.html#sphinx.domains.ObjType "sphinx.domains.ObjType")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.add_object_type)[¬∂](domainapi.html#sphinx.domains.Domain.add_object_type "Link to this definition")

Add an object type.

check\_consistency() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.check_consistency)[¬∂](domainapi.html#sphinx.domains.Domain.check_consistency "Link to this definition")

Do consistency checks (**experimental**).

clear\_doc(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.clear_doc)[¬∂](domainapi.html#sphinx.domains.Domain.clear_doc "Link to this definition")

Remove traces of a document in the domain-specific inventories.

directive(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Directive](markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.directive)[¬∂](domainapi.html#sphinx.domains.Domain.directive "Link to this definition")

Return a directive adapter class that always gives the registered directive its full name (‚Äòdomain:name‚Äô) as `self.name`.

get\_enumerable\_node\_type(*node: Node*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.get_enumerable_node_type)[¬∂](domainapi.html#sphinx.domains.Domain.get_enumerable_node_type "Link to this definition")

Get type of enumerable nodes (experimental).

get\_full\_qualified\_name(*node: Element*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.get_full_qualified_name)[¬∂](domainapi.html#sphinx.domains.Domain.get_full_qualified_name "Link to this definition")

Return full qualified name for given node.

get\_objects() ‚Üí Iterable\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")]][\[source\]](../_modules/sphinx/domains.html#Domain.get_objects)[¬∂](domainapi.html#sphinx.domains.Domain.get_objects "Link to this definition")

Return an iterable of ‚Äúobject descriptions‚Äù.

Object descriptions are tuples with six items:

`name`

Fully qualified name.

`dispname`

Name to display when searching/linking.

`type`

Object type, a key in `self.object_types`.

`docname`

The document where it is to be found.

`anchor`

The anchor name for the object.

`priority`

How ‚Äúimportant‚Äù the object is (determines placement in search results). One of:

`1`

Default priority (placed before full-text matches).

`0`

Object is important (placed before default-priority objects).

`2`

Object is unimportant (placed after full-text matches).

`-1`

Object should not show up in search at all.

get\_type\_name(*type: [ObjType](domainapi.html#sphinx.domains.ObjType "sphinx.domains.ObjType")*, *primary: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.get_type_name)[¬∂](domainapi.html#sphinx.domains.Domain.get_type_name "Link to this definition")

Return full name for given ObjType.

merge\_domaindata(*docnames: Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *otherdata: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any]*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.merge_domaindata)[¬∂](domainapi.html#sphinx.domains.Domain.merge_domaindata "Link to this definition")

Merge in data regarding *docnames* from a different domaindata inventory (coming from a subprocess in parallel builds).

process\_doc(*env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *document: nodes.document*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.process_doc)[¬∂](domainapi.html#sphinx.domains.Domain.process_doc "Link to this definition")

Process a document after it is read by the environment.

process\_field\_xref(*pnode: [pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.process_field_xref)[¬∂](domainapi.html#sphinx.domains.Domain.process_field_xref "Link to this definition")

Process a pending xref created in a doc field. For example, attach information about the current scope.

resolve\_any\_xref(*env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *fromdocname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *builder: [Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")*, *target: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *node: [pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref")*, *contnode: Element*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), nodes.reference]][\[source\]](../_modules/sphinx/domains.html#Domain.resolve_any_xref)[¬∂](domainapi.html#sphinx.domains.Domain.resolve_any_xref "Link to this definition")

Resolve the pending\_xref *node* with the given *target*.

The reference comes from an ‚Äúany‚Äù or similar role, which means that we don‚Äôt know the type. Otherwise, the arguments are the same as for [`resolve_xref()`](domainapi.html#sphinx.domains.Domain.resolve_xref "sphinx.domains.Domain.resolve_xref").

The method must return a list (potentially empty) of tuples `('domain:role', newnode)`, where `'domain:role'` is the name of a role that could have created the same reference, e.g. `'py:func'`. `newnode` is what [`resolve_xref()`](domainapi.html#sphinx.domains.Domain.resolve_xref "sphinx.domains.Domain.resolve_xref") would return.

Added in version 1.3.

resolve\_xref(*env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*, *fromdocname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *builder: [Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")*, *typ: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *target: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *node: [pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref")*, *contnode: Element*) ‚Üí nodes.reference | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.resolve_xref)[¬∂](domainapi.html#sphinx.domains.Domain.resolve_xref "Link to this definition")

Resolve the pending\_xref *node* with the given *typ* and *target*.

This method should return a new node, to replace the xref node, containing the *contnode* which is the markup content of the cross-reference.

If no resolution can be found, None can be returned; the xref node will then given to the [`missing-reference`](event_callbacks.html#event-missing-reference) event, and if that yields no resolution, replaced by *contnode*.

The method can also raise `sphinx.environment.NoUri` to suppress the [`missing-reference`](event_callbacks.html#event-missing-reference) event being emitted.

role(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí RoleFunction | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.role)[¬∂](domainapi.html#sphinx.domains.Domain.role "Link to this definition")

Return a role adapter function that always gives the registered role its full name (‚Äòdomain:name‚Äô) as the first argument.

setup() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains.html#Domain.setup)[¬∂](domainapi.html#sphinx.domains.Domain.setup "Link to this definition")

Set up domain object.

dangling\_warnings*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.dangling_warnings "Link to this definition")

role name -&gt; a warning message if reference is missing

data*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any]*[¬∂](domainapi.html#sphinx.domains.Domain.data "Link to this definition")

data value

data\_version *= 0*[¬∂](domainapi.html#sphinx.domains.Domain.data_version "Link to this definition")

data version, bump this when the format of self.data changes

directives*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Directive](markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive")]] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.directives "Link to this definition")

directive name -&gt; directive class

enumerable\_nodes*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[Node], [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), TitleGetter | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.enumerable_nodes "Link to this definition")

node\_class -&gt; (enum\_node\_type, title\_getter)

indices*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Index](domainapi.html#sphinx.domains.Index "sphinx.domains.Index")]] = \[]*[¬∂](domainapi.html#sphinx.domains.Domain.indices "Link to this definition")

a list of Index subclasses

initial\_data*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.initial_data "Link to this definition")

data value for a fresh environment

label *= ''*[¬∂](domainapi.html#sphinx.domains.Domain.label "Link to this definition")

domain label: longer, more descriptive (used in messages)

name *= ''*[¬∂](domainapi.html#sphinx.domains.Domain.name "Link to this definition")

domain name: should be short, but unique

object\_types*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [ObjType](domainapi.html#sphinx.domains.ObjType "sphinx.domains.ObjType")] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.object_types "Link to this definition")

type (usually directive) name -&gt; ObjType instance

roles*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), RoleFunction | XRefRole] = {}*[¬∂](domainapi.html#sphinx.domains.Domain.roles "Link to this definition")

role name -&gt; role callable

*class* sphinx.domains.ObjType(*lname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, */*, *\*roles: Any*, *\*\*attrs: Any*)[\[source\]](../_modules/sphinx/domains.html#ObjType)[¬∂](domainapi.html#sphinx.domains.ObjType "Link to this definition")

An ObjType is the description for a type of object that a domain can document. In the object\_types attribute of Domain subclasses, object type names are mapped to instances of this class.

Constructor arguments:

- *lname*: localized name of the type (do not include domain name)
- *roles*: all the roles that can refer to an object of this type
- *attrs*: object attributes ‚Äì currently only ‚Äúsearchprio‚Äù is known, which defines the object‚Äôs priority in the full-text search index, see [`Domain.get_objects()`](domainapi.html#sphinx.domains.Domain.get_objects "sphinx.domains.Domain.get_objects").

*class* sphinx.domains.Index(*domain: [Domain](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain")*)[\[source\]](../_modules/sphinx/domains/_index.html#Index)[¬∂](domainapi.html#sphinx.domains.Index "Link to this definition")

An Index is the description for a domain-specific index. To add an index to a domain, subclass Index, overriding the three name attributes:

- name is an identifier used for generating file names. It is also used for a hyperlink target for the index. Therefore, users can refer the index page using `ref` role and a string which is combined domain name and `name` attribute (ex. ``:ref:`py-modindex` ``).
- localname is the section title for the index.
- shortname is a short name for the index, for use in the relation bar in HTML output. Can be empty to disable entries in the relation bar.

and providing a [`generate()`](domainapi.html#sphinx.domains.Index.generate "sphinx.domains.Index.generate") method. Then, add the index class to your domain‚Äôs indices list. Extensions can add indices to existing domains using [`add_index_to_domain()`](appapi.html#sphinx.application.Sphinx.add_index_to_domain "sphinx.application.Sphinx.add_index_to_domain").

Changed in version 3.0: Index pages can be referred by domain name and index name via [`ref`](../usage/referencing.html#role-ref "ref role") role.

*abstractmethod* generate(*docnames: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[IndexEntry](domainapi.html#sphinx.domains.IndexEntry "sphinx.domains.IndexEntry")]]], [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")][\[source\]](../_modules/sphinx/domains/_index.html#Index.generate)[¬∂](domainapi.html#sphinx.domains.Index.generate "Link to this definition")

Get entries for the index.

If `docnames` is given, restrict to entries referring to these docnames.

The return value is a tuple of `(content, collapse)`:

`collapse`

A boolean that determines if sub-entries should start collapsed (for output formats that support collapsing sub-entries).

`content`:

A sequence of `(letter, entries)` tuples, where `letter` is the ‚Äúheading‚Äù for the given `entries`, usually the starting letter, and `entries` is a sequence of single entries. Each entry is an [`IndexEntry`](domainapi.html#sphinx.domains.IndexEntry "sphinx.domains.IndexEntry").

*class* sphinx.domains.IndexEntry(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *subtype: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*, *docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *anchor: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *extra: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *qualifier: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *descr: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*)[\[source\]](../_modules/sphinx/domains/_index.html#IndexEntry)[¬∂](domainapi.html#sphinx.domains.IndexEntry "Link to this definition")

An index entry.

Note

The *qualifier* and *description* are not rendered for some output formats, such as LaTeX.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.name "Link to this definition")

The name of the index entry to be displayed.

subtype*: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.subtype "Link to this definition")

The sub-entry related type. One of:

`0`

A normal entry.

`1`

An entry with sub-entries.

`2`

A sub-entry.

docname*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.docname "Link to this definition")

*docname* where the entry is located.

anchor*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.anchor "Link to this definition")

Anchor for the entry within docname

extra*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.extra "Link to this definition")

Extra info for the entry.

qualifier*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.qualifier "Link to this definition")

Qualifier for the description.

descr*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](domainapi.html#sphinx.domains.IndexEntry.descr "Link to this definition")

Description for the entry.

*class* sphinx.directives.ObjectDescription(*name*, *arguments*, *options*, *content*, *lineno*, *content\_offset*, *block\_text*, *state*, *state\_machine*)[\[source\]](../_modules/sphinx/directives.html#ObjectDescription)[¬∂](domainapi.html#sphinx.directives.ObjectDescription "Link to this definition")

Directive to describe a class, function or similar object.

Not used directly, but subclassed (in domain-specific directives) to add custom behaviour.

\_object\_hierarchy\_parts(*sig\_node: [desc\_signature](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature")*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), ...][\[source\]](../_modules/sphinx/directives.html#ObjectDescription._object_hierarchy_parts)[¬∂](domainapi.html#sphinx.directives.ObjectDescription._object_hierarchy_parts "Link to this definition")

Returns a tuple of strings, one entry for each part of the object‚Äôs hierarchy (e.g. `('module', 'submodule', 'Class', 'method')`). The returned tuple is used to properly nest children within parents in the table of contents, and can also be used within the [`_toc_entry_name()`](domainapi.html#sphinx.directives.ObjectDescription._toc_entry_name "sphinx.directives.ObjectDescription._toc_entry_name") method.

This method must not be used outwith table of contents generation.

\_toc\_entry\_name(*sig\_node: [desc\_signature](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature")*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/directives.html#ObjectDescription._toc_entry_name)[¬∂](domainapi.html#sphinx.directives.ObjectDescription._toc_entry_name "Link to this definition")

Returns the text of the table of contents entry for the object.

This function is called once, in [`run()`](domainapi.html#sphinx.directives.ObjectDescription.run "sphinx.directives.ObjectDescription.run"), to set the name for the table of contents entry (a special attribute `_toc_name` is set on the object node, later used in `environment.collectors.toctree.TocTreeCollector.process_doc().build_toc()` when the table of contents entries are collected).

To support table of contents entries for their objects, domains must override this method, also respecting the configuration setting `toc_object_entries_show_parents`. Domains must also override [`_object_hierarchy_parts()`](domainapi.html#sphinx.directives.ObjectDescription._object_hierarchy_parts "sphinx.directives.ObjectDescription._object_hierarchy_parts"), with one (string) entry for each part of the object‚Äôs hierarchy. The result of this method is set on the signature node, and can be accessed as `sig_node['_toc_parts']` for use within this method. The resulting tuple is also used to properly nest children within parents in the table of contents.

An example implementations of this method is within the python domain (`PyObject._toc_entry_name()`). The python domain sets the `_toc_parts` attribute within the [`handle_signature()`](domainapi.html#sphinx.directives.ObjectDescription.handle_signature "sphinx.directives.ObjectDescription.handle_signature") method.

add\_target\_and\_index(*name: ObjDescT*, *sig: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *signode: [desc\_signature](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/directives.html#ObjectDescription.add_target_and_index)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.add_target_and_index "Link to this definition")

Add cross-reference IDs and entries to self.indexnode, if applicable.

*name* is whatever [`handle_signature()`](domainapi.html#sphinx.directives.ObjectDescription.handle_signature "sphinx.directives.ObjectDescription.handle_signature") returned.

after\_content() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/directives.html#ObjectDescription.after_content)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.after_content "Link to this definition")

Called after parsing content.

Used to reset information about the current directive context on the build environment.

before\_content() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/directives.html#ObjectDescription.before_content)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.before_content "Link to this definition")

Called before parsing content.

Used to set information about the current directive context on the build environment.

get\_signatures() ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/directives.html#ObjectDescription.get_signatures)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.get_signatures "Link to this definition")

Retrieve the signatures to document from the directive arguments.

By default, signatures are given as arguments, one per line.

handle\_signature(*sig: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *signode: [desc\_signature](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature")*) ‚Üí ObjDescT[\[source\]](../_modules/sphinx/directives.html#ObjectDescription.handle_signature)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.handle_signature "Link to this definition")

Parse the signature *sig*.

The individual nodes are then appended to *signode*. If ValueError is raised, parsing is aborted and the whole *sig* is put into a single desc\_name node.

The return value should be a value that identifies the object. It is passed to [`add_target_and_index()`](domainapi.html#sphinx.directives.ObjectDescription.add_target_and_index "sphinx.directives.ObjectDescription.add_target_and_index") unchanged, and otherwise only used to skip duplicates.

run() ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Node][\[source\]](../_modules/sphinx/directives.html#ObjectDescription.run)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.run "Link to this definition")

Main directive entry function, called by docutils upon encountering the directive.

This directive is meant to be quite easily subclassable, so it delegates to several additional methods. What it does:

- find out if called as a domain-specific directive, set self.domain
- create a desc node to fit all description inside
- parse standard options, currently no-index
- create an index node if needed as self.indexnode
- parse all given signatures (as returned by self.get\_signatures()) using self.handle\_signature(), which should either return a name or raise ValueError
- add index entries using self.add\_target\_and\_index()
- parse the content and handle doc fields in it

transform\_content(*content\_node: [desc\_content](nodes.html#sphinx.addnodes.desc_content "sphinx.addnodes.desc_content")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/directives.html#ObjectDescription.transform_content)[¬∂](domainapi.html#sphinx.directives.ObjectDescription.transform_content "Link to this definition")

Can be used to manipulate the content.

Called after creating the content through nested parsing, but before the `object-description-transform` event is emitted, and before the info-fields are transformed.

final\_argument\_whitespace *= True*[¬∂](domainapi.html#sphinx.directives.ObjectDescription.final_argument_whitespace "Link to this definition")

May the final argument contain whitespace?

has\_content *= True*[¬∂](domainapi.html#sphinx.directives.ObjectDescription.has_content "Link to this definition")

May the directive have content?

option\_spec*: ClassVar\[OptionSpec] = {'no-contents-entry': &lt;function flag&gt;, 'no-index': &lt;function flag&gt;, 'no-index-entry': &lt;function flag&gt;, 'no-typesetting': &lt;function flag&gt;, 'nocontentsentry': &lt;function flag&gt;, 'noindex': &lt;function flag&gt;, 'noindexentry': &lt;function flag&gt;}*[¬∂](domainapi.html#sphinx.directives.ObjectDescription.option_spec "Link to this definition")

Mapping of option names to validator functions.

optional\_arguments *= 0*[¬∂](domainapi.html#sphinx.directives.ObjectDescription.optional_arguments "Link to this definition")

Number of optional arguments after the required arguments.

required\_arguments *= 1*[¬∂](domainapi.html#sphinx.directives.ObjectDescription.required_arguments "Link to this definition")

Number of required directive arguments.

## Python Domain[¬∂](domainapi.html#module-sphinx.domains.python "Link to this heading")

*class* sphinx.domains.python.PythonDomain(*env: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*)[\[source\]](../_modules/sphinx/domains/python.html#PythonDomain)[¬∂](domainapi.html#sphinx.domains.python.PythonDomain "Link to this definition")

Python language domain.

objects[¬∂](domainapi.html#sphinx.domains.python.PythonDomain.objects "Link to this definition")

modules[¬∂](domainapi.html#sphinx.domains.python.PythonDomain.modules "Link to this definition")

note\_object(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *objtype: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *node\_id: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *aliased: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*, *location: Any = None*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains/python.html#PythonDomain.note_object)[¬∂](domainapi.html#sphinx.domains.python.PythonDomain.note_object "Link to this definition")

Note a python object for cross reference.

Added in version 2.1.

note\_module(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *node\_id: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *synopsis: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *platform: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *deprecated: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/domains/python.html#PythonDomain.note_module)[¬∂](domainapi.html#sphinx.domains.python.PythonDomain.note_module "Link to this definition")

Note a python module for cross reference.

Added in version 2.1.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page





The Basics


User guide



Community


Reference


# Build environment API[¬∂](envapi.html#module-sphinx.environment "Link to this heading")

*class* sphinx.environment.BuildEnvironment[\[source\]](../_modules/sphinx/environment.html#BuildEnvironment)[¬∂](envapi.html#sphinx.environment.BuildEnvironment "Link to this definition")

**Attributes**

app[¬∂](envapi.html#sphinx.environment.BuildEnvironment.app "Link to this definition")

Reference to the [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx") (application) object.

config[¬∂](envapi.html#sphinx.environment.BuildEnvironment.config "Link to this definition")

Reference to the [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config") object.

project[¬∂](envapi.html#sphinx.environment.BuildEnvironment.project "Link to this definition")

Target project. See [`Project`](projectapi.html#sphinx.project.Project "sphinx.project.Project").

srcdir[¬∂](envapi.html#sphinx.environment.BuildEnvironment.srcdir "Link to this definition")

Source directory.

doctreedir[¬∂](envapi.html#sphinx.environment.BuildEnvironment.doctreedir "Link to this definition")

Directory for storing pickled doctrees.

events[¬∂](envapi.html#sphinx.environment.BuildEnvironment.events "Link to this definition")

An [`EventManager`](utils.html#sphinx.events.EventManager "sphinx.events.EventManager") object.

found\_docs[¬∂](envapi.html#sphinx.environment.BuildEnvironment.found_docs "Link to this definition")

A set of all existing docnames.

metadata[¬∂](envapi.html#sphinx.environment.BuildEnvironment.metadata "Link to this definition")

Dictionary mapping docnames to ‚Äúmetadata‚Äù (see [File-wide metadata](../usage/restructuredtext/field-lists.html#metadata)).

titles[¬∂](envapi.html#sphinx.environment.BuildEnvironment.titles "Link to this definition")

Dictionary mapping docnames to the docutils node for their main title.

docname[¬∂](envapi.html#sphinx.environment.BuildEnvironment.docname "Link to this definition")

Returns the docname of the document currently being parsed.

parser[¬∂](envapi.html#sphinx.environment.BuildEnvironment.parser "Link to this definition")

Returns the parser being used for to parse the current document.

**Per-document attributes**

current\_document[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document "Link to this definition")

Temporary data storage while reading a document.

Extensions may use the mapping interface provided by `env.current_document` to store data relating to the current document, but should use a unique prefix to avoid name clashes.

Important

Only the following attributes constitute the public API. The type itself and any methods or other attributes remain private, experimental, and will be changed or removed without notice.

current\_document.docname*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document.docname "Link to this definition")

The document name (‚Äòdocname‚Äô) for the current document.

current\_document.default\_role*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document.default_role "Link to this definition")

The default role for the current document. Set by the [default-role](https://docutils.sourceforge.io/docs/ref/rst/directives.html#default-role) directive.

current\_document.default\_domain*: [Domain](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document.default_domain "Link to this definition")

The default domain for the current document. Set by the [`default-domain`](../usage/domains/index.html#directive-default-domain "default-domain directive") directive.

current\_document.highlight\_language*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document.highlight_language "Link to this definition")

The default language for syntax highlighting. Set by the [`highlight`](../usage/restructuredtext/directives.html#directive-highlight "highlight directive") directive to override the [`highlight_language`](../usage/configuration.html#confval-highlight_language) config value.

current\_document.\_parser*: [Parser](parserapi.html#sphinx.parsers.Parser "sphinx.parsers.Parser") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*[¬∂](envapi.html#sphinx.environment.BuildEnvironment.current_document._parser "Link to this definition")

*This attribute is experimental and may be changed without notice.*

The parser being used to parse the current document.

**Utility methods**

doc2path(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *base: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = True*) ‚Üí \_StrPath[\[source\]](../_modules/sphinx/environment.html#BuildEnvironment.doc2path)[¬∂](envapi.html#sphinx.environment.BuildEnvironment.doc2path "Link to this definition")

Return the filename for the document name.

If *base* is True, return absolute path under self.srcdir. If *base* is False, return relative path to self.srcdir.

relfn2path(*filename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path "(in Python v3.13)")*, *docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/environment.html#BuildEnvironment.relfn2path)[¬∂](envapi.html#sphinx.environment.BuildEnvironment.relfn2path "Link to this definition")

Return paths to a file referenced from a document, relative to documentation root and absolute.

In the input ‚Äúfilename‚Äù, absolute filenames are taken as relative to the source dir, while relative filenames are relative to the dir of the containing document.

note\_dependency(*filename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *\**, *docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment.html#BuildEnvironment.note_dependency)[¬∂](envapi.html#sphinx.environment.BuildEnvironment.note_dependency "Link to this definition")

Add *filename* as a dependency of the current document.

This means that the document will be rebuilt if this file changes.

*filename* should be absolute or relative to the source directory.

new\_serialno(*category: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment.html#BuildEnvironment.new_serialno)[¬∂](envapi.html#sphinx.environment.BuildEnvironment.new_serialno "Link to this definition")

Return a serial number, e.g. for index entry targets.

The number is guaranteed to be unique in the current document.

note\_reread() ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/environment.html#BuildEnvironment.note_reread)[¬∂](envapi.html#sphinx.environment.BuildEnvironment.note_reread "Link to this definition")

Add the current document to the list of documents that will automatically be re-read at the next build.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page



The Basics


User guide



Community


Reference


# Event callbacks API[¬∂](event_callbacks.html#event-callbacks-api "Link to this heading")

Connecting callback functions to events is a simple way to extend Sphinx, by hooking into the build process at various points.

Use [`Sphinx.connect()`](appapi.html#sphinx.application.Sphinx.connect "sphinx.application.Sphinx.connect") in an extension‚Äôs `setup` function, or a `setup` function in your projects `conf.py`, to connect functions to the events:

```
def source_read_handler(app, docname, source):
    print('do something here...')

def setup(app):
    app.connect('source-read', source_read_handler)
```

See also

Extensions can add their own events by using [`Sphinx.add_event()`](appapi.html#sphinx.application.Sphinx.add_event "sphinx.application.Sphinx.add_event"), and calling them them with [`Sphinx.emit()`](appapi.html#sphinx.application.Sphinx.emit "sphinx.application.Sphinx.emit") or [`Sphinx.emit_firstresult()`](appapi.html#sphinx.application.Sphinx.emit_firstresult "sphinx.application.Sphinx.emit_firstresult").

## Core events overview[¬∂](event_callbacks.html#core-events-overview "Link to this heading")

Below is an overview of the core event that happens during a build.

```
1. event.config-inited(app,config)
2. event.builder-inited(app)
3. event.env-get-outdated(app, env, added, changed, removed)
4. event.env-before-read-docs(app, env, docnames)

for docname in docnames:
   5. event.env-purge-doc(app, env, docname)

   if doc changed and not removed:
      6. source-read(app, docname, source)
      7. run source parsers: text -> docutils.document
         - parsers can be added with the app.add_source_parser() API
         - event.include-read(app, relative_path, parent_docname, content)
           is called for each include directive
      8. apply transforms based on priority: docutils.document -> docutils.document
         - event.doctree-read(app, doctree) is called in the middle of transforms,
           transforms come before/after this event depending on their priority.

9. event.env-merge-info(app, env, docnames, other)
   - if running in parallel mode, this event will be emitted for each process

10. event.env-updated(app, env)
11. event.env-get-updated(app, env)

if environment is written to disk:
   12. event.env-check-consistency(app, env)

13. event.write-started(app, builder)
    - This is called after ``app.parallel_ok`` has been set,
      which must not be altered by any event handler.

# The updated-docs list can be builder dependent, but generally includes all new/changed documents,
# plus any output from `env-get-updated`, and then all "parent" documents in the ToC tree
# For builders that output a single page, they are first joined into a single doctree before post-transforms
# or the doctree-resolved event is emitted
for docname in updated-docs:
   14. apply post-transforms (by priority): docutils.document -> docutils.document
   15. event.doctree-resolved(app, doctree, docname)
       - In the event that any reference nodes fail to resolve, the following may emit:
       - event.missing-reference(env, node, contnode)
       - event.warn-missing-reference(domain, node)

16. Generate output files
17. event.build-finished(app, exception)
```

Here is also a flow diagram of the events, within the context of the Sphinx build process:

![// A flow graph of the Sphinx build process, highlighting event callbacks  digraph events {     graph \[         rankdir=TB     \];     node \[         shape=rect         style=rounded     \];     "Sphinx" \[         shape=record         label = "<init> Sphinx.__init__() | <build> Sphinx.build()"     \];      // During initialization     "config-inited"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Sphinx":init -> "config-inited";     "builder-inited"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Sphinx":init -> "builder-inited";      // During build     "Builder" \[label = "Builder.build()"\]     "Sphinx":build -> "Builder";     "Builder.build" \[         shape=record         label = "             <before_read> before read |             <read> read |             <after_read> after read |             <write> write |             <finalize> finalize"     \];     "Builder" -> "Builder.build";      "env-get-outdated"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.build":before_read -> "env-get-outdated";     remove_each_doc \[shape="ellipse", label="for removed"\];     "Builder.build":before_read -> "remove_each_doc";     "env-purge-doc"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "remove_each_doc" -> "env-purge-doc";     "env-before-read-docs"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.build":before_read -> "env-before-read-docs";      // during read phase     "Builder.read" \[label = "Builder.read()"\]     "Builder.build":read -> "Builder.read";     read_each_doc \[shape="ellipse", label="for added | changed"\];     "Builder.read" -> "read_each_doc";     merge_each_process \[     shape="ellipse", label="for each process\n(parallel only)"     \];     "Builder.read" -> merge_each_process;     "env-updated"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.read" -> "env-updated"      // during read phase, for each document/process     "env-purge-doc"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "read_each_doc" -> "env-purge-doc";     "source-read"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "read_each_doc" -> "source-read";     "Include" \[label="Include\ndirective"\]     "read_each_doc" -> "Include";     "include-read"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Include" -> "include-read";     "ObjectDescription" \[label="ObjectDescription\ndirective"\]     "read_each_doc" -> "ObjectDescription";     "object-description-transform"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "ObjectDescription" -> "object-description-transform";     "doctree-read"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "read_each_doc" -> "doctree-read";     "env-merge-info"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "merge_each_process" -> "env-merge-info";      // after read phase     "env-get-updated"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.build":after_read -> "env-get-updated";     if_read_changes \[shape="diamond", label="if changed\ndocuments"\];     "Builder.build":after_read -> if_read_changes;     if_read_changes -> "cache the\nBuild.Environment";     "env-check-consistency"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     if_read_changes -> "env-check-consistency";      // during write phase     "write-started"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.write" \[label = "Builder.write()"\]     "Builder.build":write -> "Builder.write";     "Builder.write" -> "write-started";     write_each_doc \[shape="ellipse", label="for updated"\];     "Builder.write" -> write_each_doc;     "ReferenceResolver" \[     label="ReferenceResolver\nPost-transform"     \]     write_each_doc -> "ReferenceResolver";     "missing-reference"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     ReferenceResolver -> "missing-reference";     "warn-missing-reference"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     ReferenceResolver -> "warn-missing-reference";     "HyperlinkCollector" \[     label="HyperlinkCollector\nPost-transform"     \]     write_each_doc -> "HyperlinkCollector";     "linkcheck-process-uri"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     HyperlinkCollector -> "linkcheck-process-uri";     "doctree-resolved"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     write_each_doc -> "doctree-resolved";     "html-page-context"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     write_each_doc -> "html-page-context";      // html only     "html-collect-pages"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.build":finalize -> "html-collect-pages";      // finalize build     "build-finished"\[style=filled fillcolor="#D5FFFF" color=blue penwidth=2\];     "Builder.build":finalize -> "build-finished";      // constrain layout ordering     {rank=same "config-inited" "builder-inited"};     {rank=same; "env-get-outdated" "env-before-read-docs" "env-get-updated"};     {rank=same; "env-purge-doc" "source-read" "doctree-read", "merge_each_process"};     {rank=same; "env-updated" "env-check-consistency"};     {rank=same; "env-merge-info" "Builder.write"};     {rank=max; "build-finished"}; }](../_images/graphviz-8f41e3505b1f58d16c8c77a9ed7d9562fac30e74.png)

Sphinx core events flow[¬∂](event_callbacks.html#id1 "Link to this image")

## Core event details[¬∂](event_callbacks.html#core-event-details "Link to this heading")

Here is a more detailed list of these events.

config-inited(*app*, *config*)[¬∂](event_callbacks.html#event-config-inited "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **config** ‚Äì [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config")

Emitted when the config object has been initialized.

Added in version 1.8.

builder-inited(*app*)[¬∂](event_callbacks.html#event-builder-inited "Link to this definition")

Parameters:

**app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")

Emitted when the builder object has been created (available as `app.builder`).

env-get-outdated(*app*, *env*, *added*, *changed*, *removed*)[¬∂](event_callbacks.html#event-env-get-outdated "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")
- **added** ‚Äì `Set[str]`
- **changed** ‚Äì `Set[str]`
- **removed** ‚Äì `Set[str]`

Returns:

`Sequence[str]` of additional docnames to re-read

Emitted when the environment determines which source files have changed and should be re-read. *added*, *changed* and *removed* are sets of docnames that the environment has determined. You can return a list of docnames to re-read in addition to these.

Added in version 1.1.

env-purge-doc(*app*, *env*, *docname*)[¬∂](event_callbacks.html#event-env-purge-doc "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")
- **docname** ‚Äì `str`

Emitted when all traces of a source file should be cleaned from the environment, that is, if the source file is removed or before it is freshly read. This is for extensions that keep their own caches in attributes of the environment.

For example, there is a cache of all modules on the environment. When a source file has been changed, the cache‚Äôs entries for the file are cleared, since the module declarations could have been removed from the file.

Added in version 0.5.

env-before-read-docs(*app*, *env*, *docnames*)[¬∂](event_callbacks.html#event-env-before-read-docs "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")
- **docnames** ‚Äì `list[str]`

Emitted after the environment has determined the list of all added and changed files and just before it reads them. It allows extension authors to reorder the list of docnames (*inplace*) before processing, or add more docnames that Sphinx did not consider changed (but never add any docnames that are not in [`found_docs`](envapi.html#sphinx.environment.BuildEnvironment.found_docs "sphinx.environment.BuildEnvironment.found_docs")).

You can also remove document names; do this with caution since it will make Sphinx treat changed files as unchanged.

Added in version 1.3.

source-read(*app*, *docname*, *content*)[¬∂](event_callbacks.html#event-source-read "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **docname** ‚Äì `str`
- **content** ‚Äì `list[str]` with a single element, representing the content of the included file.

Emitted when a source file has been read.

You can process the `content` and replace this item to implement source-level transformations.

For example, if you want to use `$` signs to delimit inline math, like in LaTeX, you can use a regular expression to replace `$...$` by ``:math:`...` ``.

Added in version 0.5.

include-read(*app*, *relative\_path*, *parent\_docname*, *content*)[¬∂](event_callbacks.html#event-include-read "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **relative\_path** ‚Äì [`Path`](https://docs.python.org/3/library/pathlib.html#pathlib.Path "(in Python v3.13)") representing the included file relative to the [source directory](../glossary.html#term-source-directory).
- **parent\_docname** ‚Äì `str` of the document name that contains the [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) directive.
- **content** ‚Äì `list[str]` with a single element, representing the content of the included file.

Emitted when a file has been read with the [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) directive.

You can process the `content` and replace this item to transform the included content, as with the [`source-read`](event_callbacks.html#event-source-read) event.

Added in version 7.2.5.

See also

The [include](https://docutils.sourceforge.io/docs/ref/rst/directives.html#include) directive and the [`source-read`](event_callbacks.html#event-source-read) event.

object-description-transform(*app*, *domain*, *objtype*, *contentnode*)[¬∂](event_callbacks.html#event-object-description-transform "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **domain** ‚Äì `str`
- **objtype** ‚Äì `str`
- **contentnode** ‚Äì [`desc_content`](nodes.html#sphinx.addnodes.desc_content "sphinx.addnodes.desc_content")

Emitted when an object description directive has run. The *domain* and *objtype* arguments are strings indicating object description of the object. And *contentnode* is a content for the object. It can be modified in-place.

Added in version 2.4.

doctree-read(*app*, *doctree*)[¬∂](event_callbacks.html#event-doctree-read "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **doctree** ‚Äì `docutils.nodes.document`

Emitted when a doctree has been parsed and read by the environment, and is about to be pickled. The `doctree` can be modified in-place.

missing-reference(*app*, *env*, *node*, *contnode*)[¬∂](event_callbacks.html#event-missing-reference "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")
- **node** ‚Äì The [`pending_xref`](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref") node to be resolved. Its `reftype`, `reftarget`, `modname` and `classname` attributes determine the type and target of the reference.
- **contnode** ‚Äì The node that carries the text and formatting inside the future reference and should be a child of the returned reference node.

Returns:

A new node to be inserted in the document tree in place of the node, or `None` to let other handlers try.

Emitted when a cross-reference to an object cannot be resolved. If the event handler can resolve the reference, it should return a new docutils node to be inserted in the document tree in place of the node *node*. Usually this node is a `reference` node containing *contnode* as a child. If the handler can not resolve the cross-reference, it can either return `None` to let other handlers try, or raise `NoUri` to prevent other handlers in trying and suppress a warning about this cross-reference being unresolved.

Added in version 0.5.

warn-missing-reference(*app*, *domain*, *node*)[¬∂](event_callbacks.html#event-warn-missing-reference "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **domain** ‚Äì The [`Domain`](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain") of the missing reference.
- **node** ‚Äì The [`pending_xref`](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref") node that could not be resolved.

Returns:

`True` if a warning was emitted, else `None`

Emitted when a cross-reference to an object cannot be resolved even after [`missing-reference`](event_callbacks.html#event-missing-reference). If the event handler can emit warnings for the missing reference, it should return `True`. The configuration variables [`nitpick_ignore`](../usage/configuration.html#confval-nitpick_ignore) and [`nitpick_ignore_regex`](../usage/configuration.html#confval-nitpick_ignore_regex) prevent the event from being emitted for the corresponding nodes.

Added in version 3.4.

doctree-resolved(*app*, *doctree*, *docname*)[¬∂](event_callbacks.html#event-doctree-resolved "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **doctree** ‚Äì `docutils.nodes.document`
- **docname** ‚Äì `str`

Emitted when a doctree has been ‚Äúresolved‚Äù by the environment, that is, all references have been resolved and TOCs have been inserted. The *doctree* can be modified in place.

Here is the place to replace custom nodes that don‚Äôt have visitor methods in the writers, so that they don‚Äôt cause errors when the writers encounter them.

env-merge-info(*app*, *env*, *docnames*, *other*)[¬∂](event_callbacks.html#event-env-merge-info "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")
- **docnames** ‚Äì `list[str]`
- **other** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")

This event is only emitted when parallel reading of documents is enabled. It is emitted once for every subprocess that has read some documents.

You must handle this event in an extension that stores data in the environment in a custom location. Otherwise the environment in the main process will not be aware of the information stored in the subprocess.

*other* is the environment object from the subprocess, *env* is the environment from the main process. *docnames* is a set of document names that have been read in the subprocess.

Added in version 1.3.

env-updated(*app*, *env*)[¬∂](event_callbacks.html#event-env-updated "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")

Returns:

iterable of `str`

Emitted after reading all documents, when the environment and all doctrees are now up-to-date.

You can return an iterable of docnames from the handler. These documents will then be considered updated, and will be (re-)written during the writing phase.

Added in version 0.5.

Changed in version 1.3: The handlers‚Äô return value is now used.

env-get-updated(*app*, *env*)[¬∂](event_callbacks.html#event-env-get-updated "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")

Returns:

iterable of `str`

Emitted when the environment determines which source files have changed and should be re-read. You can return an iterable of docnames to re-read.

env-check-consistency(*app*, *env*)[¬∂](event_callbacks.html#event-env-check-consistency "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **env** ‚Äì [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")

Emitted when Consistency checks phase. You can check consistency of metadata for whole of documents.

Added in version 1.6.

write-started(*app*, *builder*)[¬∂](event_callbacks.html#event-write-started "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **builder** ‚Äì [`Builder`](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")

Emitted before the builder starts to resolve and write documents.

Added in version 7.4.

build-finished(*app*, *exception*)[¬∂](event_callbacks.html#event-build-finished "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **exception** ‚Äì `Exception` or `None`

Emitted when a build has finished, before Sphinx exits, usually used for cleanup. This event is emitted even when the build process raised an exception, given as the *exception* argument. The exception is reraised in the application after the event handlers have run. If the build process raised no exception, *exception* will be `None`. This allows to customize cleanup actions depending on the exception status.

Added in version 0.5.

## Builder specific events[¬∂](event_callbacks.html#builder-specific-events "Link to this heading")

These events are emitted by specific builders.

html-collect-pages(*app*)[¬∂](event_callbacks.html#event-html-collect-pages "Link to this definition")

Parameters:

**app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")

Returns:

iterable of `(pagename, context, templatename)` where *pagename* and *templatename* are strings and *context* is a `dict[str, Any]`.

Emitted when the HTML builder is starting to write non-document pages.

You can add pages to write by returning an iterable from this event.

Added in version 1.0.

html-page-context(*app*, *pagename*, *templatename*, *context*, *doctree*)[¬∂](event_callbacks.html#event-html-page-context "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **pagename** ‚Äì `str`
- **templatename** ‚Äì `str`
- **context** ‚Äì `dict[str, Any]`
- **doctree** ‚Äì `docutils.nodes.document` or `None`

Returns:

`str` or `None`

Emitted when the HTML builder has created a context dictionary to render a template with ‚Äì this can be used to add custom elements to the context.

The *pagename* argument is the canonical name of the page being rendered, that is, without `.html` suffix and using slashes as path separators. The *templatename* is the name of the template to render, this will be `'page.html'` for all pages from reStructuredText documents.

The *context* argument is a dictionary of values that are given to the template engine to render the page and can be modified to include custom values.

The *doctree* argument will be a doctree when the page is created from a reStructuredText documents; it will be `None` when the page is created from an HTML template alone.

You can return a string from the handler, it will then replace `'page.html'` as the HTML template for this page.

Tip

You can install JS/CSS files for the specific page via [`Sphinx.add_js_file()`](appapi.html#sphinx.application.Sphinx.add_js_file "sphinx.application.Sphinx.add_js_file") and [`Sphinx.add_css_file()`](appapi.html#sphinx.application.Sphinx.add_css_file "sphinx.application.Sphinx.add_css_file") (since v3.5.0).

Added in version 0.4.

Changed in version 1.3: The return value can now specify a template name.

linkcheck-process-uri(*app*, *uri*)[¬∂](event_callbacks.html#event-linkcheck-process-uri "Link to this definition")

Parameters:

- **app** ‚Äì [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")
- **uri** ‚Äì `str` of the collected URI

Returns:

`str` or `None`

Emitted when the linkcheck builder collects hyperlinks from document.

The event handlers can modify the URI by returning a string.

Added in version 4.1.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page



The Basics


User guide



Community


Reference


# i18n API[¬∂](i18n.html#i18n-api "Link to this heading")

sphinx.locale.init(*locale\_dirs: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [os.PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *language: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")*, *catalog: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'sphinx'*, *namespace: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'general'*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[NullTranslations, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")][\[source\]](../_modules/sphinx/locale.html#init)[¬∂](i18n.html#sphinx.locale.init "Link to this definition")

Look for message catalogs in locale\_dirs and *ensure* that there is at least a NullTranslations catalog set in translators. If called multiple times or if several `.mo` files are found, their contents are merged together (thus making `init` reentrant).

sphinx.locale.init\_console(*locale\_dir: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [os.PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*, *catalog: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'sphinx'*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[NullTranslations, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")][\[source\]](../_modules/sphinx/locale.html#init_console)[¬∂](i18n.html#sphinx.locale.init_console "Link to this definition")

Initialize locale for console.

Added in version 1.8.

sphinx.locale.get\_translation(*catalog: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *namespace: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = 'general'*) ‚Üí Callable\[\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/locale.html#get_translation)[¬∂](i18n.html#sphinx.locale.get_translation "Link to this definition")

Get a translation function based on the *catalog* and *namespace*.

The extension can use this API to translate the messages on the extension:

```
from pathlib import Path
from sphinx.locale import get_translation

MESSAGE_CATALOG_NAME = 'myextension'  # name of *.pot, *.po and *.mo files
_ = get_translation(MESSAGE_CATALOG_NAME)
text = _('Hello Sphinx!')


def setup(app):
    package_dir = Path(__file__).resolve().parent
    locale_dir = package_dir / 'locales'
    app.add_message_catalog(MESSAGE_CATALOG_NAME, locale_dir)
```

With this code, sphinx searches a message catalog from `${package_dir}/locales/${language}/LC_MESSAGES/myextension.mo`. The [`language`](../usage/configuration.html#confval-language) is used for the searching.

Added in version 1.8.

sphinx.locale.\_(*message: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[¬∂](i18n.html#sphinx.locale._ "Link to this definition")

Translation function for messages on documentation (menu, labels, themes and so on). This function follows [`language`](../usage/configuration.html#confval-language) setting.

sphinx.locale.\_\_(*message: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[¬∂](i18n.html#sphinx.locale.__ "Link to this definition")

Translation function for console messages This function follows locale setting (LC\_ALL, LC\_MESSAGES and so on).

## Extension internationalization (`i18n`) and localization (`l10n`) using i18n API[¬∂](i18n.html#extension-internationalization-i18n-and-localization-l10n-using-i18n-api "Link to this heading")

Added in version 1.8.

An extension may naturally come with message translations. This is briefly summarized in [`sphinx.locale.get_translation()`](i18n.html#sphinx.locale.get_translation "sphinx.locale.get_translation") help.

In practice, you have to:

1. Choose a name for your message catalog, which must be unique. Usually the name of your extension is used for the name of message catalog.
2. Mark in your extension sources all messages as translatable, via [`sphinx.locale.get_translation()`](i18n.html#sphinx.locale.get_translation "sphinx.locale.get_translation") function, usually renamed `_()`, e.g.:

   src/\_\_init\_\_.py[¬∂](i18n.html#id2 "Link to this code")

   ```
   from sphinx.locale import get_translation

   MESSAGE_CATALOG_NAME = 'myextension'
   _ = get_translation(MESSAGE_CATALOG_NAME)

   translated_text = _('Hello Sphinx!')
   ```
3. Set up your extension to be aware of its dedicated translations:

   src/\_\_init\_\_.py[¬∂](i18n.html#id3 "Link to this code")

   ```
   def setup(app):
       package_dir = Path(__file__).resolve().parent
       locale_dir = package_dir / 'locales'
       app.add_message_catalog(MESSAGE_CATALOG_NAME, locale_dir)
   ```
4. Generate message catalog template `*.pot` file, usually in `locale/` source directory, for example via [Babel](https://babel.pocoo.org/):

   ```
   $ pybabel extract --output=src/locale/myextension.pot src/
   ```
5. Create message catalogs (`*.po`) for each language which your extension will provide localization, for example via [Babel](https://babel.pocoo.org/):

   ```
   $ pybabel init --input-file=src/locale/myextension.pot --domain=myextension --output-dir=src/locale --locale=fr_FR
   ```
6. Translate message catalogs for each language manually
7. Compile message catalogs into `*.mo` files, for example via [Babel](https://babel.pocoo.org/):

   ```
   $ pybabel compile --directory=src/locale --domain=myextension
   ```
8. Ensure that message catalog files are distributed when your package will be installed, by adding equivalent line in your extension `MANIFEST.in`:

   MANIFEST.in[¬∂](i18n.html#id4 "Link to this code")

   ```
   recursive-include src *.pot *.po *.mo
   ```

When the messages on your extension has been changed, you need to also update message catalog template and message catalogs, for example via [Babel](https://babel.pocoo.org/):

```
$ pybabel extract --output=src/locale/myextension.pot src/
$ pybabel update --input-file=src/locale/myextension.pot --domain=myextension --output-dir=src/locale
```








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Logging API[¬∂](logging.html#logging-api "Link to this heading")

sphinx.util.logging.getLogger(*name*)[\[source\]](../_modules/sphinx/util/logging.html#getLogger)[¬∂](logging.html#sphinx.util.logging.getLogger "Link to this definition")

Get logger wrapped by [`sphinx.util.logging.SphinxLoggerAdapter`](logging.html#sphinx.util.logging.SphinxLoggerAdapter "sphinx.util.logging.SphinxLoggerAdapter").

Sphinx logger always uses `sphinx.*` namespace to be independent from settings of root logger. It ensures logging is consistent even if a third-party extension or imported application resets logger settings.

Example usage:

```
>>> from sphinx.util import logging
>>> logger = logging.getLogger(__name__)
>>> logger.info('Hello, this is an extension!')
Hello, this is an extension!
```

*class* sphinx.util.logging.SphinxLoggerAdapter(*logging.LoggerAdapter*)[\[source\]](../_modules/sphinx/util/logging.html#SphinxLoggerAdapter)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter "Link to this definition")

LoggerAdapter allowing `type` and `subtype` keywords.

error(*msg*, *\*args*, *\*\*kwargs*)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.error "Link to this definition")

critical(*msg*, *\*args*, *\*\*kwargs*)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.critical "Link to this definition")

warning(*msg*, *\*args*, *\*\*kwargs*)[\[source\]](../_modules/sphinx/util/logging.html#SphinxLoggerAdapter.warning)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.warning "Link to this definition")

Logs a message on this logger with the specified level. Basically, the arguments are as with python‚Äôs logging module.

In addition, Sphinx logger supports following keyword arguments:

**type**, **\*subtype\***

Categories of warning logs. It is used to suppress warnings by [`suppress_warnings`](../usage/configuration.html#confval-suppress_warnings) setting.

**location**

Where the warning happened. It is used to include the path and line number in each log. It allows docname, tuple of docname and line number and nodes:

```
logger = sphinx.util.logging.getLogger(__name__)
logger.warning('Warning happened!', location='index')
logger.warning('Warning happened!', location=('chapter1/index', 10))
logger.warning('Warning happened!', location=some_node)
```

**color**

The color of logs. By default, error level logs are colored as `"darkred"`, critical level ones is not colored, and warning level ones are colored as `"red"`.

log(*level*, *msg*, *\*args*, *\*\*kwargs*)[\[source\]](../_modules/sphinx/util/logging.html#SphinxLoggerAdapter.log)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.log "Link to this definition")

info(*msg*, *\*args*, *\*\*kwargs*)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.info "Link to this definition")

verbose(*msg*, *\*args*, *\*\*kwargs*)[\[source\]](../_modules/sphinx/util/logging.html#SphinxLoggerAdapter.verbose)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.verbose "Link to this definition")

debug(*msg*, *\*args*, *\*\*kwargs*)[¬∂](logging.html#sphinx.util.logging.SphinxLoggerAdapter.debug "Link to this definition")

Logs a message to this logger with the specified level. Basically, the arguments are as with python‚Äôs logging module.

In addition, Sphinx logger supports following keyword arguments:

**nonl**

If true, the logger does not fold lines at the end of the log message. The default is `False`.

**location**

Where the message emitted. For more detail, see [`SphinxLoggerAdapter.warning()`](logging.html#sphinx.util.logging.SphinxLoggerAdapter.warning "sphinx.util.logging.SphinxLoggerAdapter.warning").

**color**

The color of logs. By default, info and verbose level logs are not colored, and debug level ones are colored as `"darkgray"`.

sphinx.util.logging.pending\_logging()[\[source\]](../_modules/sphinx/util/logging.html#pending_logging)[¬∂](logging.html#sphinx.util.logging.pending_logging "Link to this definition")

Context manager to postpone logging all logs temporarily.

For example:

```
>>> with pending_logging():
>>>     logger.warning('Warning message!')  # not flushed yet
>>>     some_long_process()
>>>
Warning message!  # the warning is flushed here
```

sphinx.util.logging.pending\_warnings()[\[source\]](../_modules/sphinx/util/logging.html#pending_warnings)[¬∂](logging.html#sphinx.util.logging.pending_warnings "Link to this definition")

Context manager to postpone logging warnings temporarily.

Similar to [`pending_logging()`](logging.html#sphinx.util.logging.pending_logging "sphinx.util.logging.pending_logging").

sphinx.util.logging.prefixed\_warnings()[\[source\]](../_modules/sphinx/util/logging.html#prefixed_warnings)[¬∂](logging.html#sphinx.util.logging.prefixed_warnings "Link to this definition")

Context manager to prepend prefix to all warning log records temporarily.

For example:

```
>>> with prefixed_warnings("prefix:"):
>>>     logger.warning('Warning message!')  # => prefix: Warning message!
```

Added in version 2.0.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page






The Basics


User guide



Community


Reference


# Docutils markup API[¬∂](markupapi.html#docutils-markup-api "Link to this heading")

This section describes the API for adding reStructuredText markup elements (roles and directives).

## Roles[¬∂](markupapi.html#roles "Link to this heading")

Roles follow the interface described below. They have to be registered by an extension using [`Sphinx.add_role()`](appapi.html#sphinx.application.Sphinx.add_role "sphinx.application.Sphinx.add_role") or [`Sphinx.add_role_to_domain()`](appapi.html#sphinx.application.Sphinx.add_role_to_domain "sphinx.application.Sphinx.add_role_to_domain").

```
def role_function(
    role_name: str, raw_source: str, text: str,
    lineno: int, inliner: Inliner,
    options: dict = {}, content: list = [],
) -> tuple[list[Node], list[system_message]]:
    elements = []
    messages = []
    return elements, messages
```

The *options* and *content* parameters are only used for custom roles created via the [role](https://docutils.sourceforge.io/docs/ref/rst/directives.html#role) directive. The return value is a tuple of two lists, the first containing the text nodes and elements from the role, and the second containing any system messages generated. For more information, see the [custom role overview](https://docutils.sourceforge.io/docs/howto/rst-roles.html) from Docutils.

### Creating custom roles[¬∂](markupapi.html#creating-custom-roles "Link to this heading")

Sphinx provides two base classes for creating custom roles, [`SphinxRole`](utils.html#sphinx.util.docutils.SphinxRole "sphinx.util.docutils.SphinxRole") and [`ReferenceRole`](utils.html#sphinx.util.docutils.ReferenceRole "sphinx.util.docutils.ReferenceRole").

These provide a class-based interface for creating roles, where the main logic must be implemented in your `run()` method. The classes provide a number of useful methods and attributes, such as `self.text`, `self.config`, and `self.env`. The `ReferenceRole` class implements Sphinx‚Äôs `title <target>` logic, exposing `self.target` and `self.title` attributes. This is useful for creating cross-reference roles.

## Directives[¬∂](markupapi.html#directives "Link to this heading")

Directives are handled by classes derived from `docutils.parsers.rst.Directive`. They have to be registered by an extension using [`Sphinx.add_directive()`](appapi.html#sphinx.application.Sphinx.add_directive "sphinx.application.Sphinx.add_directive") or [`Sphinx.add_directive_to_domain()`](appapi.html#sphinx.application.Sphinx.add_directive_to_domain "sphinx.application.Sphinx.add_directive_to_domain").

*class* docutils.parsers.rst.Directive[\[source\]](../_modules/docutils/parsers/rst.html#Directive)[¬∂](markupapi.html#docutils.parsers.rst.Directive "Link to this definition")

The markup syntax of the new directive is determined by the follow five class attributes:

required\_arguments *= 0*[¬∂](markupapi.html#docutils.parsers.rst.Directive.required_arguments "Link to this definition")

Number of required directive arguments.

optional\_arguments *= 0*[¬∂](markupapi.html#docutils.parsers.rst.Directive.optional_arguments "Link to this definition")

Number of optional arguments after the required arguments.

final\_argument\_whitespace *= False*[¬∂](markupapi.html#docutils.parsers.rst.Directive.final_argument_whitespace "Link to this definition")

May the final argument contain whitespace?

option\_spec *= None*[¬∂](markupapi.html#docutils.parsers.rst.Directive.option_spec "Link to this definition")

Mapping of option names to validator functions.

Option validator functions take a single parameter, the option argument (or `None` if not given), and should validate it or convert it to the proper form. They raise [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "(in Python v3.13)") or [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "(in Python v3.13)") to indicate failure.

There are several predefined and possibly useful validators in the `docutils.parsers.rst.directives` module.

has\_content *= False*[¬∂](markupapi.html#docutils.parsers.rst.Directive.has_content "Link to this definition")

May the directive have content?

New directives must implement the [`run()`](markupapi.html#docutils.parsers.rst.Directive.run "docutils.parsers.rst.Directive.run") method:

run()[\[source\]](../_modules/docutils/parsers/rst.html#Directive.run)[¬∂](markupapi.html#docutils.parsers.rst.Directive.run "Link to this definition")

This method must process the directive arguments, options and content, and return a list of Docutils/Sphinx nodes that will be inserted into the document tree at the point where the directive was encountered.

Instance attributes that are always set on the directive are:

name[¬∂](markupapi.html#docutils.parsers.rst.Directive.name "Link to this definition")

The directive name (useful when registering the same directive class under multiple names).

arguments[¬∂](markupapi.html#docutils.parsers.rst.Directive.arguments "Link to this definition")

The arguments given to the directive, as a list.

options[¬∂](markupapi.html#docutils.parsers.rst.Directive.options "Link to this definition")

The options given to the directive, as a dictionary mapping option names to validated/converted values.

content[¬∂](markupapi.html#docutils.parsers.rst.Directive.content "Link to this definition")

The directive content, if given, as a `ViewList`.

lineno[¬∂](markupapi.html#docutils.parsers.rst.Directive.lineno "Link to this definition")

The absolute line number on which the directive appeared. This is not always a useful value; use `srcline` instead.

content\_offset[¬∂](markupapi.html#docutils.parsers.rst.Directive.content_offset "Link to this definition")

Internal offset of the directive content. Used when calling `nested_parse` (see below).

block\_text[¬∂](markupapi.html#docutils.parsers.rst.Directive.block_text "Link to this definition")

The string containing the entire directive.

state[¬∂](markupapi.html#docutils.parsers.rst.Directive.state "Link to this definition")

state\_machine[¬∂](markupapi.html#docutils.parsers.rst.Directive.state_machine "Link to this definition")

The state and state machine which controls the parsing. Used for `nested_parse`.

See also

[Creating directives](https://docutils.sourceforge.io/docs/howto/rst-directives.html) HOWTO of the Docutils documentation

### Parsing directive content as reStructuredText[¬∂](markupapi.html#parsing-directive-content-as-restructuredtext "Link to this heading")

Many directives will contain more markup that must be parsed. To do this, use one of the following APIs from the [`run()`](markupapi.html#docutils.parsers.rst.Directive.run "docutils.parsers.rst.Directive.run") method:


The first method parses all the directive‚Äôs content as markup, whilst the second only parses the given *text* string. Both methods return the parsed Docutils nodes in a list.

The methods are used as follows:

```
def run(self) -> list[Node]:
    # either
    parsed = self.parse_content_to_nodes()
    # or
    parsed = self.parse_text_to_nodes('spam spam spam')
    return parsed
```

Note

The above utility methods were added in Sphinx 7.4. Prior to Sphinx 7.4, the following methods should be used to parse content:

- `self.state.nested_parse`
- `sphinx.util.nodes.nested_parse_with_titles()` ‚Äì this allows titles in the parsed content.

```
def run(self) -> list[Node]:
    container = docutils.nodes.Element()
    # either
    nested_parse_with_titles(self.state, self.result, container)
    # or
    self.state.nested_parse(self.result, 0, container)
    parsed = container.children
    return parsed
```

To parse inline markup, use [`parse_inline()`](utils.html#sphinx.util.docutils.SphinxDirective.parse_inline "sphinx.util.docutils.SphinxDirective.parse_inline"). This must only be used for text which is a single line or paragraph, and does not contain any structural elements (headings, transitions, directives, etc).

Note

`sphinx.util.docutils.switch_source_input()` allows changing the source (input) file during parsing content in a directive. It is useful to parse mixed content, such as in `sphinx.ext.autodoc`, where it is used to parse docstrings.

```
from sphinx.util.docutils import switch_source_input
from sphinx.util.parsing import nested_parse_to_nodes

# Switch source_input between parsing content.
# Inside this context, all parsing errors and warnings are reported as
# happened in new source_input (in this case, ``self.result``).
with switch_source_input(self.state, self.result):
    parsed = nested_parse_to_nodes(self.state, self.result)
```

Deprecated since version 1.7: Until Sphinx 1.6, `sphinx.ext.autodoc.AutodocReporter` was used for this purpose. It is replaced by `switch_source_input()`.

### ViewLists and StringLists[¬∂](markupapi.html#viewlists-and-stringlists "Link to this heading")

Docutils represents document source lines in a `StringList` class, which inherits from `ViewList`, both in the `docutils.statemachine` module. This is a list with extended functionality, including that slicing creates views of the original list and that the list contains information about source line numbers.

The [`Directive.content`](markupapi.html#docutils.parsers.rst.Directive.content "docutils.parsers.rst.Directive.content") attribute is a `StringList`. If you generate content to be parsed as reStructuredText, you have to create a `StringList` for the Docutils APIs. The utility functions provided by Sphinx handle this automatically. Important for content generation are the following points:

- The `ViewList` constructor takes a list of strings (lines) and a source (document) name.
- The `ViewList.append()` method takes a line and a source name as well.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page











The Basics


User guide



Community


Reference


# Doctree node classes added by Sphinx[¬∂](nodes.html#module-sphinx.addnodes "Link to this heading")

## Nodes for domain-specific object descriptions[¬∂](nodes.html#nodes-for-domain-specific-object-descriptions "Link to this heading")

### Top-level nodes[¬∂](nodes.html#top-level-nodes "Link to this heading")

These nodes form the top-most levels of object descriptions.

*class* sphinx.addnodes.desc(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc)[¬∂](nodes.html#sphinx.addnodes.desc "Link to this definition")

Node for a list of object signatures and a common description of them.

Contains one or more [`desc_signature`](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature") nodes and then a single [`desc_content`](nodes.html#sphinx.addnodes.desc_content "sphinx.addnodes.desc_content") node.

This node always has two classes:

- The name of the domain it belongs to, e.g., `py` or `cpp`.
- The name of the object type in the domain, e.g., `function`.

*class* sphinx.addnodes.desc\_signature(*\*args: Any*, *\*\*kwargs: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_signature)[¬∂](nodes.html#sphinx.addnodes.desc_signature "Link to this definition")

Node for a single object signature.

As default the signature is a single-line signature. Set `is_multiline = True` to describe a multi-line signature. In that case all child nodes must be [`desc_signature_line`](nodes.html#sphinx.addnodes.desc_signature_line "sphinx.addnodes.desc_signature_line") nodes.

This node always has the classes `sig`, `sig-object`, and the domain it belongs to.

*class* sphinx.addnodes.desc\_signature\_line(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_signature_line)[¬∂](nodes.html#sphinx.addnodes.desc_signature_line "Link to this definition")

Node for a line in a multi-line object signature.

It should only be used as a child of a [`desc_signature`](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature") with `is_multiline` set to `True`. Set `add_permalink = True` for the line that should get the permalink.

*class* sphinx.addnodes.desc\_content(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_content)[¬∂](nodes.html#sphinx.addnodes.desc_content "Link to this definition")

Node for object description content.

Must be the last child node in a [`desc`](nodes.html#sphinx.addnodes.desc "sphinx.addnodes.desc") node.

*class* sphinx.addnodes.desc\_inline(*domain: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\*args: Any*, *\*\*kwargs: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_inline)[¬∂](nodes.html#sphinx.addnodes.desc_inline "Link to this definition")

Node for a signature fragment in inline text.

This is for example used for roles like [`cpp:expr`](../usage/domains/cpp.html#role-cpp-expr "cpp:expr role").

This node always has the classes `sig`, `sig-inline`, and the name of the domain it belongs to.

### Nodes for high-level structure in signatures[¬∂](nodes.html#nodes-for-high-level-structure-in-signatures "Link to this heading")

These nodes occur in in non-multiline [`desc_signature`](nodes.html#sphinx.addnodes.desc_signature "sphinx.addnodes.desc_signature") nodes and in [`desc_signature_line`](nodes.html#sphinx.addnodes.desc_signature_line "sphinx.addnodes.desc_signature_line") nodes.

*class* sphinx.addnodes.desc\_name(*\*args: Any*, *\*\*kwargs: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_name)[¬∂](nodes.html#sphinx.addnodes.desc_name "Link to this definition")

Node for the main object name.

For example, in the declaration of a Python class `MyModule.MyClass`, the main name is `MyClass`.

This node always has the class `sig-name`.

*class* sphinx.addnodes.desc\_addname(*\*args: Any*, *\*\*kwargs: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_addname)[¬∂](nodes.html#sphinx.addnodes.desc_addname "Link to this definition")

Node for additional name parts for an object.

For example, in the declaration of a Python class `MyModule.MyClass`, the additional name part is `MyModule.`.

This node always has the class `sig-prename`.

*class* sphinx.addnodes.desc\_type(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_type)[¬∂](nodes.html#sphinx.addnodes.desc_type "Link to this definition")

Node for return types or object type names.

*class* sphinx.addnodes.desc\_returns(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_returns)[¬∂](nodes.html#sphinx.addnodes.desc_returns "Link to this definition")

Node for a ‚Äúreturns‚Äù annotation (a la -&gt; in Python).

*class* sphinx.addnodes.desc\_parameterlist(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_parameterlist)[¬∂](nodes.html#sphinx.addnodes.desc_parameterlist "Link to this definition")

Node for a general parameter list.

As default the parameter list is written in line with the rest of the signature. Set `multi_line_parameter_list = True` to describe a multi-line parameter list. In that case each parameter will then be written on its own, indented line. A trailing comma will be added on the last line if `multi_line_trailing_comma` is True.

*class* sphinx.addnodes.desc\_parameter(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_parameter)[¬∂](nodes.html#sphinx.addnodes.desc_parameter "Link to this definition")

Node for a single parameter.

*class* sphinx.addnodes.desc\_optional(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_optional)[¬∂](nodes.html#sphinx.addnodes.desc_optional "Link to this definition")

Node for marking optional parts of the parameter list.

*class* sphinx.addnodes.desc\_annotation(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#desc_annotation)[¬∂](nodes.html#sphinx.addnodes.desc_annotation "Link to this definition")

Node for signature annotations (not Python 3-style annotations).

### Nodes for signature text elements[¬∂](nodes.html#nodes-for-signature-text-elements "Link to this heading")

These nodes inherit [`desc_sig_element`](nodes.html#sphinx.addnodes.desc_sig_element "sphinx.addnodes.desc_sig_element") and are generally translated to `docutils.nodes.inline` by `SigElementFallbackTransform`.

Extensions may create additional `desc_sig_*`-like nodes but in order for `SigElementFallbackTransform` to translate them to inline nodes automatically, they must be added to [`SIG_ELEMENTS`](nodes.html#sphinx.addnodes.SIG_ELEMENTS "sphinx.addnodes.SIG_ELEMENTS") via the class keyword argument `_sig_element=True` of [`desc_sig_element`](nodes.html#sphinx.addnodes.desc_sig_element "sphinx.addnodes.desc_sig_element"), e.g.:

> ```
> class desc_custom_sig_node(desc_sig_element, _sig_element=True): ...
> ```

For backwards compatibility, it is still possible to add the nodes directly using `SIG_ELEMENTS.add(desc_custom_sig_node)`.

sphinx.addnodes.SIG\_ELEMENTS*: [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[desc\_sig\_element](nodes.html#sphinx.addnodes.desc_sig_element "sphinx.addnodes.desc_sig_element")]]*[¬∂](nodes.html#sphinx.addnodes.SIG_ELEMENTS "Link to this definition")

A set of classes inheriting [`desc_sig_element`](nodes.html#sphinx.addnodes.desc_sig_element "sphinx.addnodes.desc_sig_element"). Each node class is expected to be handled by the builder‚Äôs translator class if the latter does not inherit from SphinxTranslator.

This set can be extended manually by third-party extensions or by subclassing [`desc_sig_element`](nodes.html#sphinx.addnodes.desc_sig_element "sphinx.addnodes.desc_sig_element") and using the class keyword argument \_sig\_element=True.

*class* sphinx.addnodes.desc\_sig\_element(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_element)[¬∂](nodes.html#sphinx.addnodes.desc_sig_element "Link to this definition")

Common parent class of nodes for inline text of a signature.

*class* sphinx.addnodes.desc\_sig\_space(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ' '*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_space)[¬∂](nodes.html#sphinx.addnodes.desc_sig_space "Link to this definition")

Node for a space in a signature.

*class* sphinx.addnodes.desc\_sig\_name(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_name)[¬∂](nodes.html#sphinx.addnodes.desc_sig_name "Link to this definition")

Node for an identifier in a signature.

*class* sphinx.addnodes.desc\_sig\_operator(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_operator)[¬∂](nodes.html#sphinx.addnodes.desc_sig_operator "Link to this definition")

Node for an operator in a signature.

*class* sphinx.addnodes.desc\_sig\_punctuation(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_punctuation)[¬∂](nodes.html#sphinx.addnodes.desc_sig_punctuation "Link to this definition")

Node for punctuation in a signature.

*class* sphinx.addnodes.desc\_sig\_keyword(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_keyword)[¬∂](nodes.html#sphinx.addnodes.desc_sig_keyword "Link to this definition")

Node for a general keyword in a signature.

*class* sphinx.addnodes.desc\_sig\_keyword\_type(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_keyword_type)[¬∂](nodes.html#sphinx.addnodes.desc_sig_keyword_type "Link to this definition")

Node for a keyword which is a built-in type in a signature.

*class* sphinx.addnodes.desc\_sig\_literal\_number(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_literal_number)[¬∂](nodes.html#sphinx.addnodes.desc_sig_literal_number "Link to this definition")

Node for a numeric literal in a signature.

*class* sphinx.addnodes.desc\_sig\_literal\_string(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_literal_string)[¬∂](nodes.html#sphinx.addnodes.desc_sig_literal_string "Link to this definition")

Node for a string literal in a signature.

*class* sphinx.addnodes.desc\_sig\_literal\_char(*rawsource: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, *\*children: Element*, *\*\*attributes: Any*)[\[source\]](../_modules/sphinx/addnodes.html#desc_sig_literal_char)[¬∂](nodes.html#sphinx.addnodes.desc_sig_literal_char "Link to this definition")

Node for a character literal in a signature.

## New admonition-like constructs[¬∂](nodes.html#new-admonition-like-constructs "Link to this heading")

*class* sphinx.addnodes.versionmodified(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#versionmodified)[¬∂](nodes.html#sphinx.addnodes.versionmodified "Link to this definition")

Node for version change entries.

Currently used for ‚Äúversionadded‚Äù, ‚Äúversionchanged‚Äù, ‚Äúdeprecated‚Äù and ‚Äúversionremoved‚Äù directives.

*class* sphinx.addnodes.seealso(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#seealso)[¬∂](nodes.html#sphinx.addnodes.seealso "Link to this definition")

Custom ‚Äúsee also‚Äù admonition.

## Other paragraph-level nodes[¬∂](nodes.html#other-paragraph-level-nodes "Link to this heading")

*class* sphinx.addnodes.compact\_paragraph(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#compact_paragraph)[¬∂](nodes.html#sphinx.addnodes.compact_paragraph "Link to this definition")

Node for a compact paragraph (which never makes a &lt;p&gt; node).

## New inline nodes[¬∂](nodes.html#new-inline-nodes "Link to this heading")

*class* sphinx.addnodes.index(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#index)[¬∂](nodes.html#sphinx.addnodes.index "Link to this definition")

Node for index entries.

This node is created by the `index` directive and has one attribute, `entries`. Its value is a list of 5-tuples of `(entrytype, entryname, target, ignored, key)`.

*entrytype* is one of ‚Äúsingle‚Äù, ‚Äúpair‚Äù, ‚Äúdouble‚Äù, ‚Äútriple‚Äù.

*key* is categorization characters (usually a single character) for general index page. For the details of this, please see also: [`glossary`](../usage/restructuredtext/directives.html#directive-glossary "glossary directive") and [https://github.com/sphinx-doc/sphinx/pull/2320](https://github.com/sphinx-doc/sphinx/pull/2320).

*class* sphinx.addnodes.pending\_xref(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#pending_xref)[¬∂](nodes.html#sphinx.addnodes.pending_xref "Link to this definition")

Node for cross-references that cannot be resolved without complete information about all documents.

These nodes are resolved before writing output, in BuildEnvironment.resolve\_references.

*class* sphinx.addnodes.pending\_xref\_condition(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#pending_xref_condition)[¬∂](nodes.html#sphinx.addnodes.pending_xref_condition "Link to this definition")

Node representing a potential way to create a cross-reference and the condition in which this way should be used.

This node is only allowed to be placed under a [`pending_xref`](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref") node. A **pending\_xref** node must contain either no **pending\_xref\_condition** nodes or it must only contains **pending\_xref\_condition** nodes.

The cross-reference resolver will replace a [`pending_xref`](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref") which contains **pending\_xref\_condition** nodes by the content of exactly one of those **pending\_xref\_condition** nodes‚Äô content. It uses the **condition** attribute to decide which **pending\_xref\_condition** node‚Äôs content to use. For example, let us consider how the cross-reference resolver acts on:

```
<pending_xref refdomain="py" reftarget="io.StringIO ...>
    <pending_xref_condition condition="resolved">
        <literal>
            StringIO
    <pending_xref_condition condition="*">
        <literal>
            io.StringIO
```

If the cross-reference resolver successfully resolves the cross-reference, then it rewrites the **pending\_xref** as:

```
<reference>
    <literal>
        StringIO
```

Otherwise, if the cross-reference resolution failed, it rewrites the **pending\_xref** as:

```
<reference>
    <literal>
        io.StringIO
```

The **pending\_xref\_condition** node should have **condition** attribute. Domains can be store their individual conditions into the attribute to filter contents on resolving phase. As a reserved condition name, `condition="*"` is used for the fallback of resolution failure. Additionally, as a recommended condition name, `condition="resolved"` represents a resolution success in the intersphinx module.

Added in version 4.0.

*class* sphinx.addnodes.literal\_emphasis(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#literal_emphasis)[¬∂](nodes.html#sphinx.addnodes.literal_emphasis "Link to this definition")

Node that behaves like emphasis, but further text processors are not applied (e.g. smartypants for HTML output).

*class* sphinx.addnodes.download\_reference(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#download_reference)[¬∂](nodes.html#sphinx.addnodes.download_reference "Link to this definition")

Node for download references, similar to pending\_xref.

## Special nodes[¬∂](nodes.html#special-nodes "Link to this heading")

*class* sphinx.addnodes.only(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#only)[¬∂](nodes.html#sphinx.addnodes.only "Link to this definition")

Node for ‚Äúonly‚Äù directives (conditional inclusion based on tags).

*class* sphinx.addnodes.highlightlang(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#highlightlang)[¬∂](nodes.html#sphinx.addnodes.highlightlang "Link to this definition")

Inserted to set the highlight language and line number options for subsequent code blocks.

You should not need to generate the nodes below in extensions.

*class* sphinx.addnodes.glossary(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#glossary)[¬∂](nodes.html#sphinx.addnodes.glossary "Link to this definition")

Node to insert a glossary.

*class* sphinx.addnodes.toctree(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#toctree)[¬∂](nodes.html#sphinx.addnodes.toctree "Link to this definition")

Node for inserting a ‚ÄúTOC tree‚Äù.

*class* sphinx.addnodes.start\_of\_file(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#start_of_file)[¬∂](nodes.html#sphinx.addnodes.start_of_file "Link to this definition")

Node to mark start of a new file, used in the LaTeX builder only.

*class* sphinx.addnodes.productionlist(*rawsource=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#productionlist)[¬∂](nodes.html#sphinx.addnodes.productionlist "Link to this definition")

Node for grammar production lists.

Contains `production` nodes.

*class* sphinx.addnodes.production(*rawsource=''*, *text=''*, *\*children*, *\*\*attributes*)[\[source\]](../_modules/sphinx/addnodes.html#production)[¬∂](nodes.html#sphinx.addnodes.production "Link to this definition")

Node for a single grammar production rule.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Parser API[¬∂](parserapi.html#parser-api "Link to this heading")

[The docutils documentation describes](https://docutils.sourceforge.io/docs/dev/hacking.html#parsing-the-document) parsers as follows:

> The Parser analyzes the input document and creates a node tree representation.

In Sphinx, the parser modules works as same as docutils. The parsers are registered to Sphinx by extensions using Application APIs; [`Sphinx.add_source_suffix()`](appapi.html#sphinx.application.Sphinx.add_source_suffix "sphinx.application.Sphinx.add_source_suffix") and [`Sphinx.add_source_parser()`](appapi.html#sphinx.application.Sphinx.add_source_parser "sphinx.application.Sphinx.add_source_parser").

The *source suffix* is a mapping from file suffix to file type. For example, `.rst` file is mapped to `'restructuredtext'` type. Sphinx uses the file type to looking for parsers from registered list. On searching, Sphinx refers to the `Parser.supported` attribute and picks up a parser which contains the file type in the attribute.

The users can override the source suffix mappings using [`source_suffix`](../usage/configuration.html#confval-source_suffix) like following:

```
# a mapping from file suffix to file types
source_suffix = {
    '.rst': 'restructuredtext',
    '.md': 'markdown',
}
```

You should indicate file types your parser supports. This will allow users to configure their settings appropriately.

*class* sphinx.parsers.Parser[\[source\]](../_modules/sphinx/parsers.html#Parser)[¬∂](parserapi.html#sphinx.parsers.Parser "Link to this definition")

A base class of source parsers.

The additional parsers should inherit this class instead of `docutils.parsers.Parser`. Compared with `docutils.parsers.Parser`, this class improves accessibility to Sphinx APIs.

The subclasses can access sphinx core runtime objects (app, config and env).

set\_application(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/parsers.html#Parser.set_application)[¬∂](parserapi.html#sphinx.parsers.Parser.set_application "Link to this definition")

set\_application will be called from Sphinx to set app and other instance variables

Parameters:

**app** ([*sphinx.application.Sphinx*](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")) ‚Äì Sphinx application object

config*: [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")*[¬∂](parserapi.html#sphinx.parsers.Parser.config "Link to this definition")

The config object

env*: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*[¬∂](parserapi.html#sphinx.parsers.Parser.env "Link to this definition")

The environment object








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page




The Basics


User guide



Community


Reference


# Project API[¬∂](projectapi.html#project-api "Link to this heading")

*class* sphinx.project.Project(*srcdir: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [os.PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *source\_suffix: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*)[\[source\]](../_modules/sphinx/project.html#Project)[¬∂](projectapi.html#sphinx.project.Project "Link to this definition")

A project is the source code set of the Sphinx document(s).

discover(*exclude\_paths: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = ()*, *include\_paths: Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")] = ('\*\*',)*) ‚Üí [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")][\[source\]](../_modules/sphinx/project.html#Project.discover)[¬∂](projectapi.html#sphinx.project.Project.discover "Link to this definition")

Find all document files in the source directory and put them in [`docnames`](projectapi.html#sphinx.project.Project.docnames "sphinx.project.Project.docnames").

doc2path(*docname: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *absolute: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*) ‚Üí \_StrPath[\[source\]](../_modules/sphinx/project.html#Project.doc2path)[¬∂](projectapi.html#sphinx.project.Project.doc2path "Link to this definition")

Return the filename for the document name.

If *absolute* is True, return as an absolute path. Else, return as a relative path to the source directory.

path2doc(*filename: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/project.html#Project.path2doc)[¬∂](projectapi.html#sphinx.project.Project.path2doc "Link to this definition")

Return the docname for the filename if the file is a document.

*filename* should be absolute or relative to the source directory.

restore(*other: [Project](projectapi.html#sphinx.project.Project "sphinx.project.Project")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/project.html#Project.restore)[¬∂](projectapi.html#sphinx.project.Project.restore "Link to this definition")

Take over a result of last build.

docnames*: [set](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*[¬∂](projectapi.html#sphinx.project.Project.docnames "Link to this definition")

The name of documents belonging to this project.

source\_suffix[¬∂](projectapi.html#sphinx.project.Project.source_suffix "Link to this definition")

source\_suffix. Same as [`source_suffix`](../usage/configuration.html#confval-source_suffix).

srcdir[¬∂](projectapi.html#sphinx.project.Project.srcdir "Link to this definition")

Source directory.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page



The Basics


User guide



Community


Reference


# Testing API[¬∂](testing.html#module-sphinx.testing "Link to this heading")

Added in version 1.6.

Utility functions and pytest fixtures for testing are provided in `sphinx.testing`. If you are a developer of Sphinx extensions, you can write unit tests with [pytest](https://docs.pytest.org/en/latest/).

## `pytest` configuration[¬∂](testing.html#pytest-configuration "Link to this heading")

To use pytest fixtures that are provided by `sphinx.testing`, add the `'sphinx.testing.fixtures'` plugin to your test modules or `conftest.py` files as follows:

```
pytest_plugins = ('sphinx.testing.fixtures',)
```

## Usage[¬∂](testing.html#usage "Link to this heading")

If you want to know more detailed usage, please refer to `tests/conftest.py` and other `test_*.py` files under the `tests/` directory.








### Navigation

- [Documentation](../index.html) ¬ª
- [Sphinx API](index.html) ¬ª

### On this page















The Basics


User guide



Community


Reference


# Utilities[¬∂](utils.html#utilities "Link to this heading")

Sphinx provides utility classes and functions to develop extensions.

## Base classes for components[¬∂](utils.html#base-classes-for-components "Link to this heading")

These base classes are useful to allow your extensions to obtain Sphinx components (e.g. [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config"), [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment") and so on) easily.

Note

The subclasses of them might not work with bare docutils because they are strongly coupled with Sphinx.

*class* sphinx.transforms.SphinxTransform(*document*, *startnode=None*)[\[source\]](../_modules/sphinx/transforms.html#SphinxTransform)[¬∂](utils.html#sphinx.transforms.SphinxTransform "Link to this definition")

A base class of Transforms.

Compared with `docutils.transforms.Transform`, this class improves accessibility to Sphinx APIs.

*property* app*: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*[¬∂](utils.html#sphinx.transforms.SphinxTransform.app "Link to this definition")

Reference to the [`Sphinx`](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx") object.

*property* config*: [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")*[¬∂](utils.html#sphinx.transforms.SphinxTransform.config "Link to this definition")

Reference to the [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config") object.

*property* env*: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*[¬∂](utils.html#sphinx.transforms.SphinxTransform.env "Link to this definition")

Reference to the [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment") object.

*class* sphinx.transforms.post\_transforms.SphinxPostTransform(*document*, *startnode=None*)[\[source\]](../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform)[¬∂](utils.html#sphinx.transforms.post_transforms.SphinxPostTransform "Link to this definition")

A base class of post-transforms.

Post transforms are invoked to modify the document to restructure it for outputting. They resolve references, convert images, do special transformation for each output formats and so on. This class helps to implement these post transforms.

apply(*\*\*kwargs: Any*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.apply)[¬∂](utils.html#sphinx.transforms.post_transforms.SphinxPostTransform.apply "Link to this definition")

Override to apply the transform to the document tree.

is\_supported() ‚Üí [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")[\[source\]](../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.is_supported)[¬∂](utils.html#sphinx.transforms.post_transforms.SphinxPostTransform.is_supported "Link to this definition")

Check this transform working for current builder.

run(*\*\*kwargs: Any*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.run)[¬∂](utils.html#sphinx.transforms.post_transforms.SphinxPostTransform.run "Link to this definition")

Main method of post transforms.

Subclasses should override this method instead of `apply()`.

*class* sphinx.util.docutils.SphinxDirective(*name*, *arguments*, *options*, *content*, *lineno*, *content\_offset*, *block\_text*, *state*, *state\_machine*)[\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective "Link to this definition")

A base class for Sphinx directives.

This class provides helper methods for Sphinx directives.

Added in version 1.8.

Note

The subclasses of this class might not work with docutils. This class is strongly coupled with Sphinx.

get\_location() ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.get_location)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.get_location "Link to this definition")

Get current location info for logging.

Added in version 4.2.

get\_source\_info() ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")][\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.get_source_info)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.get_source_info "Link to this definition")

Get source and line number.

Added in version 3.0.

parse\_content\_to\_nodes(*allow\_section\_headings: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Node][\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.parse_content_to_nodes)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.parse_content_to_nodes "Link to this definition")

Parse the directive‚Äôs content into nodes.

Parameters:

**allow\_section\_headings** ‚Äì Are titles (sections) allowed in the directive‚Äôs content? Note that this option bypasses Docutils‚Äô usual checks on doctree structure, and misuse of this option can lead to an incoherent doctree. In Docutils, section nodes should only be children of `Structural` nodes, which includes `document`, `section`, and `sidebar` nodes.

Added in version 7.4.

parse\_inline(*text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\**, *lineno: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = -1*) ‚Üí [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Node], [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[system\_message]][\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.parse_inline)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.parse_inline "Link to this definition")

Parse *text* as inline elements.

Parameters:

- **text** ‚Äì The text to parse, which should be a single line or paragraph. This cannot contain any structural elements (headings, transitions, directives, etc).
- **lineno** ‚Äì The line number where the interpreted text begins.

Returns:

A list of nodes (text and inline elements) and a list of system\_messages.

Added in version 7.4.

parse\_text\_to\_nodes(*text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = ''*, */*, *\**, *offset: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = -1*, *allow\_section\_headings: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Node][\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.parse_text_to_nodes)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.parse_text_to_nodes "Link to this definition")

Parse *text* into nodes.

Parameters:

- **text** ‚Äì Text, in string form. `StringList` is also accepted.
- **allow\_section\_headings** ‚Äì Are titles (sections) allowed in *text*? Note that this option bypasses Docutils‚Äô usual checks on doctree structure, and misuse of this option can lead to an incoherent doctree. In Docutils, section nodes should only be children of `Structural` nodes, which includes `document`, `section`, and `sidebar` nodes.
- **offset** ‚Äì The offset of the content.

Added in version 7.4.

set\_source\_info(*node: Node*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/util/docutils.html#SphinxDirective.set_source_info)[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.set_source_info "Link to this definition")

Set source and line number to the node.

Added in version 2.1.

*property* config*: [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")*[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.config "Link to this definition")

Reference to the [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config") object.

Added in version 1.8.

*property* env*: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*[¬∂](utils.html#sphinx.util.docutils.SphinxDirective.env "Link to this definition")

Reference to the [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment") object.

Added in version 1.8.

*class* sphinx.util.docutils.SphinxRole[\[source\]](../_modules/sphinx/util/docutils.html#SphinxRole)[¬∂](utils.html#sphinx.util.docutils.SphinxRole "Link to this definition")

A base class for Sphinx roles.

This class provides helper methods for Sphinx roles.

Added in version 2.0.

Note

The subclasses of this class might not work with docutils. This class is strongly coupled with Sphinx.

get\_location() ‚Üí [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")[\[source\]](../_modules/sphinx/util/docutils.html#SphinxRole.get_location)[¬∂](utils.html#sphinx.util.docutils.SphinxRole.get_location "Link to this definition")

Get current location info for logging.

Added in version 4.2.

*property* config*: [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.config "Link to this definition")

Reference to the [`Config`](appapi.html#sphinx.config.Config "sphinx.config.Config") object.

Added in version 2.0.

content*: Sequence\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.content "Link to this definition")

A list of strings, the directive content for customisation (from the ‚Äúrole‚Äù directive).

*property* env*: [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.env "Link to this definition")

Reference to the [`BuildEnvironment`](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment") object.

Added in version 2.0.

inliner*: Inliner*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.inliner "Link to this definition")

The `docutils.parsers.rst.states.Inliner` object.

lineno*: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.lineno "Link to this definition")

The line number where the interpreted text begins.

name*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.name "Link to this definition")

The role name actually used in the document.

options*: [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any]*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.options "Link to this definition")

A dictionary of directive options for customisation (from the ‚Äúrole‚Äù directive).

rawtext*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.rawtext "Link to this definition")

A string containing the entire interpreted text input.

text*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.SphinxRole.text "Link to this definition")

The interpreted text content.

*class* sphinx.util.docutils.ReferenceRole[\[source\]](../_modules/sphinx/util/docutils.html#ReferenceRole)[¬∂](utils.html#sphinx.util.docutils.ReferenceRole "Link to this definition")

A base class for reference roles.

The reference roles can accept `link title <target>` style as a text for the role. The parsed result; link title and target will be stored to `self.title` and `self.target`.

Added in version 2.0.

disabled*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.ReferenceRole.disabled "Link to this definition")

A boolean indicates the reference is disabled.

has\_explicit\_title*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.ReferenceRole.has_explicit_title "Link to this definition")

A boolean indicates the role has explicit title or not.

target*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.ReferenceRole.target "Link to this definition")

The link target for the interpreted text.

title*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.docutils.ReferenceRole.title "Link to this definition")

The link title for the interpreted text.

*class* sphinx.transforms.post\_transforms.images.ImageConverter(*document*, *startnode=None*)[\[source\]](../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter)[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter "Link to this definition")

A base class for image converters.

An image converter is kind of Docutils transform module. It is used to convert image files which are not supported by a builder to the appropriate format for that builder.

For example, [`LaTeX builder`](../usage/builders/index.html#sphinx.builders.latex.LaTeXBuilder "sphinx.builders.latex.LaTeXBuilder") supports PDF, PNG and JPEG as image formats. However it does not support SVG images. For such case, using image converters allows to embed these unsupported images into the document. One of the image converters; [sphinx.ext.imgconverter](../usage/extensions/imgconverter.html#sphinx-ext-imgconverter) can convert a SVG image to PNG format using Imagemagick internally.

There are three steps to make your custom image converter:

1. Make a subclass of `ImageConverter` class
2. Override `conversion_rules`, `is_available()` and `convert()`
3. Register your image converter to Sphinx using [`Sphinx.add_post_transform()`](appapi.html#sphinx.application.Sphinx.add_post_transform "sphinx.application.Sphinx.add_post_transform")

convert(*\_from: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *\_to: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*) ‚Üí [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")[\[source\]](../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter.convert)[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter.convert "Link to this definition")

Convert an image file to the expected format.

*\_from* is a path of the source image file, and *\_to* is a path of the destination file.

is\_available() ‚Üí [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")[\[source\]](../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter.is_available)[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter.is_available "Link to this definition")

Return the image converter is available or not.

available*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)") = None*[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter.available "Link to this definition")

The converter is available or not. Will be filled at the first call of the build. The result is shared in the same process.

conversion\_rules*: [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]] = \[]*[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter.conversion_rules "Link to this definition")

A conversion rules the image converter supports. It is represented as a list of pair of source image format (mimetype) and destination one:

```
conversion_rules = [
    ('image/svg+xml', 'image/png'),
    ('image/gif', 'image/png'),
    ('application/pdf', 'image/png'),
]
```

default\_priority *= 200*[¬∂](utils.html#sphinx.transforms.post_transforms.images.ImageConverter.default_priority "Link to this definition")

Numerical priority of this transform, 0 through 999 (override).

## Utility components[¬∂](utils.html#utility-components "Link to this heading")

*class* sphinx.events.EventManager(*app: [Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")*)[\[source\]](../_modules/sphinx/events.html#EventManager)[¬∂](utils.html#sphinx.events.EventManager "Link to this definition")

Event manager for Sphinx.

add(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/events.html#EventManager.add)[¬∂](utils.html#sphinx.events.EventManager.add "Link to this definition")

Register a custom Sphinx event.

connect(*name: Literal\['config-inited']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Config](appapi.html#sphinx.config.Config "sphinx.config.Config")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")[\[source\]](../_modules/sphinx/events.html#EventManager.connect)[¬∂](utils.html#sphinx.events.EventManager.connect "Link to this definition")

connect(*name: Literal\['builder-inited']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-get-outdated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], Sequence\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-before-read-docs']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-purge-doc']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['source-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['include-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Path, [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['doctree-read']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), nodes.document], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-merge-info']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), Set\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-updated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-get-updated']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], Iterable\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['env-check-consistency']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['write-started']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Builder](builderapi.html#sphinx.builders.Builder "sphinx.builders.Builder")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['doctree-resolved']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), nodes.document, [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['missing-reference']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [BuildEnvironment](envapi.html#sphinx.environment.BuildEnvironment "sphinx.environment.BuildEnvironment"), [addnodes.pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref"), nodes.TextElement], nodes.reference | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['warn-missing-reference']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Domain](domainapi.html#sphinx.domains.Domain "sphinx.domains.Domain"), [addnodes.pending\_xref](nodes.html#sphinx.addnodes.pending_xref "sphinx.addnodes.pending_xref")], [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['build-finished']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['html-collect-pages']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx")], Iterable\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['html-page-context']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any], nodes.document], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['linkcheck-process-uri']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['object-description-transform']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [addnodes.desc\_content](nodes.html#sphinx.addnodes.desc_content "sphinx.addnodes.desc_content")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['autodoc-process-docstring']*, *callback: \_AutodocProcessDocstringListener*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['autodoc-before-process-signature']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Any, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['autodoc-process-signature']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Literal\['module', 'class', 'exception', 'function', 'method', 'attribute'], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")], [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")] | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['autodoc-process-bases']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")], [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")]], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['autodoc-skip-member']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), Literal\['module', 'class', 'exception', 'function', 'method', 'attribute'], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), Any, [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")]], [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['todo-defined']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), todo\_node], [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['viewcode-find-source']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.13)")\[[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[Literal\['class', 'def', 'other'], [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)"), [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")]]]]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: Literal\['viewcode-follow-imported']*, *callback: Callable\[\[[Sphinx](appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)"), [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")], [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

connect(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *callback: Callable\[..., Any]*, *priority: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")

Connect a handler to specific event.

disconnect(*listener\_id: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*) ‚Üí [None](https://docs.python.org/3/library/constants.html#None "(in Python v3.13)")[\[source\]](../_modules/sphinx/events.html#EventManager.disconnect)[¬∂](utils.html#sphinx.events.EventManager.disconnect "Link to this definition")

Disconnect a handler.

emit(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\*args: Any*, *allowed\_exceptions: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)")], ...] = ()*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Any][\[source\]](../_modules/sphinx/events.html#EventManager.emit)[¬∂](utils.html#sphinx.events.EventManager.emit "Link to this definition")

Emit a Sphinx event.

emit\_firstresult(*name: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*, *\*args: Any*, *allowed\_exceptions: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.13)")\[[type](https://docs.python.org/3/library/functions.html#type "(in Python v3.13)")\[[Exception](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.13)")], ...] = ()*) ‚Üí Any[\[source\]](../_modules/sphinx/events.html#EventManager.emit_firstresult)[¬∂](utils.html#sphinx.events.EventManager.emit_firstresult "Link to this definition")

Emit a Sphinx event and returns first result.

This returns the result of the first handler that doesn‚Äôt return `None`.

## Utility functions[¬∂](utils.html#utility-functions "Link to this heading")

sphinx.util.parsing.nested\_parse\_to\_nodes(*state: RSTState*, *text: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") | StringList*, *\**, *source: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)") = '&lt;generated text&gt;'*, *offset: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)") = 0*, *allow\_section\_headings: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = True*, *keep\_title\_context: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)") = False*) ‚Üí [list](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.13)")\[Node][\[source\]](../_modules/sphinx/util/parsing.html#nested_parse_to_nodes)[¬∂](utils.html#sphinx.util.parsing.nested_parse_to_nodes "Link to this definition")

Parse *text* into nodes.

Parameters:

- **state** ‚Äì The state machine state. Must be a subclass of `RSTState`.
- **text** ‚Äì Text, in string form. `StringList` is also accepted.
- **source** ‚Äì The text‚Äôs source, used when creating a new `StringList`.
- **offset** ‚Äì The offset of the content.
- **allow\_section\_headings** ‚Äì Are titles (sections) allowed in *text*? Note that this option bypasses Docutils‚Äô usual checks on doctree structure, and misuse of this option can lead to an incoherent doctree. In Docutils, section nodes should only be children of `Structural` nodes, which includes `document`, `section`, and `sidebar` nodes.
- **keep\_title\_context** ‚Äì If this is False (the default), then *content* is parsed as if it were an independent document, meaning that title decorations (e.g. underlines) do not need to match the surrounding document. This is useful when the parsed content comes from a completely different context, such as docstrings. If this is True, then title underlines must match those in the surrounding document, otherwise the behaviour is undefined.

Added in version 7.4.

## Utility types[¬∂](utils.html#utility-types "Link to this heading")

*class* sphinx.util.typing.ExtensionMetadata[\[source\]](../_modules/sphinx/util/typing.html#ExtensionMetadata)[¬∂](utils.html#sphinx.util.typing.ExtensionMetadata "Link to this definition")

The metadata returned by an extension‚Äôs `setup()` function.

See [Extension metadata](index.html#ext-metadata).

env\_version*: [int](https://docs.python.org/3/library/functions.html#int "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.typing.ExtensionMetadata.env_version "Link to this definition")

An integer that identifies the version of env data added by the extension.

parallel\_read\_safe*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.typing.ExtensionMetadata.parallel_read_safe "Link to this definition")

Indicate whether parallel reading of source files is supported by the extension.

parallel\_write\_safe*: [bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.typing.ExtensionMetadata.parallel_write_safe "Link to this definition")

Indicate whether parallel writing of output files is supported by the extension (default: `True`).

version*: [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.13)")*[¬∂](utils.html#sphinx.util.typing.ExtensionMetadata.version "Link to this definition")

The extension version (default: `'unknown version'`).








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª

### On this page






The Basics


User guide




Community


Reference


# HTML theme development[¬∂](index.html#html-theme-development "Link to this heading")

Added in version 0.6.

Note

This document provides information about creating your own theme. If you simply wish to use a pre-existing HTML themes, refer to [HTML theming](../../usage/theming.html).

Sphinx supports changing the appearance of its HTML output via *themes*. A theme is a collection of HTML templates, stylesheet(s) and other static files. Additionally, it has a configuration file which specifies from which theme to inherit, which highlighting style to use, and what options exist for customizing the theme‚Äôs look and feel.

Themes are meant to be project-unaware, so they can be used for different projects without change.

Note

See [Sphinx API](../../extdev/index.html#dev-extensions) for more information that may be helpful in developing themes.

## Creating themes[¬∂](index.html#creating-themes "Link to this heading")

Themes take the form of either a directory or a zipfile (whose name is the theme name), containing the following:

- Either a `theme.toml` file (preferred) or a `theme.conf` file.
- HTML templates, if needed.
- A `static/` directory containing any static files that will be copied to the output static directory on build. These can be images, styles, script files.

### Theme configuration (`theme.toml`)[¬∂](index.html#theme-configuration-theme-toml "Link to this heading")

The `theme.toml` file is a [TOML](https://toml.io/en/) document, containing two tables: `[theme]` and `[options]`.

The `[theme]` table defines the theme‚Äôs settings:

- **inherit** (string): The name of the base theme from which to inherit settings, options, templates, and static files. All static files from theme ‚Äòancestors‚Äô will be used. The theme will use all options defined in inherited themes. Finally, inherited themes will be used to locate missing templates (for example, if `"basic"` is used as the base theme, most templates will already be defined).

  If set to `"none"`, the theme will not inherit from any other theme. Inheritance is recursive, forming a chain of inherited themes (e.g. `default` -&gt; `classic` -&gt; `basic` -&gt; `none`).
- **stylesheets** (list of strings): A list of CSS filenames which will be included in generated HTML header. Setting the [`html_style`](../../usage/configuration.html#confval-html_style) config value will override this setting.

  Other mechanisms for including multiple stylesheets include `@import` in CSS or using a custom HTML template with appropriate `<link rel="stylesheet">` tags.
- **sidebars** (list of strings): A list of sidebar templates. This can be overridden by the user via the [`html_sidebars`](../../usage/configuration.html#confval-html_sidebars) config value.
- **pygments\_style** (table): A TOML table defining the names of Pygments styles to use for highlighting syntax. The table has two recognised keys: `default` and `dark`. The style defined in the `dark` key will be used when the CSS media query `(prefers-color-scheme: dark)` evaluates to true.

  `[theme.pygments_style.default]` can be overridden by the user via the [`pygments_style`](../../usage/configuration.html#confval-pygments_style) config value.

The `[options]` table defines the options for the theme. It is structured such that each key-value pair corresponds to a variable name and the corresponding default value. These options can be overridden by the user in [`html_theme_options`](../../usage/configuration.html#confval-html_theme_options) and are accessible from all templates as `theme_<name>`.

Added in version 7.3: `theme.toml` support.

Exemplar `theme.toml` file:

```
[theme]
inherit = "basic"
stylesheets = [
    "main-CSS-stylesheet.css",
]
sidebars = [
    "localtoc.html",
    "relations.html",
    "sourcelink.html",
    "searchbox.html",
]
# Style names from https://pygments.org/styles/
pygments_style = { default = "style_name", dark = "dark_style" }

[options]
variable = "default value"
```

### Theme configuration (`theme.conf`)[¬∂](index.html#theme-configuration-theme-conf "Link to this heading")

The `theme.conf` file is in INI format [\[1\]](index.html#id2) (readable by the standard Python [`configparser`](https://docs.python.org/3/library/configparser.html#module-configparser "(in Python v3.13)") module) and has the following structure:

```
[theme]
inherit = base theme
stylesheet = main CSS name
pygments_style = stylename
sidebars = localtoc.html, relations.html, sourcelink.html, searchbox.html

[options]
variable = default value
```

- The **inherit** setting gives the name of a ‚Äúbase theme‚Äù, or `none`. The base theme will be used to locate missing templates (most themes will not have to supply most templates if they use `basic` as the base theme), its options will be inherited, and all of its static files will be used as well. If you want to also inherit the stylesheet, include it via CSS‚Äô `@import` in your own.
- The **stylesheet** setting gives a list of CSS filenames separated commas which will be referenced in the HTML header. You can also use CSS‚Äô `@import` technique to include one from the other, or use a custom HTML template that adds `<link rel="stylesheet">` tags as necessary. Setting the [`html_style`](../../usage/configuration.html#confval-html_style) config value will override this setting.
- The **pygments\_style** setting gives the name of a Pygments style to use for highlighting. This can be overridden by the user in the [`pygments_style`](../../usage/configuration.html#confval-pygments_style) config value.
- The **pygments\_dark\_style** setting gives the name of a Pygments style to use for highlighting when the CSS media query `(prefers-color-scheme: dark)` evaluates to true. It is injected into the page using [`add_css_file()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_css_file "sphinx.application.Sphinx.add_css_file").
- The **sidebars** setting gives the comma separated list of sidebar templates for constructing sidebars. This can be overridden by the user in the [`html_sidebars`](../../usage/configuration.html#confval-html_sidebars) config value.
- The **options** section contains pairs of variable names and default values. These options can be overridden by the user in [`html_theme_options`](../../usage/configuration.html#confval-html_theme_options) and are accessible from all templates as `theme_<name>`.

Added in version 1.7: sidebar settings

Changed in version 5.1: The stylesheet setting accepts multiple CSS filenames

### Convert `theme.conf` to `theme.toml`[¬∂](index.html#convert-theme-conf-to-theme-toml "Link to this heading")

INI-style theme configuration files (`theme.conf`) can be converted to TOML via a helper programme distributed with Sphinx. This is intended for one-time use, and may be removed without notice in a future version of Sphinx.

```
$ python -m sphinx.theming conf_to_toml [THEME DIRECTORY PATH]
```

The required argument is a path to a directory containing a `theme.conf` file. The programme will write a `theme.toml` file in the same directory, and will not modify the original `theme.conf` file.

Added in version 7.3.

## Distribute your theme as a Python package[¬∂](index.html#distribute-your-theme-as-a-python-package "Link to this heading")

As a way to distribute your theme, you can use a Python package. This makes it easier for users to set up your theme.

To distribute your theme as a Python package, please define an entry point called `sphinx.html_themes` in your `pyproject.toml` file, and write a `setup()` function to register your theme using the [`add_html_theme()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_html_theme "sphinx.application.Sphinx.add_html_theme") API:

```
# pyproject.toml

[project.entry-points."sphinx.html_themes"]
name_of_theme = "your_theme_package"
```

```
# your_theme_package.py
from pathlib import Path

def setup(app):
    app.add_html_theme('name_of_theme', Path(__file__).resolve().parent)
```

If your theme package contains two or more themes, please call `add_html_theme()` twice or more.

Added in version 1.2: ‚Äòsphinx\_themes‚Äô entry\_points feature.

Deprecated since version 1.6: `sphinx_themes` entry\_points has been deprecated.

Added in version 1.6: `sphinx.html_themes` entry\_points feature.

## Styling with CSS[¬∂](index.html#styling-with-css "Link to this heading")

The `stylesheets` setting can be used to add custom CSS files to a theme.

Caution

The structure of the HTML elements and their classes are currently not a well-defined public API. Please infer them from inspecting the built HTML pages. While we cannot guarantee full stability, they tend to be fairly stable.

### Styling search result entries by category[¬∂](index.html#styling-search-result-entries-by-category "Link to this heading")

Added in version 8.0.

Note

The CSS classes named below are generated by Sphinx‚Äôs standalone search code. If you are using a third-party search provider, such as [ReadTheDocs](https://docs.readthedocs.io/), to provide search results, then the theming options available may vary.

The search result items have classes indicating the context in which the search term was found. You can use the CSS selectors:

- `ul.search li.kind-index`: For results in an index, such as the glossary
- `ul.search li.kind-object`: For results in source code, like Python function definitions
- `ul.search li.kind-title`: For results found in section headings
- `ul.search li.kind-text`: For results found anywhere else in the documentation text

As a base for inheritance by other themes, the `basic` theme is intentionally minimal and does not define CSS rules using these. Derived themes are encouraged to use these selectors as they see fit. For example, the following stylesheet adds contextual icons to the search result list:

```
ul.search {
    padding-left: 30px;
}
ul.search li {
    padding: 5px 0 5px 10px;
    list-style-type: "\25A1";  /* Unicode: White Square */
}
ul.search li.kind-index {
    list-style-type: "\1F4D1";  /* Unicode: Bookmark Tabs */
}
ul.search li.kind-object {
    list-style-type: "\1F4E6";  /* Unicode: Package */
}
ul.search li.kind-title {
    list-style-type: "\1F4C4";  /* Unicode: Page Facing Up */
}
ul.search li.kind-text {
    list-style-type: "\1F4C4";  /* Unicode: Page Facing Up */
}
```

## Templating[¬∂](index.html#templating "Link to this heading")

The [guide to templating](templating.html) is helpful if you want to write your own templates. What is important to keep in mind is the order in which Sphinx searches for templates:

- First, in the user‚Äôs `templates_path` directories.
- Then, in the selected theme.
- Then, in its base theme, its base‚Äôs base theme, etc.

When extending a template in the base theme with the same name, use the theme name as an explicit directory: `{% extends "basic/layout.html" %}`. From a user `templates_path` template, you can still use the ‚Äúexclamation mark‚Äù syntax as [described in the templating document](templating.html#templating-primer).

### Static templates[¬∂](index.html#static-templates "Link to this heading")

Since theme options are meant for the user to configure a theme more easily, without having to write a custom stylesheet, it is necessary to be able to template static files as well as HTML files. Therefore, Sphinx supports so-called ‚Äústatic templates‚Äù, like this:

If the name of a file in the `static/` directory of a theme (or in the user‚Äôs static path) ends with `.jinja` or `_t`, it will be processed by the template engine. The suffix will be removed from the final file name.

For example, a theme with a `static/theme_styles.css.jinja` file could use templating to put options into the stylesheet. When a documentation project is built with that theme, the output directory will contain a `_static/theme_styles.css` file where all template tags have been processed.

Changed in version 7.4:

> The preferred suffix for static templates is now `.jinja`, in line with the Jinja project‚Äôs [recommended file extension](https://jinja.palletsprojects.com/en/latest/templates/#template-file-extension).
>
> The `_t` file suffix for static templates is now considered ‚Äòlegacy‚Äô, and support may eventually be removed.
>
> If a static template with either a `_t` suffix or a `.jinja` suffix is detected, it will be processed by the template engine, with the suffix removed from the final file name.

### Use custom page metadata in HTML templates[¬∂](index.html#use-custom-page-metadata-in-html-templates "Link to this heading")

Any key / value pairs in [field lists](../../usage/restructuredtext/field-lists.html) that are placed *before* the page‚Äôs title will be available to the Jinja template when building the page within the [`meta`](templating.html#meta "meta") attribute. For example, if a page had the following text before its first title:

```
:mykey: My value

My first title
--------------
```

Then it could be accessed within a Jinja template like so:

```
{%- if meta is mapping %}
    {{ meta.get("mykey") }}
{%- endif %}
```

Note the check that `meta` is a dictionary (‚Äúmapping‚Äù in Jinja terminology) to ensure that using it in this way is valid.

### Defining custom template functions[¬∂](index.html#defining-custom-template-functions "Link to this heading")

Sometimes it is useful to define your own function in Python that you wish to then use in a template. For example, if you‚Äôd like to insert a template value with logic that depends on the user‚Äôs configuration in the project, or if you‚Äôd like to include non-trivial checks and provide friendly error messages for incorrect configuration in the template.

To define your own template function, you‚Äôll need to define two functions inside your module:

- A **page context event handler** (or **registration**) function. This is connected to the [`Sphinx`](../../extdev/appapi.html#sphinx.application.Sphinx "sphinx.application.Sphinx") application via an event callback.
- A **template function** that you will use in your Jinja template.

First, define the registration function, which accepts the arguments for [`html-page-context`](../../extdev/event_callbacks.html#event-html-page-context).

Within the registration function, define the template function that you‚Äôd like to use within Jinja. The template function should return a string or Python objects (lists, dictionaries) with strings inside that Jinja uses in the templating process

Note

The template function will have access to all of the variables that are passed to the registration function.

At the end of the registration function, add the template function to the Sphinx application‚Äôs context with `context['template_func'] = template_func`.

Finally, in your extension‚Äôs `setup()` function, add your registration function as a callback for [`html-page-context`](../../extdev/event_callbacks.html#event-html-page-context).

```
# The registration function
 def setup_my_func(app, pagename, templatename, context, doctree):
     # The template function
     def my_func(mystring):
         return "Your string is %s" % mystring
     # Add it to the page's context
     context['my_func'] = my_func

 # Your extension's setup function
 def setup(app):
     app.connect("html-page-context", setup_my_func)
```

Now, you will have access to this function in jinja like so:

```
<div>
{{ my_func("some string") }}
</div>
```

### Add your own static files to the build assets[¬∂](index.html#add-your-own-static-files-to-the-build-assets "Link to this heading")

By default, Sphinx copies static files on the `static/` directory of the template directory. However, if your package needs to place static files outside of the `static/` directory for some reasons, you need to copy them to the `_static/` directory of HTML outputs manually at the build via an event hook. Here is an example of code to accomplish this:

```
import shutil

def copy_custom_files(app, exc):
    if app.builder.format == 'html' and not exc:
        static_dir = app.outdir / '_static'
        shutil.copyfile('path/to/myextension/_static/myjsfile.js', static_dir)

def setup(app):
    app.connect('build-finished', copy_custom_files)
```

### Inject JavaScript based on user configuration[¬∂](index.html#inject-javascript-based-on-user-configuration "Link to this heading")

If your extension makes use of JavaScript, it can be useful to allow users to control its behavior using their Sphinx configuration. However, this can be difficult to do if your JavaScript comes in the form of a static library (which will not be built with Jinja).

There are two ways to inject variables into the JavaScript space based on user configuration.

First, you may append `_t` to the end of any static files included with your extension. This will cause Sphinx to process these files with the templating engine, allowing you to embed variables and control behavior.

For example, the following JavaScript structure:

```
mymodule/
‚îú‚îÄ‚îÄ _static
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ myjsfile.js_t
‚îî‚îÄ‚îÄ mymodule.py
```

Will result in the following static file placed in your HTML‚Äôs build output:

```
_build/
‚îî‚îÄ‚îÄ html
    ‚îî‚îÄ‚îÄ _static
 ¬†¬†     ‚îî‚îÄ‚îÄ myjsfile.js
```

See [Static templates](index.html#theming-static-templates) for more information.

Second, you may use the [`Sphinx.add_js_file()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_js_file "sphinx.application.Sphinx.add_js_file") method without pointing it to a file. Normally, this method is used to insert a new JavaScript file into your site. However, if you do *not* pass a file path, but instead pass a string to the ‚Äúbody‚Äù argument, then this text will be inserted as JavaScript into your site‚Äôs head. This allows you to insert variables into your project‚Äôs JavaScript from Python.

For example, the following code will read in a user-configured value and then insert this value as a JavaScript variable, which your extension‚Äôs JavaScript code may use:

```
# This function reads in a variable and inserts it into JavaScript
def add_js_variable(app):
    # This is a configuration that you've specified for users in `conf.py`
    js_variable = app.config['my_javascript_variable']
    js_text = "var my_variable = '%s';" % js_variable
    app.add_js_file(None, body=js_text)
# We connect this function to the step after the builder is initialized
def setup(app):
    # Tell Sphinx about this configuration variable
    app.add_config_value('my_javascript_variable', 0, 'html')
    # Run the function after the builder is initialized
    app.connect('builder-inited', add_js_variable)
```

As a result, in your theme you can use code that depends on the presence of this variable. Users can control the variable‚Äôs value by defining it in their `conf.py` file.

\[[1](index.html#id1)]

It is not an executable Python file, as opposed to `conf.py`, because that would pose an unnecessary security risk if themes are shared.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª
- [HTML theme development](index.html) ¬ª

### On this page







The Basics


User guide




Community


Reference


# Templating[¬∂](templating.html#templating "Link to this heading")

## What Is Templating?[¬∂](templating.html#what-is-templating "Link to this heading")

Templating is a method of generating HTML pages by combining static templates with variable data. The template files contain the static parts of the desired HTML output and include special syntax describing how variable content will be inserted. For example, this can be used to insert the current date in the footer of each page, or to surround the main content of the document with a scaffold of HTML for layout and formatting purposes. Doing so only requires an understanding of HTML and the templating syntax. Knowledge of Python can be helpful, but is not required.

Templating uses an inheritance mechanism which allows child templates files (e.g. in a theme) to override as much (or as little) of their ‚Äòparents‚Äô as desired. Likewise, content authors can use their own local templates to override as much (or as little) of the theme templates as desired.

The result is that the Sphinx core, without needing to be changed, provides basic HTML generation, independent of the structure and appearance of the final output, while granting a great deal of flexibility to theme and content authors.

## Sphinx Templating[¬∂](templating.html#sphinx-templating "Link to this heading")

Sphinx uses the [Jinja](https://jinja.palletsprojects.com/) templating engine for its HTML templates. Jinja is a text-based engine, inspired by Django templates, so anyone having used Django will already be familiar with it. It also has excellent documentation for those who need to make themselves familiar with it.

## Do I need to use Sphinx‚Äôs templates to produce HTML?[¬∂](templating.html#do-i-need-to-use-sphinx-s-templates-to-produce-html "Link to this heading")

No. You have several other options:

- You can write a [`TemplateBridge`](../../extdev/appapi.html#sphinx.application.TemplateBridge "sphinx.application.TemplateBridge") subclass that calls your template engine of choice, and set the [`template_bridge`](../../usage/configuration.html#confval-template_bridge) configuration value accordingly.
- You can [write a custom builder](../../extdev/builderapi.html#writing-builders) that derives from [`StandaloneHTMLBuilder`](../../usage/builders/index.html#sphinx.builders.html.StandaloneHTMLBuilder "sphinx.builders.html.StandaloneHTMLBuilder") and calls your template engine of choice.
- You can use the [`PickleHTMLBuilder`](../../usage/builders/index.html#sphinxcontrib.serializinghtml.PickleHTMLBuilder "sphinxcontrib.serializinghtml.PickleHTMLBuilder") that produces pickle files with the page contents, and postprocess them using a custom tool, or use them in your Web application.

## Jinja/Sphinx Templating Primer[¬∂](templating.html#jinja-sphinx-templating-primer "Link to this heading")

The default templating language in Sphinx is Jinja. It‚Äôs Django/Smarty inspired and easy to understand. The most important concept in Jinja is *template inheritance*, which means that you can overwrite only specific blocks within a template, customizing it while also keeping the changes at a minimum.

To customize the output of your documentation you can override all the templates (both the layout templates and the child templates) by adding files with the same name as the original filename into the template directory of the structure the Sphinx quickstart generated for you.

Sphinx will look for templates in the folders of [`templates_path`](../../usage/configuration.html#confval-templates_path) first, and if it can‚Äôt find the template it‚Äôs looking for there, it falls back to the selected theme‚Äôs templates.

A template contains **variables**, which are replaced with values when the template is evaluated, **tags**, which control the logic of the template and **blocks** which are used for template inheritance.

Sphinx‚Äôs *basic* theme provides base templates with a couple of blocks it will fill with data. These are located in the `themes/basic` subdirectory of the Sphinx installation directory, and used by all builtin Sphinx themes. Templates with the same name in the [`templates_path`](../../usage/configuration.html#confval-templates_path) override templates supplied by the selected theme.

For example, to add a new link to the template area containing related links all you have to do is to add a new template called `layout.html` with the following contents:

```
{% extends "!layout.html" %}
{% block rootrellink %}
    <li><a href="https://project.invalid/">Project Homepage</a> &raquo;</li>
    {{ super() }}
{% endblock %}
```

By prefixing the name of the overridden template with an exclamation mark, Sphinx will load the layout template from the underlying HTML theme.

Important

If you override a block, call `{{ super() }}` somewhere to render the block‚Äôs original content in the extended template ‚Äì unless you don‚Äôt want that content to show up.

## Working with the builtin templates[¬∂](templating.html#working-with-the-builtin-templates "Link to this heading")

The builtin **basic** theme supplies the templates that all builtin Sphinx themes are based on. It has the following elements you can override or use:

### Blocks[¬∂](templating.html#blocks "Link to this heading")

The following blocks exist in the `layout.html` template:

`doctype`

The doctype of the output format. By default this is XHTML 1.0 Transitional as this is the closest to what Sphinx and Docutils generate and it‚Äôs a good idea not to change it unless you want to switch to HTML 5 or a different but compatible XHTML doctype.

`linktags`

This block adds a couple of `<link>` tags to the head section of the template.

`extrahead`

This block is empty by default and can be used to add extra contents into the `<head>` tag of the generated HTML file. This is the right place to add references to JavaScript or extra CSS files.

`relbar1`, `relbar2`

This block contains the *relation bar*, the list of related links (the parent documents on the left, and the links to index, modules etc. on the right). `relbar1` appears before the document, `relbar2` after the document. By default, both blocks are filled; to show the relbar only before the document, you would override `relbar2` like this:

```
{% block relbar2 %}{% endblock %}
```

`rootrellink`, `relbaritems`

Inside the relbar there are three sections: The `rootrellink`, the links from the documentation and the custom `relbaritems`. The `rootrellink` is a block that by default contains a list item pointing to the root document by default, the `relbaritems` is an empty block. If you override them to add extra links into the bar make sure that they are list items and end with the [`reldelim1`](templating.html#reldelim1 "reldelim1").

`document`

The contents of the document itself. It contains the block ‚Äúbody‚Äù where the individual content is put by subtemplates like `page.html`.

Note

In order for the built-in JavaScript search to show a page preview on the results page, the document or body content should be wrapped in an HTML element containing the `role="main"` attribute. For example:

```
<div role="main">
  {% block document %}{% endblock %}
</div>
```

`sidebar1`, `sidebar2`

A possible location for a sidebar. `sidebar1` appears before the document and is empty by default, `sidebar2` after the document and contains the default sidebar. If you want to swap the sidebar location override this and call the `sidebar` helper:

```
{% block sidebar1 %}{{ sidebar() }}{% endblock %}
{% block sidebar2 %}{% endblock %}
```

(The `sidebar2` location for the sidebar is needed by the `sphinxdoc.css` stylesheet, for example.)

`sidebarlogo`

The logo location within the sidebar. Override this if you want to place some content at the top of the sidebar.

`footer`

The block for the footer div. If you want a custom footer or markup before or after it, override this one.

The following four blocks are *only* used for pages that do not have assigned a list of custom sidebars in the [`html_sidebars`](../../usage/configuration.html#confval-html_sidebars) config value. Their use is deprecated in favor of separate sidebar templates, which can be included via [`html_sidebars`](../../usage/configuration.html#confval-html_sidebars).

`sidebartoc`

The table of contents within the sidebar.

Deprecated since version 1.0.

`sidebarrel`

The relation links (previous, next document) within the sidebar.

Deprecated since version 1.0.

`sidebarsourcelink`

The ‚ÄúShow source‚Äù link within the sidebar (normally only shown if this is enabled by [`html_show_sourcelink`](../../usage/configuration.html#confval-html_show_sourcelink)).

Deprecated since version 1.0.

`sidebarsearch`

The search box within the sidebar. Override this if you want to place some content at the bottom of the sidebar.

Deprecated since version 1.0.

### Configuration Variables[¬∂](templating.html#configuration-variables "Link to this heading")

Inside templates you can set a couple of variables used by the layout template using the `{% set %}` tag:

reldelim1[¬∂](templating.html#reldelim1 "Link to this definition")

The delimiter for the items on the left side of the related bar. This defaults to `' &raquo;'` Each item in the related bar ends with the value of this variable.

reldelim2[¬∂](templating.html#reldelim2 "Link to this definition")

The delimiter for the items on the right side of the related bar. This defaults to `' |'`. Each item except of the last one in the related bar ends with the value of this variable.

Overriding works like this:

```
{% extends "!layout.html" %}
{% set reldelim1 = ' &gt;' %}
```

script\_files[¬∂](templating.html#script_files "Link to this definition")

Add additional script files here, like this:

```
{% set script_files = script_files + ["_static/myscript.js"] %}
```

Deprecated since version 1.8.0: Please use `.Sphinx.add_js_file()` instead.

### Helper Functions[¬∂](templating.html#helper-functions "Link to this heading")

Sphinx provides various Jinja functions as helpers in the template. You can use them to generate links or output multiply used elements.

pathto(*document*)[¬∂](templating.html#pathto "Link to this definition")

Return the path to a Sphinx document as a URL. Use this to refer to built documents.

pathto(*file*, *1*)

Return the path to a *file* which is a filename relative to the root of the generated output. Use this to refer to static files.

hasdoc(*document*)[¬∂](templating.html#hasdoc "Link to this definition")

Check if a document with the name *document* exists.

sidebar()[¬∂](templating.html#sidebar "Link to this definition")

Return the rendered sidebar.

relbar()[¬∂](templating.html#relbar "Link to this definition")

Return the rendered relation bar.

warning(*message*)[¬∂](templating.html#warning "Link to this definition")

Emit a warning message.

### Global Variables[¬∂](templating.html#global-variables "Link to this heading")

These global variables are available in every template and are safe to use. There are more, but most of them are an implementation detail and might change in the future.

builder[¬∂](templating.html#builder "Link to this definition")

The name of the builder (e.g. `html` or `htmlhelp`).

copyright[¬∂](templating.html#copyright "Link to this definition")

The value of [`copyright`](../../usage/configuration.html#confval-copyright).

docstitle[¬∂](templating.html#docstitle "Link to this definition")

The title of the documentation (the value of [`html_title`](../../usage/configuration.html#confval-html_title)), except when the ‚Äúsingle-file‚Äù builder is used, when it is set to `None`.

embedded[¬∂](templating.html#embedded "Link to this definition")

True if the built HTML is meant to be embedded in some viewing application that handles navigation, not the web browser, such as for HTML help or Qt help formats. In this case, the sidebar is not included.

favicon\_url[¬∂](templating.html#favicon_url "Link to this definition")

The relative path to the HTML favicon image from the current document, or URL to the favicon, or `''`.

Added in version 4.0.

file\_suffix[¬∂](templating.html#file_suffix "Link to this definition")

The value of the builder‚Äôs [`out_suffix`](../../usage/builders/index.html#sphinxcontrib.serializinghtml.SerializingHTMLBuilder.out_suffix "sphinxcontrib.serializinghtml.SerializingHTMLBuilder.out_suffix") attribute, i.e. the file name extension that the output files will get. For a standard HTML builder, this is usually `.html`.

has\_source[¬∂](templating.html#has_source "Link to this definition")

True if the reStructuredText document sources are copied (if [`html_copy_source`](../../usage/configuration.html#confval-html_copy_source) is `True`).

language[¬∂](templating.html#language "Link to this definition")

The value of [`language`](../../usage/configuration.html#confval-language).

last\_updated[¬∂](templating.html#last_updated "Link to this definition")

The build date.

logo\_url[¬∂](templating.html#logo_url "Link to this definition")

The relative path to the HTML logo image from the current document, or URL to the logo, or `''`.

Added in version 4.0.

master\_doc[¬∂](templating.html#master_doc "Link to this definition")

root\_doc[¬∂](templating.html#root_doc "Link to this definition")

The value of [`master_doc`](../../usage/configuration.html#confval-master_doc) or [`root_doc`](../../usage/configuration.html#confval-root_doc) (aliases), for usage with [`pathto()`](templating.html#pathto "pathto").

Added in version 4.0: The `root_doc` template variable.

pagename[¬∂](templating.html#pagename "Link to this definition")

The ‚Äúpage name‚Äù of the current file, i.e. either the document name if the file is generated from a reStructuredText source, or the equivalent hierarchical name relative to the output directory (`[directory/]filename_without_extension`).

project[¬∂](templating.html#project "Link to this definition")

The value of [`project`](../../usage/configuration.html#confval-project).

release[¬∂](templating.html#release "Link to this definition")

The value of [`release`](../../usage/configuration.html#confval-release).

rellinks[¬∂](templating.html#rellinks "Link to this definition")

A list of links to put at the left side of the relbar, next to ‚Äúnext‚Äù and ‚Äúprev‚Äù. This usually contains links to the general index and other indices, such as the Python module index. If you add something yourself, it must be a tuple `(pagename, link title, accesskey, link text)`.

shorttitle[¬∂](templating.html#shorttitle "Link to this definition")

The value of [`html_short_title`](../../usage/configuration.html#confval-html_short_title).

show\_source[¬∂](templating.html#show_source "Link to this definition")

True if [`html_show_sourcelink`](../../usage/configuration.html#confval-html_show_sourcelink) is `True`.

sphinx\_version[¬∂](templating.html#sphinx_version "Link to this definition")

The version of Sphinx used to build represented as a string for example ‚Äú3.5.1‚Äù.

sphinx\_version\_tuple[¬∂](templating.html#sphinx_version_tuple "Link to this definition")

The version of Sphinx used to build represented as a tuple of five elements. For Sphinx version 3.5.1 beta 3 this would be `(3, 5, 1, 'beta', 3)`. The fourth element can be one of: `alpha`, `beta`, `rc`, `final`. `final` always has 0 as the last element.

Added in version 4.2.

docutils\_version\_info[¬∂](templating.html#docutils_version_info "Link to this definition")

The version of Docutils used to build represented as a tuple of five elements. For Docutils version 0.16.1 beta 2 this would be `(0, 16, 1, 'beta', 2)`. The fourth element can be one of: `alpha`, `beta`, `candidate`, `final`. `final` always has 0 as the last element.

Added in version 5.0.2.

styles[¬∂](templating.html#styles "Link to this definition")

A list of the names of the main stylesheets as given by the theme or [`html_style`](../../usage/configuration.html#confval-html_style).

Added in version 5.1.

title[¬∂](templating.html#title "Link to this definition")

The title of the current document, as used in the `<title>` tag.

use\_opensearch[¬∂](templating.html#use_opensearch "Link to this definition")

The value of [`html_use_opensearch`](../../usage/configuration.html#confval-html_use_opensearch).

version[¬∂](templating.html#version "Link to this definition")

The value of [`version`](../../usage/configuration.html#confval-version).

In addition to these values, there are also all **theme options** available (prefixed by `theme_`), as well as the values given by the user in [`html_context`](../../usage/configuration.html#confval-html_context).

In documents that are created from source files (as opposed to automatically-generated files like the module index, or documents that already are in HTML form), these variables are also available:

body[¬∂](templating.html#body "Link to this definition")

A string containing the content of the page in HTML form as produced by the HTML builder, before the theme is applied.

display\_toc[¬∂](templating.html#display_toc "Link to this definition")

A boolean that is True if the toc contains more than one entry.

meta[¬∂](templating.html#meta "Link to this definition")

Document metadata (a dictionary), see [File-wide metadata](../../usage/restructuredtext/field-lists.html#metadata).

metatags[¬∂](templating.html#metatags "Link to this definition")

A string containing the page‚Äôs HTML [meta](https://docutils.sourceforge.io/docs/ref/rst/directives.html#meta) tags.

next[¬∂](templating.html#next "Link to this definition")

The next document for the navigation. This variable is either false or has two attributes `link` and `title`. The title contains HTML markup. For example, to generate a link to the next page, you can use this snippet:

```
{% if next %}
<a href="{{ next.link|e }}">{{ next.title }}</a>
{% endif %}
```

page\_source\_suffix[¬∂](templating.html#page_source_suffix "Link to this definition")

The suffix of the file that was rendered. Since we support a list of [`source_suffix`](../../usage/configuration.html#confval-source_suffix), this will allow you to properly link to the original source file.

parents[¬∂](templating.html#parents "Link to this definition")

A list of parent documents for navigation, structured like the [`next`](templating.html#next "next") item.

prev[¬∂](templating.html#prev "Link to this definition")

Like [`next`](templating.html#next "next"), but for the previous page.

sourcename[¬∂](templating.html#sourcename "Link to this definition")

The name of the copied source file for the current document. This is only nonempty if the [`html_copy_source`](../../usage/configuration.html#confval-html_copy_source) value is `True`. This has empty value on creating automatically-generated files.

toc[¬∂](templating.html#toc "Link to this definition")

The local table of contents for the current page, rendered as HTML bullet lists.

toctree[¬∂](templating.html#toctree "Link to this definition")

A callable yielding the global TOC tree containing the current page, rendered as HTML bullet lists. Optional keyword arguments:

`collapse`

If true, all TOC entries that are not ancestors of the current page are collapsed. `True` by default.

`maxdepth`

The maximum depth of the tree. Set it to `-1` to allow unlimited depth. Defaults to the max depth selected in the toctree directive.

`titles_only`

If true, put only top-level document titles in the tree. `False` by default.

`includehidden`

If true, the ToC tree will also contain hidden entries. `False` by default.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª

The Basics


User guide




Community


Reference


# Tutorials[¬∂](index.html#tutorials "Link to this heading")













### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª
- [Tutorials](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference


# Adding a reference domain[¬∂](adding_domain.html#adding-a-reference-domain "Link to this heading")

The objective of this tutorial is to illustrate roles, directives and domains. Once complete, we will be able to use this extension to describe a recipe and reference that recipe from elsewhere in our documentation.

Note

This tutorial is based on a guide first published on [opensource.com](https://opensource.com/article/18/11/building-custom-workflows-sphinx) and is provided here with the original author‚Äôs permission.

## Overview[¬∂](adding_domain.html#overview "Link to this heading")

We want the extension to add the following to Sphinx:

- A `recipe` [directive](../../glossary.html#term-directive), containing some content describing the recipe steps, along with a `:contains:` option highlighting the main ingredients of the recipe.
- A `ref` [role](../../glossary.html#term-role), which provides a cross-reference to the recipe itself.
- A `recipe` [domain](../../glossary.html#term-domain), which allows us to tie together the above role and domain, along with things like indices.

For that, we will need to add the following elements to Sphinx:

- A new directive called `recipe`
- New indexes to allow us to reference ingredient and recipes
- A new domain called `recipe`, which will contain the `recipe` directive and `ref` role

## Prerequisites[¬∂](adding_domain.html#prerequisites "Link to this heading")

We need the same setup as in [the previous extensions](extending_build.html#tutorial-extend-build). This time, we will be putting out extension in a file called `recipe.py`.

Here is an example of the folder structure you might obtain:

```
‚îî‚îÄ‚îÄ source
 ¬†¬† ‚îú‚îÄ‚îÄ _ext
    ‚îÇ ¬† ‚îî‚îÄ‚îÄ recipe.py
 ¬†¬† ‚îú‚îÄ‚îÄ conf.py
 ¬†¬† ‚îî‚îÄ‚îÄ index.rst
```

## Writing the extension[¬∂](adding_domain.html#writing-the-extension "Link to this heading")

Open `recipe.py` and paste the following code in it, all of which we will explain in detail shortly:

```
  1from collections import defaultdict
  2
  3from docutils.parsers.rst import directives
  4
  5from sphinx import addnodes
  6from sphinx.application import Sphinx
  7from sphinx.directives import ObjectDescription
  8from sphinx.domains import Domain, Index
  9from sphinx.roles import XRefRole
 10from sphinx.util.nodes import make_refnode
 11from sphinx.util.typing import ExtensionMetadata
 12
 13
 14class RecipeDirective(ObjectDescription):
 15    """A custom directive that describes a recipe."""
 16
 17    has_content = True
 18    required_arguments = 1
 19    option_spec = {
 20        'contains': directives.unchanged_required,
 21    }
 22
 23    def handle_signature(self, sig, signode):
 24        signode += addnodes.desc_name(text=sig)
 25        return sig
 26
 27    def add_target_and_index(self, name_cls, sig, signode):
 28        signode['ids'].append('recipe' + '-' + sig)
 29        if 'contains' in self.options:
 30            ingredients = [x.strip() for x in self.options.get('contains').split(',')]
 31
 32            recipes = self.env.get_domain('recipe')
 33            recipes.add_recipe(sig, ingredients)
 34
 35
 36class IngredientIndex(Index):
 37    """A custom index that creates an ingredient matrix."""
 38
 39    name = 'ingredient'
 40    localname = 'Ingredient Index'
 41    shortname = 'Ingredient'
 42
 43    def generate(self, docnames=None):
 44        content = defaultdict(list)
 45
 46        recipes = {
 47            name: (dispname, typ, docname, anchor)
 48            for name, dispname, typ, docname, anchor, _ in self.domain.get_objects()
 49        }
 50        recipe_ingredients = self.domain.data['recipe_ingredients']
 51        ingredient_recipes = defaultdict(list)
 52
 53        # flip from recipe_ingredients to ingredient_recipes
 54        for recipe_name, ingredients in recipe_ingredients.items():
 55            for ingredient in ingredients:
 56                ingredient_recipes[ingredient].append(recipe_name)
 57
 58        # convert the mapping of ingredient to recipes to produce the expected
 59        # output, shown below, using the ingredient name as a key to group
 60        #
 61        # name, subtype, docname, anchor, extra, qualifier, description
 62        for ingredient, recipe_names in ingredient_recipes.items():
 63            for recipe_name in recipe_names:
 64                dispname, typ, docname, anchor = recipes[recipe_name]
 65                content[ingredient].append((
 66                    dispname,
 67                    0,
 68                    docname,
 69                    anchor,
 70                    docname,
 71                    '',
 72                    typ,
 73                ))
 74
 75        # convert the dict to the sorted list of tuples expected
 76        content = sorted(content.items())
 77
 78        return content, True
 79
 80
 81class RecipeIndex(Index):
 82    """A custom index that creates an recipe matrix."""
 83
 84    name = 'recipe'
 85    localname = 'Recipe Index'
 86    shortname = 'Recipe'
 87
 88    def generate(self, docnames=None):
 89        content = defaultdict(list)
 90
 91        # sort the list of recipes in alphabetical order
 92        recipes = self.domain.get_objects()
 93        recipes = sorted(recipes, key=lambda recipe: recipe[0])
 94
 95        # generate the expected output, shown below, from the above using the
 96        # first letter of the recipe as a key to group thing
 97        #
 98        # name, subtype, docname, anchor, extra, qualifier, description
 99        for _name, dispname, typ, docname, anchor, _priority in recipes:
100            content[dispname[0].lower()].append((
101                dispname,
102                0,
103                docname,
104                anchor,
105                docname,
106                '',
107                typ,
108            ))
109
110        # convert the dict to the sorted list of tuples expected
111        content = sorted(content.items())
112
113        return content, True
114
115
116class RecipeDomain(Domain):
117    name = 'recipe'
118    label = 'Recipe Sample'
119    roles = {
120        'ref': XRefRole(),
121    }
122    directives = {
123        'recipe': RecipeDirective,
124    }
125    indices = {
126        RecipeIndex,
127        IngredientIndex,
128    }
129    initial_data = {
130        'recipes': [],  # object list
131        'recipe_ingredients': {},  # name -> object
132    }
133    data_version = 0
134
135    def get_full_qualified_name(self, node):
136        return f'recipe.{node.arguments[0]}'
137
138    def get_objects(self):
139        yield from self.data['recipes']
140
141    def resolve_xref(self, env, fromdocname, builder, typ, target, node, contnode):
142        match = [
143            (docname, anchor)
144            for name, sig, typ, docname, anchor, prio in self.get_objects()
145            if sig == target
146        ]
147
148        if len(match) > 0:
149            todocname = match[0][0]
150            targ = match[0][1]
151
152            return make_refnode(builder, fromdocname, todocname, targ, contnode, targ)
153        else:
154            print('Awww, found nothing')
155            return None
156
157    def add_recipe(self, signature, ingredients):
158        """Add a new recipe to the domain."""
159        name = f'recipe.{signature}'
160        anchor = f'recipe-{signature}'
161
162        self.data['recipe_ingredients'][name] = ingredients
163        # name, dispname, type, docname, anchor, priority
164        self.data['recipes'].append((
165            name,
166            signature,
167            'Recipe',
168            self.env.docname,
169            anchor,
170            0,
171        ))
172
173
174def setup(app: Sphinx) -> ExtensionMetadata:
175    app.add_domain(RecipeDomain)
176
177    return {
178        'version': '0.1',
179        'parallel_read_safe': True,
180        'parallel_write_safe': True,
181    }
```

Let‚Äôs look at each piece of this extension step-by-step to explain what‚Äôs going on.

The directive class

The first thing to examine is the `RecipeDirective` directive:

```
 1class RecipeDirective(ObjectDescription):
 2    """A custom directive that describes a recipe."""
 3
 4    has_content = True
 5    required_arguments = 1
 6    option_spec = {
 7        'contains': directives.unchanged_required,
 8    }
 9
10    def handle_signature(self, sig, signode):
11        signode += addnodes.desc_name(text=sig)
12        return sig
13
14    def add_target_and_index(self, name_cls, sig, signode):
15        signode['ids'].append('recipe' + '-' + sig)
16        if 'contains' in self.options:
17            ingredients = [x.strip() for x in self.options.get('contains').split(',')]
18
19            recipes = self.env.get_domain('recipe')
20            recipes.add_recipe(sig, ingredients)
```

Unlike [Extending syntax with roles and directives](extending_syntax.html#tutorial-extending-syntax) and [Extending the build process](extending_build.html#tutorial-extend-build), this directive doesn‚Äôt derive from [`docutils.parsers.rst.Directive`](../../extdev/markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive") and doesn‚Äôt define a `run` method. Instead, it derives from [`sphinx.directives.ObjectDescription`](../../extdev/domainapi.html#sphinx.directives.ObjectDescription "sphinx.directives.ObjectDescription") and defines `handle_signature` and `add_target_and_index` methods. This is because `ObjectDescription` is a special-purpose directive that‚Äôs intended for describing things like classes, functions, or, in our case, recipes. More specifically, `handle_signature` implements parsing the signature of the directive and passes on the object‚Äôs name and type to its superclass, while `add_target_and_index` adds a target (to link to) and an entry to the index for this node.

We also see that this directive defines `has_content`, `required_arguments` and `option_spec`. Unlike the `TodoDirective` directive added in the [previous tutorial](extending_build.html#tutorial-extend-build), this directive takes a single argument, the recipe name, and an option, `contains`, in addition to the nested reStructuredText in the body.

The index classes

```
 1class IngredientIndex(Index):
 2    """A custom index that creates an ingredient matrix."""
 3
 4    name = 'ingredient'
 5    localname = 'Ingredient Index'
 6    shortname = 'Ingredient'
 7
 8    def generate(self, docnames=None):
 9        content = defaultdict(list)
10
11        recipes = {
12            name: (dispname, typ, docname, anchor)
13            for name, dispname, typ, docname, anchor, _ in self.domain.get_objects()
14        }
15        recipe_ingredients = self.domain.data['recipe_ingredients']
16        ingredient_recipes = defaultdict(list)
17
18        # flip from recipe_ingredients to ingredient_recipes
19        for recipe_name, ingredients in recipe_ingredients.items():
20            for ingredient in ingredients:
21                ingredient_recipes[ingredient].append(recipe_name)
22
23        # convert the mapping of ingredient to recipes to produce the expected
24        # output, shown below, using the ingredient name as a key to group
25        #
26        # name, subtype, docname, anchor, extra, qualifier, description
27        for ingredient, recipe_names in ingredient_recipes.items():
28            for recipe_name in recipe_names:
29                dispname, typ, docname, anchor = recipes[recipe_name]
30                content[ingredient].append((
31                    dispname,
32                    0,
33                    docname,
34                    anchor,
35                    docname,
36                    '',
37                    typ,
38                ))
39
40        # convert the dict to the sorted list of tuples expected
41        content = sorted(content.items())
42
43        return content, True
```

```
 1class RecipeIndex(Index):
 2    """A custom index that creates an recipe matrix."""
 3
 4    name = 'recipe'
 5    localname = 'Recipe Index'
 6    shortname = 'Recipe'
 7
 8    def generate(self, docnames=None):
 9        content = defaultdict(list)
10
11        # sort the list of recipes in alphabetical order
12        recipes = self.domain.get_objects()
13        recipes = sorted(recipes, key=lambda recipe: recipe[0])
14
15        # generate the expected output, shown below, from the above using the
16        # first letter of the recipe as a key to group thing
17        #
18        # name, subtype, docname, anchor, extra, qualifier, description
19        for _name, dispname, typ, docname, anchor, _priority in recipes:
20            content[dispname[0].lower()].append((
21                dispname,
22                0,
23                docname,
24                anchor,
25                docname,
26                '',
27                typ,
28            ))
29
30        # convert the dict to the sorted list of tuples expected
31        content = sorted(content.items())
32
33        return content, True
```

Both `IngredientIndex` and `RecipeIndex` are derived from [`Index`](../../extdev/domainapi.html#sphinx.domains.Index "sphinx.domains.Index"). They implement custom logic to generate a tuple of values that define the index. Note that `RecipeIndex` is a simple index that has only one entry. Extending it to cover more object types is not yet part of the code.

Both indices use the method [`Index.generate()`](../../extdev/domainapi.html#sphinx.domains.Index.generate "sphinx.domains.Index.generate") to do their work. This method combines the information from our domain, sorts it, and returns it in a list structure that will be accepted by Sphinx. This might look complicated but all it really is is a list of tuples like `('tomato', 'TomatoSoup', 'test', 'rec-TomatoSoup',...)`. Refer to the [domain API guide](../../extdev/domainapi.html) for more information on this API.

These index pages can be referenced with the [`ref`](../../usage/referencing.html#role-ref "ref role") role by combining the domain name and the index `name` value. For example, `RecipeIndex` can be referenced with ``:ref:`recipe-recipe` `` and `IngredientIndex` can be referenced with ``:ref:`recipe-ingredient` ``.

The domain

A Sphinx domain is a specialized container that ties together roles, directives, and indices, among other things. Let‚Äôs look at the domain we‚Äôre creating here.

```
 1class RecipeDomain(Domain):
 2    name = 'recipe'
 3    label = 'Recipe Sample'
 4    roles = {
 5        'ref': XRefRole(),
 6    }
 7    directives = {
 8        'recipe': RecipeDirective,
 9    }
10    indices = {
11        RecipeIndex,
12        IngredientIndex,
13    }
14    initial_data = {
15        'recipes': [],  # object list
16        'recipe_ingredients': {},  # name -> object
17    }
18    data_version = 0
19
20    def get_full_qualified_name(self, node):
21        return f'recipe.{node.arguments[0]}'
22
23    def get_objects(self):
24        yield from self.data['recipes']
25
26    def resolve_xref(self, env, fromdocname, builder, typ, target, node, contnode):
27        match = [
28            (docname, anchor)
29            for name, sig, typ, docname, anchor, prio in self.get_objects()
30            if sig == target
31        ]
32
33        if len(match) > 0:
34            todocname = match[0][0]
35            targ = match[0][1]
36
37            return make_refnode(builder, fromdocname, todocname, targ, contnode, targ)
38        else:
39            print('Awww, found nothing')
40            return None
41
42    def add_recipe(self, signature, ingredients):
43        """Add a new recipe to the domain."""
44        name = f'recipe.{signature}'
45        anchor = f'recipe-{signature}'
46
47        self.data['recipe_ingredients'][name] = ingredients
48        # name, dispname, type, docname, anchor, priority
49        self.data['recipes'].append((
50            name,
51            signature,
52            'Recipe',
53            self.env.docname,
54            anchor,
55            0,
56        ))
```

There are some interesting things to note about this `recipe` domain and domains in general. Firstly, we actually register our directives, roles and indices here, via the `directives`, `roles` and `indices` attributes, rather than via calls later on in `setup`. We can also note that we aren‚Äôt actually defining a custom role and are instead reusing the `sphinx.roles.XRefRole` role and defining the [`sphinx.domains.Domain.resolve_xref`](../../extdev/domainapi.html#sphinx.domains.Domain.resolve_xref "sphinx.domains.Domain.resolve_xref") method. This method takes two arguments, `typ` and `target`, which refer to the cross-reference type and its target name. We‚Äôll use `target` to resolve our destination from our domain‚Äôs `recipes` because we currently have only one type of node.

Moving on, we can see that we‚Äôve defined `initial_data`. The values defined in `initial_data` will be copied to `env.domaindata[domain_name]` as the initial data of the domain, and domain instances can access it via `self.data`. We see that we have defined two items in `initial_data`: `recipes` and `recipe_ingredients`. Each contains a list of all objects defined (i.e. all recipes) and a hash that maps a canonical ingredient name to the list of objects. The way we name objects is common across our extension and is defined in the `get_full_qualified_name` method. For each object created, the canonical name is `recipe.<recipename>`, where `<recipename>` is the name the documentation writer gives the object (a recipe). This enables the extension to use different object types that share the same name. Having a canonical name and central place for our objects is a huge advantage. Both our indices and our cross-referencing code use this feature.

The `setup` function

[As always](extending_build.html#tutorial-extend-build), the `setup` function is a requirement and is used to hook the various parts of our extension into Sphinx. Let‚Äôs look at the `setup` function for this extension.

```
1def setup(app: Sphinx) -> ExtensionMetadata:
2    app.add_domain(RecipeDomain)
3
4    return {
5        'version': '0.1',
6        'parallel_read_safe': True,
7        'parallel_write_safe': True,
8    }
```

This looks a little different to what we‚Äôre used to seeing. There are no calls to [`add_directive()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_directive "sphinx.application.Sphinx.add_directive") or even [`add_role()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_role "sphinx.application.Sphinx.add_role"). Instead, we have a single call to [`add_domain()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_domain "sphinx.application.Sphinx.add_domain") followed by some initialization of the [standard domain](../../usage/domains/standard.html). This is because we had already registered our directives, roles and indexes as part of the directive itself.

## Using the extension[¬∂](adding_domain.html#using-the-extension "Link to this heading")

You can now use the extension throughout your project. For example:

index.rst[¬∂](adding_domain.html#id2 "Link to this code")

```
Joe's Recipes
=============

Below are a collection of my favourite recipes. I highly recommend the
:recipe:ref:`TomatoSoup` recipe in particular!

.. toctree::

   tomato-soup
```

tomato-soup.rst[¬∂](adding_domain.html#id3 "Link to this code")

```
The recipe contains `tomato` and `cilantro`.

.. recipe:recipe:: TomatoSoup
   :contains: tomato, cilantro, salt, pepper

   This recipe is a tasty tomato soup, combine all ingredients
   and cook.
```

The important things to note are the use of the `:recipe:ref:` role to cross-reference the recipe actually defined elsewhere (using the `:recipe:recipe:` directive).

## Further reading[¬∂](adding_domain.html#further-reading "Link to this heading")

For more information, refer to the [docutils](https://docutils.sourceforge.io/docs/) documentation and [Sphinx API](../../extdev/index.html).

If you wish to share your extension across multiple projects or with others, check out the [Third-party extensions](../../usage/extensions/index.html#third-party-extensions) section.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª
- [Tutorials](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference


# Developing autodoc extensions[¬∂](autodoc_ext.html#developing-autodoc-extensions "Link to this heading")

The objective of this tutorial is to create an extension that adds support for new type for autodoc. This autodoc extension will format the `IntEnum` class from Python standard library. (module `enum`)

## Overview[¬∂](autodoc_ext.html#overview "Link to this heading")

We want the extension that will create auto-documentation for IntEnum. `IntEnum` is the integer enum class from standard library `enum` module.

Currently this class has no special auto documentation behavior.

We want to add following to autodoc:

- A new `autointenum` directive that will document the `IntEnum` class.
- The generated documentation will have all the enum possible values with names.
- The `autointenum` directive will have an option `:hex:` which will cause the integers be printed in hexadecimal form.

## Prerequisites[¬∂](autodoc_ext.html#prerequisites "Link to this heading")

We need the same setup as in [the previous extensions](extending_build.html#tutorial-extend-build). This time, we will be putting out extension in a file called `autodoc_intenum.py`. The `my_enums.py` will contain the sample enums we will document.

Here is an example of the folder structure you might obtain:

```
‚îî‚îÄ‚îÄ source
 ¬†¬† ‚îú‚îÄ‚îÄ _ext
    ‚îÇ ¬† ‚îî‚îÄ‚îÄ autodoc_intenum.py
 ¬†¬† ‚îú‚îÄ‚îÄ conf.py
 ¬†¬† ‚îú‚îÄ‚îÄ index.rst
 ¬†¬† ‚îî‚îÄ‚îÄ my_enums.py
```

## Writing the extension[¬∂](autodoc_ext.html#writing-the-extension "Link to this heading")

Start with `setup` function for the extension.

```
1def setup(app: Sphinx) -> ExtensionMetadata:
2    app.setup_extension('sphinx.ext.autodoc')  # Require autodoc extension
3    app.add_autodocumenter(IntEnumDocumenter)
4    return {
5        'version': '1',
6        'parallel_read_safe': True,
7    }
```

The [`setup_extension()`](../../extdev/appapi.html#sphinx.application.Sphinx.setup_extension "sphinx.application.Sphinx.setup_extension") method will pull the autodoc extension because our new extension depends on autodoc. [`add_autodocumenter()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_autodocumenter "sphinx.application.Sphinx.add_autodocumenter") is the method that registers our new auto documenter class.

We want to import certain objects from the autodoc extension:

```
1from __future__ import annotations
2
3from enum import IntEnum
4from typing import TYPE_CHECKING
5
6from sphinx.ext.autodoc import ClassDocumenter, bool_option
7
```

There are several different documenter classes such as `MethodDocumenter` or `AttributeDocumenter` available in the autodoc extension but our new class is the subclass of `ClassDocumenter` which a documenter class used by autodoc to document classes.

This is the definition of our new the auto-documenter class:

```
 1class IntEnumDocumenter(ClassDocumenter):
 2    objtype = 'intenum'
 3    directivetype = ClassDocumenter.objtype
 4    priority = 10 + ClassDocumenter.priority
 5    option_spec = dict(ClassDocumenter.option_spec)
 6    option_spec['hex'] = bool_option
 7
 8    @classmethod
 9    def can_document_member(
10        cls, member: Any, membername: str, isattr: bool, parent: Any
11    ) -> bool:
12        try:
13            return issubclass(member, IntEnum)
14        except TypeError:
15            return False
16
17    def add_directive_header(self, sig: str) -> None:
18        super().add_directive_header(sig)
19        self.add_line('   :final:', self.get_sourcename())
20
21    def add_content(
22        self,
23        more_content: StringList | None,
24    ) -> None:
25        super().add_content(more_content)
26
27        source_name = self.get_sourcename()
28        enum_object: IntEnum = self.object
29        use_hex = self.options.hex
30        self.add_line('', source_name)
31
32        for the_member_name, enum_member in enum_object.__members__.items():  # type: ignore[attr-defined]
33            the_member_value = enum_member.value
34            if use_hex:
35                the_member_value = hex(the_member_value)
36
37            self.add_line(f'**{the_member_name}**: {the_member_value}', source_name)
38            self.add_line('', source_name)
```

Important attributes of the new class:

**objtype**

This attribute determines the `auto` directive name. In this case the auto directive will be `autointenum`.

**directivetype**

This attribute sets the generated directive name. In this example the generated directive will be `.. :py:class::`.

**priority**

the larger the number the higher is the priority. We want our documenter be higher priority than the parent.

**option\_spec**

option specifications. We copy the parent class options and add a new option *hex*.

Overridden members:

**can\_document\_member**

This member is important to override. It should return *True* when the passed object can be documented by this class.

**add\_directive\_header**

This method generates the directive header. We add **:final:** directive option. Remember to call **super** or no directive will be generated.

**add\_content**

This method generates the body of the class documentation. After calling the super method we generate lines for enum description.

## Using the extension[¬∂](autodoc_ext.html#using-the-extension "Link to this heading")

You can now use the new autodoc directive to document any `IntEnum`.

For example, you have the following `IntEnum`:

my\_enums.py[¬∂](autodoc_ext.html#id1 "Link to this code")

```
class Colors(IntEnum):
    """Colors enumerator"""
    NONE = 0
    RED = 1
    GREEN = 2
    BLUE = 3
```

This will be the documentation file with auto-documentation directive:

index.rst[¬∂](autodoc_ext.html#id2 "Link to this code")

```
.. autointenum:: my_enums.Colors
```

## Further reading[¬∂](autodoc_ext.html#further-reading "Link to this heading")

If you wish to share your extension across multiple projects or with others, check out the [Third-party extensions](../../usage/extensions/index.html#third-party-extensions) section.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª
- [Tutorials](index.html) ¬ª

### On this page



The Basics


User guide




Community


Reference


# Extending the build process[¬∂](extending_build.html#extending-the-build-process "Link to this heading")

The objective of this tutorial is to create a more comprehensive extension than that created in [Extending syntax with roles and directives](extending_syntax.html#tutorial-extending-syntax). Whereas that guide just covered writing a custom [role](../../glossary.html#term-role) and [directive](../../glossary.html#term-directive), this guide covers a more complex extension to the Sphinx build process; adding multiple directives, along with custom nodes, additional config values and custom event handlers.

To this end, we will cover a `todo` extension that adds capabilities to include todo entries in the documentation, and to collect these in a central place. This is similar to the [`sphinx.ext.todo`](../../usage/extensions/todo.html#module-sphinx.ext.todo "sphinx.ext.todo: Allow inserting todo items into documents.") extension distributed with Sphinx.

## Overview[¬∂](extending_build.html#overview "Link to this heading")

Note

To understand the design of this extension, refer to [Important objects](../../extdev/index.html#important-objects) and [Build phases](../../extdev/index.html#build-phases).

We want the extension to add the following to Sphinx:

- A `todo` directive, containing some content that is marked with ‚ÄúTODO‚Äù and only shown in the output if a new config value is set. Todo entries should not be in the output by default.
- A `todolist` directive that creates a list of all todo entries throughout the documentation.

For that, we will need to add the following elements to Sphinx:

- New directives, called `todo` and `todolist`.
- New document tree nodes to represent these directives, conventionally also called `todo` and `todolist`. We wouldn‚Äôt need new nodes if the new directives only produced some content representable by existing nodes.
- A new config value `todo_include_todos` (config value names should start with the extension name, in order to stay unique) that controls whether todo entries make it into the output.
- New event handlers: one for the [`doctree-resolved`](../../extdev/event_callbacks.html#event-doctree-resolved) event, to replace the todo and todolist nodes, one for [`env-merge-info`](../../extdev/event_callbacks.html#event-env-merge-info) to merge intermediate results from parallel builds, and one for [`env-purge-doc`](../../extdev/event_callbacks.html#event-env-purge-doc) (the reason for that will be covered later).

## Prerequisites[¬∂](extending_build.html#prerequisites "Link to this heading")

As with [Extending syntax with roles and directives](extending_syntax.html#tutorial-extending-syntax), we will not be distributing this plugin via PyPI so once again we need a Sphinx project to call this from. You can use an existing project or create a new one using **sphinx-quickstart**.

We assume you are using separate source (`source`) and build (`build`) folders. Your extension file could be in any folder of your project. In our case, let‚Äôs do the following:

1. Create an `_ext` folder in `source`
2. Create a new Python file in the `_ext` folder called `todo.py`

Here is an example of the folder structure you might obtain:

```
‚îî‚îÄ‚îÄ source
 ¬†¬† ‚îú‚îÄ‚îÄ _ext
    ‚îÇ ¬† ‚îî‚îÄ‚îÄ todo.py
 ¬†¬† ‚îú‚îÄ‚îÄ _static
 ¬†¬† ‚îú‚îÄ‚îÄ conf.py
 ¬†¬† ‚îú‚îÄ‚îÄ somefolder
 ¬†¬† ‚îú‚îÄ‚îÄ index.rst
 ¬†¬† ‚îú‚îÄ‚îÄ somefile.rst
 ¬†¬† ‚îî‚îÄ‚îÄ someotherfile.rst
```

## Writing the extension[¬∂](extending_build.html#writing-the-extension "Link to this heading")

Open `todo.py` and paste the following code in it, all of which we will explain in detail shortly:

```
  1from docutils import nodes
  2from docutils.parsers.rst import Directive
  3
  4from sphinx.application import Sphinx
  5from sphinx.locale import _
  6from sphinx.util.docutils import SphinxDirective
  7from sphinx.util.typing import ExtensionMetadata
  8
  9
 10class todo(nodes.Admonition, nodes.Element):
 11    pass
 12
 13
 14class todolist(nodes.General, nodes.Element):
 15    pass
 16
 17
 18def visit_todo_node(self, node):
 19    self.visit_admonition(node)
 20
 21
 22def depart_todo_node(self, node):
 23    self.depart_admonition(node)
 24
 25
 26class TodolistDirective(Directive):
 27    def run(self):
 28        return [todolist('')]
 29
 30
 31class TodoDirective(SphinxDirective):
 32    # this enables content in the directive
 33    has_content = True
 34
 35    def run(self):
 36        targetid = 'todo-%d' % self.env.new_serialno('todo')
 37        targetnode = nodes.target('', '', ids=[targetid])
 38
 39        todo_node = todo('\n'.join(self.content))
 40        todo_node += nodes.title(_('Todo'), _('Todo'))
 41        todo_node += self.parse_content_to_nodes()
 42
 43        if not hasattr(self.env, 'todo_all_todos'):
 44            self.env.todo_all_todos = []
 45
 46        self.env.todo_all_todos.append({
 47            'docname': self.env.docname,
 48            'lineno': self.lineno,
 49            'todo': todo_node.deepcopy(),
 50            'target': targetnode,
 51        })
 52
 53        return [targetnode, todo_node]
 54
 55
 56def purge_todos(app, env, docname):
 57    if not hasattr(env, 'todo_all_todos'):
 58        return
 59
 60    env.todo_all_todos = [
 61        todo for todo in env.todo_all_todos if todo['docname'] != docname
 62    ]
 63
 64
 65def merge_todos(app, env, docnames, other):
 66    if not hasattr(env, 'todo_all_todos'):
 67        env.todo_all_todos = []
 68    if hasattr(other, 'todo_all_todos'):
 69        env.todo_all_todos.extend(other.todo_all_todos)
 70
 71
 72def process_todo_nodes(app, doctree, fromdocname):
 73    if not app.config.todo_include_todos:
 74        for node in doctree.findall(todo):
 75            node.parent.remove(node)
 76
 77    # Replace all todolist nodes with a list of the collected todos.
 78    # Augment each todo with a backlink to the original location.
 79    env = app.env
 80
 81    if not hasattr(env, 'todo_all_todos'):
 82        env.todo_all_todos = []
 83
 84    for node in doctree.findall(todolist):
 85        if not app.config.todo_include_todos:
 86            node.replace_self([])
 87            continue
 88
 89        content = []
 90
 91        for todo_info in env.todo_all_todos:
 92            para = nodes.paragraph()
 93            filename = env.doc2path(todo_info['docname'], base=None)
 94            description = _(
 95                '(The original entry is located in %s, line %d and can be found '
 96            ) % (filename, todo_info['lineno'])
 97            para += nodes.Text(description)
 98
 99            # Create a reference
100            newnode = nodes.reference('', '')
101            innernode = nodes.emphasis(_('here'), _('here'))
102            newnode['refdocname'] = todo_info['docname']
103            newnode['refuri'] = app.builder.get_relative_uri(
104                fromdocname, todo_info['docname']
105            )
106            newnode['refuri'] += '#' + todo_info['target']['refid']
107            newnode.append(innernode)
108            para += newnode
109            para += nodes.Text('.)')
110
111            # Insert into the todolist
112            content.extend((
113                todo_info['todo'],
114                para,
115            ))
116
117        node.replace_self(content)
118
119
120def setup(app: Sphinx) -> ExtensionMetadata:
121    app.add_config_value('todo_include_todos', False, 'html')
122
123    app.add_node(todolist)
124    app.add_node(
125        todo,
126        html=(visit_todo_node, depart_todo_node),
127        latex=(visit_todo_node, depart_todo_node),
128        text=(visit_todo_node, depart_todo_node),
129    )
130
131    app.add_directive('todo', TodoDirective)
132    app.add_directive('todolist', TodolistDirective)
133    app.connect('doctree-resolved', process_todo_nodes)
134    app.connect('env-purge-doc', purge_todos)
135    app.connect('env-merge-info', merge_todos)
136
137    return {
138        'version': '0.1',
139        'env_version': 1,
140        'parallel_read_safe': True,
141        'parallel_write_safe': True,
142    }
```

This is far more extensive extension than the one detailed in [Extending syntax with roles and directives](extending_syntax.html#tutorial-extending-syntax), however, we will will look at each piece step-by-step to explain what‚Äôs happening.

The node classes

Let‚Äôs start with the node classes:

```
 1
 2
 3class todo(nodes.Admonition, nodes.Element):
 4    pass
 5
 6
 7class todolist(nodes.General, nodes.Element):
 8    pass
 9
10
11def visit_todo_node(self, node):
12    self.visit_admonition(node)
13
14
```

Node classes usually don‚Äôt have to do anything except inherit from the standard docutils classes defined in `docutils.nodes`. `todo` inherits from `Admonition` because it should be handled like a note or warning, `todolist` is just a ‚Äúgeneral‚Äù node.

Note

Many extensions will not have to create their own node classes and work fine with the nodes already provided by [docutils](https://docutils.sourceforge.io/docs/ref/doctree.html) and [Sphinx](../../extdev/nodes.html#nodes).

Attention

It is important to know that while you can extend Sphinx without leaving your `conf.py`, if you declare an inherited node right there, you‚Äôll hit an unobvious [`PickleError`](https://docs.python.org/3/library/pickle.html#pickle.PickleError "(in Python v3.13)"). So if something goes wrong, please make sure that you put inherited nodes into a separate Python module.

For more details, see:


The directive classes

A directive class is a class deriving usually from [`docutils.parsers.rst.Directive`](../../extdev/markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive"). The directive interface is also covered in detail in the [docutils documentation](https://docutils.sourceforge.io/docs/ref/rst/directives.html); the important thing is that the class should have attributes that configure the allowed markup, and a `run` method that returns a list of nodes.

Looking first at the `TodolistDirective` directive:

```
1
2
3class TodolistDirective(Directive):
4    def run(self):
```

It‚Äôs very simple, creating and returning an instance of our `todolist` node class. The `TodolistDirective` directive itself has neither content nor arguments that need to be handled. That brings us to the `TodoDirective` directive:

```
 1
 2class TodoDirective(SphinxDirective):
 3    # this enables content in the directive
 4    has_content = True
 5
 6    def run(self):
 7        targetid = 'todo-%d' % self.env.new_serialno('todo')
 8        targetnode = nodes.target('', '', ids=[targetid])
 9
10        todo_node = todo('\n'.join(self.content))
11        todo_node += nodes.title(_('Todo'), _('Todo'))
12        todo_node += self.parse_content_to_nodes()
13
14        if not hasattr(self.env, 'todo_all_todos'):
15            self.env.todo_all_todos = []
16
17        self.env.todo_all_todos.append({
18            'docname': self.env.docname,
19            'lineno': self.lineno,
20            'todo': todo_node.deepcopy(),
21            'target': targetnode,
22        })
23
24        return [targetnode, todo_node]
```

Several important things are covered here. First, as you can see, we‚Äôre now subclassing the [`SphinxDirective`](../../extdev/utils.html#sphinx.util.docutils.SphinxDirective "sphinx.util.docutils.SphinxDirective") helper class instead of the usual [`Directive`](../../extdev/markupapi.html#docutils.parsers.rst.Directive "docutils.parsers.rst.Directive") class. This gives us access to the [build environment instance](../../extdev/index.html#important-objects) using the `self.env` property. Without this, we‚Äôd have to use the rather convoluted `self.state.document.settings.env`. Then, to act as a link target (from `TodolistDirective`), the `TodoDirective` directive needs to return a target node in addition to the `todo` node. The target ID (in HTML, this will be the anchor name) is generated by using `env.new_serialno` which returns a new unique integer on each call and therefore leads to unique target names. The target node is instantiated without any text (the first two arguments).

On creating admonition node, the content body of the directive are parsed using `self.state.nested_parse`. The first argument gives the content body, and the second one gives content offset. The third argument gives the parent node of parsed result, in our case the `todo` node. Following this, the `todo` node is added to the environment. This is needed to be able to create a list of all todo entries throughout the documentation, in the place where the author puts a `todolist` directive. For this case, the environment attribute `todo_all_todos` is used (again, the name should be unique, so it is prefixed by the extension name). It does not exist when a new environment is created, so the directive must check and create it if necessary. Various information about the todo entry‚Äôs location are stored along with a copy of the node.

In the last line, the nodes that should be put into the doctree are returned: the target node and the admonition node.

The node structure that the directive returns looks like this:

```
+--------------------+
| target node        |
+--------------------+
+--------------------+
| todo node          |
+--------------------+
  \__+--------------------+
     | admonition title   |
     +--------------------+
     | paragraph          |
     +--------------------+
     | ...                |
     +--------------------+
```

The event handlers

Event handlers are one of Sphinx‚Äôs most powerful features, providing a way to do hook into any part of the documentation process. There are many events provided by Sphinx itself, as detailed in [the API guide](../../extdev/event_callbacks.html#events), and we‚Äôre going to use a subset of them here.

Let‚Äôs look at the event handlers used in the above example. First, the one for the [`env-purge-doc`](../../extdev/event_callbacks.html#event-env-purge-doc) event:

```
1def purge_todos(app, env, docname):
2    if not hasattr(env, 'todo_all_todos'):
3        return
4
5    env.todo_all_todos = [
6        todo for todo in env.todo_all_todos if todo['docname'] != docname
```

Since we store information from source files in the environment, which is persistent, it may become out of date when the source file changes. Therefore, before each source file is read, the environment‚Äôs records of it are cleared, and the [`env-purge-doc`](../../extdev/event_callbacks.html#event-env-purge-doc) event gives extensions a chance to do the same. Here we clear out all todos whose docname matches the given one from the `todo_all_todos` list. If there are todos left in the document, they will be added again during parsing.

The next handler, for the [`env-merge-info`](../../extdev/event_callbacks.html#event-env-merge-info) event, is used during parallel builds. As during parallel builds all threads have their own `env`, there‚Äôs multiple `todo_all_todos` lists that need to be merged:

```
1
2def merge_todos(app, env, docnames, other):
3    if not hasattr(env, 'todo_all_todos'):
4        env.todo_all_todos = []
5    if hasattr(other, 'todo_all_todos'):
```

The other handler belongs to the [`doctree-resolved`](../../extdev/event_callbacks.html#event-doctree-resolved) event:

```
 1
 2def process_todo_nodes(app, doctree, fromdocname):
 3    if not app.config.todo_include_todos:
 4        for node in doctree.findall(todo):
 5            node.parent.remove(node)
 6
 7    # Replace all todolist nodes with a list of the collected todos.
 8    # Augment each todo with a backlink to the original location.
 9    env = app.env
10
11    if not hasattr(env, 'todo_all_todos'):
12        env.todo_all_todos = []
13
14    for node in doctree.findall(todolist):
15        if not app.config.todo_include_todos:
16            node.replace_self([])
17            continue
18
19        content = []
20
21        for todo_info in env.todo_all_todos:
22            para = nodes.paragraph()
23            filename = env.doc2path(todo_info['docname'], base=None)
24            description = _(
25                '(The original entry is located in %s, line %d and can be found '
26            ) % (filename, todo_info['lineno'])
27            para += nodes.Text(description)
28
29            # Create a reference
30            newnode = nodes.reference('', '')
31            innernode = nodes.emphasis(_('here'), _('here'))
32            newnode['refdocname'] = todo_info['docname']
33            newnode['refuri'] = app.builder.get_relative_uri(
34                fromdocname, todo_info['docname']
35            )
36            newnode['refuri'] += '#' + todo_info['target']['refid']
37            newnode.append(innernode)
38            para += newnode
39            para += nodes.Text('.)')
40
41            # Insert into the todolist
42            content.extend((
43                todo_info['todo'],
```

The [`doctree-resolved`](../../extdev/event_callbacks.html#event-doctree-resolved) event is emitted at the end of [phase 3 (resolving)](../../extdev/index.html#build-phases) and allows custom resolving to be done. The handler we have written for this event is a bit more involved. If the `todo_include_todos` config value (which we‚Äôll describe shortly) is false, all `todo` and `todolist` nodes are removed from the documents. If not, `todo` nodes just stay where and how they are. `todolist` nodes are replaced by a list of todo entries, complete with backlinks to the location where they come from. The list items are composed of the nodes from the `todo` entry and docutils nodes created on the fly: a paragraph for each entry, containing text that gives the location, and a link (reference node containing an italic node) with the backreference. The reference URI is built by [`sphinx.builders.Builder.get_relative_uri()`](../../extdev/builderapi.html#sphinx.builders.Builder.get_relative_uri "sphinx.builders.Builder.get_relative_uri") which creates a suitable URI depending on the used builder, and appending the todo node‚Äôs (the target‚Äôs) ID as the anchor name.

The `setup` function

As noted [previously](extending_syntax.html#tutorial-extending-syntax), the `setup` function is a requirement and is used to plug directives into Sphinx. However, we also use it to hook up the other parts of our extension. Let‚Äôs look at our `setup` function:

```
 1
 2        node.replace_self(content)
 3
 4
 5def setup(app: Sphinx) -> ExtensionMetadata:
 6    app.add_config_value('todo_include_todos', False, 'html')
 7
 8    app.add_node(todolist)
 9    app.add_node(
10        todo,
11        html=(visit_todo_node, depart_todo_node),
12        latex=(visit_todo_node, depart_todo_node),
13        text=(visit_todo_node, depart_todo_node),
14    )
15
16    app.add_directive('todo', TodoDirective)
17    app.add_directive('todolist', TodolistDirective)
18    app.connect('doctree-resolved', process_todo_nodes)
19    app.connect('env-purge-doc', purge_todos)
20    app.connect('env-merge-info', merge_todos)
21
22    return {
23        'version': '0.1',
24        'env_version': 1,
25        'parallel_read_safe': True,
26        'parallel_write_safe': True,
27    }
```

The calls in this function refer to the classes and functions we added earlier. What the individual calls do is the following:

- [`add_config_value()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_config_value "sphinx.application.Sphinx.add_config_value") lets Sphinx know that it should recognize the new *config value* `todo_include_todos`, whose default value should be `False` (this also tells Sphinx that it is a boolean value).

  If the third argument was `'html'`, HTML documents would be full rebuild if the config value changed its value. This is needed for config values that influence reading (build [phase 1 (reading)](../../extdev/index.html#build-phases)).
- [`add_node()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_node "sphinx.application.Sphinx.add_node") adds a new *node class* to the build system. It also can specify visitor functions for each supported output format. These visitor functions are needed when the new nodes stay until [phase 4 (writing)](../../extdev/index.html#build-phases). Since the `todolist` node is always replaced in [phase 3 (resolving)](../../extdev/index.html#build-phases), it doesn‚Äôt need any.
- [`add_directive()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_directive "sphinx.application.Sphinx.add_directive") adds a new *directive*, given by name and class.
- Finally, [`connect()`](../../extdev/appapi.html#sphinx.application.Sphinx.connect "sphinx.application.Sphinx.connect") adds an *event handler* to the event whose name is given by the first argument. The event handler function is called with several arguments which are documented with the event.

With this, our extension is complete.

## Using the extension[¬∂](extending_build.html#using-the-extension "Link to this heading")

As before, we need to enable the extension by declaring it in our `conf.py` file. There are two steps necessary here:

1. Add the `_ext` directory to the [Python path](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH) using `sys.path.append`. This should be placed at the top of the file.
2. Update or create the [`extensions`](../../usage/configuration.html#confval-extensions) list and add the extension file name to the list

In addition, we may wish to set the `todo_include_todos` config value. As noted above, this defaults to `False` but we can set it explicitly.

For example:

```
import sys
from pathlib import Path

sys.path.append(str(Path('_ext').resolve()))

extensions = ['todo']

todo_include_todos = False
```

You can now use the extension throughout your project. For example:

index.rst[¬∂](extending_build.html#id1 "Link to this code")

```
Hello, world
============

.. toctree::
   somefile.rst
   someotherfile.rst

Hello world. Below is the list of TODOs.

.. todolist::
```

somefile.rst[¬∂](extending_build.html#id2 "Link to this code")

```
foo
===

Some intro text here...

.. todo:: Fix this
```

someotherfile.rst[¬∂](extending_build.html#id3 "Link to this code")

```
bar
===

Some more text here...

.. todo:: Fix that
```

Because we have configured `todo_include_todos` to `False`, we won‚Äôt actually see anything rendered for the `todo` and `todolist` directives. However, if we toggle this to true, we will see the output described previously.

## Further reading[¬∂](extending_build.html#further-reading "Link to this heading")

For more information, refer to the [docutils](https://docutils.sourceforge.io/docs/) documentation and [Sphinx API](../../extdev/index.html).

If you wish to share your extension across multiple projects or with others, check out the [Third-party extensions](../../usage/extensions/index.html#third-party-extensions) section.








### Navigation

- [Documentation](../../index.html) ¬ª
- [Extending Sphinx](../index.html) ¬ª
- [Tutorials](index.html) ¬ª

### On this page




The Basics


User guide




Community


Reference


# Extending syntax with roles and directives[¬∂](extending_syntax.html#extending-syntax-with-roles-and-directives "Link to this heading")

## Overview[¬∂](extending_syntax.html#overview "Link to this heading")

The syntax of both reStructuredText and MyST can be extended by creating new **directives** - for block-level elements - and **roles** - for inline elements.

In this tutorial we shall extend Sphinx to add:

- A `hello` role, that will simply output the text `Hello {text}!`.
- A `hello` directive, that will simply output the text `Hello {text}!`, as a paragraph.

For this extension, you will need some basic understanding of Python, and we shall also introduce aspects of the [docutils](https://docutils.sourceforge.io/) API.

## Setting up the project[¬∂](extending_syntax.html#setting-up-the-project "Link to this heading")

You can either use an existing Sphinx project or create a new one using **sphinx-quickstart**.

With this we will add the extension to the project, within the `source` folder:

1. Create an `_ext` folder in `source`
2. Create a new Python file in the `_ext` folder called `helloworld.py`

Here is an example of the folder structure you might obtain:

```
‚îî‚îÄ‚îÄ source
 ¬†¬† ‚îú‚îÄ‚îÄ _ext
    ‚îÇ ¬† ‚îî‚îÄ‚îÄ helloworld.py
 ¬†¬† ‚îú‚îÄ‚îÄ conf.py
 ¬†¬† ‚îú‚îÄ‚îÄ index.rst
```

## Writing the extension[¬∂](extending_syntax.html#writing-the-extension "Link to this heading")

Open `helloworld.py` and paste the following code in it:

```
 1from __future__ import annotations
 2
 3from docutils import nodes
 4
 5from sphinx.application import Sphinx
 6from sphinx.util.docutils import SphinxDirective, SphinxRole
 7from sphinx.util.typing import ExtensionMetadata
 8
 9
10class HelloRole(SphinxRole):
11    """A role to say hello!"""
12
13    def run(self) -> tuple[list[nodes.Node], list[nodes.system_message]]:
14        node = nodes.inline(text=f'Hello {self.text}!')
15        return [node], []
16
17
18class HelloDirective(SphinxDirective):
19    """A directive to say hello!"""
20
21    required_arguments = 1
22
23    def run(self) -> list[nodes.Node]:
24        paragraph_node = nodes.paragraph(text=f'hello {self.arguments[0]}!')
25        return [paragraph_node]
26
27
28def setup(app: Sphinx) -> ExtensionMetadata:
29    app.add_role('hello', HelloRole())
30    app.add_directive('hello', HelloDirective)
31
32    return {
33        'version': '0.1',
34        'parallel_read_safe': True,
35        'parallel_write_safe': True,
36    }
```

Some essential things are happening in this example:

### The role class[¬∂](extending_syntax.html#the-role-class "Link to this heading")

Our new role is declared in the `HelloRole` class.

```
1class HelloRole(SphinxRole):
2    """A role to say hello!"""
3
4    def run(self) -> tuple[list[nodes.Node], list[nodes.system_message]]:
5        node = nodes.inline(text=f'Hello {self.text}!')
6        return [node], []
```

This class extends the [`SphinxRole`](../../extdev/utils.html#sphinx.util.docutils.SphinxRole "sphinx.util.docutils.SphinxRole") class. The class contains a `run` method, which is a requirement for every role. It contains the main logic of the role and it returns a tuple containing:

- a list of inline-level docutils nodes to be processed by Sphinx.
- an (optional) list of system message nodes

### The directive class[¬∂](extending_syntax.html#the-directive-class "Link to this heading")

Our new directive is declared in the `HelloDirective` class.

```
1class HelloDirective(SphinxDirective):
2    """A directive to say hello!"""
3
4    required_arguments = 1
5
6    def run(self) -> list[nodes.Node]:
7        paragraph_node = nodes.paragraph(text=f'hello {self.arguments[0]}!')
8        return [paragraph_node]
```

This class extends the [`SphinxDirective`](../../extdev/utils.html#sphinx.util.docutils.SphinxDirective "sphinx.util.docutils.SphinxDirective") class. The class contains a `run` method, which is a requirement for every directive. It contains the main logic of the directive and it returns a list of block-level docutils nodes to be processed by Sphinx. It also contains a `required_arguments` attribute, which tells Sphinx how many arguments are required for the directive.

### What are docutils nodes?[¬∂](extending_syntax.html#what-are-docutils-nodes "Link to this heading")

When Sphinx parses a document, it creates an ‚ÄúAbstract Syntax Tree‚Äù (AST) of nodes that represent the content of the document in a structured way, that is generally independent of any one input (rST, MyST, etc) or output (HTML, LaTeX, etc) format. It is a tree because each node can have children nodes, and so on:

```
<document>
   <paragraph>
      <text>
         Hello world!
```

The [docutils](https://docutils.sourceforge.io/) package provides many [built-in nodes](https://docutils.sourceforge.io/docs/ref/doctree.html), to represent different types of content such as text, paragraphs, references, tables, etc.

Each node type generally only accepts a specific set of direct child nodes, for example the `document` node should only contain ‚Äúblock-level‚Äù nodes, such as `paragraph`, `section`, `table`, etc, whilst the `paragraph` node should only contain ‚Äúinline-level‚Äù nodes, such as `text`, `emphasis`, `strong`, etc.

See also

The docutils documentation on [creating directives](https://docutils.sourceforge.io/docs/howto/rst-directives.html), and [creating roles](https://docutils.sourceforge.io/docs/howto/rst-roles.html).

### The `setup` function[¬∂](extending_syntax.html#the-setup-function "Link to this heading")

This function is a requirement. We use it to plug our new directive into Sphinx.

```
def setup(app: Sphinx) -> ExtensionMetadata:
    app.add_role('hello', HelloRole())
    app.add_directive('hello', HelloDirective)

    return {
        'version': '0.1',
        'parallel_read_safe': True,
        'parallel_write_safe': True,
    }
```

The simplest thing you can do is to call the [`Sphinx.add_role()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_role "sphinx.application.Sphinx.add_role") and [`Sphinx.add_directive()`](../../extdev/appapi.html#sphinx.application.Sphinx.add_directive "sphinx.application.Sphinx.add_directive") methods, which is what we‚Äôve done here. For this particular call, the first argument is the name of the role/directive itself as used in a reStructuredText file. In this case, we would use `hello`. For example:

```
Some intro text here...

.. hello:: world

Some text with a :hello:`world` role.
```

We also return the [extension metadata](../../extdev/index.html#ext-metadata) that indicates the version of our extension, along with the fact that it is safe to use the extension for both parallel reading and writing.

## Using the extension[¬∂](extending_syntax.html#using-the-extension "Link to this heading")

The extension has to be declared in your `conf.py` file to make Sphinx aware of it. There are two steps necessary here:

1. Add the `_ext` directory to the [Python path](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH) using `sys.path.append`. This should be placed at the top of the file.
2. Update or create the [`extensions`](../../usage/configuration.html#confval-extensions) list and add the extension file name to the list

For example:

```
import sys
from pathlib import Path

sys.path.append(str(Path('_ext').resolve()))

extensions = ['helloworld']
```

Tip

Because we haven‚Äôt installed our extension as a [Python package](https://packaging.python.org/), we need to modify the [Python path](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH) so Sphinx can find our extension. This is why we need the call to `sys.path.append`.

You can now use the extension in a file. For example:

```
Some intro text here...

.. hello:: world

Some text with a :hello:`world` role.
```

The sample above would generate:

```
Some intro text here...

Hello world!

Some text with a hello world! role.
```

## Further reading[¬∂](extending_syntax.html#further-reading "Link to this heading")

This is the very basic principle of an extension that creates a new role and directive.

For a more advanced example, refer to [Extending the build process](extending_build.html#tutorial-extend-build).

If you wish to share your extension across multiple projects or with others, check out the [Third-party extensions](../../usage/extensions/index.html#third-party-extensions) section.








### Navigation

- [Documentation](../index.html) ¬ª
- [Using Sphinx](index.html) ¬ª

### On this page





































The Basics


User guide



Community


Reference


# Configuration[¬∂](configuration.html#module-conf "Link to this heading")

The [configuration directory](../glossary.html#term-configuration-directory) must contain a file named `conf.py`. This file (containing Python code) is called the ‚Äúbuild configuration file‚Äù and contains (almost) all configuration needed to customise Sphinx input and output behaviour.

An optional file [docutils.conf](https://docutils.sourceforge.io/docs/user/config.html) can be added to the configuration directory to adjust [Docutils](https://docutils.sourceforge.io/) configuration if not otherwise overridden or set by Sphinx.

Important points to note:

- If not otherwise documented, values must be strings, and their default is the empty string.
- The term ‚Äúfully-qualified name‚Äù (FQN) refers to a string that names an importable Python object inside a module; for example, the fully-qualified name `"sphinx.builders.Builder"` means the `Builder` class in the `sphinx.builders` module.
- Document names use `/` as the path separator and do not contain the file name extension.

<!--THE END-->

- Where glob-style patterns are permitted, you can use the standard shell constructs (`*`, `?`, `[...]`, and `[!...]`) with the feature that none of these will match slashes (`/`). A double star `**` can be used to match any sequence of characters *including* slashes.

Tip

The configuration file is executed as Python code at build time (using [`importlib.import_module()`](https://docs.python.org/3/library/importlib.html#importlib.import_module "(in Python v3.13)"), with the current directory set to the [configuration directory](../glossary.html#term-configuration-directory)), and therefore can execute arbitrarily complex code.

Sphinx then reads simple names from the file‚Äôs namespace as its configuration. In general, configuration values should be simple strings, numbers, or lists or dictionaries of simple values.

The contents of the config namespace are pickled (so that Sphinx can find out when configuration changes), so it may not contain unpickleable values ‚Äì delete them from the namespace with `del` if appropriate. Modules are removed automatically, so deleting imported modules is not needed.

## Project tags[¬∂](configuration.html#project-tags "Link to this heading")

There is a special object named `tags` available in the config file, which exposes the [project tags](restructuredtext/directives.html#tags). Tags are defined either via the [`--tag`](../man/sphinx-build.html#cmdoption-sphinx-build-t) command-line option or `tags.add('tag')`. Note that the builder‚Äôs name and format tags are not available in `conf.py`.

It can be used to query and change the defined tags as follows:

- To query whether a tag is set, use `'tag' in tags`.
- To add a tag, use `tags.add('tag')`.
- To remove a tag, use `tags.remove('tag')`.

## Project information[¬∂](configuration.html#project-information "Link to this heading")

project[¬∂](configuration.html#confval-project "Link to this definition")

Type:

`str`

Default:

`'Project name not set'`

The documented project‚Äôs name. Example:

```
project = 'Thermidor'
```

author[¬∂](configuration.html#confval-author "Link to this definition")

Type:

`str`

Default:

`'Author name not set'`

The project‚Äôs author(s). Example:

```
author = 'Joe Bloggs'
```

copyright[¬∂](configuration.html#confval-copyright "Link to this definition")

project\_copyright[¬∂](configuration.html#confval-project_copyright "Link to this definition")

Type:

`str | Sequence[str]`

Default:

`''`

A copyright statement. Permitted styles are as follows, where ‚ÄòYYYY‚Äô represents a four-digit year.

- `copyright = 'YYYY'`
- `copyright = 'YYYY, Author Name'`
- `copyright = 'YYYY Author Name'`
- `copyright = 'YYYY-YYYY, Author Name'`
- `copyright = 'YYYY-YYYY Author Name'`

If the string `'%Y'` appears in a copyright line, it will be replaced with the current four-digit year. For example:

- `copyright = '%Y'`
- `copyright = '%Y, Author Name'`
- `copyright = 'YYYY-%Y, Author Name'`

Added in version 3.5: The `project_copyright` alias.

Changed in version 7.1: The value may now be a sequence of copyright statements in the above form, which will be displayed each to their own line.

Changed in version 8.1: Copyright statements support the `'%Y'` placeholder.

version[¬∂](configuration.html#confval-version "Link to this definition")

Type:

`str`

Default:

`''`

The major project version, used as the replacement for the `|version|` [default substitution](restructuredtext/roles.html#default-substitutions).

This may be something like `version = '4.2'`. The full project version is defined in [`release`](configuration.html#confval-release).

If your project does not draw a meaningful distinction between between a ‚Äòfull‚Äô and ‚Äòmajor‚Äô version, set both `version` and `release` to the same value.

release[¬∂](configuration.html#confval-release "Link to this definition")

Type:

`str`

Default:

`''`

The full project version, used as the replacement for the `|release|` [default substitution](restructuredtext/roles.html#default-substitutions), and e.g. in the HTML templates.

This may be something like `release = '4.2.1b0'`. The major (short) project version is defined in [`version`](configuration.html#confval-version).

If your project does not draw a meaningful distinction between between a ‚Äòfull‚Äô and ‚Äòmajor‚Äô version, set both `version` and `release` to the same value.

## General configuration[¬∂](configuration.html#general-configuration "Link to this heading")

needs\_sphinx[¬∂](configuration.html#confval-needs_sphinx "Link to this definition")

Type:

`str`

Default:

`''`

Set a minimum supported version of Sphinx required to build the project. The format should be a `'major.minor'` version string like `'1.1'` Sphinx will compare it with its version and refuse to build the project if the running version of Sphinx is too old. By default, there is no minimum version.

Added in version 1.0.

Changed in version 1.4: Allow a `'major.minor.micro'` version string.

extensions[¬∂](configuration.html#confval-extensions "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of strings that are module names of [Sphinx extensions](extensions/index.html). These can be extensions bundled with Sphinx (named `sphinx.ext.*`) or custom first-party or third-party extensions.

To use a third-party extension, you must ensure that it is installed and include it in the `extensions` list, like so:

```
extensions = [
    ...
    'numpydoc',
]
```

There are two options for first-party extensions. The configuration file itself can be an extension; for that, you only need to provide a `setup()` function in it. Otherwise, you must ensure that your custom extension is importable, and located in a directory that is in the Python path.

Ensure that absolute paths are used when modifying [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)"). If your custom extensions live in a directory that is relative to the [configuration directory](../glossary.html#term-configuration-directory), use [`pathlib.Path.resolve()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.resolve "(in Python v3.13)") like so:

```
import sys
from pathlib import Path

sys.path.append(str(Path('sphinxext').resolve()))

extensions = [
   ...
   'extname',
]
```

The directory structure illustrated above would look like this:

```
<project directory>/
‚îú‚îÄ‚îÄ conf.py
‚îî‚îÄ‚îÄ sphinxext/
 ¬†¬† ‚îî‚îÄ‚îÄ extname.py
```

needs\_extensions[¬∂](configuration.html#confval-needs_extensions "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

If set, this value must be a dictionary specifying version requirements for extensions in [`extensions`](configuration.html#confval-extensions). The version strings should be in the `'major.minor'` form. Requirements do not have to be specified for all extensions, only for those you want to check. Example:

```
needs_extensions = {
    'sphinxcontrib.something': '1.5',
}
```

This requires that the extension declares its version in the `setup()` function. See [Sphinx API](../extdev/index.html#dev-extensions) for further details.

Added in version 1.3.

manpages\_url[¬∂](configuration.html#confval-manpages_url "Link to this definition")

Type:

`str`

Default:

`''`

A URL to cross-reference [`manpage`](restructuredtext/roles.html#role-manpage "manpage role") roles. If this is defined to `https://manpages.debian.org/{path}`, the ``:manpage:`man(1)` `` role will link to &lt;[https://manpages.debian.org/man(1)](https://manpages.debian.org/man%281%29)&gt;. The patterns available are:

`page`

The manual page (`man`)

`section`

The manual section (`1`)

`path`

The original manual page and section specified (`man(1)`)

This also supports manpages specified as `man.1`.

```
# To use manpages.debian.org:
manpages_url = 'https://manpages.debian.org/{path}'
# To use man7.org:
manpages_url = 'https://man7.org/linux/man-pages/man{section}/{page}.{section}.html'
# To use linux.die.net:
manpages_url = 'https://linux.die.net/man/{section}/{page}'
# To use helpmanual.io:
manpages_url = 'https://helpmanual.io/man{section}/{page}'
```

Added in version 1.7.

today[¬∂](configuration.html#confval-today "Link to this definition")

today\_fmt[¬∂](configuration.html#confval-today_fmt "Link to this definition")

These values determine how to format the current date, used as the replacement for the `|today|` [default substitution](restructuredtext/roles.html#default-substitutions).

- If you set [`today`](configuration.html#confval-today) to a non-empty value, it is used.
- Otherwise, the current time is formatted using [`time.strftime()`](https://docs.python.org/3/library/time.html#time.strftime "(in Python v3.13)") and the format given in [`today_fmt`](configuration.html#confval-today_fmt).

The default for [`today`](configuration.html#confval-today) is `''`, and the default for [`today_fmt`](configuration.html#confval-today_fmt) is `'%b %d, %Y'` (or, if translation is enabled with [`language`](configuration.html#confval-language), an equivalent format for the selected locale).

### Options for figure numbering[¬∂](configuration.html#options-for-figure-numbering "Link to this heading")

numfig[¬∂](configuration.html#confval-numfig "Link to this definition")

Type:

`bool`

Default:

`False`

If `True`, figures, tables and code-blocks are automatically numbered if they have a caption. The [`numref`](referencing.html#role-numref "numref role") role is enabled. Obeyed so far only by HTML and LaTeX builders.

Note

The LaTeX builder always assigns numbers whether this option is enabled or not.

Added in version 1.3.

numfig\_format[¬∂](configuration.html#confval-numfig_format "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

A dictionary mapping `'figure'`, `'table'`, `'code-block'` and `'section'` to strings that are used for format of figure numbers. The marker `%s` will be replaced with the figure number.

The defaults are:

```
numfig_format = {
    'code-block': 'Listing %s',
    'figure': 'Fig. %s',
    'section': 'Section',
    'table': 'Table %s',
}
```

Added in version 1.3.

numfig\_secnum\_depth[¬∂](configuration.html#confval-numfig_secnum_depth "Link to this definition")

Type:

`int`

Default:

`1`

- If set to `0`, figures, tables, and code-blocks are continuously numbered starting at `1`.
- If `1`, the numbering will be `x.1`, `x.2`, ‚Ä¶ with `x` representing the section number. (If there is no top-level section, the prefix will not be added ). This naturally applies only if section numbering has been activated via the `:numbered:` option of the [`toctree`](restructuredtext/directives.html#directive-toctree "toctree directive") directive.
- If `2`, the numbering will be `x.y.1`, `x.y.2`, ‚Ä¶ with `x` representing the section number and `y` the sub-section number. If located directly under a section, there will be no `y.` prefix, and if there is no top-level section, the prefix will not be added.
- Any other positive integer can be used, following the rules above.

Added in version 1.3.

Changed in version 1.7: The LaTeX builder obeys this setting if [`numfig`](configuration.html#confval-numfig) is set to `True`.

### Options for highlighting[¬∂](configuration.html#options-for-highlighting "Link to this heading")

highlight\_language[¬∂](configuration.html#confval-highlight_language "Link to this definition")

Type:

`str`

Default:

`'default'`

The default language to highlight source code in. The default is `'default'`, which suppresses warnings if highlighting as Python code fails.

The value should be a valid Pygments lexer name, see [Showing code examples](restructuredtext/directives.html#code-examples) for more details.

Added in version 0.5.

Changed in version 1.4: The default is now `'default'`.

highlight\_options[¬∂](configuration.html#confval-highlight_options "Link to this definition")

Type:

`dict[str, dict[str, Any]]`

Default:

`{}`

A dictionary that maps Pygments lexer names to their options. These are lexer-specific; for the options understood by each, see the [Pygments documentation](https://pygments.org/docs/lexers).

Example:

```
highlight_options = {
  'default': {'stripall': True},
  'php': {'startinline': True},
}
```

Added in version 1.3.

Changed in version 3.5: Allow configuring highlight options for multiple lexers.

pygments\_style[¬∂](configuration.html#confval-pygments_style "Link to this definition")

Type:

`str`

Default:

`'sphinx'`

The style name to use for Pygments highlighting of source code. If not set, either the theme‚Äôs default style or `'sphinx'` is selected for HTML output.

Changed in version 0.3: If the value is a fully-qualified name of a custom Pygments style class, this is then used as custom style.

### Options for HTTP requests[¬∂](configuration.html#options-for-http-requests "Link to this heading")

tls\_verify[¬∂](configuration.html#confval-tls_verify "Link to this definition")

Type:

`bool`

Default:

`True`

If True, Sphinx verifies server certificates.

Added in version 1.5.

tls\_cacerts[¬∂](configuration.html#confval-tls_cacerts "Link to this definition")

Type:

`str | dict[str, str]`

Default:

`''`

A path to a certification file of CA or a path to directory which contains the certificates. This also allows a dictionary mapping hostnames to the certificate file path. The certificates are used to verify server certifications.

Added in version 1.5.

Tip

Sphinx uses [requests](https://requests.readthedocs.io/) as a HTTP library internally. If `tls_cacerts` is not set, Sphinx falls back to requests‚Äô default behaviour. See [SSL Cert Verification](https://requests.readthedocs.io/en/latest/user/advanced/#verification "(in Requests v2.32.3)") for further details.

user\_agent[¬∂](configuration.html#confval-user_agent "Link to this definition")

Type:

`str`

Default:

`'Mozilla/5.0 (X11; Linux x86_64; rv:100.0) Gecko/20100101 Firefox/100.0 Sphinx/X.Y.Z'`

Set the User-Agent used by Sphinx for HTTP requests.

Added in version 2.3.

### Options for internationalisation[¬∂](configuration.html#options-for-internationalisation "Link to this heading")

These options influence Sphinx‚Äôs *Native Language Support*. See the documentation on [Internationalization](advanced/intl.html#intl) for details.

language[¬∂](configuration.html#confval-language "Link to this definition")

Type:

`str`

Default:

`'en'`

The code for the language the documents are written in. Any text automatically generated by Sphinx will be in that language. Also, Sphinx will try to substitute individual paragraphs from your documents with the translation sets obtained from [`locale_dirs`](configuration.html#confval-locale_dirs). Sphinx will search language-specific figures named by [`figure_language_filename`](configuration.html#confval-figure_language_filename) (e.g. the German version of `myfigure.png` will be `myfigure.de.png` by default setting) and substitute them for original figures. In the LaTeX builder, a suitable language will be selected as an option for the *Babel* package.

Added in version 0.5.

Changed in version 1.4: Support figure substitution

Changed in version 5.0: The default is now `'en'` (previously `None`).

Currently supported languages by Sphinx are:

- `ar` ‚Äì Arabic
- `bg` ‚Äì Bulgarian
- `bn` ‚Äì Bengali
- `ca` ‚Äì Catalan
- `cak` ‚Äì Kaqchikel
- `cs` ‚Äì Czech
- `cy` ‚Äì Welsh
- `da` ‚Äì Danish
- `de` ‚Äì German
- `el` ‚Äì Greek
- `en` ‚Äì English (default)
- `eo` ‚Äì Esperanto
- `es` ‚Äì Spanish
- `et` ‚Äì Estonian
- `eu` ‚Äì Basque
- `fa` ‚Äì Iranian
- `fi` ‚Äì Finnish
- `fr` ‚Äì French
- `he` ‚Äì Hebrew
- `hi` ‚Äì Hindi
- `hi_IN` ‚Äì Hindi (India)
- `hr` ‚Äì Croatian
- `hu` ‚Äì Hungarian
- `id` ‚Äì Indonesian
- `it` ‚Äì Italian
- `ja` ‚Äì Japanese
- `ko` ‚Äì Korean
- `lt` ‚Äì Lithuanian
- `lv` ‚Äì Latvian
- `mk` ‚Äì Macedonian
- `nb_NO` ‚Äì Norwegian Bokmal
- `ne` ‚Äì Nepali
- `nl` ‚Äì Dutch
- `pl` ‚Äì Polish
- `pt` ‚Äì Portuguese
- `pt_BR` ‚Äì Brazilian Portuguese
- `pt_PT` ‚Äì European Portuguese
- `ro` ‚Äì Romanian
- `ru` ‚Äì Russian
- `si` ‚Äì Sinhala
- `sk` ‚Äì Slovak
- `sl` ‚Äì Slovenian
- `sq` ‚Äì Albanian
- `sr` ‚Äì Serbian
- `sr@latin` ‚Äì Serbian (Latin)
- `sr_RS` ‚Äì Serbian (Cyrillic)
- `sv` ‚Äì Swedish
- `ta` ‚Äì Tamil
- `te` ‚Äì Telugu
- `tr` ‚Äì Turkish
- `uk_UA` ‚Äì Ukrainian
- `ur` ‚Äì Urdu
- `vi` ‚Äì Vietnamese
- `zh_CN` ‚Äì Simplified Chinese
- `zh_TW` ‚Äì Traditional Chinese

locale\_dirs[¬∂](configuration.html#confval-locale_dirs "Link to this definition")

Type:

`list[str]`

Default:

`['locales']`

Directories in which to search for additional message catalogs (see [`language`](configuration.html#confval-language)), relative to the source directory. The directories on this path are searched by the [`gettext`](https://docs.python.org/3/library/gettext.html#module-gettext "(in Python v3.13)") module.

Internal messages are fetched from a text domain of `sphinx`; so if you add the directory `./locales` to this setting, the message catalogs (compiled from `.po` format using **msgfmt**) must be in `./locales/language/LC_MESSAGES/sphinx.mo`. The text domain of individual documents depends on [`gettext_compact`](configuration.html#confval-gettext_compact).

Note

The [`-v option to sphinx-build`](../man/sphinx-build.html#cmdoption-sphinx-build-v) is useful to check the `locale_dirs` setting is working as expected. If the message catalog directory not found, debug messages are emitted.

Added in version 0.5.

Changed in version 1.5: Use `locales` directory as a default value

gettext\_allow\_fuzzy\_translations[¬∂](configuration.html#confval-gettext_allow_fuzzy_translations "Link to this definition")

Type:

`bool`

Default:

`False`

If True, ‚Äúfuzzy‚Äù messages in the message catalogs are used for translation.

Added in version 4.3.

gettext\_compact[¬∂](configuration.html#confval-gettext_compact "Link to this definition")

Type:

`bool | str`

Default:

`True`

- If `True`, a document‚Äôs text domain is its docname if it is a top-level project file and its very base directory otherwise.
- If `False`, a document‚Äôs text domain is the docname, in full.
- If set to a string, every document‚Äôs text domain is set to this string, making all documents use single text domain.

With `gettext_compact = True`, the document `markup/code.rst` ends up in the `markup` text domain. With this option set to `False`, it is `markup/code`. With this option set to `'sample'`, it is `sample`.

Added in version 1.1.

Changed in version 3.3: Allow string values.

gettext\_uuid[¬∂](configuration.html#confval-gettext_uuid "Link to this definition")

Type:

`bool`

Default:

`False`

If `True`, Sphinx generates UUID information for version tracking in message catalogs. It is used to:

- Add a UUID line for each *msgid* in `.pot` files.
- Calculate similarity between new msgids and previously saved old msgids. (This calculation can take a long time.)

Tip

If you want to accelerate the calculation, you can use a third-party package ([Levenshtein](https://pypi.org/project/Levenshtein/)) by running **pip install levenshtein**.

Added in version 1.3.

gettext\_location[¬∂](configuration.html#confval-gettext_location "Link to this definition")

Type:

`bool`

Default:

`True`

If `True`, Sphinx generates location information for messages in message catalogs.

Added in version 1.3.

gettext\_auto\_build[¬∂](configuration.html#confval-gettext_auto_build "Link to this definition")

Type:

`bool`

Default:

`True`

If `True`, Sphinx builds a `.mo` file for each translation catalog file.

Added in version 1.3.

gettext\_additional\_targets[¬∂](configuration.html#confval-gettext_additional_targets "Link to this definition")

Type:

`set[str] | Sequence[str]`

Default:

`[]`

Enable `gettext` translation for certain element types. Example:

```
gettext_additional_targets = {'literal-block', 'image'}
```

The following element types are supported:

- `'index'` ‚Äì index terms
- `'literal-block'` ‚Äì literal blocks (`::` annotation and `code-block` directive)
- `'doctest-block'` ‚Äì doctest block
- `'raw'` ‚Äì raw content
- `'image'` ‚Äì image/figure uri

Added in version 1.3.

Changed in version 4.0: The alt text for images is translated by default.

Changed in version 7.4: Permit and prefer a set type.

figure\_language\_filename[¬∂](configuration.html#confval-figure_language_filename "Link to this definition")

Type:

`str`

Default:

`'{root}.{language}{ext}'`

The filename format for language-specific figures. The available format tokens are:

- `{root}`: the filename, including any path component, without the file extension. For example: `images/filename`.
- `{path}`: the directory path component of the filename, with a trailing slash if non-empty. For example: `images/`.
- `{basename}`: the filename without the directory path or file extension components. For example: `filename`.
- `{ext}`: the file extension. For example: `.png`.
- `{language}`: the translation language. For example: `en`.
- `{docpath}`: the directory path component for the current document, with a trailing slash if non-empty. For example: `dirname/`.

By default, an image directive `.. image:: images/filename.png`, using an image at `images/filename.png`, will use the language-specific figure filename `images/filename.en.png`.

If `figure_language_filename` is set as below, the language-specific figure filename will be `images/en/filename.png` instead.

```
figure_language_filename = '{path}{language}/{basename}{ext}'
```

Added in version 1.4.

Changed in version 1.5: Added `{path}` and `{basename}` tokens.

Changed in version 3.2: Added `{docpath}` token.

translation\_progress\_classes[¬∂](configuration.html#confval-translation_progress_classes "Link to this definition")

Type:

`bool | 'translated' | 'untranslated'`

Default:

`False`

Control which, if any, classes are added to indicate translation progress. This setting would likely only be used by translators of documentation, in order to quickly indicate translated and untranslated content.

`True`

Add `translated` and `untranslated` classes to all nodes with translatable content.

`'translated'`

Only add the `translated` class.

`'untranslated'`

Only add the `untranslated` class.

`False`

Do not add any classes to indicate translation progress.

Added in version 7.1.

### Options for markup[¬∂](configuration.html#options-for-markup "Link to this heading")

default\_role[¬∂](configuration.html#confval-default_role "Link to this definition")

Type:

`str`

Default:

`None`

The name of a reStructuredText role (builtin or Sphinx extension) to use as the default role, that is, for text marked up `` `like this` ``. This can be set to `'py:obj'` to make `` `filter` `` a cross-reference to the Python function ‚Äúfilter‚Äù.

The default role can always be set within individual documents using the standard reStructuredText [default-role](https://docutils.sourceforge.io/docs/ref/rst/directives.html#default-role) directive.

Added in version 0.4.

keep\_warnings[¬∂](configuration.html#confval-keep_warnings "Link to this definition")

Type:

`bool`

Default:

`False`

Keep warnings as ‚Äúsystem message‚Äù paragraphs in the rendered documents. Warnings are always written to the standard error stream when **sphinx-build** is run, regardless of this setting.

Added in version 0.5.

option\_emphasise\_placeholders[¬∂](configuration.html#confval-option_emphasise_placeholders "Link to this definition")

Type:

`bool`

Default:

`False`

When enabled, emphasise placeholders in [`option`](domains/standard.html#directive-option "option directive") directives. To display literal braces, escape with a backslash (`\{`). For example, `option_emphasise_placeholders=True` and `.. option:: -foption={TYPE}` would render with `TYPE` emphasised.

Added in version 5.1.

primary\_domain[¬∂](configuration.html#confval-primary_domain "Link to this definition")

Type:

`str`

Default:

`'py'`

The name of the default [domain](domains/index.html). Can also be `None` to disable a default domain. The default is `'py'`, for the Python domain.

Those objects in other domain (whether the domain name is given explicitly, or selected by a [`default-domain`](domains/index.html#directive-default-domain "default-domain directive") directive) will have the domain name explicitly prepended when named (e.g., when the default domain is C, Python functions will be named ‚ÄúPython function‚Äù, not just ‚Äúfunction‚Äù). Example:

```
primary_domain = 'cpp'
```

Added in version 1.0.

rst\_epilog[¬∂](configuration.html#confval-rst_epilog "Link to this definition")

Type:

`str`

Default:

`''`

A string of reStructuredText that will be included at the end of every source file that is read. This is a possible place to add substitutions that should be available in every file (another being [`rst_prolog`](configuration.html#confval-rst_prolog)). Example:

```
rst_epilog = """
.. |psf| replace:: Python Software Foundation
"""
```

Added in version 0.6.

rst\_prolog[¬∂](configuration.html#confval-rst_prolog "Link to this definition")

Type:

`str`

Default:

`''`

A string of reStructuredText that will be included at the beginning of every source file that is read. This is a possible place to add substitutions that should be available in every file (another being [`rst_epilog`](configuration.html#confval-rst_epilog)). Example:

```
rst_prolog = """
.. |psf| replace:: Python Software Foundation
"""
```

Added in version 1.0.

show\_authors[¬∂](configuration.html#confval-show_authors "Link to this definition")

Type:

`bool`

Default:

`False`

A boolean that decides whether [`codeauthor`](restructuredtext/directives.html#directive-codeauthor "codeauthor directive") and [`sectionauthor`](restructuredtext/directives.html#directive-sectionauthor "sectionauthor directive") directives produce any output in the built files.

trim\_footnote\_reference\_space[¬∂](configuration.html#confval-trim_footnote_reference_space "Link to this definition")

Type:

`bool`

Default:

`False`

Trim spaces before footnote references that are necessary for the reStructuredText parser to recognise the footnote, but do not look too nice in the output.

Added in version 0.6.

### Options for Maths[¬∂](configuration.html#options-for-maths "Link to this heading")

These options control maths markup and notation.

math\_eqref\_format[¬∂](configuration.html#confval-math_eqref_format "Link to this definition")

Type:

`str`

Default:

`'({number})'`

A string used for formatting the labels of references to equations. The `{number}` place-holder stands for the equation number.

Example: `'Eq.{number}'` gets rendered as, for example, `Eq.10`.

Added in version 1.7.

math\_number\_all[¬∂](configuration.html#confval-math_number_all "Link to this definition")

Type:

`bool`

Default:

`False`

Force all displayed equations to be numbered. Example:

```
math_number_all = True
```

Added in version 1.4.

math\_numfig[¬∂](configuration.html#confval-math_numfig "Link to this definition")

Type:

`bool`

Default:

`True`

If `True`, displayed math equations are numbered across pages when [`numfig`](configuration.html#confval-numfig) is enabled. The [`numfig_secnum_depth`](configuration.html#confval-numfig_secnum_depth) setting is respected. The [`eq`](restructuredtext/roles.html#role-eq "eq role"), not [`numref`](referencing.html#role-numref "numref role"), role must be used to reference equation numbers.

Added in version 1.7.

math\_numsep[¬∂](configuration.html#confval-math_numsep "Link to this definition")

Type:

`str`

Default:

`'.'`

A string that defines the separator between section numbers and the equation number when [`numfig`](configuration.html#confval-numfig) is enabled and [`numfig_secnum_depth`](configuration.html#confval-numfig_secnum_depth) is positive.

Example: `'-'` gets rendered as `1.2-3`.

Added in version 7.4.

### Options for the nitpicky mode[¬∂](configuration.html#options-for-the-nitpicky-mode "Link to this heading")

nitpicky[¬∂](configuration.html#confval-nitpicky "Link to this definition")

Type:

`bool`

Default:

`False`

Enables nitpicky mode if `True`. In nitpicky mode, Sphinx will warn about *all* references where the target cannot be found. This is recommended for new projects as it ensures that all references are to valid targets.

You can activate this mode temporarily using the [`--nitpicky`](../man/sphinx-build.html#cmdoption-sphinx-build-n) command-line option. See [`nitpick_ignore`](configuration.html#confval-nitpick_ignore) for a way to mark missing references as ‚Äúknown missing‚Äù.

```
nitpicky = True
```

Added in version 1.0.

nitpick\_ignore[¬∂](configuration.html#confval-nitpick_ignore "Link to this definition")

Type:

`set[tuple[str, str]] | Sequence[tuple[str, str]]`

Default:

`()`

A set or list of `(warning_type, target)` tuples that should be ignored when generating warnings in [`"nitpicky mode"`](configuration.html#confval-nitpicky). Note that `warning_type` should include the domain name if present. Example:

```
nitpick_ignore = {
    ('py:func', 'int'),
    ('envvar', 'LD_LIBRARY_PATH'),
}
```

Added in version 1.1.

Changed in version 6.2: Changed allowable container types to a set, list, or tuple

nitpick\_ignore\_regex[¬∂](configuration.html#confval-nitpick_ignore_regex "Link to this definition")

Type:

`set[tuple[str, str]] | Sequence[tuple[str, str]]`

Default:

`()`

An extended version of [`nitpick_ignore`](configuration.html#confval-nitpick_ignore), which instead interprets the `warning_type` and `target` strings as regular expressions. Note that the regular expression must match the whole string (as if the `^` and `$` markers were inserted).

For example, `(r'py:.*', r'foo.*bar\.B.*')` will ignore nitpicky warnings for all python entities that start with `'foo'` and have `'bar.B'` in them, such as `('py:const', 'foo_package.bar.BAZ_VALUE')` or `('py:class', 'food.bar.Barman')`.

Added in version 4.1.

Changed in version 6.2: Changed allowable container types to a set, list, or tuple

### Options for object signatures[¬∂](configuration.html#options-for-object-signatures "Link to this heading")

add\_function\_parentheses[¬∂](configuration.html#confval-add_function_parentheses "Link to this definition")

Type:

`bool`

Default:

`True`

A boolean that decides whether parentheses are appended to function and method role text (e.g. the content of ``:func:`input` ``) to signify that the name is callable.

maximum\_signature\_line\_length[¬∂](configuration.html#confval-maximum_signature_line_length "Link to this definition")

Type:

`int | None`

Default:

`None`

If a signature‚Äôs length in characters exceeds the number set, each parameter within the signature will be displayed on an individual logical line.

When `None`, there is no maximum length and the entire signature will be displayed on a single logical line.

A ‚Äòlogical line‚Äô is similar to a hard line break‚Äîbuilders or themes may choose to ‚Äòsoft wrap‚Äô a single logical line, and this setting does not affect that behaviour.

Domains may provide options to suppress any hard wrapping on an individual object directive, such as seen in the C, C++, and Python domains (e.g. [`py:function:single-line-parameter-list`](domains/python.html#directive-option-py-function-single-line-parameter-list "py:function:single-line-parameter-list directive:option")).

Added in version 7.1.

strip\_signature\_backslash[¬∂](configuration.html#confval-strip_signature_backslash "Link to this definition")

Type:

`bool`

Default:

`False`

When backslash stripping is enabled then every occurrence of `\\` in a domain directive will be changed to `\`, even within string literals. This was the behaviour before version 3.0, and setting this variable to `True` will reinstate that behaviour.

Added in version 3.0.

toc\_object\_entries[¬∂](configuration.html#confval-toc_object_entries "Link to this definition")

Type:

`bool`

Default:

`True`

Create table of contents entries for domain objects (e.g. functions, classes, attributes, etc.).

Added in version 5.2.

toc\_object\_entries\_show\_parents[¬∂](configuration.html#confval-toc_object_entries_show_parents "Link to this definition")

Type:

`'domain' | 'hide' | 'all'`

Default:

`'domain'`

A string that determines how domain objects (functions, classes, attributes, etc.) are displayed in their table of contents entry.

Use `'domain'` to allow the domain to determine the appropriate number of parents to show. For example, the Python domain would show `Class.method()` and `function()`, leaving out the `module.` level of parents.

Use `'hide'` to only show the name of the element without any parents (i.e. `method()`).

Use `'all'` to show the fully-qualified name for the object (i.e. `module.Class.method()`), displaying all parents.

Added in version 5.2.

### Options for source files[¬∂](configuration.html#options-for-source-files "Link to this heading")

exclude\_patterns[¬∂](configuration.html#confval-exclude_patterns "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of [glob-style patterns](configuration.html#glob-style-patterns) that should be excluded when looking for source files. They are matched against the source file names relative to the source directory, using slashes as directory separators on all platforms. [`exclude_patterns`](configuration.html#confval-exclude_patterns) has priority over [`include_patterns`](configuration.html#confval-include_patterns).

Example patterns:

- `'library/xml.rst'` ‚Äì ignores the `library/xml.rst` file
- `'library/xml'` ‚Äì ignores the `library/xml` directory
- `'library/xml*'` ‚Äì ignores all files and directories starting with `library/xml`
- `'**/.git'` ‚Äì ignores all `.git` directories
- `'Thumbs.db'` ‚Äì ignores all `Thumbs.db` files

[`exclude_patterns`](configuration.html#confval-exclude_patterns) is also consulted when looking for static files in [`html_static_path`](configuration.html#confval-html_static_path) and [`html_extra_path`](configuration.html#confval-html_extra_path).

Added in version 1.0.

include\_patterns[¬∂](configuration.html#confval-include_patterns "Link to this definition")

Type:

`Sequence[str]`

Default:

`('**',)`

A list of [glob-style patterns](configuration.html#glob-style-patterns) that are used to find source files. They are matched against the source file names relative to the source directory, using slashes as directory separators on all platforms. By default, all files are recursively included from the source directory. [`exclude_patterns`](configuration.html#confval-exclude_patterns) has priority over [`include_patterns`](configuration.html#confval-include_patterns).

Example patterns:

- `'**'` ‚Äì all files in the source directory and subdirectories, recursively
- `'library/xml'` ‚Äì just the `library/xml` directory
- `'library/xml*'` ‚Äì all files and directories starting with `library/xml`
- `'**/doc'` ‚Äì all `doc` directories (this might be useful if documentation is co-located with source files)

Added in version 5.1.

master\_doc[¬∂](configuration.html#confval-master_doc "Link to this definition")

root\_doc[¬∂](configuration.html#confval-root_doc "Link to this definition")

Type:

`str`

Default:

`'index'`

Sphinx builds a tree of documents based on the [`toctree`](restructuredtext/directives.html#directive-toctree "toctree directive") directives contained within the source files. This sets the name of the document containing the master `toctree` directive, and hence the root of the entire tree. Example:

```
master_doc = 'contents'
```

Changed in version 2.0: Default is `'index'` (previously `'contents'`).

Added in version 4.0: The `root_doc` alias.

source\_encoding[¬∂](configuration.html#confval-source_encoding "Link to this definition")

Type:

`str`

Default:

`'utf-8-sig'`

The file encoding of all source files. The recommended encoding is `'utf-8-sig'`.

Added in version 0.5.

source\_suffix[¬∂](configuration.html#confval-source_suffix "Link to this definition")

Type:

`dict[str, str] | Sequence[str] | str`

Default:

`{'.rst': 'restructuredtext'}`

A dictionary mapping the file extensions (suffixes) of source files to their file types. Sphinx considers all files files with suffixes in `source_suffix` to be source files. Example:

```
source_suffix = {
    '.rst': 'restructuredtext',
    '.txt': 'restructuredtext',
    '.md': 'markdown',
}
```

By default, Sphinx only supports the `'restructuredtext'` file type. Further file types can be added with extensions that register different source file parsers, such as [MyST-Parser](https://myst-parser.readthedocs.io/). Refer to the extension‚Äôs documentation to see which file types it supports.

If the value is a string or sequence of strings, Sphinx will consider that they are all `'restructuredtext'` files.

Note

File extensions must begin with a dot (`'.'`).

Changed in version 1.3: Support a list of file extensions.

Changed in version 1.8: Change to a map of file extensions to file types.

### Options for smart quotes[¬∂](configuration.html#options-for-smart-quotes "Link to this heading")

smartquotes[¬∂](configuration.html#confval-smartquotes "Link to this definition")

Type:

`bool`

Default:

`True`

If `True`, the [Smart Quotes transform](https://docutils.sourceforge.io/docs/user/smartquotes.html) will be used to convert quotation marks and dashes to typographically correct entities.

Added in version 1.6.6: Replaces the now-removed `html_use_smartypants`. It applies by default to all builders except `man` and `text` (see [`smartquotes_excludes`](configuration.html#confval-smartquotes_excludes).)

Note

A [docutils.conf](https://docutils.sourceforge.io/docs/user/config.html) file located in the [configuration directory](../glossary.html#term-configuration-directory) (or a global `~/.docutils` file) is obeyed unconditionally if it *deactivates* smart quotes via the corresponding [Docutils option](https://docutils.sourceforge.io/docs/user/config.html#smart-quotes). But if it *activates* them, then [`smartquotes`](configuration.html#confval-smartquotes) does prevail.

smartquotes\_action[¬∂](configuration.html#confval-smartquotes_action "Link to this definition")

Type:

`str`

Default:

`'qDe'`

Customise the Smart Quotes transform. See below for the permitted codes. The default `'qDe'` educates normal **q**uote characters `"`, `'`, em- and en-**D**ashes `---`, `--`, and **e**llipses `...`..

`'q'`

Convert quotation marks

`'b'`

Convert backtick quotation marks (``` ``double''``` only)

`'B'`

Convert backtick quotation marks (``` ``double''``` and `` `single'``)

`'d'`

Convert dashes (convert `--` to em-dashes and `---` to en-dashes)

`'D'`

Convert dashes (old school) (convert `--` to en-dashes and `---` to em-dashes)

`'i'`

Convert dashes (inverted old school) (convert `--` to em-dashes and `---` to en-dashes)

`'e'`

Convert ellipses `...`

`'w'`

Convert `'&quot;'` entities to `'"'`

Added in version 1.6.6.

smartquotes\_excludes[¬∂](configuration.html#confval-smartquotes_excludes "Link to this definition")

Type:

`dict[str, list[str]]`

Default:

`{'languages': ['ja'], 'builders': ['man', 'text']}`

Control when the Smart Quotes transform is disabled. Permitted keys are `'builders'` and `'languages'`, and The values are lists of strings.

Each entry gives a sufficient condition to ignore the [`smartquotes`](configuration.html#confval-smartquotes) setting and deactivate the Smart Quotes transform. Example:

```
smartquotes_excludes = {
    'languages': ['ja'],
    'builders': ['man', 'text'],
}
```

Note

Currently, in case of invocation of **make** with multiple targets, the first target name is the only one which is tested against the `'builders'` entry and it decides for all. Also, a `make text` following `make html` needs to be issued in the form `make text SPHINXOPTS="-E"` to force re-parsing of source files, as the cached ones are already transformed. On the other hand the issue does not arise with direct usage of **sphinx-build** as it caches (in its default usage) the parsed source files in per builder locations.

Hint

An alternative way to effectively deactivate (or customise) the smart quotes for a given builder, for example `latex`, is to use `make` this way:

```
make latex SPHINXOPTS="-D smartquotes_action="
```

This can follow some `make html` with no problem, in contrast to the situation from the prior note.

Added in version 1.6.6.

### Options for templating[¬∂](configuration.html#options-for-templating "Link to this heading")

template\_bridge[¬∂](configuration.html#confval-template_bridge "Link to this definition")

Type:

`str`

Default:

`''`

A string with the fully-qualified name of a callable (or simply a class) that returns an instance of [`TemplateBridge`](../extdev/appapi.html#sphinx.application.TemplateBridge "sphinx.application.TemplateBridge"). This instance is then used to render HTML documents, and possibly the output of other builders (currently the changes builder). (Note that the template bridge must be made theme-aware if HTML themes are to be used.) Example:

```
template_bridge = 'module.CustomTemplateBridge'
```

templates\_path[¬∂](configuration.html#confval-templates_path "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of paths that contain extra templates (or templates that overwrite builtin/theme-specific templates). Relative paths are taken as relative to the [configuration directory](../glossary.html#term-configuration-directory). Example:

```
templates_path = ['.templates']
```

Changed in version 1.3: As these files are not meant to be built, they are automatically excluded when discovering source files.

### Options for warning control[¬∂](configuration.html#options-for-warning-control "Link to this heading")

show\_warning\_types[¬∂](configuration.html#confval-show_warning_types "Link to this definition")

Type:

`bool`

Default:

`True`

Add the type of each warning as a suffix to the warning message. For example, `WARNING: [...] [index]` or `WARNING: [...] [toc.circular]`. This setting can be useful for determining which warnings types to include in a [`suppress_warnings`](configuration.html#confval-suppress_warnings) list.

Added in version 7.3.0.

Changed in version 8.0.0: The default is now `True`.

suppress\_warnings[¬∂](configuration.html#confval-suppress_warnings "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of warning codes to suppress arbitrary warning messages.

Added in version 1.4.

By default, Sphinx supports the following warning codes:

- `app.add_directive`
- `app.add_generic_role`
- `app.add_node`
- `app.add_role`
- `app.add_source_parser`
- `config.cache`
- `docutils`
- `download.not_readable`
- `duplicate_declaration.c`
- `duplicate_declaration.cpp`
- `epub.duplicated_toc_entry`
- `epub.unknown_project_files`
- `i18n.babel`
- `i18n.inconsistent_references`
- `i18n.not_readable`
- `i18n.not_writeable`
- `image.not_readable`
- `index`
- `misc.copy_overwrite`
- `misc.highlighting_failure`
- `ref.any`
- `ref.citation`
- `ref.doc`
- `ref.footnote`
- `ref.keyword`
- `ref.numref`
- `ref.option`
- `ref.python`
- `ref.ref`
- `ref.term`
- `toc.circular`
- `toc.duplicate_entry`
- `toc.empty_glob`
- `toc.excluded`
- `toc.no_title`
- `toc.not_included`
- `toc.not_readable`
- `toc.secnum`

Extensions can also define their own warning types. Those defined by the first-party `sphinx.ext` extensions are:

- `autodoc`
- `autodoc.import_object`
- `autodoc.mocked_object`
- `autosectionlabel.<document name>`
- `autosummary`
- `autosummary.import_cycle`
- `intersphinx.external`

You can choose from these types. You can also give only the first component to exclude all warnings attached to it.

Added in version 1.4: `ref.citation`, `ref.doc`, `ref.keyword`, `ref.numref`, `ref.option`, `ref.ref`, and `ref.term`.

Added in version 1.4.2: `app.add_directive`, `app.add_generic_role`, `app.add_node`, `app.add_role`, and `app.add_source_parser`.

Added in version 1.5: `misc.highlighting_failure`.

Added in version 1.5.1: `epub.unknown_project_files`.

Added in version 1.5.2: `toc.secnum`.

Added in version 1.6: `ref.footnote`, `download.not_readable`, and `image.not_readable`.

Added in version 1.7: `ref.python`.

Added in version 2.0: `autodoc.import_object`.

Added in version 2.1: `autosectionlabel.<document name>`.

Added in version 3.1: `toc.circular`.

Added in version 3.3: `epub.duplicated_toc_entry`.

Added in version 4.3: `toc.excluded` and `toc.not_readable`.

Added in version 4.5: `i18n.inconsistent_references`.

Added in version 7.1: `index`.

Added in version 7.3: `config.cache`, `intersphinx.external`, and `toc.no_title`.

Added in version 7.4: `docutils` and `autosummary.import_cycle`.

Added in version 8.0: `misc.copy_overwrite`.

Added in version 8.2: `autodoc.mocked_object`, `duplicate_declaration.c`, `duplicate_declaration.cpp`, `i18n.babel`, `i18n.not_readable`, `i18n.not_writeable`, `ref.any`, `toc.duplicate_entry`, `toc.empty_glob`, and `toc.not_included`.

## Builder options[¬∂](configuration.html#builder-options "Link to this heading")

### Options for HTML output[¬∂](configuration.html#options-for-html-output "Link to this heading")

These options influence HTML output. Various other builders are derived from the HTML output, and also make use of these options.

html\_theme[¬∂](configuration.html#confval-html_theme "Link to this definition")

Type:

`str`

Default:

`'alabaster'`

The theme for HTML output. See the [HTML theming section](theming.html).

Added in version 0.6.

Changed in version 1.3: The default theme is now `'alabaster'`.

html\_theme\_options[¬∂](configuration.html#confval-html_theme_options "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of options that influence the look and feel of the selected theme. These are theme-specific. The options understood by the [builtin themes](theming.html#builtin-themes) are described [here](theming.html#builtin-themes).

Added in version 0.6.

html\_theme\_path[¬∂](configuration.html#confval-html_theme_path "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of paths that contain custom themes, either as subdirectories or as zip files. Relative paths are taken as relative to the [configuration directory](../glossary.html#term-configuration-directory).

Added in version 0.6.

html\_style[¬∂](configuration.html#confval-html_style "Link to this definition")

Type:

`Sequence[str] | str`

Default:

`()`

Stylesheets to use for HTML pages. The stylesheet given by the selected theme is used by default A file of that name must exist either in Sphinx‚Äôs `static/` path or in one of the custom paths given in [`html_static_path`](configuration.html#confval-html_static_path). If you only want to add or override a few things from the theme, use CSS `@import` to import the theme‚Äôs stylesheet.

Changed in version 5.1: The value can be a iterable of strings.

html\_title[¬∂](configuration.html#confval-html_title "Link to this definition")

Type:

`str`

Default:

`'project release documentation'`

The ‚Äútitle‚Äù for HTML documentation generated with Sphinx‚Äôs own templates. This is appended to the `<title>` tag of individual pages, and used in the navigation bar as the ‚Äútopmost‚Äù element.

html\_short\_title[¬∂](configuration.html#confval-html_short_title "Link to this definition")

Type:

`str`

Default:

The value of **html\_title**

A shorter ‚Äútitle‚Äù for HTML documentation. This is used for links in the header and in the HTML Help documentation.

Added in version 0.4.

html\_baseurl[¬∂](configuration.html#confval-html_baseurl "Link to this definition")

Type:

`str`

Default:

`''`

The base URL which points to the root of the HTML documentation. It is used to indicate the location of document using [**the Canonical Link Relation**](https://datatracker.ietf.org/doc/html/rfc6596.html).

Added in version 1.8.

html\_codeblock\_linenos\_style[¬∂](configuration.html#confval-html_codeblock_linenos_style "Link to this definition")

Type:

`'inline' | 'table'`

Default:

`'inline'`

The style of line numbers for code-blocks.

`'table'`

Display line numbers using `<table>` tag

`'inline'`

Display line numbers using `<span>` tag

Added in version 3.2.

Changed in version 4.0: It defaults to `'inline'`.

Deprecated since version 4.0.

html\_context[¬∂](configuration.html#confval-html_context "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of values to pass into the template engine‚Äôs context for all pages. Single values can also be put in this dictionary using **sphinx-build**‚Äôs [`--html-define`](../man/sphinx-build.html#cmdoption-sphinx-build-A) command-line option.

Added in version 0.5.

html\_logo[¬∂](configuration.html#confval-html_logo "Link to this definition")

Type:

`str`

Default:

`''`

If given, this must be the name of an image file (path relative to the [configuration directory](../glossary.html#term-configuration-directory)) that is the logo of the documentation, or a URL that points an image file for the logo. It is placed at the top of the sidebar; its width should therefore not exceed 200 pixels.

Added in version 0.4.1: The image file will be copied to the `_static` directory, but only if the file does not already exist there.

Changed in version 4.0: Also accepts a URL.

html\_favicon[¬∂](configuration.html#confval-html_favicon "Link to this definition")

Type:

`str`

Default:

`''`

If given, this must be the name of an image file (path relative to the [configuration directory](../glossary.html#term-configuration-directory)) that is the [favicon](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel#icon) of the documentation, or a URL that points an image file for the favicon. Browsers use this as the icon for tabs, windows and bookmarks. It should be a 16-by-16 pixel icon in the PNG, SVG, GIF, or ICO file formats.

Example:

```
html_favicon = 'static/favicon.png'
```

Added in version 0.4: The image file will be copied to the `_static`, but only if the file does not already exist there.

Changed in version 4.0: Also accepts the URL for the favicon.

html\_css\_files[¬∂](configuration.html#confval-html_css_files "Link to this definition")

Type:

`Sequence[str | tuple[str, dict[str, str]]]`

Default:

`[]`

A list of CSS files. The entry must be a *filename* string or a tuple containing the *filename* string and the *attributes* dictionary. The *filename* must be relative to the [`html_static_path`](configuration.html#confval-html_static_path), or a full URI with scheme like `'https://example.org/style.css'`. The *attributes* dictionary is used for the `<link>` tag‚Äôs attributes.

Example:

```
html_css_files = [
    'custom.css',
    'https://example.com/css/custom.css',
    ('print.css', {'media': 'print'}),
]
```

The special attribute *priority* can be set as an integer to load the CSS file at an earlier or later step. For more information, refer to [`Sphinx.add_css_file()`](../extdev/appapi.html#sphinx.application.Sphinx.add_css_file "sphinx.application.Sphinx.add_css_file").

Added in version 1.8.

Changed in version 3.5: Support the *priority* attribute

html\_js\_files[¬∂](configuration.html#confval-html_js_files "Link to this definition")

Type:

`Sequence[str | tuple[str, dict[str, str]]]`

Default:

`[]`

A list of JavaScript files. The entry must be a *filename* string or a tuple containing the *filename* string and the *attributes* dictionary. The *filename* must be relative to the [`html_static_path`](configuration.html#confval-html_static_path), or a full URI with scheme like `'https://example.org/script.js'`. The *attributes* dictionary is used for the `<script>` tag‚Äôs attributes.

Example:

```
html_js_files = [
    'script.js',
    'https://example.com/scripts/custom.js',
    ('custom.js', {'async': 'async'}),
]
```

As a special attribute, *priority* can be set as an integer to load the JavaScript file at an earlier or later step. For more information, refer to [`Sphinx.add_js_file()`](../extdev/appapi.html#sphinx.application.Sphinx.add_js_file "sphinx.application.Sphinx.add_js_file").

Added in version 1.8.

Changed in version 3.5: Support the *priority* attribute

html\_static\_path[¬∂](configuration.html#confval-html_static_path "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of paths that contain custom static files (such as style sheets or script files). Relative paths are taken as relative to the [configuration directory](../glossary.html#term-configuration-directory). They are copied to the output‚Äôs `_static` directory after the theme‚Äôs static files, so a file named `default.css` will overwrite the theme‚Äôs `default.css`.

As these files are not meant to be built, they are automatically excluded from source files.

Note

For security reasons, dotfiles under `html_static_path` will not be copied. If you would like to copy them intentionally, explicitly add each file to this setting:

```
html_static_path = ['_static', '_static/.htaccess']
```

An alternative approach is to use [`html_extra_path`](configuration.html#confval-html_extra_path), which allows copying dotfiles under the directories.

Changed in version 0.4: The paths in [`html_static_path`](configuration.html#confval-html_static_path) can now contain subdirectories.

Changed in version 1.0: The entries in [`html_static_path`](configuration.html#confval-html_static_path) can now be single files.

Changed in version 1.8: The files under [`html_static_path`](configuration.html#confval-html_static_path) are excluded from source files.

html\_extra\_path[¬∂](configuration.html#confval-html_extra_path "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of paths that contain extra files not directly related to the documentation, such as `robots.txt` or `.htaccess`. Relative paths are taken as relative to the [configuration directory](../glossary.html#term-configuration-directory). They are copied to the output directory. They will overwrite any existing file of the same name.

As these files are not meant to be built, they are automatically excluded from source files.

Added in version 1.2.

Changed in version 1.4: The dotfiles in the extra directory will be copied to the output directory. And it refers [`exclude_patterns`](configuration.html#confval-exclude_patterns) on copying extra files and directories, and ignores if path matches to patterns.

html\_last\_updated\_fmt[¬∂](configuration.html#confval-html_last_updated_fmt "Link to this definition")

Type:

`str`

Default:

`None`

If set, a ‚ÄòLast updated on:‚Äô timestamp is inserted into the page footer using the given [`strftime()`](https://docs.python.org/3/library/time.html#time.strftime "(in Python v3.13)") format. The empty string is equivalent to `'%b %d, %Y'` (or a locale-dependent equivalent).

html\_last\_updated\_use\_utc[¬∂](configuration.html#confval-html_last_updated_use_utc "Link to this definition")

Type:

`bool`

Default:

`False`

Use GMT/UTC (+00:00) instead of the system‚Äôs local time zone for the time supplied to [`html_last_updated_fmt`](configuration.html#confval-html_last_updated_fmt). This is most useful when the format used includes the time.

html\_permalinks[¬∂](configuration.html#confval-html_permalinks "Link to this definition")

Type:

`bool`

Default:

`True`

Add link anchors for each heading and description environment.

Added in version 3.5.

html\_permalinks\_icon[¬∂](configuration.html#confval-html_permalinks_icon "Link to this definition")

Type:

`str`

Default:

`'¬∂'` (the paragraph sign)

Text for link anchors for each heading and description environment. HTML entities and Unicode are allowed.

Added in version 3.5.

html\_sidebars[¬∂](configuration.html#confval-html_sidebars "Link to this definition")

Type:

`dict[str, Sequence[str]]`

Default:

`{}`

A dictionary defining custom sidebar templates, mapping document names to template names.

The keys can contain [glob-style patterns](configuration.html#glob-style-patterns), in which case all matching documents will get the specified sidebars. (A warning is emitted when a more than one glob-style pattern matches for any document.)

Each value must be a list of strings which specifies the complete list of sidebar templates to include. If all or some of the default sidebars are to be included, they must be put into this list as well.

The default sidebars (for documents that don‚Äôt match any pattern) are defined by theme itself. The builtin themes use these templates by default: `'localtoc.html'`, `'relations.html'`, `'sourcelink.html'`, and `'searchbox.html'`.

The bundled first-party sidebar templates that can be rendered are:

- **localtoc.html** ‚Äì a fine-grained table of contents of the current document
- **globaltoc.html** ‚Äì a coarse-grained table of contents for the whole documentation set, collapsed
- **relations.html** ‚Äì two links to the previous and next documents
- **sourcelink.html** ‚Äì a link to the source of the current document, if enabled in [`html_show_sourcelink`](configuration.html#confval-html_show_sourcelink)
- **searchbox.html** ‚Äì the ‚Äúquick search‚Äù box

Example:

```
html_sidebars = {
   '**': ['globaltoc.html', 'sourcelink.html', 'searchbox.html'],
   'using/windows': ['windows-sidebar.html', 'searchbox.html'],
}
```

This will render the custom template `windows-sidebar.html` and the quick search box within the sidebar of the given document, and render the default sidebars for all other pages (except that the local TOC is replaced by the global TOC).

Note that this value only has no effect if the chosen theme does not possess a sidebar, like the builtin **scrolls** and **haiku** themes.

Added in version 1.0: The ability to use globbing keys and to specify multiple sidebars.

Deprecated since version 1.7: A single string value for `html_sidebars` will be removed.

Changed in version 2.0: `html_sidebars` must be a list of strings, and no longer accepts a single string value.

html\_additional\_pages[¬∂](configuration.html#confval-html_additional_pages "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

Additional templates that should be rendered to HTML pages, must be a dictionary that maps document names to template names.

Example:

```
html_additional_pages = {
    'download': 'custom-download.html.jinja',
}
```

This will render the template `custom-download.html.jinja` as the page `download.html`.

html\_domain\_indices[¬∂](configuration.html#confval-html_domain_indices "Link to this definition")

Type:

`bool | Sequence[str]`

Default:

`True`

If True, generate domain-specific indices in addition to the general index. For e.g. the Python domain, this is the global module index.

This value can be a Boolean or a list of index names that should be generated. To find out the index name for a specific index, look at the HTML file name. For example, the Python module index has the name `'py-modindex'`.

Example:

```
html_domain_indices = {
    'py-modindex',
}
```

Added in version 1.0.

Changed in version 7.4: Permit and prefer a set type.

html\_use\_index[¬∂](configuration.html#confval-html_use_index "Link to this definition")

Type:

`bool`

Default:

`True`

Controls if an index is added to the HTML documents.

Added in version 0.4.

html\_split\_index[¬∂](configuration.html#confval-html_split_index "Link to this definition")

Type:

`bool`

Default:

`False`

Generates two versions of the index: once as a single page with all the entries, and once as one page per starting letter.

Added in version 0.4.

html\_copy\_source[¬∂](configuration.html#confval-html_copy_source "Link to this definition")

Type:

`bool`

Default:

`True`

If True, the reStructuredText sources are included in the HTML build as `_sources/docname`.

html\_show\_sourcelink[¬∂](configuration.html#confval-html_show_sourcelink "Link to this definition")

Type:

`bool`

Default:

`True`

If True (and [`html_copy_source`](configuration.html#confval-html_copy_source) is true as well), links to the reStructuredText sources will be added to the sidebar.

Added in version 0.6.

html\_sourcelink\_suffix[¬∂](configuration.html#confval-html_sourcelink_suffix "Link to this definition")

Type:

`str`

Default:

`'.txt'`

The suffix to append to source links (see [`html_show_sourcelink`](configuration.html#confval-html_show_sourcelink)), unless files they have this suffix already.

Added in version 1.5.

html\_use\_opensearch[¬∂](configuration.html#confval-html_use_opensearch "Link to this definition")

Type:

`str`

Default:

`''`

If nonempty, an [OpenSearch](https://github.com/dewitt/opensearch) description file will be output, and all pages will contain a `<link>` tag referring to it. Since OpenSearch doesn‚Äôt support relative URLs for its search page location, the value of this option must be the base URL from which these documents are served (without trailing slash), e.g. `'https://docs.python.org'`.

Added in version 0.2.

html\_file\_suffix[¬∂](configuration.html#confval-html_file_suffix "Link to this definition")

Type:

`str`

Default:

`'.html'`

The file name suffix (file extension) for generated HTML files.

Added in version 0.4.

html\_link\_suffix[¬∂](configuration.html#confval-html_link_suffix "Link to this definition")

Type:

`str`

Default:

The value of **html\_file\_suffix**

The suffix for generated links to HTML files. Intended to support more esoteric server setups.

Added in version 0.6.

html\_show\_copyright[¬∂](configuration.html#confval-html_show_copyright "Link to this definition")

Type:

`bool`

Default:

`True`

If True, ‚Äú¬© Copyright ‚Ä¶‚Äù is shown in the HTML footer, with the value or values from [`copyright`](configuration.html#confval-copyright).

Added in version 1.0.

html\_show\_search\_summary[¬∂](configuration.html#confval-html_show_search_summary "Link to this definition")

Type:

`bool`

Default:

`True`

Show a summary of the search result, i.e., the text around the keyword.

Added in version 4.5.

html\_show\_sphinx[¬∂](configuration.html#confval-html_show_sphinx "Link to this definition")

Type:

`bool`

Default:

`True`

Add ‚ÄúCreated using [Sphinx](https://www.sphinx-doc.org/)‚Äù to the HTML footer.

Added in version 0.4.

html\_output\_encoding[¬∂](configuration.html#confval-html_output_encoding "Link to this definition")

Type:

`str`

Default:

`'utf-8'`

Encoding of HTML output files. This encoding name must both be a valid Python encoding name and a valid HTML `charset` value.

Added in version 1.0.

html\_compact\_lists[¬∂](configuration.html#confval-html_compact_lists "Link to this definition")

Type:

`bool`

Default:

`True`

If True, a list all whose items consist of a single paragraph and/or a sub-list all whose items etc‚Ä¶ (recursive definition) will not use the `<p>` element for any of its items. This is standard docutils behaviour. Default: `True`.

Added in version 1.0.

html\_secnumber\_suffix[¬∂](configuration.html#confval-html_secnumber_suffix "Link to this definition")

Type:

`str`

Default:

`'. '`

Suffix for section numbers in HTML output. Set to `' '` to suppress the final dot on section numbers.

Added in version 1.0.

html\_search\_language[¬∂](configuration.html#confval-html_search_language "Link to this definition")

Type:

`str`

Default:

The value of **language**

Language to be used for generating the HTML full-text search index. This defaults to the global language selected with [`language`](configuration.html#confval-language). English (`'en'`) is used as a fall-back option if there is no support for this language.

Support exists for the following languages:

- `da` ‚Äì Danish
- `nl` ‚Äì Dutch
- `en` ‚Äì English
- `fi` ‚Äì Finnish
- `fr` ‚Äì French
- `de` ‚Äì German
- `hu` ‚Äì Hungarian
- `it` ‚Äì Italian
- `ja` ‚Äì Japanese
- `no` ‚Äì Norwegian
- `pt` ‚Äì Portuguese
- `ro` ‚Äì Romanian
- `ru` ‚Äì Russian
- `es` ‚Äì Spanish
- `sv` ‚Äì Swedish
- `tr` ‚Äì Turkish
- `zh` ‚Äì Chinese

Tip

Accelerating build speed

Each language (except Japanese) provides its own stemming algorithm. Sphinx uses a Python implementation by default. If you want to accelerate building the index file, you can use a third-party package ([PyStemmer](https://pypi.org/project/PyStemmer/)) by running **pip install PyStemmer**.

Added in version 1.1: Support English (`en`) and Japanese (`ja`).

Changed in version 1.3: Added additional languages.

html\_search\_options[¬∂](configuration.html#confval-html_search_options "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

A dictionary with options for the search language support. The meaning of these options depends on the language selected. Currently, only Japanese and Chinese support options.

Japanese:

`type` ‚Äì the type of the splitter to use.

The other options depend on the splitter used.

`'sphinx.search.ja.DefaultSplitter'`

The TinySegmenter algorithm, used by default.

`'sphinx.search.ja.MecabSplitter'`:

The MeCab binding To use this splitter, the ‚Äòmecab‚Äô python binding or dynamic link library (‚Äòlibmecab.so‚Äô for Linux, ‚Äòlibmecab.dll‚Äô for Windows) is required.

`'sphinx.search.ja.JanomeSplitter'`:

The Janome binding. To use this splitter, [Janome](https://pypi.org/project/Janome/) is required.

Deprecated since version 1.6: `'mecab'`, `'janome'` and `'default'` is deprecated. To keep compatibility, `'mecab'`, `'janome'` and `'default'` are also acceptable.

Options for `'mecab'`:

dic\_enc:

dic\_enc option is the encoding for the MeCab algorithm.

dict:

dict option is the dictionary to use for the MeCab algorithm.

lib:

lib option is the library name for finding the MeCab library via `ctypes` if the Python binding is not installed.

For example:

```
html_search_options = {
    'type': 'mecab',
    'dic_enc': 'utf-8',
    'dict': '/path/to/mecab .dic',
    'lib': '/path/to/libmecab.so',
}
```

Options for `'janome'`:

user\_dic:

user\_dic option is the user dictionary file path for Janome.

user\_dic\_enc:

user\_dic\_enc option is the encoding for the user dictionary file specified by `user_dic` option. Default is ‚Äòutf8‚Äô.

Chinese:

`dict`

The `jieba` dictionary path for using a custom dictionary.

Added in version 1.1.

Changed in version 1.4: Allow any custom splitter in the *type* setting for Japanese.

html\_search\_scorer[¬∂](configuration.html#confval-html_search_scorer "Link to this definition")

Type:

`str`

Default:

`''`

The name of a JavaScript file (relative to the [configuration directory](../glossary.html#term-configuration-directory)) that implements a search results scorer. If empty, the default will be used.

The scorer must implement the following interface, and may optionally define the `score()` function for more granular control.

```
const Scorer = {
    // Implement the following function to further tweak the score for each result
    score: result => {
      const [docName, title, anchor, descr, score, filename] = result

      // ... calculate a new score ...
      return score
    },

    // query matches the full name of an object
    objNameMatch: 11,
    // or matches in the last dotted part of the object name
    objPartialMatch: 6,
    // Additive scores depending on the priority of the object
    objPrio: {
      0: 15, // used to be importantResults
      1: 5, // used to be objectResults
      2: -5, // used to be unimportantResults
    },
    //  Used when the priority is not in the mapping.
    objPrioDefault: 0,

    // query found in title
    title: 15,
    partialTitle: 7,

    // query found in terms
    term: 5,
    partialTerm: 2,
};
```

Added in version 1.2.

html\_scaled\_image\_link[¬∂](configuration.html#confval-html_scaled_image_link "Link to this definition")

Type:

`bool`

Default:

`True`

Link images that have been resized with a scale option (*scale*, *width*, or *height*) to their original full-resolution image. This will not overwrite any link given by the *target* option on the the [image](https://docutils.sourceforge.io/docs/ref/rst/directives.html#image) directive, if present.

Tip

To disable this feature on a per-image basis, add the `no-scaled-link` class to the image directive:

```
.. image:: sphinx.png
   :scale: 50%
   :class: no-scaled-link
```

Added in version 1.3.

Changed in version 3.0: Images with the `no-scaled-link` class will not be linked.

html\_math\_renderer[¬∂](configuration.html#confval-html_math_renderer "Link to this definition")

Type:

`str`

Default:

`'mathjax'`

The maths renderer to use for HTML output. The bundled renders are *mathjax* and *imgmath*. You must also load the relevant extension in [`extensions`](configuration.html#confval-extensions).

Added in version 1.8.

### Options for Single HTML output[¬∂](configuration.html#options-for-single-html-output "Link to this heading")

These options influence Single HTML output. This builder derives from the HTML builder, so the HTML options also apply where appropriate.

singlehtml\_sidebars[¬∂](configuration.html#confval-singlehtml_sidebars "Link to this definition")

Type:

`dict[str, Sequence[str]]`

Default:

The value of **html\_sidebars**

A dictionary defining custom sidebar templates, mapping document names to template names.

This has the same effect as [`html_sidebars`](configuration.html#confval-html_sidebars), but the only permitted key is `'index'`, and all other keys are ignored.

### Options for HTML help output[¬∂](configuration.html#options-for-html-help-output "Link to this heading")

These options influence HTML help output. This builder derives from the HTML builder, so the HTML options also apply where appropriate.

htmlhelp\_basename[¬∂](configuration.html#confval-htmlhelp_basename "Link to this definition")

Type:

`str`

Default:

`'{project}doc'`

Output file base name for HTML help builder. The default is the [`project name`](configuration.html#confval-project) with spaces removed and `doc` appended.

htmlhelp\_file\_suffix[¬∂](configuration.html#confval-htmlhelp_file_suffix "Link to this definition")

Type:

`str`

Default:

`'.html'`

This is the file name suffix for generated HTML help files.

Added in version 2.0.

htmlhelp\_link\_suffix[¬∂](configuration.html#confval-htmlhelp_link_suffix "Link to this definition")

Type:

`str`

Default:

The value of **htmlhelp\_file\_suffix**

Suffix for generated links to HTML files.

Added in version 2.0.

### Options for Apple Help output[¬∂](configuration.html#options-for-apple-help-output "Link to this heading")

Added in version 1.3.

These options influence Apple Help output. This builder derives from the HTML builder, so the HTML options also apply where appropriate.

Note

Apple Help output will only work on Mac OS X 10.6 and higher, as it requires the **hiutil** and **codesign** command-line tools, neither of which are Open Source.

You can disable the use of these tools using [`applehelp_disable_external_tools`](configuration.html#confval-applehelp_disable_external_tools), but the result will not be a valid help book until the indexer is run over the `.lproj` directories within the bundle.

applehelp\_bundle\_name[¬∂](configuration.html#confval-applehelp_bundle_name "Link to this definition")

Type:

`str`

Default:

The value of **project**

The basename for the Apple Help Book. The default is the [`project name`](configuration.html#confval-project) with spaces removed.

applehelp\_bundle\_id[¬∂](configuration.html#confval-applehelp_bundle_id "Link to this definition")

Type:

`str`

Default:

`None`

The bundle ID for the help book bundle.

Warning

You *must* set this value in order to generate Apple Help.

applehelp\_bundle\_version[¬∂](configuration.html#confval-applehelp_bundle_version "Link to this definition")

Type:

`str`

Default:

`'1'`

The bundle version, as a string.

applehelp\_dev\_region[¬∂](configuration.html#confval-applehelp_dev_region "Link to this definition")

Type:

`str`

Default:

`'en-us'`

The development region. Defaults to Apple‚Äôs recommended setting, `'en-us'`.

applehelp\_icon[¬∂](configuration.html#confval-applehelp_icon "Link to this definition")

Type:

`str`

Default:

`None`

Path to the help bundle icon file or `None` for no icon. According to Apple‚Äôs documentation, this should be a 16-by-16 pixel version of the application‚Äôs icon with a transparent background, saved as a PNG file.

applehelp\_kb\_product[¬∂](configuration.html#confval-applehelp_kb_product "Link to this definition")

Type:

`str`

Default:

`'project-release'`

The product tag for use with [`applehelp_kb_url`](configuration.html#confval-applehelp_kb_url).

applehelp\_kb\_url[¬∂](configuration.html#confval-applehelp_kb_url "Link to this definition")

Type:

`str`

Default:

`None`

The URL for your knowledgebase server, e.g. `https://example.com/kbsearch.py?p='product'&q='query'&l='lang'`. At runtime, Help Viewer will replace `'product'` with the contents of [`applehelp_kb_product`](configuration.html#confval-applehelp_kb_product), `'query'` with the text entered by the user in the search box, and `'lang'` with the user‚Äôs system language.

Set this to to `None` to disable remote search.

applehelp\_remote\_url[¬∂](configuration.html#confval-applehelp_remote_url "Link to this definition")

Type:

`str`

Default:

`None`

The URL for remote content. You can place a copy of your Help Book‚Äôs `Resources` directory at this location and Help Viewer will attempt to use it to fetch updated content.

For example, if you set it to `https://example.com/help/Foo/` and Help Viewer wants a copy of `index.html` for an English speaking customer, it will look at `https://example.com/help/Foo/en.lproj/index.html`.

Set this to to `None` for no remote content.

applehelp\_index\_anchors[¬∂](configuration.html#confval-applehelp_index_anchors "Link to this definition")

Type:

`bool`

Default:

`False`

Tell the help indexer to index anchors in the generated HTML. This can be useful for jumping to a particular topic using the `AHLookupAnchor` function or the `openHelpAnchor:inBook:` method in your code. It also allows you to use `help:anchor` URLs; see the Apple documentation for more information on this topic.

applehelp\_min\_term\_length[¬∂](configuration.html#confval-applehelp_min_term_length "Link to this definition")

Type:

`str`

Default:

`None`

Controls the minimum term length for the help indexer. If `None`, use the default length.

applehelp\_stopwords[¬∂](configuration.html#confval-applehelp_stopwords "Link to this definition")

Type:

`str`

Default:

The value of **language**

Either a language specification (to use the built-in stopwords), or the path to a stopwords plist, or `None` if you do not want to use stopwords. The default stopwords plist can be found at `/usr/share/hiutil/Stopwords.plist` and contains, at time of writing, stopwords for the following languages:

- German (`de`)
- English (`en`)
- Spanish (`es`)
- French (`fr`)
- Hungarian (`hu`)
- Italian (`it`)
- Swedish (`sv`)

applehelp\_locale[¬∂](configuration.html#confval-applehelp_locale "Link to this definition")

Type:

`str`

Default:

The value of **language**

Specifies the locale to generate help for. This is used to determine the name of the `.lproj` directory inside the Help Book‚Äôs `Resources`, and is passed to the help indexer.

applehelp\_title[¬∂](configuration.html#confval-applehelp_title "Link to this definition")

Type:

`str`

Default:

`'project Help'`

Specifies the help book title.

applehelp\_codesign\_identity[¬∂](configuration.html#confval-applehelp_codesign_identity "Link to this definition")

Type:

`str`

Default:

The value of **CODE\_SIGN\_IDENTITY**

Specifies the identity to use for code signing. Use `None` if code signing is not to be performed.

Defaults to the value of the `CODE_SIGN_IDENTITY` environment variable, which is set by Xcode for script build phases, or `None` if that variable is not set.

applehelp\_codesign\_flags[¬∂](configuration.html#confval-applehelp_codesign_flags "Link to this definition")

Type:

`list[str]`

Default:

The value of **OTHER\_CODE\_SIGN\_FLAGS**

A *list* of additional arguments to pass to **codesign** when signing the help book.

Defaults to a list based on the value of the `OTHER_CODE_SIGN_FLAGS` environment variable, which is set by Xcode for script build phases, or the empty list if that variable is not set.

applehelp\_codesign\_path[¬∂](configuration.html#confval-applehelp_codesign_path "Link to this definition")

Type:

`str`

Default:

`'/usr/bin/codesign'`

The path to the **codesign** program.

applehelp\_indexer\_path[¬∂](configuration.html#confval-applehelp_indexer_path "Link to this definition")

Type:

`str`

Default:

`'/usr/bin/hiutil'`

The path to the **hiutil** program.

applehelp\_disable\_external\_tools[¬∂](configuration.html#confval-applehelp_disable_external_tools "Link to this definition")

Type:

`bool`

Default:

`False`

Do not run the indexer or the code signing tool, no matter what other settings are specified.

This is mainly useful for testing, or where you want to run the Sphinx build on a non-macOS platform and then complete the final steps on a Mac for some reason.

### Options for EPUB output[¬∂](configuration.html#options-for-epub-output "Link to this heading")

These options influence EPUB output. This builder derives from the HTML builder, so the HTML options also apply where appropriate.

Note

The actual value for some of these options is not important, but they are required for the [Dublin Core metadata](https://dublincore.org/).

epub\_basename[¬∂](configuration.html#confval-epub_basename "Link to this definition")

Type:

`str`

Default:

The value of **project**

The basename for the EPUB file.

epub\_theme[¬∂](configuration.html#confval-epub_theme "Link to this definition")

Type:

`str`

Default:

`'epub'`

The HTML theme for the EPUB output. Since the default themes are not optimised for small screen space, using the same theme for HTML and EPUB output is usually not wise. This defaults to `'epub'`, a theme designed to save visual space.

epub\_theme\_options[¬∂](configuration.html#confval-epub_theme_options "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of options that influence the look and feel of the selected theme. These are theme-specific. The options understood by the [builtin themes](theming.html#builtin-themes) are described [here](theming.html#builtin-themes).

Added in version 1.2.

epub\_title[¬∂](configuration.html#confval-epub_title "Link to this definition")

Type:

`str`

Default:

The value of **project**

The title of the document.

Changed in version 2.0: It defaults to the `project` option (previously `html_title`).

epub\_description[¬∂](configuration.html#confval-epub_description "Link to this definition")

Type:

`str`

Default:

`'unknown'`

The description of the document.

Added in version 1.4.

Changed in version 1.5: Renamed from `epub3_description`

epub\_author[¬∂](configuration.html#confval-epub_author "Link to this definition")

Type:

`str`

Default:

The value of **author**

The author of the document. This is put in the Dublin Core metadata.

epub\_contributor[¬∂](configuration.html#confval-epub_contributor "Link to this definition")

Type:

`str`

Default:

`'unknown'`

The name of a person, organisation, etc. that played a secondary role in the creation of the content of an EPUB Publication.

Added in version 1.4.

Changed in version 1.5: Renamed from `epub3_contributor`

epub\_language[¬∂](configuration.html#confval-epub_language "Link to this definition")

Type:

`str`

Default:

The value of **language**

The language of the document. This is put in the Dublin Core metadata.

epub\_publisher[¬∂](configuration.html#confval-epub_publisher "Link to this definition")

Type:

`str`

Default:

The value of **author**

The publisher of the document. This is put in the Dublin Core metadata. You may use any sensible string, e.g. the project homepage.

epub\_copyright[¬∂](configuration.html#confval-epub_copyright "Link to this definition")

Type:

`str`

Default:

The value of **copyright**

The copyright of the document. See [`copyright`](configuration.html#confval-copyright) for permitted formats.

epub\_identifier[¬∂](configuration.html#confval-epub_identifier "Link to this definition")

Type:

`str`

Default:

`'unknown'`

An identifier for the document. This is put in the Dublin Core metadata. For published documents this is the ISBN number, but you can also use an alternative scheme, e.g. the project homepage.

epub\_scheme[¬∂](configuration.html#confval-epub_scheme "Link to this definition")

Type:

`str`

Default:

`'unknown'`

The publication scheme for the [`epub_identifier`](configuration.html#confval-epub_identifier). This is put in the Dublin Core metadata. For published books the scheme is `'ISBN'`. If you use the project homepage, `'URL'` seems reasonable.

epub\_uid[¬∂](configuration.html#confval-epub_uid "Link to this definition")

Type:

`str`

Default:

`'unknown'`

A unique identifier for the document. This is put in the Dublin Core metadata. You may use a [XML‚Äôs Name format](https://www.w3.org/TR/REC-xml/#NT-NameStartChar) string. You can‚Äôt use hyphen, period, numbers as a first character.

epub\_cover[¬∂](configuration.html#confval-epub_cover "Link to this definition")

Type:

`tuple[str, str]`

Default:

`()`

The cover page information. This is a tuple containing the filenames of the cover image and the html template. The rendered html cover page is inserted as the first item in the spine in `content.opf`. If the template filename is empty, no html cover page is created. No cover at all is created if the tuple is empty.

Examples:

```
epub_cover = ('_static/cover.png', 'epub-cover.html')
epub_cover = ('_static/cover.png', '')
epub_cover = ()
```

Added in version 1.1.

epub\_css\_files[¬∂](configuration.html#confval-epub_css_files "Link to this definition")

Type:

`Sequence[str | tuple[str, dict[str, str]]]`

Default:

`[]`

A list of CSS files. The entry must be a *filename* string or a tuple containing the *filename* string and the *attributes* dictionary. The *filename* must be relative to the [`html_static_path`](configuration.html#confval-html_static_path), or a full URI with scheme like `'https://example.org/style.css'`. The *attributes* dictionary is used for the `<link>` tag‚Äôs attributes. For more information, see [`html_css_files`](configuration.html#confval-html_css_files).

Added in version 1.8.

epub\_guide[¬∂](configuration.html#confval-epub_guide "Link to this definition")

Type:

`Sequence[tuple[str, str, str]]`

Default:

`()`

Meta data for the guide element of `content.opf`. This is a sequence of tuples containing the *type*, the *uri* and the *title* of the optional guide information. See [the OPF documentation](https://idpf.org/epub) for details. If possible, default entries for the *cover* and *toc* types are automatically inserted. However, the types can be explicitly overwritten if the default entries are not appropriate.

Example:

```
epub_guide = (
    ('cover', 'cover.html', 'Cover Page'),
)
```

The default value is `()`.

epub\_pre\_files[¬∂](configuration.html#confval-epub_pre_files "Link to this definition")

Type:

`Sequence[tuple[str, str]]`

Default:

`()`

Additional files that should be inserted before the text generated by Sphinx. It is a list of tuples containing the file name and the title. If the title is empty, no entry is added to `toc.ncx`.

Example:

```
epub_pre_files = [
    ('index.html', 'Welcome'),
]
```

epub\_post\_files[¬∂](configuration.html#confval-epub_post_files "Link to this definition")

Type:

`Sequence[tuple[str, str]]`

Default:

`()`

Additional files that should be inserted after the text generated by Sphinx. It is a list of tuples containing the file name and the title. This option can be used to add an appendix. If the title is empty, no entry is added to `toc.ncx`.

Example:

```
epub_post_files = [
    ('appendix.xhtml', 'Appendix'),
]
```

epub\_exclude\_files[¬∂](configuration.html#confval-epub_exclude_files "Link to this definition")

Type:

`Sequence[str]`

Default:

`[]`

A sequence of files that are generated/copied in the build directory but should not be included in the EPUB file.

epub\_tocdepth[¬∂](configuration.html#confval-epub_tocdepth "Link to this definition")

Type:

`int`

Default:

`3`

The depth of the table of contents in the file `toc.ncx`. It should be an integer greater than zero.

Tip

A deeply nested table of contents may be difficult to navigate.

epub\_tocdup[¬∂](configuration.html#confval-epub_tocdup "Link to this definition")

Type:

`bool`

Default:

`True`

This flag determines if a ToC entry is inserted again at the beginning of its nested ToC listing. This allows easier navigation to the top of a chapter, but can be confusing because it mixes entries of different depth in one list.

epub\_tocscope[¬∂](configuration.html#confval-epub_tocscope "Link to this definition")

Type:

`'default' | 'includehidden'`

Default:

`'default'`

This setting control the scope of the EPUB table of contents. The setting can have the following values:

`'default'`

Include all ToC entries that are not hidden

`'includehidden'`

Include all ToC entries

Added in version 1.2.

epub\_fix\_images[¬∂](configuration.html#confval-epub_fix_images "Link to this definition")

Type:

`bool`

Default:

`False`

Try and fix image formats that are not supported by some EPUB readers. At the moment palette images with a small colour table are upgraded. This is disabled by default because the automatic conversion may lose information. You need the Python Image Library ([Pillow](https://pypi.org/project/Pillow/)) installed to use this option.

Added in version 1.2.

epub\_max\_image\_width[¬∂](configuration.html#confval-epub_max_image_width "Link to this definition")

Type:

`int`

Default:

`0`

This option specifies the maximum width of images. If it is set to a valuevgreater than zero, images with a width larger than the given value are scaled accordingly. If it is zero, no scaling is performed. You need the Python Image Library ([Pillow](https://pypi.org/project/Pillow/)) installed to use this option.

Added in version 1.2.

epub\_show\_urls[¬∂](configuration.html#confval-epub_show_urls "Link to this definition")

Type:

`'footnote' | 'no' | 'inline'`

Default:

`'footnote'`

Control how to display URL addresses. This is very useful for readers that have no other means to display the linked URL. The setting can have the following values:

`'inline'`

Display URLs inline in parentheses.

`'footnote'`

Display URLs in footnotes.

`'no'`

Do not display URLs.

The display of inline URLs can be customised by adding CSS rules for the class `link-target`.

Added in version 1.2.

epub\_use\_index[¬∂](configuration.html#confval-epub_use_index "Link to this definition")

Type:

`bool`

Default:

The value of **html\_use\_index**

Add an index to the EPUB document.

Added in version 1.2.

epub\_writing\_mode[¬∂](configuration.html#confval-epub_writing_mode "Link to this definition")

Type:

`'horizontal' | 'vertical'`

Default:

`'horizontal'`

It specifies writing direction. It can accept `'horizontal'` and `'vertical'`

| `epub_writing_mode`                                                           | `'horizontal'`           | `'vertical'`               |
|-------------------------------------------------------------------------------|--------------------------|----------------------------|
| [writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode) | `horizontal-tb`          | `vertical-rl`              |
| page progression                                                              | left to right            | right to left              |
| iBook‚Äôs Scroll Theme support                                                  | scroll-axis is vertical. | scroll-axis is horizontal. |

### Options for LaTeX output[¬∂](configuration.html#options-for-latex-output "Link to this heading")

These options influence LaTeX output.

latex\_engine[¬∂](configuration.html#confval-latex_engine "Link to this definition")

Type:

`'pdflatex' | 'xelatex' | 'lualatex' | 'platex' | 'uplatex'`

Default:

`'pdflatex'`

The LaTeX engine to build the documentation. The setting can have the following values:

- `'pdflatex'` ‚Äì PDFLaTeX (default)
- `'xelatex'` ‚Äì XeLaTeX (default if [`language`](configuration.html#confval-language) is one of `el`, `zh_CN`, or `zh_TW`)
- `'lualatex'` ‚Äì LuaLaTeX
- `'platex'` ‚Äì pLaTeX
- `'uplatex'` ‚Äì upLaTeX (default if [`language`](configuration.html#confval-language) is `'ja'`)

Important

`'pdflatex'`‚Äòs support for Unicode characters is limited. If your project uses Unicode characters, setting the engine to `'xelatex'` or `'lualatex'` and making sure to use an OpenType font with wide-enough glyph coverage is often easier than trying to make `'pdflatex'` work with the extra Unicode characters. Since Sphinx 2.0, the default typeface is GNU FreeFont, which has good coverage of Latin, Cyrillic, and Greek glyphs.

Note

Sphinx 2.0 adds support for occasional Cyrillic and Greek letters or words in documents using a Latin language and `'pdflatex'`. To enable this, the ['fontenc'](../latex.html#fontenc) key of [latex\_elements](../latex.html#latex-elements-confval) must be used appropriately.

Note

Contrarily to [MathJaX math rendering in HTML output](extensions/math.html#math-support), LaTeX requires some extra configuration to support Unicode literals in [`math`](restructuredtext/directives.html#directive-math "math directive"): the only comprehensive solution (as far as we know) is to use `'xelatex'` or `'lualatex'` *and* to add `r'\usepackage{unicode-math}'` (e.g. via the ['preamble'](../latex.html#preamble) key of [latex\_elements](../latex.html#latex-elements-confval)). You may prefer `r'\usepackage[math-style=literal]{unicode-math}'` to keep a Unicode literal such as `Œ±` (U+03B1) as-is in output, rather than being rendered as \\(\\alpha\\).

Changed in version 2.1.0: Use `'xelatex'` (and LaTeX package `xeCJK`) by default for Chinese documents.

Changed in version 2.2.1: Use `'xelatex'` by default for Greek documents.

Changed in version 2.3: Add `'uplatex'` support.

Changed in version 4.0: Use `'uplatex'` by default for Japanese documents.

latex\_documents[¬∂](configuration.html#confval-latex_documents "Link to this definition")

Type:

`Sequence[tuple[str, str, str, str, str, bool]]`

Default:

The default LaTeX documents

This value determines how to group the document tree into LaTeX source files. It must be a list of tuples `(startdocname, targetname, title, author, theme, toctree_only)`, where the items are:

*startdocname*

String that specifies the [document name](../glossary.html#term-document-name) of the LaTeX file‚Äôs master document. All documents referenced by the *startdoc* document in ToC trees will be included in the LaTeX file. (If you want to use the default master document for your LaTeX build, provide your [`master_doc`](configuration.html#confval-master_doc) here.)

*targetname*

File name of the LaTeX file in the output directory.

*title*

LaTeX document title. Can be empty to use the title of the *startdoc* document. This is inserted as LaTeX markup, so special characters like a backslash or ampersand must be represented by the proper LaTeX commands if they are to be inserted literally.

*author*

Author for the LaTeX document. The same LaTeX markup caveat as for *title* applies. Use `\\and` to separate multiple authors, as in: `'John \\and Sarah'` (backslashes must be Python-escaped to reach LaTeX).

*theme*

LaTeX theme. See [`latex_theme`](configuration.html#confval-latex_theme).

*toctree\_only*

Must be `True` or `False`. If True, the *startdoc* document itself is not included in the output, only the documents referenced by it via ToC trees. With this option, you can put extra stuff in the master document that shows up in the HTML, but not the LaTeX output.

Added in version 0.3: The 6th item `toctree_only`. Tuples with 5 items are still accepted.

Added in version 1.2: In the past including your own document class required you to prepend the document class name with the string ‚Äúsphinx‚Äù. This is not necessary anymore.

latex\_logo[¬∂](configuration.html#confval-latex_logo "Link to this definition")

Type:

`str`

Default:

`''`

If given, this must be the name of an image file (path relative to the [configuration directory](../glossary.html#term-configuration-directory)) that is the logo of the documentation. It is placed at the top of the title page.

latex\_toplevel\_sectioning[¬∂](configuration.html#confval-latex_toplevel_sectioning "Link to this definition")

Type:

`'part' | 'chapter' | 'section'`

Default:

`None`

This value determines the topmost sectioning unit. The default setting is `'section'` if [`latex_theme`](configuration.html#confval-latex_theme) is `'howto'`, and `'chapter'` if it is `'manual'`. The alternative in both cases is to specify `'part'`, which means that LaTeX document will use the `\part` command.

In that case the numbering of sectioning units one level deep gets off-sync with HTML numbering, as by default LaTeX does not reset `\chapter` numbering (or `\section` for `'howto'` theme) when encountering `\part` command.

Added in version 1.4.

latex\_appendices[¬∂](configuration.html#confval-latex_appendices "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of document names to append as an appendix to all manuals. This is ignored if [`latex_theme`](configuration.html#confval-latex_theme) is set to `'howto'`.

latex\_domain\_indices[¬∂](configuration.html#confval-latex_domain_indices "Link to this definition")

Type:

`bool | Sequence[str]`

Default:

`True`

If True, generate domain-specific indices in addition to the general index. For e.g. the Python domain, this is the global module index.

This value can be a Boolean or a list of index names that should be generated. To find out the index name for a specific index, look at the HTML file name. For example, the Python module index has the name `'py-modindex'`.

Example:

```
latex_domain_indices = {
    'py-modindex',
}
```

Added in version 1.0.

Changed in version 7.4: Permit and prefer a set type.

latex\_show\_pagerefs[¬∂](configuration.html#confval-latex_show_pagerefs "Link to this definition")

Type:

`bool`

Default:

`False`

Add page references after internal references. This is very useful for printed copies of the manual.

Added in version 1.0.

latex\_show\_urls[¬∂](configuration.html#confval-latex_show_urls "Link to this definition")

Type:

`'no' | 'footnote' | 'inline'`

Default:

`'no'`

Control how to display URL addresses. This is very useful for printed copies of the manual. The setting can have the following values:

`'no'`

Do not display URLs

`'footnote'`

Display URLs in footnotes

`'inline'`

Display URLs inline in parentheses

Added in version 1.0.

Changed in version 1.1: This value is now a string; previously it was a boolean value, and a true value selected the `'inline'` display. For backwards compatibility, `True` is still accepted.

latex\_use\_latex\_multicolumn[¬∂](configuration.html#confval-latex_use_latex_multicolumn "Link to this definition")

Type:

`bool`

Default:

`False`

Use standard LaTeX‚Äôs `\multicolumn` for merged cells in tables.

`False`

Sphinx‚Äôs own macros are used for merged cells from grid tables. They allow general contents (literal blocks, lists, blockquotes, ‚Ä¶) but may have problems if the [`tabularcolumns`](restructuredtext/directives.html#directive-tabularcolumns "tabularcolumns directive") directive was used to inject LaTeX mark-up of the type `>{..}`, `<{..}`, `@{..}` as column specification.

`True`

Use LaTeX‚Äôs standard `\multicolumn`; this is incompatible with literal blocks in horizontally merged cells, and also with multiple paragraphs in such cells if the table is rendered using `tabulary`.

Added in version 1.6.

latex\_table\_style[¬∂](configuration.html#confval-latex_table_style "Link to this definition")

Type:

`list[str]`

Default:

`['booktabs', 'colorrows']`

A list of styling classes (strings). Currently supported:

`'booktabs'`

No vertical lines, and only 2 or 3 horizontal lines (the latter if there is a header), using the [booktabs](https://ctan.org/pkg/booktabs) package.

`'borderless'`

No lines whatsoever.

`'colorrows'`

The table rows are rendered with alternating background colours. The interface to customise them is via [dedicated keys](../latex.html#tablecolors) of [The sphinxsetup configuration setting](../latex.html#latexsphinxsetup).

Important

With the `'colorrows'` style, the `\rowcolors` LaTeX command becomes a no-op (this command has limitations and has never correctly supported all types of tables Sphinx produces in LaTeX). Please update your project to use the [latex table color configuration](../latex.html#tablecolors) keys instead.

To customise the styles for a table, use the `:class:` option if the table is defined using a directive, or otherwise insert a [rst-class](restructuredtext/basics.html#rstclass) directive before the table (cf. [Tables](restructuredtext/directives.html#table-directives)).

Currently recognised classes are `booktabs`, `borderless`, `standard`, `colorrows`, `nocolorrows`. The latter two can be combined with any of the first three. The `standard` class produces tables with both horizontal and vertical lines (as has been the default so far with Sphinx).

A single-row multi-column merged cell will obey the row colour, if it is set. See also `TableMergeColor{Header,Odd,Even}` in the [The sphinxsetup configuration setting](../latex.html#latexsphinxsetup) section.

Note

- It is hard-coded in LaTeX that a single cell will obey the row colour even if there is a column colour set via `\columncolor` from a column specification (see [`tabularcolumns`](restructuredtext/directives.html#directive-tabularcolumns "tabularcolumns directive")). Sphinx provides `\sphinxnorowcolor` which can be used in a table column specification like this:

  ```
  >{\columncolor{blue}\sphinxnorowcolor}
  ```
- Sphinx also provides `\sphinxcolorblend`, which however requires the [xcolor](https://ctan.org/pkg/xcolor) package. Here is an example:

  ```
  >{\sphinxcolorblend{!95!red}}
  ```

  It means that in this column, the row colours will be slightly tinted by red; refer to [xcolor](https://ctan.org/pkg/xcolor) documentation for more on the syntax of its `\blendcolors` command (a `\blendcolors` in place of `\sphinxcolorblend` would modify colours of the cell *contents*, not of the cell *background colour panel*‚Ä¶). You can find an example of usage in the [Deprecated APIs](../extdev/deprecated.html#dev-deprecated-apis) section of this document in PDF format.

  Hint

  If you want to use a special colour for the *contents* of the cells of a given column use `>{\noindent\color{<color>}}`, possibly in addition to the above.
- Multi-row merged cells, whether single column or multi-column currently ignore any set column, row, or cell colour.
- It is possible for a simple cell to set a custom colour via the [raw](https://docutils.sourceforge.io/docs/ref/rst/directives.html#raw) directive and the `\cellcolor` LaTeX command used anywhere in the cell contents. This currently is without effect in a merged cell, whatever its kind.

Hint

In a document not using `'booktabs'` globally, it is possible to style an individual table via the `booktabs` class, but it will be necessary to add `r'\usepackage{booktabs}'` to the LaTeX preamble.

On the other hand one can use `colorrows` class for individual tables with no extra package (as Sphinx since 5.3.0 always loads [colortbl](https://ctan.org/pkg/colortbl)).

Added in version 5.3.0.

Changed in version 6.0.0: Modify default from `[]` to `['booktabs', 'colorrows']`.

latex\_use\_xindy[¬∂](configuration.html#confval-latex_use_xindy "Link to this definition")

Type:

`bool`

Default:

`True if latex_engine in {'xelatex', 'lualatex'} else False`

Use [Xindy](https://xindy.sourceforge.net/) to prepare the index of general terms. By default, the LaTeX builder uses **makeindex** for preparing the index of general terms . Using [Xindy](https://xindy.sourceforge.net/) means that words with UTF-8 characters will be ordered correctly for the [`language`](configuration.html#confval-language).

- This option is ignored if [`latex_engine`](configuration.html#confval-latex_engine) is `'platex'` (Japanese documents; **mendex** replaces **makeindex** then).
- The default is `True` for `'xelatex'` or `'lualatex'` as **makeindex** creates `.ind` files containing invalid bytes for the UTF-8 encoding if any indexed term starts with a non-ASCII character. With `'lualatex'` this then breaks the PDF build.
- The default is `False` for `'pdflatex'`, but `True` is recommended for non-English documents as soon as some indexed terms use non-ASCII characters from the language script. Attempting to index a term whose first character is non-ASCII will break the build, if [`latex_use_xindy`](configuration.html#confval-latex_use_xindy) is left to its default `False`.

Sphinx adds some dedicated support to the **xindy** base distribution for using `'pdflatex'` engine with Cyrillic scripts. With both `'pdflatex'` and Unicode engines, Cyrillic documents handle the indexing of Latin names correctly, even those having diacritics.

Added in version 1.8.

latex\_elements[¬∂](configuration.html#confval-latex_elements "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

Added in version 0.5.

[See the full documentation for latex\_elements](../latex.html#latex-elements-confval).

latex\_docclass[¬∂](configuration.html#confval-latex_docclass "Link to this definition")

Type:

`dict[str, str]`

Default:

`{}`

A dictionary mapping `'howto'` and `'manual'` to names of real document classes that will be used as the base for the two Sphinx classes. Default is to use `'article'` for `'howto'` and `'report'` for `'manual'`.

Added in version 1.0.

Changed in version 1.5: In Japanese documentation ([`language`](configuration.html#confval-language) is `'ja'`), by default `'jreport'` is used for `'howto'` and `'jsbook'` for `'manual'`.

latex\_additional\_files[¬∂](configuration.html#confval-latex_additional_files "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of file names, relative to the [configuration directory](../glossary.html#term-configuration-directory), to copy to the build directory when building LaTeX output. This is useful to copy files that Sphinx doesn‚Äôt copy automatically, or to overwrite Sphinx LaTeX support files with custom versions. Image files that are referenced in source files (e.g. via `.. image::`) are copied automatically and should not be listed there.

Attention

Filenames with the `.tex` extension will be automatically handed over to the PDF build process triggered by [`sphinx-build -M latexpdf`](../man/sphinx-build.html#cmdoption-sphinx-build-M) or by **make latexpdf**. If the file was added only to be `\input{}` from a modified preamble, you must add a further suffix such as `.txt` to the filename and adjust the `\input{}` macro accordingly.

Added in version 0.6.

Changed in version 1.2: This overrides the files provided from Sphinx such as `sphinx.sty`.

latex\_theme[¬∂](configuration.html#confval-latex_theme "Link to this definition")

Type:

`str`

Default:

`'manual'`

The ‚Äútheme‚Äù that the LaTeX output should use. It is a collection of settings for LaTeX output (e.g. document class, top level sectioning unit and so on).

The bundled first-party LaTeX themes are *manual* and *howto*:

`manual`

A LaTeX theme for writing a manual. It imports the `report` document class (Japanese documents use `jsbook`).

`howto`

A LaTeX theme for writing an article. It imports the `article` document class (Japanese documents use `jreport`). [`latex_appendices`](configuration.html#confval-latex_appendices) is only available for this theme.

Added in version 3.0.

latex\_theme\_options[¬∂](configuration.html#confval-latex_theme_options "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of options that influence the look and feel of the selected theme. These are theme-specific.

Added in version 3.1.

latex\_theme\_path[¬∂](configuration.html#confval-latex_theme_path "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of paths that contain custom LaTeX themes as subdirectories. Relative paths are taken as relative to the [configuration directory](../glossary.html#term-configuration-directory).

Added in version 3.0.

### Options for text output[¬∂](configuration.html#options-for-text-output "Link to this heading")

These options influence text output.

text\_add\_secnumbers[¬∂](configuration.html#confval-text_add_secnumbers "Link to this definition")

Type:

`bool`

Default:

`True`

Include section numbers in text output.

Added in version 1.7.

text\_newlines[¬∂](configuration.html#confval-text_newlines "Link to this definition")

Type:

`'unix' | 'windows' | 'native'`

Default:

`'unix'`

Determines which end-of-line character(s) are used in text output.

`'unix'`

Use Unix-style line endings (`\n`).

`'windows'`

Use Windows-style line endings (`\r\n`).

`'native'`

Use the line ending style of the platform the documentation is built on.

Added in version 1.1.

text\_secnumber\_suffix[¬∂](configuration.html#confval-text_secnumber_suffix "Link to this definition")

Type:

`str`

Default:

`'. '`

Suffix for section numbers in text output. Set to `' '` to suppress the final dot on section numbers.

Added in version 1.7.

text\_sectionchars[¬∂](configuration.html#confval-text_sectionchars "Link to this definition")

Type:

`str`

Default:

``'*=-~"+`'``

A string of 7 characters that should be used for underlining sections. The first character is used for first-level headings, the second for second-level headings and so on.

Added in version 1.1.

### Options for manual page output[¬∂](configuration.html#options-for-manual-page-output "Link to this heading")

These options influence manual page output.

man\_pages[¬∂](configuration.html#confval-man_pages "Link to this definition")

Type:

`Sequence[tuple[str, str, str, str, str]]`

Default:

The default manual pages

This value determines how to group the document tree into manual pages. It must be a list of tuples `(startdocname, name, description, authors, section)`, where the items are:

*startdocname*

String that specifies the [document name](../glossary.html#term-document-name) of the manual page‚Äôs master document. All documents referenced by the *startdoc* document in ToC trees will be included in the manual page. (If you want to use the default master document for your manual pages build, provide your [`master_doc`](configuration.html#confval-master_doc) here.)

*name*

Name of the manual page. This should be a short string without spaces or special characters. It is used to determine the file name as well as the name of the manual page (in the NAME section).

*description*

Description of the manual page. This is used in the NAME section. Can be an empty string if you do not want to automatically generate the NAME section.

*authors*

A list of strings with authors, or a single string. Can be an empty string or list if you do not want to automatically generate an AUTHORS section in the manual page.

*section*

The manual page section. Used for the output file name as well as in the manual page header.

Added in version 1.0.

man\_show\_urls[¬∂](configuration.html#confval-man_show_urls "Link to this definition")

Type:

`bool`

Default:

`False`

Add URL addresses after links.

Added in version 1.1.

man\_make\_section\_directory[¬∂](configuration.html#confval-man_make_section_directory "Link to this definition")

Type:

`bool`

Default:

`True`

Make a section directory on build man page.

Added in version 3.3.

Changed in version 4.0: The default is now `False` (previously `True`).

Changed in version 4.0.2: Revert the change in the default.

### Options for Texinfo output[¬∂](configuration.html#options-for-texinfo-output "Link to this heading")

These options influence Texinfo output.

texinfo\_documents[¬∂](configuration.html#confval-texinfo_documents "Link to this definition")

Type:

`Sequence[tuple[str, str, str, str, str, str, str, bool]]`

Default:

The default Texinfo documents

This value determines how to group the document tree into Texinfo source files. It must be a list of tuples `(startdocname, targetname, title, author, dir_entry, description, category, toctree_only)`, where the items are:

*startdocname*

String that specifies the [document name](../glossary.html#term-document-name) of the Texinfo file‚Äôs master document. All documents referenced by the *startdoc* document in ToC trees will be included in the Texinfo file. (If you want to use the default master document for your Texinfo build, provide your [`master_doc`](configuration.html#confval-master_doc) here.)

*targetname*

File name (no extension) of the Texinfo file in the output directory.

*title*

Texinfo document title. Can be empty to use the title of the *startdoc* document. Inserted as Texinfo markup, so special characters like `@` and `{}` will need to be escaped to be inserted literally.

*author*

Author for the Texinfo document. Inserted as Texinfo markup. Use `@*` to separate multiple authors, as in: `'John@*Sarah'`.

*dir\_entry*

The name that will appear in the top-level `DIR` menu file.

*description*

Descriptive text to appear in the top-level `DIR` menu file.

*category*

Specifies the section which this entry will appear in the top-level `DIR` menu file.

*toctree\_only*

Must be `True` or `False`. If True, the *startdoc* document itself is not included in the output, only the documents referenced by it via ToC trees. With this option, you can put extra stuff in the master document that shows up in the HTML, but not the Texinfo output.

Added in version 1.1.

texinfo\_appendices[¬∂](configuration.html#confval-texinfo_appendices "Link to this definition")

Type:

`Sequence[str]`

Default:

`[]`

A list of document names to append as an appendix to all manuals.

Added in version 1.1.

texinfo\_cross\_references[¬∂](configuration.html#confval-texinfo_cross_references "Link to this definition")

Type:

`bool`

Default:

`True`

Generate inline references in a document. Disabling inline references can make an info file more readable with a stand-alone reader (`info`).

Added in version 4.4.

texinfo\_domain\_indices[¬∂](configuration.html#confval-texinfo_domain_indices "Link to this definition")

Type:

`bool | Sequence[str]`

Default:

`True`

If True, generate domain-specific indices in addition to the general index. For e.g. the Python domain, this is the global module index.

This value can be a Boolean or a list of index names that should be generated. To find out the index name for a specific index, look at the HTML file name. For example, the Python module index has the name `'py-modindex'`.

Example:

```
texinfo_domain_indices = {
    'py-modindex',
}
```

Added in version 1.1.

Changed in version 7.4: Permit and prefer a set type.

texinfo\_elements[¬∂](configuration.html#confval-texinfo_elements "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary that contains Texinfo snippets that override those that Sphinx usually puts into the generated `.texi` files.

- Keys that you may want to override include:

  `'paragraphindent'`

  Number of spaces to indent the first line of each paragraph, default `2`. Specify `0` for no indentation.

  `'exampleindent'`

  Number of spaces to indent the lines for examples or literal blocks, default `4`. Specify `0` for no indentation.

  `'preamble'`

  Texinfo markup inserted near the beginning of the file.

  `'copying'`

  Texinfo markup inserted within the `@copying` block and displayed after the title. The default value consists of a simple title page identifying the project.
- Keys that are set by other options and therefore should not be overridden are `'author'`, `'body'`, `'date'`, `'direntry'` `'filename'`, `'project'`, `'release'`, and `'title'`.

Added in version 1.1.

texinfo\_no\_detailmenu[¬∂](configuration.html#confval-texinfo_no_detailmenu "Link to this definition")

Type:

`bool`

Default:

`False`

Do not generate a `@detailmenu` in the ‚ÄúTop‚Äù node‚Äôs menu containing entries for each sub-node in the document.

Added in version 1.2.

texinfo\_show\_urls[¬∂](configuration.html#confval-texinfo_show_urls "Link to this definition")

Type:

`'footnote' | 'no' | 'inline'`

Default:

`'footnote'`

Control how to display URL addresses. The setting can have the following values:

`'footnote'`

Display URLs in footnotes.

`'no'`

Do not display URLs.

`'inline'`

Display URLs inline in parentheses.

Added in version 1.1.

### Options for QtHelp output[¬∂](configuration.html#options-for-qthelp-output "Link to this heading")

These options influence qthelp output. This builder derives from the HTML builder, so the HTML options also apply where appropriate.

qthelp\_basename[¬∂](configuration.html#confval-qthelp_basename "Link to this definition")

Type:

`str`

Default:

The value of **project**

The basename for the qthelp file.

qthelp\_namespace[¬∂](configuration.html#confval-qthelp_namespace "Link to this definition")

Type:

`str`

Default:

`'org.sphinx.{project_name}.{project_version}'`

The namespace for the qthelp file.

qthelp\_theme[¬∂](configuration.html#confval-qthelp_theme "Link to this definition")

Type:

`str`

Default:

`'nonav'`

The HTML theme for the qthelp output.

qthelp\_theme\_options[¬∂](configuration.html#confval-qthelp_theme_options "Link to this definition")

Type:

`dict[str, Any]`

Default:

`{}`

A dictionary of options that influence the look and feel of the selected theme. These are theme-specific. The options understood by the [builtin themes](theming.html#builtin-themes) are described [here](theming.html#builtin-themes).

### Options for XML output[¬∂](configuration.html#options-for-xml-output "Link to this heading")

xml\_pretty[¬∂](configuration.html#confval-xml_pretty "Link to this definition")

Type:

`bool`

Default:

`True`

Pretty-print the XML.

Added in version 1.2.

### Options for the linkcheck builder[¬∂](configuration.html#options-for-the-linkcheck-builder "Link to this heading")

#### Filtering[¬∂](configuration.html#filtering "Link to this heading")

These options control which links the *linkcheck* builder checks, and which failures and redirects it ignores.

linkcheck\_allowed\_redirects[¬∂](configuration.html#confval-linkcheck_allowed_redirects "Link to this definition")

Type:

`dict[str, str]`

A dictionary that maps a pattern of the source URI to a pattern of the canonical URI. The *linkcheck* builder treats the redirected link as ‚Äúworking‚Äù when:

- the link in the document matches the source URI pattern, and
- the redirect location matches the canonical URI pattern.

The *linkcheck* builder will emit a warning when it finds redirected links that don‚Äôt meet the rules above. It can be useful to detect unexpected redirects when using [`the fail-on-warnings mode`](../man/sphinx-build.html#cmdoption-sphinx-build-W).

Example:

```
linkcheck_allowed_redirects = {
    # All HTTP redirections from the source URI to
    # the canonical URI will be treated as "working".
    r'https://sphinx-doc\.org/.*': r'https://sphinx-doc\.org/en/master/.*'
}
```

Added in version 4.1.

Changed in version 8.3: Setting `linkcheck_allowed_redirects` to the empty directory may now be used to warn on all redirects encountered by the *linkcheck* builder.

linkcheck\_anchors[¬∂](configuration.html#confval-linkcheck_anchors "Link to this definition")

Type:

`bool`

Default:

`True`

Check the validity of `#anchor`s in links. Since this requires downloading the whole document, it is considerably slower when enabled.

Added in version 1.2.

linkcheck\_anchors\_ignore[¬∂](configuration.html#confval-linkcheck_anchors_ignore "Link to this definition")

Type:

`Sequence[str]`

Default:

`["^!"]`

A list of regular expressions that match anchors that the *linkcheck* builder should skip when checking the validity of anchors in links. For example, this allows skipping anchors added by a website‚Äôs JavaScript.

Tip

Use [`linkcheck_anchors_ignore_for_url`](configuration.html#confval-linkcheck_anchors_ignore_for_url) to check a URL, but skip verifying that the anchors exist.

Note

If you want to ignore anchors of a specific page or of pages that match a specific pattern (but still check occurrences of the same page(s) that don‚Äôt have anchors), use [`linkcheck_ignore`](configuration.html#confval-linkcheck_ignore) instead, for example as follows:

```
linkcheck_ignore = [
   'https://www.sphinx-doc.org/en/1.7/intro.html#',
]
```

Added in version 1.5.

linkcheck\_anchors\_ignore\_for\_url[¬∂](configuration.html#confval-linkcheck_anchors_ignore_for_url "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list or tuple of regular expressions matching URLs for which the *linkcheck* builder should not check the validity of anchors. This allows skipping anchor checks on a per-page basis while still checking the validity of the page itself.

Added in version 7.1.

linkcheck\_exclude\_documents[¬∂](configuration.html#confval-linkcheck_exclude_documents "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of regular expressions that match documents in which the *linkcheck* builder should not check the validity of links. This can be used for permitting link decay in legacy or historical sections of the documentation.

Example:

```
# ignore all links in documents located in a subdirectory named 'legacy'
linkcheck_exclude_documents = [r'.*/legacy/.*']
```

Added in version 4.4.

linkcheck\_ignore[¬∂](configuration.html#confval-linkcheck_ignore "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of regular expressions that match URIs that should not be checked when doing a `linkcheck` build.

Server-issued redirects that match [`ignored URIs`](configuration.html#confval-linkcheck_ignore) will not be followed.

Example:

```
linkcheck_ignore = [r'https://localhost:\d+/']
```

Added in version 1.1.

#### HTTP Requests[¬∂](configuration.html#http-requests "Link to this heading")

These options control how the *linkcheck* builder makes HTTP requests, including how it handles redirects and authentication, and the number of workers to use.

linkcheck\_auth[¬∂](configuration.html#confval-linkcheck_auth "Link to this definition")

Type:

`Sequence[tuple[str, Any]]`

Default:

`[]`

Pass authentication information when doing a `linkcheck` build.

A list of `(regex_pattern, auth_info)` tuples where the items are:

*regex\_pattern*

A regular expression that matches a URI.

*auth\_info*

Authentication information to use for that URI. The value can be anything that is understood by the `requests` library (see [requests authentication](https://requests.readthedocs.io/en/latest/user/authentication/#authentication "(in Requests v2.32.3)") for details).

The *linkcheck* builder will use the first matching `auth_info` value it can find in the `linkcheck_auth` list, so values earlier in the list have higher priority.

Example:

```
linkcheck_auth = [
  ('https://foo\.yourcompany\.com/.+', ('johndoe', 'secret')),
  ('https://.+\.yourcompany\.com/.+', HTTPDigestAuth(...)),
]
```

Added in version 2.3.

linkcheck\_allow\_unauthorized[¬∂](configuration.html#confval-linkcheck_allow_unauthorized "Link to this definition")

Type:

`bool`

Default:

`False`

When a webserver responds with an HTTP 401 (unauthorised) response, the current default behaviour of the *linkcheck* builder is to treat the link as ‚Äúbroken‚Äù. To change that behaviour, set this option to `True`.

Changed in version 8.0: The default value for this option changed to `False`, meaning HTTP 401 responses to checked hyperlinks are treated as ‚Äúbroken‚Äù by default.

Added in version 7.3.

linkcheck\_rate\_limit\_timeout[¬∂](configuration.html#confval-linkcheck_rate_limit_timeout "Link to this definition")

Type:

`int`

Default:

`300`

The *linkcheck* builder may issue a large number of requests to the same site over a short period of time. This setting controls the builder behaviour when servers indicate that requests are rate-limited, by setting the maximum duration (in seconds) that the builder will wait for between each attempt before recording a failure.

The *linkcheck* builder always respects a server‚Äôs direction of when to retry (using the [Retry-After](https://datatracker.ietf.org/doc/html/rfc7231#section-7.1.3) header). Otherwise, `linkcheck` waits for a minute before to retry and keeps doubling the wait time between attempts until it succeeds or exceeds the `linkcheck_rate_limit_timeout` (in seconds). Custom timeouts should be given as a number of seconds.

Added in version 3.4.

linkcheck\_report\_timeouts\_as\_broken[¬∂](configuration.html#confval-linkcheck_report_timeouts_as_broken "Link to this definition")

Type:

`bool`

Default:

`False`

If [`linkcheck_timeout`](configuration.html#confval-linkcheck_timeout) expires while waiting for a response from a hyperlink, the *linkcheck* builder will report the link as a `timeout` by default. To report timeouts as `broken` instead, you can set [`linkcheck_report_timeouts_as_broken`](configuration.html#confval-linkcheck_report_timeouts_as_broken) to `True`.

Changed in version 8.0: The default value for this option changed to `False`, meaning timeouts that occur while checking hyperlinks will be reported using the new ‚Äòtimeout‚Äô status code.

Added in version 7.3.

linkcheck\_request\_headers[¬∂](configuration.html#confval-linkcheck_request_headers "Link to this definition")

Type:

`dict[str, dict[str, str]]`

Default:

`{}`

A dictionary that maps URL (without paths) to HTTP request headers.

The key is a URL base string like `'https://www.sphinx-doc.org/'`. To specify headers for other hosts, `"*"` can be used. It matches all hosts only when the URL does not match other settings.

The value is a dictionary that maps header name to its value.

Example:

```
linkcheck_request_headers = {
    "https://www.sphinx-doc.org/": {
        "Accept": "text/html",
        "Accept-Encoding": "utf-8",
    },
    "*": {
        "Accept": "text/html,application/xhtml+xml",
    }
}
```

Added in version 3.1.

linkcheck\_retries[¬∂](configuration.html#confval-linkcheck_retries "Link to this definition")

Type:

`int`

Default:

`1`

The number of times the *linkcheck* builder will attempt to check a URL before declaring it broken.

Added in version 1.4.

linkcheck\_timeout[¬∂](configuration.html#confval-linkcheck_timeout "Link to this definition")

Type:

`int`

Default:

`30`

The duration, in seconds, that the *linkcheck* builder will wait for a response after each hyperlink request.

Added in version 1.1.

linkcheck\_workers[¬∂](configuration.html#confval-linkcheck_workers "Link to this definition")

Type:

`int`

Default:

`5`

The number of worker threads to use when checking links.

Added in version 1.1.

## Domain options[¬∂](configuration.html#domain-options "Link to this heading")

### Options for the C domain[¬∂](configuration.html#options-for-the-c-domain "Link to this heading")

c\_extra\_keywords[¬∂](configuration.html#confval-c_extra_keywords "Link to this definition")

Type:

`Set[str] | Sequence[str]`

Default:

`['alignas', 'alignof', 'bool', 'complex', 'imaginary', 'noreturn', 'static_assert', 'thread_local']`

A list of identifiers to be recognised as keywords by the C parser.

Added in version 4.0.3.

Changed in version 7.4: `c_extra_keywords` can now be a set.

c\_id\_attributes[¬∂](configuration.html#confval-c_id_attributes "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A sequence of strings that the parser should additionally accept as attributes. For example, this can be used when `#define` has been used for attributes, for portability.

Example:

```
c_id_attributes = [
    'my_id_attribute',
]
```

Added in version 3.0.

Changed in version 7.4: `c_id_attributes` can now be a tuple.

c\_maximum\_signature\_line\_length[¬∂](configuration.html#confval-c_maximum_signature_line_length "Link to this definition")

Type:

`int | None`

Default:

`None`

If a signature‚Äôs length in characters exceeds the number set, each parameter within the signature will be displayed on an individual logical line.

When `None`, there is no maximum length and the entire signature will be displayed on a single logical line.

This is a domain-specific setting, overriding [`maximum_signature_line_length`](configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

c\_paren\_attributes[¬∂](configuration.html#confval-c_paren_attributes "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A sequence of strings that the parser should additionally accept as attributes with one argument. That is, if `my_align_as` is in the list, then `my_align_as(X)` is parsed as an attribute for all strings `X` that have balanced braces (`()`, `[]`, and `{}`). For example, this can be used when `#define` has been used for attributes, for portability.

Example:

```
c_paren_attributes = [
    'my_align_as',
]
```

Added in version 3.0.

Changed in version 7.4: `c_paren_attributes` can now be a tuple.

### Options for the C++ domain[¬∂](configuration.html#cpp-config "Link to this heading")

cpp\_id\_attributes[¬∂](configuration.html#confval-cpp_id_attributes "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A sequence of strings that the parser should additionally accept as attributes. For example, this can be used when `#define` has been used for attributes, for portability.

Example:

```
cpp_id_attributes = [
    'my_id_attribute',
]
```

Added in version 1.5.

Changed in version 7.4: `cpp_id_attributes` can now be a tuple.

cpp\_index\_common\_prefix[¬∂](configuration.html#confval-cpp_index_common_prefix "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A list of prefixes that will be ignored when sorting C++ objects in the global index.

Example:

```
cpp_index_common_prefix = [
    'awesome_lib::',
]
```

Added in version 1.5.

cpp\_maximum\_signature\_line\_length[¬∂](configuration.html#confval-cpp_maximum_signature_line_length "Link to this definition")

Type:

`int | None`

Default:

`None`

If a signature‚Äôs length in characters exceeds the number set, each parameter within the signature will be displayed on an individual logical line.

When `None`, there is no maximum length and the entire signature will be displayed on a single logical line.

This is a domain-specific setting, overriding [`maximum_signature_line_length`](configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

cpp\_paren\_attributes[¬∂](configuration.html#confval-cpp_paren_attributes "Link to this definition")

Type:

`Sequence[str]`

Default:

`()`

A sequence of strings that the parser should additionally accept as attributes with one argument. That is, if `my_align_as` is in the list, then `my_align_as(X)` is parsed as an attribute for all strings `X` that have balanced braces (`()`, `[]`, and `{}`). For example, this can be used when `#define` has been used for attributes, for portability.

Example:

```
cpp_paren_attributes = [
    'my_align_as',
]
```

Added in version 1.5.

Changed in version 7.4: `cpp_paren_attributes` can now be a tuple.

### Options for the Javascript domain[¬∂](configuration.html#options-for-the-javascript-domain "Link to this heading")

javascript\_maximum\_signature\_line\_length[¬∂](configuration.html#confval-javascript_maximum_signature_line_length "Link to this definition")

Type:

`int | None`

Default:

`None`

If a signature‚Äôs length in characters exceeds the number set, each parameter within the signature will be displayed on an individual logical line.

When `None`, there is no maximum length and the entire signature will be displayed on a single logical line.

This is a domain-specific setting, overriding [`maximum_signature_line_length`](configuration.html#confval-maximum_signature_line_length).

Added in version 7.1.

javascript\_trailing\_comma\_in\_multi\_line\_signatures[¬∂](configuration.html#confval-javascript_trailing_comma_in_multi_line_signatures "Link to this definition")

Type:

`bool`

Default:

`True`

Use a trailing comma in parameter lists spanning multiple lines, if true.

Added in version 8.2.

### Options for the Python domain[¬∂](configuration.html#options-for-the-python-domain "Link to this heading")

add\_module\_names[¬∂](configuration.html#confval-add_module_names "Link to this definition")

Type:

`bool`

Default:

`True`

A boolean that decides whether module names are prepended to all [object](../glossary.html#term-object) names (for object types where a ‚Äúmodule‚Äù of some kind is defined), e.g. for [`py:function`](domains/python.html#directive-py-function "py:function directive") directives.

modindex\_common\_prefix[¬∂](configuration.html#confval-modindex_common_prefix "Link to this definition")

Type:

`list[str]`

Default:

`[]`

A list of prefixes that are ignored for sorting the Python module index (e.g., if this is set to `['foo.']`, then `foo.bar` is shown under `B`, not `F`). This can be handy if you document a project that consists of a single package.

Caution

Works only for the HTML builder currently.

Added in version 0.6.

python\_display\_short\_literal\_types[¬∂](configuration.html#confval-python_display_short_literal_types "Link to this definition")

Type:

`bool`

Default:

`False`

This value controls how [`Literal`](https://docs.python.org/3/library/typing.html#typing.Literal "(in Python v3.13)") types are displayed.

#### Examples[¬∂](configuration.html#examples "Link to this heading")

The examples below use the following [`py:function`](domains/python.html#directive-py-function "py:function directive") directive:

```
.. py:function:: serve_food(item: Literal["egg", "spam", "lobster thermidor"]) -> None
```

When `False`, [`Literal`](https://docs.python.org/3/library/typing.html#typing.Literal "(in Python v3.13)") types display as per standard Python syntax, i.e.:

```
serve_food(item: Literal["egg", "spam", "lobster thermidor"]) -> None
```

When `True`, [`Literal`](https://docs.python.org/3/library/typing.html#typing.Literal "(in Python v3.13)") types display with a short, [**PEP 604**](https://peps.python.org/pep-0604/)-inspired syntax, i.e.:

```
serve_food(item: "egg" | "spam" | "lobster thermidor") -> None
```

Added in version 6.2.

python\_maximum\_signature\_line\_length[¬∂](configuration.html#confval-python_maximum_signature_line_length "Link to this definition")

Type:

`int | None`

Default:

`None`

If a signature‚Äôs length in characters exceeds the number set, each parameter within the signature will be displayed on an individual logical line.

When `None`, there is no maximum length and the entire signature will be displayed on a single logical line.

This is a domain-specific setting, overriding [`maximum_signature_line_length`](configuration.html#confval-maximum_signature_line_length).

For the Python domain, the signature length depends on whether the type parameters or the list of arguments are being formatted. For the former, the signature length ignores the length of the arguments list; for the latter, the signature length ignores the length of the type parameters list.

For instance, with `python_maximum_signature_line_length = 20`, only the list of type parameters will be wrapped while the arguments list will be rendered on a single line

```
.. py:function:: add[T: VERY_LONG_SUPER_TYPE, U: VERY_LONG_SUPER_TYPE](a: T, b: U)
```

Added in version 7.1.

python\_trailing\_comma\_in\_multi\_line\_signatures[¬∂](configuration.html#confval-python_trailing_comma_in_multi_line_signatures "Link to this definition")

Type:

`bool`

Default:

`True`

Use a trailing comma in parameter lists spanning multiple lines, if true.

Added in version 8.2.

python\_use\_unqualified\_type\_names[¬∂](configuration.html#confval-python_use_unqualified_type_names "Link to this definition")

Type:

`bool`

Default:

`False`

Suppress the module name of the python reference if it can be resolved.

Added in version 4.0.

Caution

This feature is experimental.

trim\_doctest\_flags[¬∂](configuration.html#confval-trim_doctest_flags "Link to this definition")

Type:

`bool`

Default:

`True`

Remove doctest flags (comments looking like `# doctest: FLAG, ...`) at the ends of lines and `<BLANKLINE>` markers for all code blocks showing interactive Python sessions (i.e. doctests). See the extension [`doctest`](extensions/doctest.html#module-sphinx.ext.doctest "sphinx.ext.doctest: Test snippets in the documentation.") for more possibilities of including doctests.

Added in version 1.0.

Changed in version 1.1: Now also removes `<BLANKLINE>`.

## Extension options[¬∂](configuration.html#extension-options "Link to this heading")

Extensions frequently have their own configuration options. Those for Sphinx‚Äôs first-party extensions are documented in each [extension‚Äôs page](extensions/index.html).

## Example configuration file[¬∂](configuration.html#example-configuration-file "Link to this heading")

```
# -- Project information -----------------------------------------------------
# https://www.sphinx-doc.org/en/master/usage/configuration.html#project-information

project = 'Test Project'
copyright = '2000-2042, The Test Project Authors'
author = 'The Authors'
version = release = '4.16'

# -- General configuration ------------------------------------------------
# https://www.sphinx-doc.org/en/master/usage/configuration.html#general-configuration

exclude_patterns = [
    '_build',
    'Thumbs.db',
    '.DS_Store',
]
extensions = []
language = 'en'
master_doc = 'index'
pygments_style = 'sphinx'
source_suffix = '.rst'
templates_path = ['_templates']

# -- Options for HTML output ----------------------------------------------
# https://www.sphinx-doc.org/en/master/usage/configuration.html#options-for-html-output

html_theme = 'alabaster'
html_static_path = ['_static']
```








### Navigation

- [Documentation](index.html) ¬ª

### On this page




The Basics


User guide


Community


Reference


# Sphinx FAQ[¬∂](faq.html#sphinx-faq "Link to this heading")

This is a list of Frequently Asked Questions about Sphinx. Feel free to suggest new entries!

## How do I‚Ä¶[¬∂](faq.html#how-do-i "Link to this heading")

‚Ä¶ create PDF files without LaTeX?

[rinohtype](https://github.com/brechtm/rinohtype) provides a PDF builder that can be used as a drop-in replacement for the LaTeX builder.

‚Ä¶ get section numbers?

They are automatic in LaTeX output; for HTML, give a `:numbered:` option to the [`toctree`](usage/restructuredtext/directives.html#directive-toctree "toctree directive") directive where you want to start numbering.

‚Ä¶ customize the look of the built HTML files?

Use themes, see [HTML theming](usage/theming.html).

‚Ä¶ add global substitutions or includes?

Add them in the [`rst_prolog`](usage/configuration.html#confval-rst_prolog) or [`rst_epilog`](usage/configuration.html#confval-rst_epilog) config value.

‚Ä¶ display the whole TOC tree in the sidebar?

Use the [`toctree`](development/html_themes/templating.html#toctree "toctree") callable in a custom layout template, probably in the `sidebartoc` block.

‚Ä¶ write my own extension?

See the [Tutorials](development/tutorials/index.html#extension-tutorials-index).

‚Ä¶ convert from my existing docs using MoinMoin markup?

The easiest way is to convert to xhtml, then convert [xhtml to reStructuredText](https://docutils.sourceforge.io/sandbox/xhtml2rest/xhtml2rest.py). You‚Äôll still need to mark up classes and such, but the headings and code examples come through cleanly.

For many more extensions and other contributed stuff, see the [sphinx-contrib](https://github.com/sphinx-contrib/) repository.

## Using Sphinx with‚Ä¶[¬∂](faq.html#using-sphinx-with "Link to this heading")

Read the Docs

[Read the Docs](https://readthedocs.org) is a documentation hosting service based around Sphinx. They will host sphinx documentation, along with supporting a number of other features including version support, PDF generation, and more. The [Getting Started](https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html) guide is a good place to start.

Epydoc

There‚Äôs a third-party extension providing an [api role](https://git.savannah.gnu.org/cgit/kenozooid.git/tree/doc/extapi.py) which refers to Epydoc‚Äôs API docs for a given identifier.

Doxygen

Michael Jones has developed a reStructuredText/Sphinx bridge to doxygen called [breathe](https://github.com/breathe-doc/breathe/tree/master).

SCons

Glenn Hutchings has written a SCons build script to build Sphinx documentation; it is hosted here: [https://bitbucket-archive.softwareheritage.org/projects/zo/zondo/sphinx-scons.html](https://bitbucket-archive.softwareheritage.org/projects/zo/zondo/sphinx-scons.html)

PyPI

Jannis Leidel wrote a [setuptools command](https://pypi.org/project/Sphinx-PyPI-upload/) that automatically uploads Sphinx documentation to the PyPI package documentation area at [https://pythonhosted.org/](https://pythonhosted.org/).

GitHub Pages

Please add [`sphinx.ext.githubpages`](usage/extensions/githubpages.html#module-sphinx.ext.githubpages "sphinx.ext.githubpages: Publish HTML docs in GitHub Pages") to your project. It allows you to publish your document in GitHub Pages. It generates helper files for GitHub Pages on building HTML document automatically.

MediaWiki

See [sphinx-wiki](https://bitbucket-archive.softwareheritage.org/projects/ke/kevindunn/sphinx-wiki.html), a project by Kevin Dunn.

Google Analytics

You can use a custom `layout.html` template, like this:

```
{% extends "!layout.html" %}

{%- block extrahead %}
{{ super() }}
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'XXX account number XXX']);
  _gaq.push(['_trackPageview']);
</script>
{% endblock %}

{% block footer %}
{{ super() }}
<div class="footer">This page uses <a href="https://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script>
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>
{% endblock %}
```

Google Search

To replace Sphinx‚Äôs built-in search function with Google Search, proceed as follows:

1. Go to [https://cse.google.com/cse/all](https://cse.google.com/cse/all) to create the Google Search code snippet.
2. Copy the code snippet and paste it into `_templates/searchbox.html` in your Sphinx project:

   ```
   <div>
      <h3>{{ _('Quick search') }}</h3>
      <script>
         (function() {
            var cx = '......';
            var gcse = document.createElement('script');
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
         })();
      </script>
     <gcse:search></gcse:search>
   </div>
   ```
3. Add `searchbox.html` to the [`html_sidebars`](usage/configuration.html#confval-html_sidebars) configuration value.

## Sphinx vs. Docutils[¬∂](faq.html#sphinx-vs-docutils "Link to this heading")

tl;dr: *docutils* converts reStructuredText to multiple output formats. Sphinx builds upon docutils to allow construction of cross-referenced and indexed bodies of documentation.

[docutils](https://docutils.sourceforge.io/) is a text processing system for converting plain text documentation into other, richer formats. As noted in the [docutils documentation](https://docutils.sourceforge.io/docs/dev/hacking.html), docutils uses *readers* to read a document, *parsers* for parsing plain text formats into an internal tree representation made up of different types of *nodes*, and *writers* to output this tree in various document formats. docutils provides parsers for one plain text format - [reStructuredText](https://docutils.sourceforge.io/rst.html) - though other, *out-of-tree* parsers have been implemented including Sphinx‚Äôs [Markdown parser](usage/markdown.html). On the other hand, it provides writers for many different formats including HTML, LaTeX, man pages, Open Document Format and XML.

docutils exposes all of its functionality through a variety of [front-end tools](https://docutils.sourceforge.io/docs/user/tools.html), such as `rst2html`, `rst2odt` and `rst2xml`. Crucially though, all of these tools, and docutils itself, are concerned with individual documents. They don‚Äôt support concepts such as cross-referencing, indexing of documents, or the construction of a document hierarchy (typically manifesting in a table of contents).

Sphinx builds upon docutils by harnessing docutils‚Äô readers and parsers and providing its own [Builders](usage/builders/index.html). As a result, Sphinx wraps some of the *writers* provided by docutils. This allows Sphinx to provide many features that would simply not be possible with docutils, such as those outlined above.

## Epub info[¬∂](faq.html#epub-info "Link to this heading")

The following list gives some hints for the creation of epub files:

- Split the text into several files. The longer the individual HTML files are, the longer it takes the ebook reader to render them. In extreme cases, the rendering can take up to one minute.
- Try to minimize the markup. This also pays in rendering time.
- For some readers you can use embedded or external fonts using the CSS `@font-face` directive. This is *extremely* useful for code listings which are often cut at the right margin. The default Courier font (or variant) is quite wide and you can only display up to 60 characters on a line. If you replace it with a narrower font, you can get more characters on a line. You may even use [FontForge](https://fontforge.github.io/) and create narrow variants of some free font. In my case I get up to 70 characters on a line.

  You may have to experiment a little until you get reasonable results.
- Test the created epubs. You can use several alternatives. The ones I am aware of are [Epubcheck](https://github.com/IDPF/epubcheck), [Calibre](https://calibre-ebook.com/), [FBreader](https://fbreader.org/) (although it does not render the CSS), and [Bookworm](https://www.oreilly.com/bookworm/index.html). For Bookworm, you can download the source from [https://code.google.com/archive/p/threepress](https://code.google.com/archive/p/threepress) and run your own local server.
- Large floating divs are not displayed properly. If they cover more than one page, the div is only shown on the first page. In that case you can copy the `epub.css` from the `sphinx/themes/epub/static/` directory to your local `_static/` directory and remove the float settings.
- Files that are inserted outside of the `toctree` directive must be manually included. This sometimes applies to appendixes, e.g. the glossary or the indices. You can add them with the [`epub_post_files`](usage/configuration.html#confval-epub_post_files) option.
- The handling of the epub cover page differs from the reStructuredText procedure which automatically resolves image paths and puts the images into the `_images` directory. For the epub cover page put the image in the [`html_static_path`](usage/configuration.html#confval-html_static_path) directory and reference it with its full path in the [`epub_cover`](usage/configuration.html#confval-epub_cover) config option.
- [kindlegen](https://www.amazon.com/gp/feature.html?docId=1000765211) command can convert from epub3 resulting file to `.mobi` file for Kindle. You can get `yourdoc.mobi` under `_build/epub` after the following command:

  ```
  $ make epub
  $ kindlegen _build/epub/yourdoc.epub
  ```

  The kindlegen command doesn‚Äôt accept documents that have section titles surrounding `toctree` directive:

  ```
  Section Title
  =============

  .. toctree::

     subdocument

  Section After Toc Tree
  ======================
  ```

  kindlegen assumes all documents order in line, but the resulting document has complicated order for kindlegen:

  ```
  ``parent.xhtml`` -> ``child.xhtml`` -> ``parent.xhtml``
  ```

  If you get the following error, fix your document structure:

  ```
  Error(prcgen):E24011: TOC section scope is not included in the parent chapter:(title)
  Error(prcgen):E24001: The table of content could not be built.
  ```

## Texinfo info[¬∂](faq.html#texinfo-info "Link to this heading")

There are two main programs for reading Info files, `info` and GNU Emacs. The `info` program has less features but is available in most Unix environments and can be quickly accessed from the terminal. Emacs provides better font and color display and supports extensive customization (of course).

### Displaying Links[¬∂](faq.html#displaying-links "Link to this heading")

One noticeable problem you may encounter with the generated Info files is how references are displayed. If you read the source of an Info file, a reference to this section would look like:

```
* note Displaying Links: target-id
```

In the stand-alone reader, `info`, references are displayed just as they appear in the source. Emacs, on the other-hand, will by default replace `*note:` with `see` and hide the `target-id`. For example:

> [Displaying Links](faq.html#texinfo-links)

One can disable generation of the inline references in a document with [`texinfo_cross_references`](usage/configuration.html#confval-texinfo_cross_references). That makes an info file more readable with stand-alone reader (`info`).

The exact behavior of how Emacs displays references is dependent on the variable `Info-hide-note-references`. If set to the value of `hide`, Emacs will hide both the `*note:` part and the `target-id`. This is generally the best way to view Sphinx-based documents since they often make frequent use of links and do not take this limitation into account. However, changing this variable affects how all Info documents are displayed and most do take this behavior into account.

If you want Emacs to display Info files produced by Sphinx using the value `hide` for `Info-hide-note-references` and the default value for all other Info files, try adding the following Emacs Lisp code to your start-up file, `~/.emacs.d/init.el`.

```
(defadvice info-insert-file-contents (after
                                      sphinx-info-insert-file-contents
                                      activate)
  "Hack to make `Info-hide-note-references' buffer-local and
automatically set to `hide' iff it can be determined that this file
was created from a Texinfo file generated by Docutils or Sphinx."
  (set (make-local-variable 'Info-hide-note-references)
       (default-value 'Info-hide-note-references))
  (save-excursion
    (save-restriction
      (widen) (goto-char (point-min))
      (when (re-search-forward
             "^Generated by \\(Sphinx\\|Docutils\\)"
             (save-excursion (search-forward "\x1f" nil t)) t)
        (set (make-local-variable 'Info-hide-note-references)
             'hide)))))
```

### Notes[¬∂](faq.html#notes "Link to this heading")

The following notes may be helpful if you want to create Texinfo files:

- Each section corresponds to a different `node` in the Info file.
- Colons (`:`) cannot be properly escaped in menu entries and xrefs. They will be replaced with semicolons (`;`).
- Links to external Info files can be created using the somewhat official URI scheme `info`. For example:

  ```
  info:Texinfo#makeinfo_options
  ```








### Navigation

- [Documentation](index.html) ¬ª

### On this page



The Basics


User guide


Community


Reference


# Projects using Sphinx[¬∂](examples.html#projects-using-sphinx "Link to this heading")

This is an incomplete list of projects that use Sphinx for their documentation. If you would like to add a project, please [create an issue or pull request on GitHub](https://github.com/sphinx-doc/sphinx/).

I‚Äôve grouped the list into sections to make it easier to find interesting examples.

## Documentation using the alabaster theme[¬∂](examples.html#documentation-using-the-alabaster-theme "Link to this heading")


## Documentation using the classic theme[¬∂](examples.html#documentation-using-the-classic-theme "Link to this heading")


## Documentation using the sphinxdoc theme[¬∂](examples.html#documentation-using-the-sphinxdoc-theme "Link to this heading")


## Documentation using the nature theme[¬∂](examples.html#documentation-using-the-nature-theme "Link to this heading")


## Documentation using another builtin theme[¬∂](examples.html#documentation-using-another-builtin-theme "Link to this heading")


## Documentation using Read the Docs Sphinx Theme[¬∂](examples.html#documentation-using-read-the-docs-sphinx-theme "Link to this heading")

[Read the Docs Sphinx Theme documentation](https://sphinx-rtd-theme.readthedocs.io/)


## Documentation using Sphinx Bootstrap Theme[¬∂](examples.html#documentation-using-sphinx-bootstrap-theme "Link to this heading")

[Sphinx Bootstrap Theme documentation](https://ryan-roemer.github.io/sphinx-bootstrap-theme/)


## Documentation using PyData Sphinx Theme[¬∂](examples.html#documentation-using-pydata-sphinx-theme "Link to this heading")

[Pydata Sphinx Theme documentation](https://pydata-sphinx-theme.readthedocs.io/)


## Documentation using Furo theme[¬∂](examples.html#documentation-using-furo-theme "Link to this heading")

[Furo theme documentation](https://pradyunsg.me/furo/)


## Documentation using a custom theme or integrated in a website[¬∂](examples.html#documentation-using-a-custom-theme-or-integrated-in-a-website "Link to this heading")


## Homepages and other non-documentation sites[¬∂](examples.html#homepages-and-other-non-documentation-sites "Link to this heading")


## Books produced using Sphinx[¬∂](examples.html#books-produced-using-sphinx "Link to this heading")

- ‚ÄúPioneers and Prominent Men of Utah‚Äù

## Theses produced using Sphinx[¬∂](examples.html#theses-produced-using-sphinx "Link to this heading")


## Projects integrating Sphinx functionality[¬∂](examples.html#projects-integrating-sphinx-functionality "Link to this heading")

- [Read the Docs](https://readthedocs.org/), a software-as-a-service documentation hosting platform, uses Sphinx to automatically build documentation updates that are pushed to GitHub.
- [Spyder](https://docs.spyder-ide.org/current/panes/help.html), the Scientific Python Development Environment, uses Sphinx in its help pane to render rich documentation for functions, classes and methods automatically or on-demand.




### Navigation

- [Documentation](../index.html) ¬ª
- [Using Sphinx](index.html) ¬ª

### On this page









The Basics


User guide



Community


Reference


# Cross-references[¬∂](referencing.html#cross-references "Link to this heading")

One of Sphinx‚Äôs most useful features is creating automatic cross-references through semantic cross-referencing roles. A cross reference to an object description, such as ``:func:`spam` ``, will create a link to the place where `spam()` is documented, appropriate to each output format (HTML, PDF, ePUB, etc.).

## Syntax[¬∂](referencing.html#syntax "Link to this heading")

Sphinx supports various cross-referencing roles to create links to other elements in the documentation. In general, writing ``:role:`target` `` creates a link to the object called *target* of the type indicated by *role*. The link‚Äôs text depends the role but is often the same as or similar to *target*.

The behavior can be modified in the following ways:

- **Custom link text:** You can specify the link text explicitly using the same notation as in reStructuredText [external links](restructuredtext/basics.html#rst-external-links): ``:role:`custom text <target>` `` will refer to *target* and display *custom text* as the text of the link.
- **Suppressed link:** Prefixing with an exclamation mark (`!`) prevents the creation of a link but otherwise keeps the visual output of the role.

  For example, writing ``:py:func:`!target` `` displays `target()`, with no link generated.

  This is helpful for cases in which the link target does not exist; e.g. changelog entries that describe removed functionality, or third-party libraries that don‚Äôt support [intersphinx](extensions/intersphinx.html). Suppressing the link prevents warnings in [`nitpicky`](configuration.html#confval-nitpicky) mode.
- **Modified domain reference:** When [referencing domain objects](referencing.html#ref-objects), a tilde `~` prefix shortens the link text to the last component of the target. For example, ``:py:meth:`~queue.Queue.get` `` will refer to `queue.Queue.get` but only display `get` as the link text.

  In HTML output, the link‚Äôs `title` attribute (that is e.g. shown as a tool-tip on mouse-hover) will always be the full target name.

## Cross-referencing objects[¬∂](referencing.html#cross-referencing-objects "Link to this heading")

These roles are described with their respective domains:


## Cross-referencing arbitrary locations[¬∂](referencing.html#cross-referencing-arbitrary-locations "Link to this heading")

:ref:[¬∂](referencing.html#role-ref "Link to this definition")

To support cross-referencing to arbitrary locations in any document, the standard reStructuredText labels are used. For this to work label names must be unique throughout the entire documentation. There are two ways in which you can refer to labels:

- If you place a label directly before a section title, you can reference to it with ``:ref:`label-name` ``. For example:

  ```
  .. _my-reference-label:

  Section to cross-reference
  --------------------------

  This is the text of the section.

  It refers to the section itself, see :ref:`my-reference-label`.
  ```

  The `:ref:` role would then generate a link to the section, with the link title being ‚ÄúSection to cross-reference‚Äù. This works just as well when section and reference are in different source files.

  Automatic labels also work with figures. For example:

  ```
  .. _my-figure:

  .. figure:: whatever

     Figure caption
  ```

  In this case, a reference ``:ref:`my-figure` `` would insert a reference to the figure with link text ‚ÄúFigure caption‚Äù.

  The same works for tables that are given an explicit caption using the [table](https://docutils.sourceforge.io/docs/ref/rst/directives.html#table) directive.
- Labels that aren‚Äôt placed before a section title can still be referenced, but you must give the link an explicit title, using this syntax: ``:ref:`Link title <label-name>` ``.

Note

Reference labels must start with an underscore. When referencing a label, the underscore must be omitted (see examples above).

Using [`ref`](referencing.html#role-ref "ref role") is advised over standard reStructuredText links to sections (like `` `Section title`_``) because it works across files, when section headings are changed, will raise warnings if incorrect, and works for all builders that support cross-references.

## Cross-referencing documents[¬∂](referencing.html#cross-referencing-documents "Link to this heading")

Added in version 0.6.

There is also a way to directly link to documents:

:doc:[¬∂](referencing.html#role-doc "Link to this definition")

Link to the specified document; the document name can be specified in absolute or relative fashion. For example, if the reference ``:doc:`parrot` `` occurs in the document `sketches/index`, then the link refers to `sketches/parrot`. If the reference is ``:doc:`/people` `` or ``:doc:`../people` ``, the link refers to `people`.

If no explicit link text is given (like usual: ``:doc:`Monty Python members </people>` ``), the link caption will be the title of the given document.

## Referencing downloadable files[¬∂](referencing.html#referencing-downloadable-files "Link to this heading")

Added in version 0.6.

:download:[¬∂](referencing.html#role-download "Link to this definition")

This role lets you link to files within your source tree that are not reStructuredText documents that can be viewed, but files that can be downloaded.

When you use this role, the referenced file is automatically marked for inclusion in the output when building (obviously, for HTML output only). All downloadable files are put into a `_downloads/<unique hash>/` subdirectory of the output directory; duplicate filenames are handled.

An example:

```
See :download:`this example script <../example.py>`.
```

The given filename is usually relative to the directory the current source file is contained in, but if it absolute (starting with `/`), it is taken as relative to the top source directory.

The `example.py` file will be copied to the output directory, and a suitable link generated to it.

Not to show unavailable download links, you should wrap whole paragraphs that have this role:

```
.. only:: builder_html

   See :download:`this example script <../example.py>`.
```

## Cross-referencing figures by figure number[¬∂](referencing.html#cross-referencing-figures-by-figure-number "Link to this heading")

Added in version 1.3.

Changed in version 1.5: [`numref`](referencing.html#role-numref "numref role") role can also refer sections. And [`numref`](referencing.html#role-numref "numref role") allows `{name}` for the link text.

:numref:[¬∂](referencing.html#role-numref "Link to this definition")

Link to the specified figures, tables, code-blocks and sections; the standard reStructuredText labels are used. When you use this role, it will insert a reference to the figure with link text by its figure number like ‚ÄúFig. 1.1‚Äù.

If an explicit link text is given (as usual: ``:numref:`Image of Sphinx (Fig. %s) <my-figure>` ``), the link caption will serve as title of the reference. As placeholders, %s and {number} get replaced by the figure number and {name} by the figure caption. If no explicit link text is given, the [`numfig_format`](configuration.html#confval-numfig_format) setting is used as fall-back default.

If [`numfig`](configuration.html#confval-numfig) is `False`, figures are not numbered, so this role inserts not a reference but the label or the link text.

## Cross-referencing other items of interest[¬∂](referencing.html#cross-referencing-other-items-of-interest "Link to this heading")

The following roles do possibly create a cross-reference, but do not refer to objects:

:confval:[¬∂](referencing.html#role-confval "Link to this definition")

A configuration value or setting. Index entries are generated. Also generates a link to the matching [`confval`](domains/standard.html#directive-confval "confval directive") directive, if it exists.

:envvar:[¬∂](referencing.html#role-envvar "Link to this definition")

An environment variable. Index entries are generated. Also generates a link to the matching [`envvar`](domains/standard.html#directive-envvar "envvar directive") directive, if it exists.

:token:[¬∂](referencing.html#role-token "Link to this definition")

The name of a grammar token (used to create links between [`productionlist`](restructuredtext/directives.html#directive-productionlist "productionlist directive") directives).

:keyword:[¬∂](referencing.html#role-keyword "Link to this definition")

The name of a keyword in Python. This creates a link to a reference label with that name, if it exists.

:option:[¬∂](referencing.html#role-option "Link to this definition")

A command-line option to an executable program. This generates a link to a [`option`](domains/standard.html#directive-option "option directive") directive, if it exists.

The following role creates a cross-reference to a term in a [glossary](restructuredtext/directives.html#glossary-directive):

:term:[¬∂](referencing.html#role-term "Link to this definition")

Reference to a term in a glossary. A glossary is created using the `glossary` directive containing a definition list with terms and definitions. It does not have to be in the same file as the `term` markup, for example the Python docs have one global glossary in the `glossary.rst` file.

If you use a term that‚Äôs not explained in a glossary, you‚Äôll get a warning during build.

This role also supports [custom link text](referencing.html#xref-modifiers) from the general cross-reference syntax.

## Cross-referencing anything[¬∂](referencing.html#cross-referencing-anything "Link to this heading")

:any:[¬∂](referencing.html#role-any "Link to this definition")

Added in version 1.3.

This convenience role tries to do its best to find a valid target for its reference text.

- First, it tries standard cross-reference targets that would be referenced by [`doc`](referencing.html#role-doc "doc role"), [`ref`](referencing.html#role-ref "ref role") or [`option`](referencing.html#role-option "option role").

  Custom objects added to the standard domain by extensions (see [`Sphinx.add_object_type()`](../extdev/appapi.html#sphinx.application.Sphinx.add_object_type "sphinx.application.Sphinx.add_object_type")) are also searched.
- Then, it looks for objects (targets) in all loaded domains. It is up to the domains how specific a match must be. For example, in the Python domain a reference of ``:any:`Builder` `` would match the `sphinx.builders.Builder` class.

If none or multiple targets are found, a warning will be emitted. In the case of multiple targets, you can change ‚Äúany‚Äù to a specific role.

This role is a good candidate for setting [`default_role`](configuration.html#confval-default_role). If you do, you can write cross-references without a lot of markup overhead. For example, in this Python function documentation:

```
.. function:: install()

   This function installs a `handler` for every signal known by the
   `signal` module.  See the section `about-signals` for more information.
```

there could be references to a glossary term (usually ``:term:`handler` ``), a Python module (usually ``:py:mod:`signal` `` or ``:mod:`signal` ``) and a section (usually ``:ref:`about-signals` ``).

The [`any`](referencing.html#role-any "any role") role also works together with the [`intersphinx`](extensions/intersphinx.html#module-sphinx.ext.intersphinx "sphinx.ext.intersphinx: Link to other Sphinx documentation.") extension: when no local cross-reference is found, all object types of intersphinx inventories are also searched.








### Navigation

- [Documentation](../index.html) ¬ª

### On this page




The Basics


User guide


Community


Reference


# Getting started[¬∂](quickstart.html#getting-started "Link to this heading")

Sphinx is a *documentation generator* or a tool that translates a set of plain text source files into various output formats, automatically producing cross-references, indices, etc. That is, if you have a directory containing a bunch of [reStructuredText](restructuredtext/index.html) or [Markdown](markdown.html) documents, Sphinx can generate a series of HTML files, a PDF file (via LaTeX), man pages and much more.

Sphinx focuses on documentation, in particular handwritten documentation, however, Sphinx can also be used to generate blogs, homepages and even books. Much of Sphinx‚Äôs power comes from the richness of its default plain-text markup format, [reStructuredText](restructuredtext/index.html), along with its [significant extensibility capabilities](../development/index.html).

The goal of this document is to give you a quick taste of what Sphinx is and how you might use it. When you‚Äôre done here, you can check out the [installation guide](installation.html) followed by the intro to the default markup format used by Sphinx, [reStructuredText](restructuredtext/index.html).

For a great ‚Äúintroduction‚Äù to writing docs in general ‚Äì the whys and hows, see also [Write the docs](https://www.writethedocs.org/guide/writing/beginners-guide-to-docs/), written by Eric Holscher.

## Setting up the documentation sources[¬∂](quickstart.html#setting-up-the-documentation-sources "Link to this heading")

The root directory of a Sphinx collection of plain-text document sources is called the [source directory](../glossary.html#term-source-directory). This directory also contains the Sphinx configuration file `conf.py`, where you can configure all aspects of how Sphinx reads your sources and builds your documentation. [\[1\]](quickstart.html#id6)

Sphinx comes with a script called **sphinx-quickstart** that sets up a source directory and creates a default `conf.py` with the most useful configuration values from a few questions it asks you. To use this, run:

```
$ sphinx-quickstart
```

## Defining document structure[¬∂](quickstart.html#defining-document-structure "Link to this heading")

Let‚Äôs assume you‚Äôve run **sphinx-quickstart**. It created a source directory with `conf.py` and a root document, `index.rst`. The main function of the [root document](../glossary.html#term-root-document) is to serve as a welcome page, and to contain the root of the ‚Äútable of contents tree‚Äù (or *toctree*). This is one of the main things that Sphinx adds to reStructuredText, a way to connect multiple files to a single hierarchy of documents.

reStructuredText directives

`toctree` is a reStructuredText *directive*, a very versatile piece of markup. Directives can have arguments, options and content.

*Arguments* are given directly after the double colon following the directive‚Äôs name. Each directive decides whether it can have arguments, and how many.

*Options* are given after the arguments, in form of a ‚Äúfield list‚Äù. The `maxdepth` is such an option for the `toctree` directive.

*Content* follows the options or arguments after a blank line. Each directive decides whether to allow content, and what to do with it.

A common gotcha with directives is that **the first line of the content must be indented to the same level as the options are**.

The `toctree` directive initially is empty, and looks like so:

```
.. toctree::
   :maxdepth: 2
```

You add documents listing them in the *content* of the directive:

```
.. toctree::
   :maxdepth: 2

   usage/installation
   usage/quickstart
   ...
```

This is exactly how the `toctree` for this documentation looks. The documents to include are given as [document name](../glossary.html#term-document-name)s, which in short means that you leave off the file name extension and use forward slashes (`/`) as directory separators.

See also

Read more about [the toctree directive](restructuredtext/directives.html#toctree-directive).

You can now create the files you listed in the `toctree` and add content, and their section titles will be inserted (up to the `maxdepth` level) at the place where the `toctree` directive is placed. Also, Sphinx now knows about the order and hierarchy of your documents. (They may contain `toctree` directives themselves, which means you can create deeply nested hierarchies if necessary.)

## Adding content[¬∂](quickstart.html#adding-content "Link to this heading")

In Sphinx source files, you can use most features of standard [reStructuredText](../glossary.html#term-reStructuredText). There are also several features added by Sphinx. For example, you can add cross-file references in a portable way (which works for all output types) using the [`ref`](referencing.html#role-ref "ref role") role.

For an example, if you are viewing the HTML version, you can look at the source for this document ‚Äì use the ‚ÄúShow Source‚Äù link in the sidebar.

See also

[reStructuredText](restructuredtext/index.html) for a more in-depth introduction to reStructuredText, including markup added by Sphinx.

## Running the build[¬∂](quickstart.html#running-the-build "Link to this heading")

Now that you have added some files and content, let‚Äôs make a first build of the docs. A build is started with the **sphinx-build** program:

```
$ sphinx-build -M html sourcedir outputdir
```

where *sourcedir* is the [source directory](../glossary.html#term-source-directory), and *outputdir* is the directory in which you want to place the built documentation. The [`-M`](../man/sphinx-build.html#cmdoption-sphinx-build-M) option selects a builder; in this example Sphinx will build HTML files.

See also

Refer to the [sphinx-build man page](../man/sphinx-build.html) for all options that **sphinx-build** supports.

You can also build a **live version of the documentation** that you can preview in the browser. It will detect changes and reload the page any time you make edits. To do so, use [sphinx-autobuild](https://github.com/sphinx-doc/sphinx-autobuild) to run the following command:

```
$ sphinx-autobuild source-dir output-dir
```

However, **sphinx-quickstart** script creates a `Makefile` and a `make.bat` which make life even easier for you. These can be executed by running **make** with the name of the builder. For example.

```
$ make html
```

This will build HTML docs in the build directory you chose. Execute **make** without an argument to see which targets are available.

How do I generate PDF documents?

`make latexpdf` runs the [`LaTeX builder`](builders/index.html#sphinx.builders.latex.LaTeXBuilder "sphinx.builders.latex.LaTeXBuilder") and readily invokes the pdfTeX toolchain for you.

## Documenting objects[¬∂](quickstart.html#documenting-objects "Link to this heading")

One of Sphinx‚Äôs main objectives is easy documentation of *objects* (in a very general sense) in any *domain*. A domain is a collection of object types that belong together, complete with markup to create and reference descriptions of these objects.

The most prominent domain is the Python domain. For example, to document Python‚Äôs built-in function `enumerate()`, you would add this to one of your source files.

```
.. py:function:: enumerate(sequence[, start=0])

   Return an iterator that yields tuples of an index and an item of the
   *sequence*. (And so on.)
```

This is rendered like this:

enumerate(*sequence*\[, *start=0*])[¬∂](quickstart.html#enumerate "Link to this definition")

Return an iterator that yields tuples of an index and an item of the *sequence*. (And so on.)

The argument of the directive is the *signature* of the object you describe, the content is the documentation for it. Multiple signatures can be given, each in its own line.

The Python domain also happens to be the default domain, so you don‚Äôt need to prefix the markup with the domain name.

```
.. function:: enumerate(sequence[, start=0])

   ...
```

does the same job if you keep the default setting for the default domain.

There are several more directives for documenting other types of Python objects, for example [`py:class`](domains/python.html#directive-py-class "py:class directive") or [`py:method`](domains/python.html#directive-py-method "py:method directive"). There is also a cross-referencing *role* for each of these object types. This markup will create a link to the documentation of `enumerate()`.

```
The :py:func:`enumerate` function can be used for ...
```

And here is the proof: A link to [`enumerate()`](quickstart.html#enumerate "enumerate").

Again, the `py:` can be left out if the Python domain is the default one. It doesn‚Äôt matter which file contains the actual documentation for `enumerate()`; Sphinx will find it and create a link to it.

Each domain will have special rules for how the signatures can look like, and make the formatted output look pretty, or add specific features like links to parameter types, e.g. in the C/C++ domains.

See also

[Domains](domains/index.html) for all the available domains and their directives/roles.

## Basic configuration[¬∂](quickstart.html#basic-configuration "Link to this heading")

Earlier we mentioned that the `conf.py` file controls how Sphinx processes your documents. In that file, which is executed as a Python source file, you assign configuration values. For advanced users: since it is executed by Sphinx, you can do non-trivial tasks in it, like extending [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") or importing a module to find out the version you are documenting.

The config values that you probably want to change are already put into the `conf.py` by **sphinx-quickstart** and initially commented out (with standard Python syntax: a `#` comments the rest of the line). To change the default value, remove the hash sign and modify the value. To customize a config value that is not automatically added by **sphinx-quickstart**, just add an additional assignment.

Keep in mind that the file uses Python syntax for strings, numbers, lists and so on. The file is saved in UTF-8 by default, as indicated by the encoding declaration in the first line.

See also

[Configuration](configuration.html) for documentation of all available config values.

## Autodoc[¬∂](quickstart.html#autodoc "Link to this heading")

When documenting Python code, it is common to put a lot of documentation in the source files, in documentation strings. Sphinx supports the inclusion of docstrings from your modules with an *extension* (an extension is a Python module that provides additional features for Sphinx projects) called *autodoc*.

See also

[`sphinx.ext.autodoc`](extensions/autodoc.html#module-sphinx.ext.autodoc "sphinx.ext.autodoc: Include documentation from docstrings.") for the complete description of the features of autodoc.

## Intersphinx[¬∂](quickstart.html#intersphinx "Link to this heading")

Many Sphinx documents including the [Python documentation](https://docs.python.org/3) are published on the Internet. When you want to make links to such documents from your documentation, you can do it with [`sphinx.ext.intersphinx`](extensions/intersphinx.html#module-sphinx.ext.intersphinx "sphinx.ext.intersphinx: Link to other Sphinx documentation.").

In order to use intersphinx, you need to activate it in `conf.py` by putting the string `'sphinx.ext.intersphinx'` into the [`extensions`](configuration.html#confval-extensions) list and set up the [`intersphinx_mapping`](extensions/intersphinx.html#confval-intersphinx_mapping) config value.

For example, to link to `io.open()` in the Python library manual, you need to setup your [`intersphinx_mapping`](extensions/intersphinx.html#confval-intersphinx_mapping) like:

```
intersphinx_mapping = {'python': ('https://docs.python.org/3', None)}
```

And now, you can write a cross-reference like ``:py:func:`io.open` ``. Any cross-reference that has no matching target in the current documentation set, will be looked up in the documentation sets configured in [`intersphinx_mapping`](extensions/intersphinx.html#confval-intersphinx_mapping) (this needs access to the URL in order to download the list of valid targets). Intersphinx also works for some other [domain](../glossary.html#term-domain)'s roles including `:ref:`, however it doesn‚Äôt work for `:doc:` as that is non-domain role.

See also

[`sphinx.ext.intersphinx`](extensions/intersphinx.html#module-sphinx.ext.intersphinx "sphinx.ext.intersphinx: Link to other Sphinx documentation.") for the complete description of the features of intersphinx.

## More topics to be covered[¬∂](quickstart.html#more-topics-to-be-covered "Link to this heading")

- [Other extensions](extensions/index.html):
- Static files
- Using extensions

Footnotes

\[[1](quickstart.html#id2)]

This is the usual layout. However, `conf.py` can also live in another directory, the [configuration directory](../glossary.html#term-configuration-directory). Refer to the [sphinx-build man page](../man/sphinx-build.html) for more information.








### Navigation

- [Documentation](../index.html) ¬ª

The Basics



User guide


Community


Reference


# Build your first project[¬∂](index.html#build-your-first-project "Link to this heading")

In this tutorial you will build a simple documentation project using Sphinx, and view it in your browser as HTML. The project will include narrative, handwritten documentation, as well as autogenerated API documentation.

The tutorial is aimed towards Sphinx newcomers willing to learn the fundamentals of how projects are created and structured. You will create a fictional software library to generate random food recipes that will serve as a guide throughout the process, with the objective of properly documenting it.

To showcase Sphinx capabilities for code documentation you will use Python, which also supports *automatic* documentation generation.

Note

Several other languages are natively supported in Sphinx for *manual* code documentation, however they require extensions for *automatic* code documentation, like [Breathe](https://breathe.readthedocs.io/).

To follow the instructions you will need access to a Linux-like command line and a basic understanding of how it works, as well as a working Python installation for development, since you will use *Python virtual environments* to create the project.





















### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page



The Basics



User guide


Community


Reference


# Getting started[¬∂](getting-started.html#getting-started "Link to this heading")

## Setting up your project and development environment[¬∂](getting-started.html#setting-up-your-project-and-development-environment "Link to this heading")

In a new directory, create a file called `README.rst` with the following content.

README.rst[¬∂](getting-started.html#id1 "Link to this code")

```
Lumache
=======

**Lumache** (/lu'make/) is a Python library for cooks and food lovers that
creates recipes mixing random ingredients.
```

It is a good moment to create a Python virtual environment and install the required tools. For that, open a command line terminal, `cd` into the directory you just created, and run the following commands:

```
$ python -m venv .venv
$ source .venv/bin/activate
(.venv) $ python -m pip install sphinx
```

Note

The installation method used above is described in more detail in [PyPI package](../usage/installation.html#install-pypi). For the rest of this tutorial, the instructions will assume a Python virtual environment.

If you executed these instructions correctly, you should have the Sphinx command line tools available. You can do a basic verification running this command:

```
(.venv) $ sphinx-build --version
sphinx-build 4.0.2
```

If you see a similar output, you are on the right path!

## Creating the documentation layout[¬∂](getting-started.html#creating-the-documentation-layout "Link to this heading")

Then from the command line, run the following command:

```
(.venv) $ sphinx-quickstart docs
```

This will present to you a series of questions required to create the basic directory and configuration layout for your project inside the `docs` folder. To proceed, answer each question as follows:

- `> Separate source and build directories (y/n) [n]`: Write ‚Äú`y`‚Äù (without quotes) and press `Enter`.
- `> Project name`: Write ‚Äú`Lumache`‚Äù (without quotes) and press `Enter`.
- `> Author name(s)`: Write ‚Äú`Graziella`‚Äù (without quotes) and press `Enter`.
- `> Project release []`: Write ‚Äú`0.1`‚Äù (without quotes) and press `Enter`.
- `> Project language [en]`: Leave it empty (the default, English) and press `Enter`.

After the last question, you will see the new `docs` directory with the following content.

```
docs
‚îú‚îÄ‚îÄ build
‚îú‚îÄ‚îÄ make.bat
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ source
   ‚îú‚îÄ‚îÄ conf.py
   ‚îú‚îÄ‚îÄ index.rst
   ‚îú‚îÄ‚îÄ _static
   ‚îî‚îÄ‚îÄ _templates
```

The purpose of each of these files is:

`build/`

An empty directory (for now) that will hold the rendered documentation.

`make.bat` and `Makefile`

Convenience scripts to simplify some common Sphinx operations, such as rendering the content.

`source/conf.py`

A Python script holding the configuration of the Sphinx project. It contains the project name and release you specified to `sphinx-quickstart`, as well as some extra configuration keys.

`source/index.rst`

The [root document](../glossary.html#term-root-document) of the project, which serves as welcome page and contains the root of the ‚Äútable of contents tree‚Äù (or *toctree*).

Thanks to this bootstrapping step, you already have everything needed to render the documentation as HTML for the first time. To do that, run this command:

```
(.venv) $ sphinx-build -M html docs/source/ docs/build/
```

And finally, open `docs/build/html/index.html` in your browser. You should see something like this:

[![Freshly created documentation of Lumache](../_images/lumache-first-light.png)](../_images/lumache-first-light.png)

Freshly created documentation of Lumache[¬∂](getting-started.html#id2 "Link to this image")

There we go! You created your first HTML documentation using Sphinx. Now you can start [customizing it](first-steps.html).








### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page



The Basics



User guide


Community


Reference


# First steps to document your project using Sphinx[¬∂](first-steps.html#first-steps-to-document-your-project-using-sphinx "Link to this heading")

## Building your HTML documentation[¬∂](first-steps.html#building-your-html-documentation "Link to this heading")

The `index.rst` file that `sphinx-quickstart` created has some content already, and it gets rendered as the front page of your HTML documentation. It is written in reStructuredText, a powerful markup language.

Modify the file as follows:

docs/source/index.rst[¬∂](first-steps.html#id1 "Link to this code")

```
Welcome to Lumache's documentation!
===================================

**Lumache** (/lu'make/) is a Python library for cooks and food lovers that
creates recipes mixing random ingredients.  It pulls data from the `Open Food
Facts database <https://world.openfoodfacts.org/>`_ and offers a *simple* and
*intuitive* API.

.. note::

   This project is under active development.
```

This showcases several features of the reStructuredText syntax, including:

- a **section header** using `===` for the underline,
- two examples of [Inline markup](../usage/restructuredtext/basics.html#rst-inline-markup): `**strong emphasis**` (typically bold) and `*emphasis*` (typically italics),
- an **inline external link**,
- and a `note` **admonition** (one of the available [directives](../usage/restructuredtext/basics.html#rst-directives))

Now to render it with the new content, you can use the `sphinx-build` command as before, or leverage the convenience script as follows:

```
(.venv) $ cd docs
(.venv) $ make html
```

After running this command, you will see that `index.html` reflects the new changes!

## Building your documentation in other formats[¬∂](first-steps.html#building-your-documentation-in-other-formats "Link to this heading")

Sphinx supports a variety of formats apart from HTML, including PDF, EPUB, [and more](../usage/builders/index.html#builders). For example, to build your documentation in EPUB format, run this command from the `docs` directory:

```
(.venv) $ make epub
```

After that, you will see the files corresponding to the e-book under `docs/build/epub/`. You can either open `Lumache.epub` with an EPUB-compatible e-book viewer, like [Calibre](https://calibre-ebook.com/), or preview `index.xhtml` on a web browser.

Note

To quickly display a complete list of possible output formats, plus some extra useful commands, you can run `make help`.

Each output format has some specific configuration options that you can tune, [including EPUB](../usage/configuration.html#epub-options). For instance, the default value of [`epub_show_urls`](../usage/configuration.html#confval-epub_show_urls) is `inline`, which means that, by default, URLs are shown right after the corresponding link, in parentheses. You can change that behavior by adding the following code at the end of your `conf.py`:

```
# EPUB options
epub_show_urls = 'footnote'
```

With this configuration value, and after running `make epub` again, you will notice that URLs appear now as footnotes, which avoids cluttering the text. Sweet! Read on to explore [other ways to customize Sphinx](more-sphinx-customization.html).

Note

Generating a PDF using Sphinx can be done running `make latexpdf`, provided that the system has a working LaTeX installation, as explained in the documentation of [`sphinx.builders.latex.LaTeXBuilder`](../usage/builders/index.html#sphinx.builders.latex.LaTeXBuilder "sphinx.builders.latex.LaTeXBuilder"). Although this is perfectly feasible, such installations are often big, and in general LaTeX requires careful configuration in some cases, so PDF generation is out of scope for this tutorial.








### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page



The Basics



User guide


Community


Reference


# More Sphinx customization[¬∂](more-sphinx-customization.html#more-sphinx-customization "Link to this heading")

There are two main ways to customize your documentation beyond what is possible with core Sphinx: extensions and themes.

## Enabling a built-in extension[¬∂](more-sphinx-customization.html#enabling-a-built-in-extension "Link to this heading")

In addition to these configuration values, you can customize Sphinx even more by using [extensions](../usage/extensions/index.html). Sphinx ships several [builtin ones](../usage/extensions/index.html#builtin-extensions), and there are many more [maintained by the community](../usage/extensions/index.html#third-party-extensions).

For example, to enable the [`sphinx.ext.duration`](../usage/extensions/duration.html#module-sphinx.ext.duration "sphinx.ext.duration: Measure durations of Sphinx processing") extension, locate the `extensions` list in your `conf.py` and add one element as follows:

docs/source/conf.py[¬∂](more-sphinx-customization.html#id1 "Link to this code")

```
# Add any Sphinx extension module names here, as strings. They can be
# extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
# ones.
extensions = [
    'sphinx.ext.duration',
]
```

After that, every time you generate your documentation, you will see a short durations report at the end of the console output, like this one:

```
(.venv) $ make html
...
The HTML pages are in build/html.

====================== slowest reading durations =======================
0.042 temp/source/index
```

## Using a third-party HTML theme[¬∂](more-sphinx-customization.html#using-a-third-party-html-theme "Link to this heading")

Themes, on the other hand, are a way to customize the appearance of your documentation. Sphinx has several [builtin themes](../usage/theming.html#builtin-themes), and there are also [third-party ones](https://sphinx-themes.org/).

For example, to use the [Furo](https://pradyunsg.me/furo/) third-party theme in your HTML documentation, first you will need to install it with `pip` in your Python virtual environment, like this:

```
(.venv) $ pip install furo
```

And then, locate the `html_theme` variable on your `conf.py` and replace its value as follows:

docs/source/conf.py[¬∂](more-sphinx-customization.html#id2 "Link to this code")

```
# The theme to use for HTML and HTML Help pages.  See the documentation for
# a list of builtin themes.
#
html_theme = 'furo'
```

With this change, you will notice that your HTML documentation has now a new appearance:

[![HTML documentation of Lumache with the Furo theme](../_images/lumache-furo.png)](../_images/lumache-furo.png)

HTML documentation of Lumache with the Furo theme[¬∂](more-sphinx-customization.html#id3 "Link to this image")

It is now time to [expand the narrative documentation and split it into several documents](narrative-documentation.html).








### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page



The Basics



User guide


Community


Reference


# Narrative documentation in Sphinx[¬∂](narrative-documentation.html#narrative-documentation-in-sphinx "Link to this heading")

## Structuring your documentation across multiple pages[¬∂](narrative-documentation.html#structuring-your-documentation-across-multiple-pages "Link to this heading")

The file `index.rst` created by `sphinx-quickstart` is the [root document](../glossary.html#term-root-document), whose main function is to serve as a welcome page and to contain the root of the ‚Äútable of contents tree‚Äù (or *toctree*). Sphinx allows you to assemble a project from different files, which is helpful when the project grows.

As an example, create a new file `docs/source/usage.rst` (next to `index.rst`) with these contents:

docs/source/usage.rst[¬∂](narrative-documentation.html#id1 "Link to this code")

```
Usage
=====

Installation
------------

To use Lumache, first install it using pip:

.. code-block:: console

   (.venv) $ pip install lumache
```

This new file contains two [section](../usage/restructuredtext/basics.html#rst-sections) headers, normal paragraph text, and a [`code-block`](../usage/restructuredtext/directives.html#directive-code-block "code-block directive") directive that renders a block of content as source code, with appropriate syntax highlighting (in this case, generic `console` text).

The structure of the document is determined by the succession of heading styles, which means that, by using `---` for the ‚ÄúInstallation‚Äù section after `===` for the ‚ÄúUsage‚Äù section, you have declared ‚ÄúInstallation‚Äù to be a *subsection* of ‚ÄúUsage‚Äù.

To complete the process, add a `toctree` [directive](../usage/restructuredtext/basics.html#rst-directives) at the end of `index.rst` including the document you just created, as follows:

docs/source/index.rst[¬∂](narrative-documentation.html#id2 "Link to this code")

```
Contents
--------

.. toctree::

   usage
```

This step inserts that document in the root of the *toctree*, so now it belongs to the structure of your project, which so far looks like this:

```
index
‚îî‚îÄ‚îÄ usage
```

If you build the HTML documentation running `make html`, you will see that the `toctree` gets rendered as a list of hyperlinks, and this allows you to navigate to the new page you just created. Neat!

Warning

Documents outside a *toctree* will result in `WARNING: document isn't included in any toctree` messages during the build process, and will be unreachable for users.

## Adding cross-references[¬∂](narrative-documentation.html#adding-cross-references "Link to this heading")

One powerful feature of Sphinx is the ability to seamlessly add [cross-references](../usage/referencing.html#xref) to specific parts of the documentation: a document, a section, a figure, a code object, etc. This tutorial is full of them!

To add a cross-reference, write this sentence right after the introduction paragraph in `index.rst`:

docs/source/index.rst[¬∂](narrative-documentation.html#id3 "Link to this code")

```
Check out the :doc:`usage` section for further information.
```

The [`doc`](../usage/referencing.html#role-doc "doc role") [role](../usage/restructuredtext/basics.html#rst-roles) you used automatically references a specific document in the project, in this case the `usage.rst` you created earlier.

Alternatively, you can also add a cross-reference to an arbitrary part of the project. For that, you need to use the [`ref`](../usage/referencing.html#role-ref "ref role") role, and add an explicit *label* that acts as [a target](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-targets).

For example, to reference the ‚ÄúInstallation‚Äù subsection, add a label right before the heading, as follows:

docs/source/usage.rst[¬∂](narrative-documentation.html#id4 "Link to this code")

```
Usage
=====

.. _installation:

Installation
------------

...
```

And make the sentence you added in `index.rst` look like this:

docs/source/index.rst[¬∂](narrative-documentation.html#id5 "Link to this code")

```
Check out the :doc:`usage` section for further information, including how to
:ref:`install <installation>` the project.
```

Notice a trick here: the `install` part specifies how the link will look like (we want it to be a specific word, so the sentence makes sense), whereas the `<installation>` part refers to the actual label we want to add a cross-reference to. If you do not include an explicit title, hence using ``:ref:`installation` ``, the section title will be used (in this case, `Installation`). Both the `:doc:` and the `:ref:` roles will be rendered as hyperlinks in the HTML documentation.

What about [documenting code objects in Sphinx](describing-code.html)? Read on!








### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page






The Basics



User guide


Community


Reference


# Describing code in Sphinx[¬∂](describing-code.html#describing-code-in-sphinx "Link to this heading")

In the [previous sections of the tutorial](index.html) you can read how to write narrative or prose documentation in Sphinx. In this section you will describe code objects instead.

Sphinx supports documenting code objects in several languages, namely Python, C, C++, JavaScript, and reStructuredText. Each of them can be documented using a series of directives and roles grouped by [domain](../usage/domains/index.html). For the remainder of the tutorial you will use the Python domain, but all the concepts seen in this section apply for the other domains as well.

## Python[¬∂](describing-code.html#python "Link to this heading")

### Documenting Python objects[¬∂](describing-code.html#documenting-python-objects "Link to this heading")

Sphinx offers several roles and directives to document Python objects, all grouped together in [the Python domain](../usage/domains/python.html). For example, you can use the [`py:function`](../usage/domains/python.html#directive-py-function "py:function directive") directive to document a Python function, as follows:

docs/source/usage.rst[¬∂](describing-code.html#id1 "Link to this code")

```
Creating recipes
----------------

To retrieve a list of random ingredients,
you can use the ``lumache.get_random_ingredients()`` function:

.. py:function:: lumache.get_random_ingredients(kind=None)

   Return a list of random ingredients as strings.

   :param kind: Optional "kind" of ingredients.
   :type kind: list[str] or None
   :return: The ingredients list.
   :rtype: list[str]
```

Which will render like this:

[![HTML result of documenting a Python function in Sphinx](../_images/lumache-py-function.png)](../_images/lumache-py-function.png)

The rendered result of documenting a Python function in Sphinx[¬∂](describing-code.html#id2 "Link to this image")

Notice several things:

- Sphinx parsed the argument of the `.. py:function` directive and highlighted the module, the function name, and the parameters appropriately.
- The directive content includes a one-line description of the function, as well as an [info field list](../usage/domains/python.html#info-field-lists) containing the function parameter, its expected type, the return value, and the return type.

Note

The `py:` prefix specifies the [domain](../glossary.html#term-domain). You may configure the default domain so you can omit the prefix, either globally using the [`primary_domain`](../usage/configuration.html#confval-primary_domain) configuration, or use the [`default-domain`](../usage/domains/index.html#directive-default-domain "default-domain directive") directive to change it from the point it is called until the end of the file. For example, if you set it to `py` (the default), you can write `.. function::` directly.

### Cross-referencing Python objects[¬∂](describing-code.html#cross-referencing-python-objects "Link to this heading")

By default, most of these directives generate entities that can be cross-referenced from any part of the documentation by using [a corresponding role](../usage/domains/python.html#python-xref-roles). For the case of functions, you can use [`py:func`](../usage/domains/python.html#role-py-func "py:func role") for that, as follows:

docs/source/usage.rst[¬∂](describing-code.html#id3 "Link to this code")

```
The ``kind`` parameter should be either ``"meat"``, ``"fish"``,
or ``"veggies"``. Otherwise, :py:func:`lumache.get_random_ingredients`
will raise an exception.
```

When generating code documentation, Sphinx will generate a cross-reference automatically just by using the name of the object, without you having to explicitly use a role for that. For example, you can describe the custom exception raised by the function using the [`py:exception`](../usage/domains/python.html#directive-py-exception "py:exception directive") directive:

docs/source/usage.rst[¬∂](describing-code.html#id4 "Link to this code")

```
.. py:exception:: lumache.InvalidKindError

   Raised if the kind is invalid.
```

Then, add this exception to the original description of the function:

docs/source/usage.rst[¬∂](describing-code.html#id5 "Link to this code")

```
.. py:function:: lumache.get_random_ingredients(kind=None)

   Return a list of random ingredients as strings.

   :param kind: Optional "kind" of ingredients.
   :type kind: list[str] or None
   :raise lumache.InvalidKindError: If the kind is invalid.
   :return: The ingredients list.
   :rtype: list[str]
```

And finally, this is how the result would look:

[![HTML result of documenting a Python function in Sphinx with cross-references](../_images/lumache-py-function-full.png)](../_images/lumache-py-function-full.png)

HTML result of documenting a Python function in Sphinx with cross-references[¬∂](describing-code.html#id6 "Link to this image")

Beautiful, isn‚Äôt it?

### Including doctests in your documentation[¬∂](describing-code.html#including-doctests-in-your-documentation "Link to this heading")

Since you are now describing code from a Python library, it will become useful to keep both the documentation and the code as synchronized as possible. One of the ways to do that in Sphinx is to include code snippets in the documentation, called *doctests*, that are executed when the documentation is built.

To demonstrate doctests and other Sphinx features covered in this tutorial, Sphinx will need to be able to import the code. To achieve that, write this at the beginning of `conf.py`:

docs/source/conf.py[¬∂](describing-code.html#id7 "Link to this code")

```
# If extensions (or modules to document with autodoc) are in another directory,
# add these directories to sys.path here.
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).resolve().parents[2]))
```

Note

An alternative to changing the [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "(in Python v3.13)") variable is to create a `pyproject.toml` file and make the code installable, so it behaves like any other Python library. However, the `sys.path` approach is simpler.

Then, before adding doctests to your documentation, enable the [doctest](../usage/extensions/doctest.html) extension in `conf.py`:

docs/source/conf.py[¬∂](describing-code.html#id8 "Link to this code")

```
extensions = [
    'sphinx.ext.duration',
    'sphinx.ext.doctest',
]
```

Next, write a doctest block as follows:

docs/source/usage.rst[¬∂](describing-code.html#id9 "Link to this code")

```
>>> import lumache
>>> lumache.get_random_ingredients()
['shells', 'gorgonzola', 'parsley']
```

Doctests include the Python instructions to be run preceded by `>>>`, the standard Python interpreter prompt, as well as the expected output of each instruction. This way, Sphinx can check whether the actual output matches the expected one.

To observe how a doctest failure looks like (rather than a code error as above), let‚Äôs write the return value incorrectly first. Therefore, add a function `get_random_ingredients` like this:

lumache.py[¬∂](describing-code.html#id10 "Link to this code")

```
def get_random_ingredients(kind=None):
    return ["eggs", "bacon", "spam"]
```

You can now run `make doctest` to execute the doctests of your documentation. Initially this will display an error, since the actual code does not behave as specified:

```
(.venv) $ make doctest
Running Sphinx v4.2.0
loading pickled environment... done
...
running tests...

Document: usage
---------------
**********************************************************************
File "usage.rst", line 44, in default
Failed example:
    lumache.get_random_ingredients()
Expected:
    ['shells', 'gorgonzola', 'parsley']
Got:
    ['eggs', 'bacon', 'spam']
**********************************************************************
...
make: *** [Makefile:20: doctest] Error 1
```

As you can see, doctest reports the expected and the actual results, for easy examination. It is now time to fix the function:

lumache.py[¬∂](describing-code.html#id11 "Link to this code")

```
def get_random_ingredients(kind=None):
    return ["shells", "gorgonzola", "parsley"]
```

And finally, `make doctest` reports success!

For big projects though, this manual approach can become a bit tedious. In the next section, you will see [how to automate the process](automatic-doc-generation.html).

## Other languages (C, C++, others)[¬∂](describing-code.html#other-languages-c-c-others "Link to this heading")

### Documenting and cross-referencing objects[¬∂](describing-code.html#documenting-and-cross-referencing-objects "Link to this heading")

Sphinx also supports documenting and cross-referencing objects written in other programming languages. There are four additional built-in domains: C, C++, JavaScript, and reStructuredText. Third-party extensions may define domains for more languages, such as

- [Fortran](https://sphinx-fortran.readthedocs.io),
- [Julia](https://bastikr.github.io/sphinx-julia), or
- [PHP](https://github.com/markstory/sphinxcontrib-phpdomain).

For example, to document a C++ type definition, you would use the built-in [`cpp:type`](../usage/domains/cpp.html#directive-cpp-type "cpp:type directive") directive, as follows:

```
.. cpp:type:: std::vector<int> CustomList

   A typedef-like declaration of a type.
```

Which would give the following result:

typedef std::vector&lt;int&gt; CustomList[¬∂](describing-code.html#_CPPv410CustomList "Link to this definition")

A typedef-like declaration of a type.

All such directives then generate references that can be cross-referenced by using the corresponding role. For example, to reference the previous type definition, you can use the [`cpp:type`](../usage/domains/cpp.html#role-cpp-type "cpp:type role") role as follows:

```
Cross reference to :cpp:type:`CustomList`.
```

Which would produce a hyperlink to the previous definition: [`CustomList`](describing-code.html#_CPPv410CustomList "CustomList").








### Navigation

- [Documentation](../index.html) ¬ª
- [Build your first project](index.html) ¬ª

### On this page



The Basics



User guide


Community


Reference


# Automatic documentation generation from code[¬∂](automatic-doc-generation.html#automatic-documentation-generation-from-code "Link to this heading")

In the [previous section](describing-code.html#tutorial-describing-objects) of the tutorial you manually documented a Python function in Sphinx. However, the description was out of sync with the code itself, since the function signature was not the same. Besides, it would be nice to reuse [**Python docstrings**](https://peps.python.org/pep-0257/#what-is-a-docstring) in the documentation, rather than having to write the information in two places.

Fortunately, [the autodoc extension](../usage/extensions/autodoc.html) provides this functionality.

## Reusing signatures and docstrings with autodoc[¬∂](automatic-doc-generation.html#reusing-signatures-and-docstrings-with-autodoc "Link to this heading")

To use autodoc, first add it to the list of enabled extensions:

docs/source/conf.py[¬∂](automatic-doc-generation.html#id1 "Link to this code")

```
extensions = [
    'sphinx.ext.duration',
    'sphinx.ext.doctest',
    'sphinx.ext.autodoc',
]
```

Next, move the content of the `.. py:function` directive to the function docstring in the original Python file, as follows:

lumache.py[¬∂](automatic-doc-generation.html#id2 "Link to this code")

```
def get_random_ingredients(kind=None):
    """
    Return a list of random ingredients as strings.

    :param kind: Optional "kind" of ingredients.
    :type kind: list[str] or None
    :raise lumache.InvalidKindError: If the kind is invalid.
    :return: The ingredients list.
    :rtype: list[str]

    """
    return ["shells", "gorgonzola", "parsley"]
```

Finally, replace the `.. py:function` directive from the Sphinx documentation with [`autofunction`](../usage/extensions/autodoc.html#directive-autofunction "autofunction directive"):

docs/source/usage.rst[¬∂](automatic-doc-generation.html#id3 "Link to this code")

```
you can use the ``lumache.get_random_ingredients()`` function:

.. autofunction:: lumache.get_random_ingredients
```

If you now build the HTML documentation, the output will be the same! With the advantage that it is generated from the code itself. Sphinx took the reStructuredText from the docstring and included it, also generating proper cross-references.

You can also autogenerate documentation from other objects. For example, add the code for the `InvalidKindError` exception:

lumache.py[¬∂](automatic-doc-generation.html#id4 "Link to this code")

```
class InvalidKindError(Exception):
    """Raised if the kind is invalid."""
    pass
```

And replace the `.. py:exception` directive with [`autoexception`](../usage/extensions/autodoc.html#directive-autoexception "autoexception directive") as follows:

docs/source/usage.rst[¬∂](automatic-doc-generation.html#id5 "Link to this code")

```
or ``"veggies"``. Otherwise, :py:func:`lumache.get_random_ingredients`
will raise an exception.

.. autoexception:: lumache.InvalidKindError
```

And again, after running `make html`, the output will be the same as before.

## Generating comprehensive API references[¬∂](automatic-doc-generation.html#generating-comprehensive-api-references "Link to this heading")

While using `sphinx.ext.autodoc` makes keeping the code and the documentation in sync much easier, it still requires you to write an `auto*` directive for every object you want to document. Sphinx provides yet another level of automation: the [autosummary](../usage/extensions/autosummary.html) extension.

The [`autosummary`](../usage/extensions/autosummary.html#directive-autosummary "autosummary directive") directive generates documents that contain all the necessary `autodoc` directives. To use it, first enable the autosummary extension:

docs/source/conf.py[¬∂](automatic-doc-generation.html#id6 "Link to this code")

```
extensions = [
   'sphinx.ext.duration',
   'sphinx.ext.doctest',
   'sphinx.ext.autodoc',
   'sphinx.ext.autosummary',
]
```

Next, create a new `api.rst` file with these contents:

docs/source/api.rst[¬∂](automatic-doc-generation.html#id7 "Link to this code")

```
API
===

.. autosummary::
   :toctree: generated

   lumache
```

Remember to include the new document in the root toctree:

docs/source/index.rst[¬∂](automatic-doc-generation.html#id8 "Link to this code")

```
Contents
--------

.. toctree::

   usage
   api
```

Finally, after you build the HTML documentation running `make html`, it will contain two new pages:

- `api.html`, corresponding to `docs/source/api.rst` and containing a table with the objects you included in the `autosummary` directive (in this case, only one).
- `generated/lumache.html`, corresponding to a newly created reStructuredText file `generated/lumache.rst` and containing a summary of members of the module, in this case one function and one exception.

[![Summary page created by autosummary](../_images/lumache-autosummary.png)](../_images/lumache-autosummary.png)

Summary page created by autosummary[¬∂](automatic-doc-generation.html#id9 "Link to this image")

Each of the links in the summary page will take you to the places where you originally used the corresponding `autodoc` directive, in this case in the `usage.rst` document.

Note

The generated files are based on [Jinja2 templates](https://jinja.palletsprojects.com/) that [can be customized](../usage/extensions/autosummary.html#autosummary-customizing-templates), but that is out of scope for this tutorial.



